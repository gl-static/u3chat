var e=Object.defineProperty,a=Object.defineProperties,s=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(a,s,c)=>s in a?e(a,s,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[s]=c,n=(e,a)=>{for(var s in a||(a={}))d.call(a,s)&&r(e,s,a[s]);if(c)for(var s of c(a))i.call(a,s)&&r(e,s,a[s]);return e},l=(e,c)=>a(e,s(c));import{A as t,y as u,x as o,B as m,W as h,G as x,H as v}from"./vendor.b71a1134.js";import{x as N,N as p,K as g,gM as f,U as b,b5 as k}from"./index.c7541749.js";import{u as y,P as I,T as P,U as S}from"./index.5b4e3adc.js";const w={day:"1",week:"7",month:"30"};function _(e){return async(a,s)=>{let c;const d=w[e]||"";try{c=await N.getRanks(d,"hot")}catch(i){return p(i,a,s),{error:i}}return a(g([{type:f.RECEIVED_RANKS,data:{period:e,ranks:c.ranks}},{type:b.RECEIVED_PROFILES_LIST,data:c.users}])),{data:c}}}function C(e){return async(a,s)=>{let c;const d=w[e]||"";try{c=await N.getRanks(d,"commit")}catch(i){return p(i,a,s),{error:i}}return a(g([{type:f.RECEIVED_RANKS2,data:{period:e,ranks:c.ranks}},{type:b.RECEIVED_PROFILES_LIST,data:c.users}])),{data:c}}}var D="u3-cxx-a0d507ce",E="u3-cxx-9d01e40d",R="u3-cxx-d3d02730",T="u3-cxx-2dd25643",$="u3-cxx-db4dc8ce",O="u3-cxx-72c52047",U="u3-cxx-b9643e6c",j="u3-cxx-2df26439",M="u3-cxx-e3febf16",z="u3-cxx-cfe34e90",L="u3-cxx-c4be0906",B="u3-cxx-dd6e4483",F="u3-cxx-7a3cfc7e",H="u3-cxx-d5fa14c8",V="u3-cxx-53ceda94",A="u3-cxx-35c8ffd7",K="u3-cxx-9cd6b167",X="u3-cxx-b5f4b9d3",G="u3-cxx-ad97e8e6",W="u3-cxx-7fe8da0a",q="u3-cxx-6c09e06c",J="u3-cxx-d62fc5f3",Q="u3-cxx-2f5292be",Y="u3-cxx-4c723ed9",Z="u3-cxx-e087594d",ee="u3-cxx-3111f176",ae="u3-cxx-ad1e6877",se="u3-cxx-158c0c85",ce="u3-cxx-805a84d4",de="u3-cxx-9548d40d",ie="u3-cxx-f15222db",re="u3-cxx-3ec2d446",ne="u3-cxx-9698e90a",le="u3-cxx-28cd36e9",te="u3-cxx-31444f73";const ue=[{id:1},{id:2},{id:3},{id:4},{id:5},{id:6},{id:7},{id:8},{id:9},{id:10}];var oe=e=>{const a=(new Date).getTime();return t("div",{className:u(j,M,{[z]:e.blue}),children:[t("div",{className:u(L,{[B]:!e.blue,[F]:e.blue}),children:[t("div",{className:H,children:[o("div",{className:J,children:o("h3",{children:"Bảng xếp hạng"})}),t("div",{className:V,children:[a>164097e7?o("button",{className:u(Q,{[A]:"month"===e.period}),onClick:()=>e.onSelect("month"),children:"Tháng"}):null,a>16387236e5?o("button",{className:u(Q,{[A]:"week"===e.period}),onClick:()=>e.onSelect("week"),children:"Tuần"}):null,o("button",{className:u(Q,{[A]:"day"===e.period}),onClick:()=>e.onSelect("day"),children:"Ngày"})]})]}),o("div",{className:u(K),children:t("div",{className:u(X,Z,"u3-px-3"),children:[o("div",{className:"u3-w-20 u3-h-20 u3-bg-gray-300 u3-rounded-full u3-animate-pulse u3-mx-auto"}),o("div",{className:u(W,"u3-h-6 u3-w-24 u3-mx-auto u3-rounded-full u3-bg-gray-200  u3-mt-1 u3-animate-pulse")}),o("div",{className:u(q,"u3-h-5 u3-w-16 u3-mx-auto u3-mt-1 u3-bg-gray-200 u3-rounded u3-animate-pulse")})]})}),o("div",{className:u(K),children:t("div",{className:u(X,Y,"u3-px-3"),children:[o("div",{className:"u3-w-24 u3-h-24 u3-bg-gray-300 u3-rounded-full u3-animate-pulse u3-mx-auto"}),o("div",{className:u(W,"u3-h-6 u3-w-24 u3-mx-auto u3-rounded-full u3-bg-gray-200  u3-mt-1 u3-animate-pulse")}),o("div",{className:u(q,"u3-h-5 u3-w-16 u3-mx-auto u3-mt-1 u3-bg-gray-200 u3-rounded u3-animate-pulse")})]})}),o("div",{className:u(K),children:t("div",{className:u(X,ee,"u3-px-3"),children:[o("div",{className:"u3-w-20 u3-h-20 u3-bg-gray-300 u3-rounded-full u3-animate-pulse u3-mx-auto"}),o("div",{className:u(W,"u3-h-6 u3-w-24 u3-mx-auto u3-rounded-full u3-bg-gray-200 u3-mt-1 u3-animate-pulse")}),o("div",{className:u(q,"u3-h-5 u3-w-16 u3-mx-auto u3-mt-0.5 u3-bg-gray-200 u3-rounded u3-animate-pulse")})]})})]}),o("div",{className:u(ce,"u3-overflow-hidden"),children:o("div",{className:u(de,"u3-overflow-hidden"),children:ue.map(((e,a)=>a<3?o(m.exports.Fragment,{},`rank-${a}-${e.id}`):t("div",{className:ie,children:[o("div",{className:re,children:a+1}),o("div",{className:u(ne,"u3-pl-1"),children:o("div",{className:"u3-w-10 u3-h-10 u3-bg-gray-300 u3-rounded-full u3-animate-pulse"})}),o("div",{className:u(le,"u3-h-6 u3-bg-gray-300 u3-rounded u3-animate-pulse")}),o("div",{className:u(te,"u3-h-6 u3-w-8 u3-bg-gray-300 u3-rounded u3-animate-pulse")})]})))})})]})};function me(e){return String(e).replace(/(.)(?=(\d{3})+$)/g,"$1.")}var he=e=>{const[a,s]=m.exports.useState("day"),[c,d]=m.exports.useState("day"),[i,r]=m.exports.useState("day"),[n,l]=m.exports.useState("day"),[x,v]=m.exports.useState("hot"),[p,g]=m.exports.useState(!0),[f,b]=m.exports.useState(!0),k=y(),w=(new Date).getTime(),_=h();function C(s){s!==a&&(g(!0),r(s),e.actions.fetchRanks(s))}function M(a){a!==c&&(b(!0),l(a),e.actions.fetchRanks2(a))}m.exports.useEffect((()=>{k.setTitle("Bảng Xếp Hạng"),e.actions.fetchRanks("day"),e.actions.fetchRanks2("day")}),[]),m.exports.useEffect((()=>{s(e.period),g(!1)}),[e.period]),m.exports.useEffect((()=>{d(e.period2),b(!1)}),[e.period2]);let z=o(oe,{period:i,onSelect:C}),ue=o(oe,{period:n,onSelect:M,blue:!0});if(!e.isLoading&&!p&&e.ranksData[0]){const s=e.ranksData[0],c=e.ranksData[1],d=e.ranksData[2];z=t("div",{className:u(j,ae,{[U]:"hot"===x}),children:[t("div",{className:u(L,B),children:[t("div",{className:H,children:[o("div",{className:J,children:o("h3",{children:"Xếp hạng cao thủ"})}),t("div",{className:V,children:[w>164097e7?o("button",{className:u(Q,{[A]:"month"===a}),onClick:()=>C("month"),children:"Tháng"}):null,w>16387236e5?o("button",{className:u(Q,{[A]:"week"===a}),onClick:()=>C("week"),children:"Tuần"}):null,o("button",{className:u(Q,{[A]:"day"===a}),onClick:()=>C("day"),children:"Ngày"})]})]}),o("div",{className:u(K),children:t("div",{className:u(X,Z),children:[o(I,{src:N.getProfilePictureUrl(c.id,c.last_picture_update),size:"6xl",userId:c.id,hasMention:!1,username:c.username}),o("div",{className:G,children:o("div",{className:W,children:o(P,{placement:"top",content:o(S,{userId:c.id,channelId:"",hideStatus:!0,disablePopover:!0}),children:o(S,{userId:c.id,channelId:"",hideStatus:!0,disablePopover:!0})})})}),o("div",{className:q,children:me(c.score)})]})}),o("div",{className:u(K),children:t("div",{className:u(X,Y),children:[o(I,{src:N.getProfilePictureUrl(s.id,s.last_picture_update),size:"7xl",userId:s.id,hasMention:!1,username:s.username}),o("div",{className:G,children:o("div",{className:W,children:o(S,{userId:s.id,channelId:"",hideStatus:!0,disablePopover:!0})})}),o("div",{className:q,children:me(s.score)})]})}),o("div",{className:u(K),children:t("div",{className:u(X,ee),children:[o(I,{src:N.getProfilePictureUrl(d.id,d.last_picture_update),size:"6xl",userId:d.id,hasMention:!1,username:d.username}),o("div",{className:G,children:o("div",{className:W,children:o(S,{userId:d.id,channelId:"",hideStatus:!0,disablePopover:!0})})}),o("div",{className:q,children:me(d.score)})]})})]}),o("div",{className:ce,children:o("div",{className:de,children:e.ranksData.map(((e,a)=>a<3?o(m.exports.Fragment,{},`rank-hot-${a}-${e.id}`):t("div",{className:ie,children:[o("div",{className:re,children:a+1}),o("div",{className:ne,children:o(I,{src:N.getProfilePictureUrl(e.id,e.last_picture_update),size:"xl",userId:e.id,hasMention:!1,username:e.username})}),o("div",{className:le,children:o(S,{userId:e.id,channelId:"",hideStatus:!0,disablePopover:!0})}),o("div",{className:te,children:me(e.score)})]},`rank-hot-${a}-${e.id}`)))})})]})}if(!e.isLoading2&&!f&&e.ranksData2[0]){const a=e.ranksData2[0],s=e.ranksData2[1],d=e.ranksData2[2];ue=t("div",{className:u(j,se,{[U]:"commit"===x}),children:[t("div",{className:u(L,F),children:[t("div",{className:H,children:[o("div",{className:J,children:o("h3",{children:"Bảng cống hiến"})}),t("div",{className:V,children:[w>164097e7?o("button",{className:u(Q,{[A]:"month"===c}),onClick:()=>M("month"),children:"Tháng"}):null,w>16387236e5?o("button",{className:u(Q,{[A]:"week"===c}),onClick:()=>M("week"),children:"Tuần"}):null,o("button",{className:u(Q,{[A]:"day"===c}),onClick:()=>M("day"),children:"Ngày"})]})]}),o("div",{className:u(K),children:t("div",{className:u(X,Z),children:[o(I,{src:N.getProfilePictureUrl(s.id,s.last_picture_update),size:"6xl",userId:s.id,hasMention:!1,username:s.username}),o("div",{className:G,children:o("div",{className:W,children:o(P,{placement:"top",content:o(S,{userId:s.id,channelId:"",hideStatus:!0,disablePopover:!0}),children:o(S,{userId:s.id,channelId:"",hideStatus:!0,disablePopover:!0})})})}),o("div",{className:q,children:me(s.score)})]})}),o("div",{className:u(K),children:t("div",{className:u(X,Y),children:[o(I,{src:N.getProfilePictureUrl(a.id,a.last_picture_update),size:"7xl",userId:a.id,hasMention:!1,username:a.username}),o("div",{className:G,children:o("div",{className:W,children:o(S,{userId:a.id,channelId:"",hideStatus:!0,disablePopover:!0})})}),o("div",{className:q,children:me(a.score)})]})}),o("div",{className:u(K),children:t("div",{className:u(X,ee),children:[o(I,{src:N.getProfilePictureUrl(d.id,d.last_picture_update),size:"6xl",userId:d.id,hasMention:!1,username:d.username}),o("div",{className:G,children:o("div",{className:W,children:o(S,{userId:d.id,channelId:"",hideStatus:!0,disablePopover:!0})})}),o("div",{className:q,children:me(d.score)})]})})]}),o("div",{className:ce,children:o("div",{className:u(de),children:e.ranksData2.map(((e,a)=>a<3?o(m.exports.Fragment,{},`rank-commit-${a}-${e.id}`):t("div",{className:u(ie),children:[o("div",{className:re,children:a+1}),o("div",{className:ne,children:o(I,{src:N.getProfilePictureUrl(e.id,e.last_picture_update),size:"xl",userId:e.id,hasMention:!1,username:e.username})}),o("div",{className:le,children:o(S,{userId:e.id,channelId:"",hideStatus:!0,disablePopover:!0})}),o("div",{className:te,children:me(e.score)})]},`rank-commit-${a}-${e.id}`)))})})]})}return t("div",{className:D,children:[o("div",{className:E,children:o("button",{onClick:()=>_.goBack(),children:"Trở lại Phòng Chat"})}),o("div",{className:T,children:t("div",{className:$,children:[o("button",{className:u(O,{[U]:"hot"===x}),onClick:()=>v("hot"),children:"Hạng Cao Thủ"}),o("button",{className:u(O,{[U]:"commit"===x}),onClick:()=>v("commit"),children:"Bảng Cống Hiến"})]})}),t("div",{className:R,children:[z,ue]})]})};var xe=x((function(e){const a=function(e){return e.entities.ranks.ranks}(e),s=function(e){return e.entities.ranks.ranks2}(e),c=a.current||"",d=s.current||"";let i=[],r=[];c&&(i=a[a.current]||[]),d&&(r=s[s.current]||[]);const t=!c,u=!c;return!t&&i.length&&(i=i.map((a=>{const s=k(e,a.user_id);return l(n({},s),{score:a.score})}))),!u&&r.length&&(r=r.map((a=>{const s=k(e,a.user_id);return l(n({},s),{score:a.score})}))),{ranksData:i,ranksData2:r,period:c,period2:d,isLoading:t,isLoading2:u}}),(function(e){return{actions:v({fetchRanks:_,fetchRanks2:C},e)}}))(he);export{xe as default};
