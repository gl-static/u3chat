import{B as e,A as r,y as s,x as n,F as t,G as a}from"./vendor.0f7b1292.js";import{c6 as i,Q as c,aX as o}from"./index.11610ffa.js";import{g as u,b as l}from"./index.af6e025a.js";function f(){return async(e,r)=>{const{clientId:s,userToken:n}=u();return e(i(s,n))}}var d="u3-cxx-60f4e87e",x="u3-cxx-8589d34b",h="u3-cxx-1d18b684",m="u3-cxx-8bc66879";const p=["/connect","/error","/initial"];var v=t=>{const[a,i]=e.exports.useState(!1),[c,o]=e.exports.useState(""),{currentUser:u,actions:f,location:v,history:g}=t,y=async()=>{""!==c&&o("");const{data:e,error:r}=await f.userConnect();if(e){const e=(s=v.search,new URLSearchParams(s).get("next")||"");return e&&-1===p.indexOf(e)?g.replace(e):b()}var s;r&&o(r.message)},b=async()=>{i(!0),await l(t.history)};return e.exports.useEffect((()=>{if(t.initializing||!u){if(t.initializing||u&&a)return()=>{};y()}else b()}),[]),r("div",{className:s(d),children:[r("div",{className:x,children:[r("svg",{viewBox:"-2000 -1000 4000 2000",children:[n("path",{id:"inf",d:"M354-354A500 500 0 1 1 354 354L-354-354A500 500 0 1 0-354 354z"}),n("use",{xlinkHref:"#inf",strokeDasharray:"1570 5143",strokeDashoffset:"6713px"})]}),n("p",{children:"Kết nối tài khoản"})]}),c?r("div",{className:h,children:[n("p",{children:c}),n("button",{className:m,onClick:y,children:"Thử lại"})]}):null]})};var g=t((function(e){return{initializing:e.requests.users.logout.status===c.SUCCESS||!e.storage.initialized,currentUser:o(e)}}),(function(e){return{actions:a({userConnect:f},e)}}))(v);export{g as default};
