import{B as e,A as a,y as n,x as t,K as s,H as c,I as i}from"./vendor.03f03dd4.js";import{bY as o,al as r,y as d,c1 as l,m,L as u,aZ as h}from"./index.c219e668.js";import{b as f,g as x,ad as p}from"./index.5f334851.js";var N="u3-cxx-1b771820",v="u3-cxx-0536c7cf",I="u3-cxx-5d874e90",g="u3-cxx-eccefc2a";var k=c=>{const[i,d]=e.exports.useState(!1),[l,m]=e.exports.useState(!1),u=async e=>{const{location:a,history:n,noAccounts:t,currentUserId:s}=c;(t||!s&&!e)&&n.push(`/connect?next=${encodeURIComponent(a.pathname)}`),d(!0),o()(r.dispatch,r.getState)},h=async()=>{if(!c.siteName&&c.clientId){const[e,a,n,t]=await c.actions.loadMeAndConfig(c.clientId);"/"===c.location.pathname&&t&&t.data&&f(c.history),u(t&&t.data)}c.siteName&&u(!1)};return e.exports.useEffect((()=>{h(),setTimeout((()=>{m(!0)}),1e4)}),[]),a("div",i?{className:n(N),children:[t("div",{className:v,children:t("p",{children:"Kết nối thành công"})}),t(s,{to:"/connect"})]}:{className:n(N),children:[a("div",{className:v,children:[a("svg",{viewBox:"-2000 -1000 4000 2000",children:[t("path",{id:"inf",d:"M354-354A500 500 0 1 1 354 354L-354-354A500 500 0 1 0-354 354z"}),t("use",{xlinkHref:"#inf",strokeDasharray:"1570 5143",strokeDashoffset:"6713px"})]}),t("p",{children:"Kết nối tài khoản"})]}),l?a("div",{className:I,children:[t("p",{children:"Kết nối có thể bị gián đoạn."}),t("button",{className:g,onClick:h,children:"Thử lại"})]}):null]})};var A=c((function(e){const a=x(),n=d(e),t=l(e),s=a.clientId===t.clientId,c=t.allowed,i=m(e),o=u.getPreviousTeamId(m(e)),r=h(e,o);return{siteName:n.SiteName,noAccounts:"true"===n.NoAccounts,clientValid:s,clientId:a.clientId,allowedDomains:c,hasUserToken:!!a.userToken,permalinkRedirectTeamName:r?r.name:"",currentUserId:i}}),(function(e){return{actions:i({loadMeAndConfig:p},e)}}))(k);export{A as default};
