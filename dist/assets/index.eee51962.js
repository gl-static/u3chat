import{B as e,A as a,y as n,x as s,a7 as t,F as c,G as i}from"./vendor.5fb8f553.js";import{gi as o,am as r,z as d,cE as l,m as u,L as m,a_ as h}from"./index.880e489e.js";import{b as f,g as x,l as p,d as N}from"./index.d6cbff67.js";var v="u3-cxx-1b771820",I="u3-cxx-0536c7cf",g="u3-cxx-5d874e90",k="u3-cxx-eccefc2a";var A=c=>{const[i,d]=e.exports.useState(!1),[l,u]=e.exports.useState(!1),m=async e=>{const{location:a,history:n,noAccounts:s,currentUserId:t}=c;(s||!t&&!e)&&n.push(`/connect?next=${encodeURIComponent(a.pathname)}`),d(!0),o()(r.dispatch,r.getState)},h=async()=>{if(!c.siteName&&c.clientId){const[e,a,n,s]=await c.actions.loadMeAndConfig(c.clientId);s||await c.actions.userConnect(),s&&s.data&&f(c.history),m(s&&s.data)}c.siteName&&m(!1)};return e.exports.useEffect((()=>{h()}),[]),a("div",i?{className:n(v),children:[s("div",{className:I,children:s("p",{children:"Kết nối thành công"})}),s(t,{to:"/connect"})]}:{className:n(v),children:[a("div",{className:I,children:[a("svg",{viewBox:"-2000 -1000 4000 2000",children:[s("path",{id:"inf",d:"M354-354A500 500 0 1 1 354 354L-354-354A500 500 0 1 0-354 354z"}),s("use",{xlinkHref:"#inf",strokeDasharray:"1570 5143",strokeDashoffset:"6713px"})]}),s("p",{children:"Kết nối tài khoản"})]}),l?a("div",{className:g,children:[s("p",{children:"Kết nối có thể bị gián đoạn."}),s("button",{className:k,onClick:h,children:"Thử lại"})]}):null]})};var b=c((function(e){const a=x(),n=d(e),s=l(e),t=a.clientId===s.clientId,c=s.allowed,i=u(e),o=m.getPreviousTeamId(u(e)),r=h(e,o);return{siteName:n.SiteName,noAccounts:"true"===n.NoAccounts,clientValid:t,clientId:a.clientId,allowedDomains:c,hasUserToken:!!a.userToken,permalinkRedirectTeamName:r?r.name:"",currentUserId:i}}),(function(e){return{actions:i({loadMeAndConfig:p,userConnect:N},e)}}))(A);export{b as default};
