var e=Object.defineProperty,a=Object.defineProperties,s=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,r=(a,s,d)=>s in a?e(a,s,{enumerable:!0,configurable:!0,writable:!0,value:d}):a[s]=d;import{x as n,A as l,y as u,B as t,W as o,G as m,H as h}from"./vendor.b71a1134.js";import{x as v,N,K as p,gN as x,U as f,b6 as g}from"./index.3052036d.js";import{u as b,P as y,T as k,U as P}from"./index.08069a04.js";const w={day:"1",week:"7",month:"30"};function I(e){return async(a,s)=>{let d;const i=w[e]||"";try{d=await v.getRanks(i)}catch(c){return N(c,a,s),{error:c}}return a(p([{type:x.RECEIVED_RANKS,data:{period:e,ranks:d.ranks}},{type:f.RECEIVED_PROFILES_LIST,data:d.users}])),{data:d}}}var S="u3-cxx-a0d507ce",_="u3-cxx-9d01e40d",C="u3-cxx-2df26439",D="u3-cxx-c4be0906",E="u3-cxx-d5fa14c8",O="u3-cxx-d62fc5f3",T="u3-cxx-53ceda94",j="u3-cxx-2f5292be",R="u3-cxx-35c8ffd7",U="u3-cxx-9cd6b167",B="u3-cxx-b5f4b9d3",z="u3-cxx-ad97e8e6",L="u3-cxx-7fe8da0a",M="u3-cxx-6c09e06c",$="u3-cxx-4c723ed9",F="u3-cxx-e087594d",A="u3-cxx-3111f176",H="u3-cxx-805a84d4",K="u3-cxx-9548d40d",V="u3-cxx-f15222db",G="u3-cxx-3ec2d446",W="u3-cxx-9698e90a",X="u3-cxx-28cd36e9",q="u3-cxx-31444f73";const J=[{id:1},{id:2},{id:3},{id:4},{id:5},{id:6},{id:7},{id:8},{id:9},{id:10},{id:11},{id:12},{id:13},{id:14},{id:15}];var Q=e=>{const a=(new Date).getTime();return n("div",{className:S,children:l("div",{className:C,children:[l("div",{className:D,children:[l("div",{className:E,children:[n("div",{className:O,children:n("h3",{children:"Bảng xếp hạng"})}),l("div",{className:T,children:[a>164097e7?n("button",{className:u(j,{[R]:"month"===e.period}),onClick:()=>e.onSelect("month"),children:"Tháng"}):null,a>16387236e5?n("button",{className:u(j,{[R]:"week"===e.period}),onClick:()=>e.onSelect("week"),children:"Tuần"}):null,n("button",{className:u(j,{[R]:"day"===e.period}),onClick:()=>e.onSelect("day"),children:"Ngày"})]})]}),n("div",{className:u(U),children:l("div",{className:u(B,F),children:[n("div",{className:"u3-w-20 u3-h-20 u3-bg-gray-300 u3-rounded-full u3-animate-pulse"}),n("div",{className:u(L,"u3-h-6 u3-animate-pulse")}),n("div",{className:u(M,"u3-h-5 u3-mt-1 u3-bg-gray-200 u3-rounded u3-animate-pulse")})]})}),n("div",{className:u(U),children:l("div",{className:u(B,$),children:[n("div",{className:"u3-w-24 u3-h-24 u3-bg-gray-300 u3-rounded-full u3-animate-pulse"}),n("div",{className:u(L,"u3-h-6 u3-animate-pulse")}),n("div",{className:u(M,"u3-h-5 u3-mt-1 u3-bg-gray-200 u3-rounded u3-animate-pulse")})]})}),n("div",{className:u(U),children:l("div",{className:u(B,A),children:[n("div",{className:"u3-w-20 u3-h-20 u3-bg-gray-300 u3-rounded-full u3-animate-pulse"}),n("div",{className:u(L,"u3-h-6 u3-animate-pulse")}),n("div",{className:u(M,"u3-h-5 u3-mt-1 u3-bg-gray-200 u3-rounded u3-animate-pulse")})]})})]}),n("div",{className:u(H,"u3-overflow-hidden"),children:n("div",{className:u(K,"u3-overflow-hidden"),children:J.map(((e,a)=>a<3?n(t.exports.Fragment,{},`rank-${a}-${e.id}`):l("div",{className:V,children:[n("div",{className:G,children:a+1}),n("div",{className:u(W,"u3-pl-1"),children:n("div",{className:"u3-w-10 u3-h-10 u3-bg-gray-300 u3-rounded-full u3-animate-pulse"})}),n("div",{className:u(X,"u3-h-6 u3-bg-gray-300 u3-rounded u3-animate-pulse")}),n("div",{className:u(q,"u3-h-6 u3-w-8 u3-bg-gray-300 u3-rounded u3-animate-pulse")})]})))})})]})})};var Y=e=>{const[a,s]=t.exports.useState("day"),[d,i]=t.exports.useState("day"),[c,r]=t.exports.useState(!0),m=b(),h=(new Date).getTime(),N=o();function p(s){s!==a&&(r(!0),i(s),e.actions.fetchRanks(s))}if(t.exports.useEffect((()=>{m.setTitle("Bảng Xếp Hạng"),e.actions.fetchRanks("day")}),[]),t.exports.useEffect((()=>{s(e.period),r(!1)}),[e.period]),e.isLoading||c)return n(Q,{period:d,onSelect:p});const x=e.ranksData[0],f=e.ranksData[1],g=e.ranksData[2];return l("div",{className:S,children:[n("div",{className:_,children:n("button",{onClick:()=>N.goBack(),children:"Trở lại Phòng Chat"})}),l("div",{className:C,children:[l("div",{className:D,children:[l("div",{className:E,children:[n("div",{className:O,children:n("h3",{children:"Bảng xếp hạng"})}),l("div",{className:T,children:[h>164097e7?n("button",{className:u(j,{[R]:"month"===a}),onClick:()=>p("month"),children:"Tháng"}):null,h>16387236e5?n("button",{className:u(j,{[R]:"week"===a}),onClick:()=>p("week"),children:"Tuần"}):null,n("button",{className:u(j,{[R]:"day"===a}),onClick:()=>p("day"),children:"Ngày"})]})]}),n("div",{className:u(U),children:l("div",{className:u(B,F),children:[n(y,{src:v.getProfilePictureUrl(f.id,f.last_picture_update),size:"6xl",userId:f.id,hasMention:!1,username:f.username}),n("div",{className:z,children:n("div",{className:L,children:n(k,{placement:"top",content:n(P,{userId:f.id,channelId:"",hideStatus:!0,disablePopover:!0}),children:n(P,{userId:f.id,channelId:"",hideStatus:!0,disablePopover:!0})})})}),n("div",{className:M,children:f.score})]})}),n("div",{className:u(U),children:l("div",{className:u(B,$),children:[n(y,{src:v.getProfilePictureUrl(x.id,x.last_picture_update),size:"7xl",userId:x.id,hasMention:!1,username:x.username}),n("div",{className:z,children:n("div",{className:L,children:n(P,{userId:x.id,channelId:"",hideStatus:!0,disablePopover:!0})})}),n("div",{className:M,children:x.score})]})}),n("div",{className:u(U),children:l("div",{className:u(B,A),children:[n(y,{src:v.getProfilePictureUrl(g.id,g.last_picture_update),size:"6xl",userId:g.id,hasMention:!1,username:g.username}),n("div",{className:z,children:n("div",{className:L,children:n(P,{userId:g.id,channelId:"",hideStatus:!0,disablePopover:!0})})}),n("div",{className:M,children:g.score})]})})]}),n("div",{className:H,children:n("div",{className:K,children:e.ranksData.map(((e,a)=>a<3?n(t.exports.Fragment,{},`rank-${a}-${e.id}`):l("div",{className:V,children:[n("div",{className:G,children:a+1}),n("div",{className:W,children:n(y,{src:v.getProfilePictureUrl(e.id,e.last_picture_update),size:"xl",userId:e.id,hasMention:!1,username:e.username})}),n("div",{className:X,children:n(P,{userId:e.id,channelId:"",hideStatus:!0,disablePopover:!0})}),n("div",{className:q,children:e.score})]})))})})]})]})};var Z=m((function(e){const n=function(e){return e.entities.ranks.ranks}(e),l=n.current||"";let u=[];l&&(u=n[n.current]||[]);const t=!l;return!t&&u.length&&(u=u.map((n=>{const l=g(e,n.user_id);return u=((e,a)=>{for(var s in a||(a={}))i.call(a,s)&&r(e,s,a[s]);if(d)for(var s of d(a))c.call(a,s)&&r(e,s,a[s]);return e})({},l),t={score:n.score},a(u,s(t));var u,t}))),{ranksData:u,period:l,isLoading:t}}),(function(e){return{actions:h({fetchRanks:I},e)}}))(Y);export{Z as default};
