var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,a=(e,t)=>{for(var n in t||(t={}))s.call(t,n)&&o(e,n,t[n]);if(r)for(var n of r(t))i.call(t,n)&&o(e,n,t[n]);return e},l=(e,r)=>t(e,n(r)),c=(e,t)=>{var n={};for(var o in e)s.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&r)for(var o of r(e))t.indexOf(o)<0&&i.call(e,o)&&(n[o]=e[o]);return n},u=(e,t,n)=>(o(e,"symbol"!=typeof t?t+"":t,n),n);import{x as d,B as p,Y as h,W as f,Z as m,H as g,$ as v,I as y,A as b,y as x,R as w,a0 as _,a as C,Q as S,V as E,a1 as T,D as A,T as P,J as I,U as N,_ as M,a2 as R,a3 as O,a4 as k,a5 as L,a6 as D,m as j,a7 as U,E as H,q as F,a8 as B,K as q,S as z,C as V}from"./vendor.03f03dd4.js";import{C as G,y as W,T as K,a0 as Y,b3 as $,ca as X,cb as Q,x as J,aY as Z,d as ee,aX as te,cc as ne,b as re,f as se,cd as ie,ce as oe,N as ae,aZ as le,c as ce,cf as ue,cg as de,m as pe,ch as he,ci as fe,cj as me,ck as ge,cl as ve,bS as ye,cm as be,cn as xe,co as we,S as _e,cp as Ce,cq as Se,cr as Ee,cs as Te,ct as Ae,ai as Pe,cu as Ie,cv as Ne,cw as Me,V as Re,cx as Oe,cy as ke,cz as Le,cA as De,cB as je,cC as Ue,cD as He,bK as Fe,Z as Be,cE as qe,cF as ze,cG as Ve,cH as Ge,cI as We,b6 as Ke,cJ as Ye,az as $e,cK as Xe,cL as Qe,b9 as Je,aK as Ze,cM as et,cN as tt,cO as nt,cP as rt,cQ as st,cR as it,cS as ot,cT as at,cU as lt,c1 as ct,cV as ut,cW as dt,aF as pt,cX as ht,cY as ft,cZ as mt,b8 as gt,c_ as vt,c$ as yt,d0 as bt,d1 as xt,bB as wt,d2 as _t,d3 as Ct,d4 as St,d5 as Et,d6 as Tt,d7 as At,d8 as Pt,d9 as It,da as Nt,db as Mt,dc as Rt,ao as Ot,dd as kt,bx as Lt,K as Dt,de as jt,bm as Ut,df as Ht,dg as Ft,dh as Bt,$ as qt,Y as zt,s as Vt,di as Gt,dj as Wt,g as Kt,dk as Yt,a as $t,dl as Xt,dm as Qt,dn as Jt,dp as Zt,dq as en,i as tn,dr as nn,ds as rn,dt as sn,du as on,dv as an,dw as ln,bz as cn,dx as un,dy as dn,dz as pn,dA as hn,l as fn,h as mn,dB as gn,A as vn,dC as yn,dD as bn,j as xn,b4 as wn,dE as _n,dF as Cn,_ as Sn,dG as En,n as Tn,dH as An,dI as Pn,dJ as In,dK as Nn,dL as Mn,dM as Rn,c2 as On,P as kn,dN as Ln,dO as Dn,aQ as jn,dP as Un,dQ as Hn,dR as Fn,dS as Bn,dT as qn,dU as zn,dV as Vn,dW as Gn,dX as Wn,dY as Kn,dZ as Yn,d_ as $n,d$ as Xn,e0 as Qn,e1 as Jn,bI as Zn,e2 as er,e3 as tr,e4 as nr,J as rr,e5 as sr,e6 as ir,e7 as or,e8 as ar,e9 as lr,ea as cr,ad as ur,eb as dr,ec as pr,ed as hr,ee as fr,ef as mr,eg as gr,eh as vr,ei as yr,c0 as br,ej as xr,ek as wr,el as _r,em as Cr,en as Sr,aE as Er,eo as Tr,ep as Ar,eq as Pr,er as Ir,es as Nr,et as Mr,eu as Rr,ev as Or,ew as kr,ex as Lr,a3 as Dr,ey as jr,ez as Ur,eA as Hr,eB as Fr,eC as Br,eD as qr,eE as zr,eF as Vr,eG as Gr,eH as Wr,eI as Kr,eJ as Yr,eK as $r,eL as Xr,eM as Qr,eN as Jr,eO as Zr,aj as es,ak as ts,eP as ns,ae as rs,eQ as ss,eR as is,eS as os,eT as as,Q as ls,eU as cs,eV as us,eW as ds,bh as ps,bH as hs,eX as fs,I as ms,eY as gs,bv as vs,eZ as ys,e_ as bs,e$ as xs,f0 as ws,f1 as _s,f2 as Cs,f3 as Ss,f4 as Es,f5 as Ts,f6 as As,bG as Ps,f7 as Is,f8 as Ns,f9 as Ms,fa as Rs,fb as Os,fc as ks,fd as Ls,fe as Ds,ff as js,fg as Us,fh as Hs,fi as Fs,fj as Bs,fk as qs,fl as zs,fm as Vs,fn as Gs,fo as Ws,fp as Ks,fq as Ys,fr as $s,ah as Xs,fs as Qs,ft as Js,fu as Zs,fv as ei,fw as ti,aA as ni,fx as ri,fy as si,fz as ii,bs as oi,fA as ai,fB as li,fC as ci,fD as ui,aL as di,fE as pi,fF as hi,fG as fi,fH as mi,fI as gi,bc as vi,fJ as yi,fK as bi,fL as xi,fM as wi,L as _i,fN as Ci,a$ as Si,a6 as Ei,fO as Ti,fP as Ai,fQ as Pi,c9 as Ii,fR as Ni}from"./index.c219e668.js";import{u as Mi,d as Ri,f as Oi,_ as ki,h as Li,j as Di,k as ji,F as Ui,l as Hi,m as Fi,K as Bi,n as qi,o as zi,p as Vi,q as Gi,s as Wi,t as Ki,v as Yi,w as $i,x as Xi,S as Qi,y as Ji,r as Zi,z as eo,T as to,A as no,C as ro,D as so,E as io,G as oo,H as ao,I as lo,J as co,L as uo,N as po,O as ho,P as fo,M as mo,Q as go,R as vo,U as yo,V as bo,X as xo,Y as wo,Z as _o,$ as Co,a0 as So,a1 as Eo,a2 as To,a3 as Ao,a4 as Po,a5 as Io,a6 as No,a7 as Mo,a8 as Ro,a9 as Oo,aa as ko,ab as Lo,ac as Do}from"./index.5f334851.js";import{F as jo,i as Uo}from"./FormattedMarkdownMessage.9c7a926b.js";var Ho=p.exports.createContext(!1);function Fo(e){return d(Ho.Provider,{value:e.force,children:e.children})}function Bo(){var e=p.exports.useContext(Ho),t=p.exports.useContext(Ko),n=p.exports.useState((function(){if(!e&&null!==t)return null;if("undefined"==typeof window)return null;var n=document.getElementById("headlessui-portal-root");if(n)return n;var r=document.createElement("div");return r.setAttribute("id","headlessui-portal-root"),document.body.appendChild(r)})),r=n[0],s=n[1];return p.exports.useEffect((function(){e||null!==t&&s(t.current)}),[t,s,e]),r}var qo=p.exports.Fragment;function zo(e){var t=e,n=Bo(),r=p.exports.useState((function(){return"undefined"==typeof window?null:document.createElement("div")}))[0],s=Mi();return Ri((function(){if(n&&r)return n.appendChild(r),function(){var e;n&&(r&&(n.removeChild(r),n.childNodes.length<=0&&(null==(e=n.parentElement)||e.removeChild(n))))}}),[n,r]),s&&n&&r?h.exports.createPortal(Oi({props:t,defaultTag:qo,name:"Portal"}),r):null}var Vo,Go,Wo=p.exports.Fragment,Ko=p.exports.createContext(null);function Yo(e,t,n){void 0===t&&(t=Vo.All);var r=void 0===n?{}:n,s=r.initialFocus,i=r.containers,o=p.exports.useRef("undefined"!=typeof window?document.activeElement:null),a=p.exports.useRef(null),l=Li(),c=Boolean(t&Vo.RestoreFocus),u=Boolean(t&Vo.InitialFocus);p.exports.useEffect((function(){c&&(o.current=document.activeElement)}),[c]),p.exports.useEffect((function(){if(c)return function(){Di(o.current),o.current=null}}),[c]),p.exports.useEffect((function(){if(u&&e.current){var t=document.activeElement;if(null==s?void 0:s.current){if((null==s?void 0:s.current)===t)return void(a.current=t)}else if(e.current.contains(t))return void(a.current=t);(null==s?void 0:s.current)?Di(s.current):ji(e.current,Ui.First)===Hi.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),a.current=document.activeElement}}),[e,s,u]),Fi("keydown",(function(n){t&Vo.TabLock&&e.current&&n.key===Bi.Tab&&(n.preventDefault(),ji(e.current,(n.shiftKey?Ui.Previous:Ui.Next)|Ui.WrapAround)===Hi.Success&&(a.current=document.activeElement))})),Fi("focus",(function(n){if(t&Vo.FocusLock){var r=new Set(null==i?void 0:i.current);if(r.add(e),r.size){var s=a.current;if(s&&l.current){var o=n.target;o&&o instanceof HTMLElement?!function(e,t){for(var n,r=qi(e);!(n=r()).done;){var s;if(null==(s=n.value.current)?void 0:s.contains(t))return!0}return!1}(r,o)?(n.preventDefault(),n.stopPropagation(),Di(s)):(a.current=o,Di(o)):Di(a.current)}}}}),!0)}zo.Group=function(e){var t=e.target,n=ki(e,["target"]);return d(Ko.Provider,{value:t,children:Oi({props:n,defaultTag:Wo,name:"Popover.Group"})})},(Go=Vo||(Vo={}))[Go.None=1]="None",Go[Go.InitialFocus=2]="InitialFocus",Go[Go.TabLock=4]="TabLock",Go[Go.FocusLock=8]="FocusLock",Go[Go.RestoreFocus=16]="RestoreFocus",Go[Go.All=30]="All";var $o=new Set,Xo=new Map;function Qo(e){e.setAttribute("aria-hidden","true"),e.inert=!0}function Jo(e){var t=Xo.get(e);t&&(null===t["aria-hidden"]?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",t["aria-hidden"]),e.inert=t.inert)}var Zo=p.exports.createContext(null);function ea(){var e=p.exports.useContext(Zo);if(null===e){var t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,ea),t}return e}var ta,na,ra,sa,ia,oa,aa,la=p.exports.createContext((function(){}));function ca(e){var t=e.children,n=e.onUpdate,r=e.type,s=e.element,i=p.exports.useContext(la),o=p.exports.useCallback((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];null==n||n.apply(void 0,t),i.apply(void 0,t)}),[i,n]);return Ri((function(){return o(ta.Add,r,s),function(){return o(ta.Remove,r,s)}}),[o,r,s]),d(la.Provider,{value:o,children:t})}la.displayName="StackContext",(na=ta||(ta={}))[na.Add=0]="Add",na[na.Remove=1]="Remove",(ia=sa||(sa={}))[ia.Open=0]="Open",ia[ia.Closed=1]="Closed",(aa=oa||(oa={}))[aa.SetTitleId=0]="SetTitleId";var ua=((ra={})[oa.SetTitleId]=function(e,t){return e.titleId===t.id?e:Vi({},e,{titleId:t.id})},ra),da=p.exports.createContext(null);function pa(e){var t=p.exports.useContext(da);if(null===t){var n=new Error("<"+e+" /> is missing a parent <"+va.displayName+" /> component.");throw Error.captureStackTrace&&Error.captureStackTrace(n,pa),n}return t}function ha(e,t){return Xi(t.type,ua,e,t)}da.displayName="DialogContext";var fa=Gi.RenderStrategy|Gi.Static,ma=Wi((function(e,t){var n,r=e.open,s=e.onClose,i=e.initialFocus,o=ki(e,["open","onClose","initialFocus"]),a=p.exports.useState(0),l=a[0],c=a[1],u=$i();void 0===r&&null!==u&&(r=Xi(u,((n={})[Qi.Open]=!0,n[Qi.Closed]=!1,n)));var h=p.exports.useRef(new Set),f=p.exports.useRef(null),m=Ki(f,t),g=e.hasOwnProperty("open")||null!==u,v=e.hasOwnProperty("onClose");if(!g&&!v)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!g)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!v)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if("boolean"!=typeof r)throw new Error("You provided an `open` prop to the `Dialog`, but the value is not a boolean. Received: "+r);if("function"!=typeof s)throw new Error("You provided an `onClose` prop to the `Dialog`, but the value is not a function. Received: "+s);var y=r?sa.Open:sa.Closed,b=null!==u?u===Qi.Open:y===sa.Open,x=p.exports.useReducer(ha,{titleId:null,descriptionId:null}),w=x[0],_=x[1],C=p.exports.useCallback((function(){return s(!1)}),[s]),S=p.exports.useCallback((function(e){return _({type:oa.SetTitleId,id:e})}),[_]),E=Mi()&&y===sa.Open,T=l>1,A=null!==p.exports.useContext(da);Yo(f,E?Xi(T?"parent":"leaf",{parent:Vo.RestoreFocus,leaf:Vo.All}):Vo.None,{initialFocus:i,containers:h}),function(e,t){void 0===t&&(t=!0),Ri((function(){if(t&&e.current){var n=e.current;$o.add(n);for(var r,s=qi(Xo.keys());!(r=s()).done;){var i=r.value;i.contains(n)&&(Jo(i),Xo.delete(i))}return document.querySelectorAll("body > *").forEach((function(e){if(e instanceof HTMLElement){for(var t,n=qi($o);!(t=n()).done;){var r=t.value;if(e.contains(r))return}1===$o.size&&(Xo.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),Qo(e))}})),function(){if($o.delete(n),$o.size>0)document.querySelectorAll("body > *").forEach((function(e){if(e instanceof HTMLElement&&!Xo.has(e)){for(var t,n=qi($o);!(t=n()).done;){var r=t.value;if(e.contains(r))return}Xo.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),Qo(e)}}));else for(var e,t=qi(Xo.keys());!(e=t()).done;){var r=e.value;Jo(r),Xo.delete(r)}}}}),[t])}(f,!!T&&E),Fi("mousedown",(function(e){var t,n=e.target;y===sa.Open&&(T||(null==(t=f.current)?void 0:t.contains(n))||C())})),Fi("keydown",(function(e){e.key===Bi.Escape&&y===sa.Open&&(T||(e.preventDefault(),e.stopPropagation(),C()))})),p.exports.useEffect((function(){if(y===sa.Open&&!A){var e=document.documentElement.style.overflow,t=document.documentElement.style.paddingRight,n=window.innerWidth-document.documentElement.clientWidth;return document.documentElement.style.overflow="hidden",document.documentElement.style.paddingRight=n+"px",function(){document.documentElement.style.overflow=e,document.documentElement.style.paddingRight=t}}}),[y,A]),p.exports.useEffect((function(){if(y===sa.Open&&f.current){var e=new IntersectionObserver((function(e){for(var t,n=qi(e);!(t=n()).done;){var r=t.value;0===r.boundingClientRect.x&&0===r.boundingClientRect.y&&0===r.boundingClientRect.width&&0===r.boundingClientRect.height&&C()}}));return e.observe(f.current),function(){return e.disconnect()}}}),[y,f,C]);var P=function(){var e=p.exports.useState([]),t=e[0],n=e[1];return[t.length>0?t.join(" "):void 0,p.exports.useMemo((function(){return function(e){var t=p.exports.useCallback((function(e){return n((function(t){return[].concat(t,[e])})),function(){return n((function(t){var n=t.slice(),r=n.indexOf(e);return-1!==r&&n.splice(r,1),n}))}}),[]),r=p.exports.useMemo((function(){return{register:t,slot:e.slot,name:e.name,props:e.props}}),[t,e.slot,e.name,e.props]);return d(Zo.Provider,{value:r,children:e.children})}}),[n])]}(),I=P[0],N=P[1],M="headlessui-dialog-"+zi(),R=p.exports.useMemo((function(){return[{dialogState:y,close:C,setTitleId:S},w]}),[y,w,C,S]),O=p.exports.useMemo((function(){return{open:y===sa.Open}}),[y]),k={ref:m,id:M,role:"dialog","aria-modal":y===sa.Open||void 0,"aria-labelledby":w.titleId,"aria-describedby":I,onClick:function(e){e.stopPropagation()}},L=o;return d(ca,{type:"Dialog",element:f,onUpdate:p.exports.useCallback((function(e,t,n){var r;"Dialog"===t&&Xi(e,((r={})[ta.Add]=function(){h.current.add(n),c((function(e){return e+1}))},r[ta.Remove]=function(){h.current.add(n),c((function(e){return e-1}))},r))}),[]),children:d(Fo,{force:!0,children:d(zo,{children:d(da.Provider,{value:R,children:d(zo.Group,{target:f,children:d(Fo,{force:!1,children:d(N,{slot:O,name:"Dialog.Description",children:Oi({props:Vi({},L,k),slot:O,defaultTag:"div",features:fa,visible:b,name:"Dialog"})})})})})})})})})),ga=Wi((function e(t,n){var r=pa([va.displayName,e.name].join("."))[0],s=r.dialogState,i=r.close,o=Ki(n),a="headlessui-dialog-overlay-"+zi(),l=p.exports.useCallback((function(e){if(Yi(e.currentTarget))return e.preventDefault();e.preventDefault(),e.stopPropagation(),i()}),[i]),c=p.exports.useMemo((function(){return{open:s===sa.Open}}),[s]);return Oi({props:Vi({},t,{ref:o,id:a,"aria-hidden":!0,onClick:l}),slot:c,defaultTag:"div",name:"Dialog.Overlay"})}));var va=Object.assign(ma,{Overlay:ga,Title:function e(t){var n=pa([va.displayName,e.name].join("."))[0],r=n.dialogState,s=n.setTitleId,i="headlessui-dialog-title-"+zi();p.exports.useEffect((function(){return s(i),function(){return s(null)}}),[i,s]);var o=p.exports.useMemo((function(){return{open:r===sa.Open}}),[r]);return Oi({props:Vi({},t,{id:i}),slot:o,defaultTag:"h2",name:"Dialog.Title"})},Description:function(e){var t=ea(),n="headlessui-description-"+zi();Ri((function(){return t.register(n)}),[n,t.register]);var r=e,s=Vi({},t.props,{id:n});return Oi({props:Vi({},r,s),slot:t.slot||{},defaultTag:"p",name:t.name||"Description"})}});var ya,ba,xa="u3-cxx-4f490a72";(ba=ya||(ya={})).Mention="Mention",ba.Unread="Unread",ba.None="None";var wa=f((e=>{const t=Ji(),n=function(e){const t=p.exports.useRef();return p.exports.useEffect((()=>{t.current=e})),t.current||{}}(e),r=e=>e.mentionCount>0?ya.Mention:e.messageCount>0?ya.Unread:ya.None;return p.exports.useEffect((()=>{(()=>{const{currentChannel:n,currentTeam:r,currentTeammate:s,unreads:i,inGlobalThreads:o,contactName:a}=e,{formatMessage:l}=e.intl,c="U3 Chat",u=i.mentionCount>0?`(${i.mentionCount}) `:"",d=i.messageCount>0?`(${i.messageCount}) `:"";if(n&&r&&n.id){let e=n.display_name;n.type===G.DM_CHANNEL&&null!=s&&(e=a||s.display_name),t.setTitle(`${u}${d}${e} - ${r.display_name} U3 Chat`)}else r&&o?t.setTitle(l({id:"globalThreads.title",defaultMessage:"{prefix}Threads - {displayName} {siteName}"},{prefix:`${u}${d}`,displayName:r.display_name,siteName:c})):t.setTitle(c)})();const s=r(n.unreads||{}),i=r(e.unreads||{});s!==i&&t.selectDot(i)}),[e]),null}));var _a=m(g((function(e,{location:{pathname:t}}){const n=W(e),r=K(e),s=r&&r.teammate_id?r:null,i=Y(e);let o="";if(s){const t=$(e,s.teammate_id);o=t?X(e,t.id):""}return{currentChannel:r,currentTeam:i,currentTeammate:s,siteName:n.SiteName,unreads:Q(e),inGlobalThreads:null!=v(t,{path:"/:team/threads/:threadIdentifier?"}),contactName:o}}),(function(e){return{actions:y({},e)}}))(wa)),Ca=Zi.jsx;var Sa=function(e){return Ca("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},e)),{children:Ca("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}))},Ea=Zi.jsx;var Ta=function(e){return Ea("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e)),{children:Ea("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}))},Aa=e=>b("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[b("defs",{children:[d("symbol",{id:"chrome-tab-geometry-left",viewBox:"0 0 214 36",children:d("path",{d:"M17 0h197v36H0v-2c4.5 0 9-3.5 9-8V8c0-4.5 3.5-8 8-8z"})}),d("symbol",{id:"chrome-tab-geometry-right",viewBox:"0 0 214 36",children:d("use",{xlinkHref:"#chrome-tab-geometry-left"})}),d("clipPath",{id:"crop",children:d("rect",{className:"mask",width:"100%",height:"100%",x:"0"})})]}),d("svg",{width:"52%",height:"100%",children:d("use",{xlinkHref:"#chrome-tab-geometry-left",width:"214",height:"36",className:e.tabGeometry})}),d("g",{transform:"scale(-1, 1)",children:d("svg",{width:"52%",height:"100%",x:"-100%",y:"0",children:d("use",{xlinkHref:"#chrome-tab-geometry-right",width:"214",height:"36",className:e.tabGeometry})})})]}),Pa=Zi.jsx;var Ia=function(e){return Pa("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e)),{children:Pa("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}))};var Na={messageSend:"u3-cxx-e17a8995",blink:"u3-cxx-bddf2771"},Ma=e=>b("span",{className:x(Na.loadingSpinner,{[Na.withText]:!!e.text}),children:[d(Ia,{className:x("u3-w-6 u3-h-6 u3-animate-spin")}),e.text]}),Ra=Zi.jsx,Oa=Zi.jsxs;var ka=function(e){return Oa("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},e)),{children:[Ra("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),Ra("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}))},La=Zi.jsx;var Da=function(e){return La("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},e)),{children:La("path",{fillRule:"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z",clipRule:"evenodd"})}))};var ja={avatar:"u3-cxx-c8a84e33",avatarTab:"u3-cxx-286c4356",avatarXxs:"u3-cxx-567b8200",avatarXs:"u3-cxx-15e17d20",avatarSm:"u3-cxx-5ea40488",avatarMd:"u3-cxx-80b4a33d",avatarLg:"u3-cxx-a6d5e881",avatarXl:"u3-cxx-93a41ede",avatar2Xl:"u3-cxx-83839ff3",avatar3Xl:"u3-cxx-ec92dfec",avatar4Xl:"u3-cxx-b47231e2",avatar5Xl:"u3-cxx-0fb4352e",plain:"u3-cxx-aac94894"};var Ua=p.exports.memo((e=>{var t=e,{url:n,username:r,size:s="md",text:i}=t,o=c(t,["url","username","size","text"]);const u=x(ja.avatar,{[ja.avatarTab]:"tab"===s,[ja.avatarXxs]:"xxs"===s,[ja.avatarXs]:"xs"===s,[ja.avatarSm]:"sm"===s,[ja.avatarMd]:"md"===s,[ja.avatarLg]:"lg"===s,[ja.avatarXl]:"xl"===s,[ja.avatar2xl]:"2xl"===s,[ja.avatar3xl]:"3xl"===s,[ja.avatar4xl]:"4xl"===s,[ja.avatar5xl]:"5xl"===s},o.className);return i?d("div",l(a({},o),{className:x(u,ja.plain),"data-content":i})):d("img",l(a({},o),{className:u,alt:`${r||"user"} profile image`,src:n,loading:"lazy"}))}));class Ha extends w.PureComponent{render(){"string"==typeof this.props.profileSrc&&""!==this.props.profileSrc?this.props.profileSrc:this.props.src;const e="profile-icon "+(this.props.isEmoji?"emoji":"");return d("span",{className:`status-wrapper style--none ${this.props.wrapperClass}`,children:d("span",{className:e,children:d(Ua,{size:this.props.size,url:this.props.src})})})}}u(Ha,"defaultProps",{size:"md",isRHS:!1,isEmoji:!1,hasMention:!1,wrapperClass:""});var Fa={joinMoreTab:"u3-cxx-579f2c9b",modalJoinMore:"u3-cxx-b301ce1b",modalOverlay:"u3-cxx-d7c925b5",modalTrickCenter:"u3-cxx-4c6ca5b9",modalCard:"u3-cxx-5ec79ea9",modalHeader:"u3-cxx-5a7da58b",modalCardTitle:"u3-cxx-23f44451",closeBtn:"u3-cxx-6942a1a8",modalButton:"u3-cxx-5a3020e7",modalButtonIcon:"u3-cxx-9f4301f3",modalBody:"u3-cxx-4500a791",loader:"u3-cxx-4b96749a",channelListView:"u3-cxx-b182efcc",itemView:"u3-cxx-5f708c87",channelDetail:"u3-cxx-dfa436ad",channelName:"u3-cxx-efed7250",channelPurpose:"u3-cxx-74c55633",channelActions:"u3-cxx-b426946a",channelBtn:"u3-cxx-cfb2aa5d",channelJoined:"u3-cxx-381752da",buttonGroup:"u3-cxx-1669d815",buttonGroupItem:"u3-cxx-729f13b4",buttonView:"u3-cxx-550de176",buttonExit:"u3-cxx-f0e8f211"},Ba=e=>{const[t,n]=p.exports.useState(e.channelJoinned),[r,s]=p.exports.useState([]);return p.exports.useEffect((()=>{t.length!==e.channelJoinned.length&&n(e.channelJoinned)}),[e.channelJoinned]),b("div",{className:Fa.channelListView,children:[e.channels.length?d(p.exports.Fragment,{}):d("p",{className:Fa.noChannels,children:"Hiện tại không có Nhóm nào để bạn tham gia!"}),e.channels.map(((i,o)=>b("div",{className:Fa.itemView,children:[d("div",{className:Fa.channelAvatar,children:d(Ha,{src:J.getChannelPictureUrl(i.id,i.last_picture_update),size:"xl",status:"",wrapperClass:Fa.channelAvatarPicture,newStatusIcon:!1})}),b("div",{className:Fa.channelDetail,children:[d("h3",{className:Fa.channelName,children:i.display_name}),d("p",{className:Fa.channelPurpose,children:i.purpose})]}),d("div",{className:Fa.channelActions,children:t.includes(i.id)?b("div",{className:Fa.buttonGroup,children:[d("button",{className:x(Fa.buttonGroupItem,Fa.buttonView),onClick:()=>e.onView(i.name),children:d(ka,{className:"u3-w-4 u3-h-4"})}),d("button",{className:x(Fa.buttonGroupItem,Fa.buttonExit),onClick:()=>e.onExit(i.id),children:d(Da,{className:"u3-w-4 u3-h-4"})})]}):d("button",{className:Fa.channelBtn,onClick:()=>(async i=>{if(r.includes(i))return;s([...r,i]),await e.onJoin(i),n([...t,i]);let o=r.indexOf(i);r.splice(o,1),s(r)})(i.id),children:r.includes(i.id)?"Đang vào...":"Tham gia"})})]},`${o}-${i.id}`)))]})},qa="top",za="bottom",Va="right",Ga="left",Wa=[qa,za,Va,Ga],Ka=Wa.reduce((function(e,t){return e.concat([t+"-start",t+"-end"])}),[]),Ya=[].concat(Wa,["auto"]).reduce((function(e,t){return e.concat([t,t+"-start",t+"-end"])}),[]),$a=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Xa(e){return e?(e.nodeName||"").toLowerCase():null}function Qa(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Ja(e){return e instanceof Qa(e).Element||e instanceof Element}function Za(e){return e instanceof Qa(e).HTMLElement||e instanceof HTMLElement}function el(e){return"undefined"!=typeof ShadowRoot&&(e instanceof Qa(e).ShadowRoot||e instanceof ShadowRoot)}var tl={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},s=t.elements[e];Za(s)&&Xa(s)&&(Object.assign(s.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?s.removeAttribute(e):s.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],s=t.attributes[e]||{},i=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});Za(r)&&Xa(r)&&(Object.assign(r.style,i),Object.keys(s).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]};function nl(e){return e.split("-")[0]}function rl(e,t){var n=e.getBoundingClientRect();return{width:n.width/1,height:n.height/1,top:n.top/1,right:n.right/1,bottom:n.bottom/1,left:n.left/1,x:n.left/1,y:n.top/1}}function sl(e){var t=rl(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function il(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&el(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function ol(e){return Qa(e).getComputedStyle(e)}function al(e){return["table","td","th"].indexOf(Xa(e))>=0}function ll(e){return((Ja(e)?e.ownerDocument:e.document)||window.document).documentElement}function cl(e){return"html"===Xa(e)?e:e.assignedSlot||e.parentNode||(el(e)?e.host:null)||ll(e)}function ul(e){return Za(e)&&"fixed"!==ol(e).position?e.offsetParent:null}function dl(e){for(var t=Qa(e),n=ul(e);n&&al(n)&&"static"===ol(n).position;)n=ul(n);return n&&("html"===Xa(n)||"body"===Xa(n)&&"static"===ol(n).position)?t:n||function(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&Za(e)&&"fixed"===ol(e).position)return null;for(var n=cl(e);Za(n)&&["html","body"].indexOf(Xa(n))<0;){var r=ol(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}function pl(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}var hl=Math.max,fl=Math.min,ml=Math.round;function gl(e,t,n){return hl(e,fl(t,n))}function vl(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function yl(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function bl(e){return e.split("-")[1]}var xl={top:"auto",right:"auto",bottom:"auto",left:"auto"};function wl(e){var t,n=e.popper,r=e.popperRect,s=e.placement,i=e.variation,o=e.offsets,a=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,d=!0===u?function(e){var t=e.x,n=e.y,r=window.devicePixelRatio||1;return{x:ml(ml(t*r)/r)||0,y:ml(ml(n*r)/r)||0}}(o):"function"==typeof u?u(o):o,p=d.x,h=void 0===p?0:p,f=d.y,m=void 0===f?0:f,g=o.hasOwnProperty("x"),v=o.hasOwnProperty("y"),y=Ga,b=qa,x=window;if(c){var w=dl(n),_="clientHeight",C="clientWidth";w===Qa(n)&&"static"!==ol(w=ll(n)).position&&"absolute"===a&&(_="scrollHeight",C="scrollWidth"),w=w,s!==qa&&(s!==Ga&&s!==Va||"end"!==i)||(b=za,m-=w[_]-r.height,m*=l?1:-1),s!==Ga&&(s!==qa&&s!==za||"end"!==i)||(y=Va,h-=w[C]-r.width,h*=l?1:-1)}var S,E=Object.assign({position:a},c&&xl);return l?Object.assign({},E,((S={})[b]=v?"0":"",S[y]=g?"0":"",S.transform=(x.devicePixelRatio||1)<=1?"translate("+h+"px, "+m+"px)":"translate3d("+h+"px, "+m+"px, 0)",S)):Object.assign({},E,((t={})[b]=v?m+"px":"",t[y]=g?h+"px":"",t.transform="",t))}var _l={passive:!0};var Cl={left:"right",right:"left",bottom:"top",top:"bottom"};function Sl(e){return e.replace(/left|right|bottom|top/g,(function(e){return Cl[e]}))}var El={start:"end",end:"start"};function Tl(e){return e.replace(/start|end/g,(function(e){return El[e]}))}function Al(e){var t=Qa(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Pl(e){return rl(ll(e)).left+Al(e).scrollLeft}function Il(e){var t=ol(e),n=t.overflow,r=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+r)}function Nl(e){return["html","body","#document"].indexOf(Xa(e))>=0?e.ownerDocument.body:Za(e)&&Il(e)?e:Nl(cl(e))}function Ml(e,t){var n;void 0===t&&(t=[]);var r=Nl(e),s=r===(null==(n=e.ownerDocument)?void 0:n.body),i=Qa(r),o=s?[i].concat(i.visualViewport||[],Il(r)?r:[]):r,a=t.concat(o);return s?a:a.concat(Ml(cl(o)))}function Rl(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Ol(e,t){return"viewport"===t?Rl(function(e){var t=Qa(e),n=ll(e),r=t.visualViewport,s=n.clientWidth,i=n.clientHeight,o=0,a=0;return r&&(s=r.width,i=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=r.offsetLeft,a=r.offsetTop)),{width:s,height:i,x:o+Pl(e),y:a}}(e)):Za(t)?function(e){var t=rl(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(t):Rl(function(e){var t,n=ll(e),r=Al(e),s=null==(t=e.ownerDocument)?void 0:t.body,i=hl(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=hl(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-r.scrollLeft+Pl(e),l=-r.scrollTop;return"rtl"===ol(s||n).direction&&(a+=hl(n.clientWidth,s?s.clientWidth:0)-i),{width:i,height:o,x:a,y:l}}(ll(e)))}function kl(e,t,n){var r="clippingParents"===t?function(e){var t=Ml(cl(e)),n=["absolute","fixed"].indexOf(ol(e).position)>=0&&Za(e)?dl(e):e;return Ja(n)?t.filter((function(e){return Ja(e)&&il(e,n)&&"body"!==Xa(e)})):[]}(e):[].concat(t),s=[].concat(r,[n]),i=s[0],o=s.reduce((function(t,n){var r=Ol(e,n);return t.top=hl(r.top,t.top),t.right=fl(r.right,t.right),t.bottom=fl(r.bottom,t.bottom),t.left=hl(r.left,t.left),t}),Ol(e,i));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function Ll(e){var t,n=e.reference,r=e.element,s=e.placement,i=s?nl(s):null,o=s?bl(s):null,a=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(i){case qa:t={x:a,y:n.y-r.height};break;case za:t={x:a,y:n.y+n.height};break;case Va:t={x:n.x+n.width,y:l};break;case Ga:t={x:n.x-r.width,y:l};break;default:t={x:n.x,y:n.y}}var c=i?pl(i):null;if(null!=c){var u="y"===c?"height":"width";switch(o){case"start":t[c]=t[c]-(n[u]/2-r[u]/2);break;case"end":t[c]=t[c]+(n[u]/2-r[u]/2)}}return t}function Dl(e,t){void 0===t&&(t={});var n=t,r=n.placement,s=void 0===r?e.placement:r,i=n.boundary,o=void 0===i?"clippingParents":i,a=n.rootBoundary,l=void 0===a?"viewport":a,c=n.elementContext,u=void 0===c?"popper":c,d=n.altBoundary,p=void 0!==d&&d,h=n.padding,f=void 0===h?0:h,m=vl("number"!=typeof f?f:yl(f,Wa)),g="popper"===u?"reference":"popper",v=e.rects.popper,y=e.elements[p?g:u],b=kl(Ja(y)?y:y.contextElement||ll(e.elements.popper),o,l),x=rl(e.elements.reference),w=Ll({reference:x,element:v,strategy:"absolute",placement:s}),_=Rl(Object.assign({},v,w)),C="popper"===u?_:x,S={top:b.top-C.top+m.top,bottom:C.bottom-b.bottom+m.bottom,left:b.left-C.left+m.left,right:C.right-b.right+m.right},E=e.modifiersData.offset;if("popper"===u&&E){var T=E[s];Object.keys(S).forEach((function(e){var t=[Va,za].indexOf(e)>=0?1:-1,n=[qa,za].indexOf(e)>=0?"y":"x";S[e]+=T[n]*t}))}return S}function jl(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Ul(e){return[qa,Va,za,Ga].some((function(t){return e[t]>=0}))}function Hl(e,t,n){void 0===n&&(n=!1);var r=Za(t);Za(t)&&function(e){var t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1}(t);var s,i,o=ll(t),a=rl(e),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(r||!r&&!n)&&(("body"!==Xa(t)||Il(o))&&(l=(s=t)!==Qa(s)&&Za(s)?{scrollLeft:(i=s).scrollLeft,scrollTop:i.scrollTop}:Al(s)),Za(t)?((c=rl(t)).x+=t.clientLeft,c.y+=t.clientTop):o&&(c.x=Pl(o))),{x:a.left+l.scrollLeft-c.x,y:a.top+l.scrollTop-c.y,width:a.width,height:a.height}}function Fl(e){var t=new Map,n=new Set,r=[];function s(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&s(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||s(e)})),r}var Bl={placement:"bottom",modifiers:[],strategy:"absolute"};function ql(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function zl(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,s=t.defaultOptions,i=void 0===s?Bl:s;return function(e,t,n){void 0===n&&(n=i);var s,o,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},Bl,i),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},l=[],c=!1,u={state:a,setOptions:function(n){var s="function"==typeof n?n(a.options):n;d(),a.options=Object.assign({},i,a.options,s),a.scrollParents={reference:Ja(e)?Ml(e):e.contextElement?Ml(e.contextElement):[],popper:Ml(t)};var o,c,p=function(e){var t=Fl(e);return $a.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}((o=[].concat(r,a.options.modifiers),c=o.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{}),Object.keys(c).map((function(e){return c[e]}))));return a.orderedModifiers=p.filter((function(e){return e.enabled})),a.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,s=e.effect;if("function"==typeof s){var i=s({state:a,name:t,instance:u,options:r}),o=function(){};l.push(i||o)}})),u.update()},forceUpdate:function(){if(!c){var e=a.elements,t=e.reference,n=e.popper;if(ql(t,n)){a.rects={reference:Hl(t,dl(n),"fixed"===a.options.strategy),popper:sl(n)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(e){return a.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<a.orderedModifiers.length;r++)if(!0!==a.reset){var s=a.orderedModifiers[r],i=s.fn,o=s.options,l=void 0===o?{}:o,d=s.name;"function"==typeof i&&(a=i({state:a,options:l,name:d,instance:u})||a)}else a.reset=!1,r=-1}}},update:(s=function(){return new Promise((function(e){u.forceUpdate(),e(a)}))},function(){return o||(o=new Promise((function(e){Promise.resolve().then((function(){o=void 0,e(s())}))}))),o}),destroy:function(){d(),c=!0}};if(!ql(e,t))return u;function d(){l.forEach((function(e){return e()})),l=[]}return u.setOptions(n).then((function(e){!c&&n.onFirstUpdate&&n.onFirstUpdate(e)})),u}}var Vl=zl({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,s=r.scroll,i=void 0===s||s,o=r.resize,a=void 0===o||o,l=Qa(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&c.forEach((function(e){e.addEventListener("scroll",n.update,_l)})),a&&l.addEventListener("resize",n.update,_l),function(){i&&c.forEach((function(e){e.removeEventListener("scroll",n.update,_l)})),a&&l.removeEventListener("resize",n.update,_l)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=Ll({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,s=void 0===r||r,i=n.adaptive,o=void 0===i||i,a=n.roundOffsets,l=void 0===a||a,c={placement:nl(t.placement),variation:bl(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,wl(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,wl(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},tl,{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,s=n.offset,i=void 0===s?[0,0]:s,o=Ya.reduce((function(e,n){return e[n]=function(e,t,n){var r=nl(e),s=[Ga,qa].indexOf(r)>=0?-1:1,i="function"==typeof n?n(Object.assign({},t,{placement:e})):n,o=i[0],a=i[1];return o=o||0,a=(a||0)*s,[Ga,Va].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}(n,t.rects,i),e}),{}),a=o[t.placement],l=a.x,c=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=o}},{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var s=n.mainAxis,i=void 0===s||s,o=n.altAxis,a=void 0===o||o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,p=n.altBoundary,h=n.flipVariations,f=void 0===h||h,m=n.allowedAutoPlacements,g=t.options.placement,v=nl(g),y=l||(v===g||!f?[Sl(g)]:function(e){if("auto"===nl(e))return[];var t=Sl(e);return[Tl(e),t,Tl(t)]}(g)),b=[g].concat(y).reduce((function(e,n){return e.concat("auto"===nl(n)?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,s=n.boundary,i=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?Ya:l,u=bl(r),d=u?a?Ka:Ka.filter((function(e){return bl(e)===u})):Wa,p=d.filter((function(e){return c.indexOf(e)>=0}));0===p.length&&(p=d);var h=p.reduce((function(t,n){return t[n]=Dl(e,{placement:n,boundary:s,rootBoundary:i,padding:o})[nl(n)],t}),{});return Object.keys(h).sort((function(e,t){return h[e]-h[t]}))}(t,{placement:n,boundary:u,rootBoundary:d,padding:c,flipVariations:f,allowedAutoPlacements:m}):n)}),[]),x=t.rects.reference,w=t.rects.popper,_=new Map,C=!0,S=b[0],E=0;E<b.length;E++){var T=b[E],A=nl(T),P="start"===bl(T),I=[qa,za].indexOf(A)>=0,N=I?"width":"height",M=Dl(t,{placement:T,boundary:u,rootBoundary:d,altBoundary:p,padding:c}),R=I?P?Va:Ga:P?za:qa;x[N]>w[N]&&(R=Sl(R));var O=Sl(R),k=[];if(i&&k.push(M[A]<=0),a&&k.push(M[R]<=0,M[O]<=0),k.every((function(e){return e}))){S=T,C=!1;break}_.set(T,k)}if(C)for(var L=function(e){var t=b.find((function(t){var n=_.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return S=t,"break"},D=f?3:1;D>0;D--){if("break"===L(D))break}t.placement!==S&&(t.modifiersData[r]._skip=!0,t.placement=S,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,s=n.mainAxis,i=void 0===s||s,o=n.altAxis,a=void 0!==o&&o,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,p=n.tether,h=void 0===p||p,f=n.tetherOffset,m=void 0===f?0:f,g=Dl(t,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),v=nl(t.placement),y=bl(t.placement),b=!y,x=pl(v),w="x"===x?"y":"x",_=t.modifiersData.popperOffsets,C=t.rects.reference,S=t.rects.popper,E="function"==typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,T={x:0,y:0};if(_){if(i||a){var A="y"===x?qa:Ga,P="y"===x?za:Va,I="y"===x?"height":"width",N=_[x],M=_[x]+g[A],R=_[x]-g[P],O=h?-S[I]/2:0,k="start"===y?C[I]:S[I],L="start"===y?-S[I]:-C[I],D=t.elements.arrow,j=h&&D?sl(D):{width:0,height:0},U=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},H=U[A],F=U[P],B=gl(0,C[I],j[I]),q=b?C[I]/2-O-B-H-E:k-B-H-E,z=b?-C[I]/2+O+B+F+E:L+B+F+E,V=t.elements.arrow&&dl(t.elements.arrow),G=V?"y"===x?V.clientTop||0:V.clientLeft||0:0,W=t.modifiersData.offset?t.modifiersData.offset[t.placement][x]:0,K=_[x]+q-W-G,Y=_[x]+z-W;if(i){var $=gl(h?fl(M,K):M,N,h?hl(R,Y):R);_[x]=$,T[x]=$-N}if(a){var X="x"===x?qa:Ga,Q="x"===x?za:Va,J=_[w],Z=J+g[X],ee=J-g[Q],te=gl(h?fl(Z,K):Z,J,h?hl(ee,Y):ee);_[w]=te,T[w]=te-J}}t.modifiersData[r]=T}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,s=e.options,i=n.elements.arrow,o=n.modifiersData.popperOffsets,a=nl(n.placement),l=pl(a),c=[Ga,Va].indexOf(a)>=0?"height":"width";if(i&&o){var u=function(e,t){return vl("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:yl(e,Wa))}(s.padding,n),d=sl(i),p="y"===l?qa:Ga,h="y"===l?za:Va,f=n.rects.reference[c]+n.rects.reference[l]-o[l]-n.rects.popper[c],m=o[l]-n.rects.reference[l],g=dl(i),v=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,y=f/2-m/2,b=u[p],x=v-d[c]-u[h],w=v/2-d[c]/2+y,_=gl(b,w,x),C=l;n.modifiersData[r]=((t={})[C]=_,t.centerOffset=_-w,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!=typeof r||(r=t.elements.popper.querySelector(r)))&&il(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,s=t.rects.popper,i=t.modifiersData.preventOverflow,o=Dl(t,{elementContext:"reference"}),a=Dl(t,{altBoundary:!0}),l=jl(o,r),c=jl(a,s,i),u=Ul(l),d=Ul(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}}]});var Gl="u3-cxx-3a8033f1",Wl="u3-cxx-7efb07de",Kl="u3-cxx-2c1ca4a7";const Yl=e=>{const[t,n]=p.exports.useState(!1),r=p.exports.useRef(null),s=p.exports.useRef(null),[i,o]=p.exports.useState(!1);let a,l=null;const c=()=>{r.current&&s.current&&(a=Vl(r.current,s.current,{placement:e.placement,strategy:"fixed",modifiers:[{name:"offset",options:{offset:[0,e.offset||8]}}]}))},u=eo((()=>{a&&a.setOptions({placement:e.placement,modifiers:[{name:"offset",options:{offset:[0,e.offset||8]}}]})}),300);return p.exports.useEffect((()=>{if(n(!0),e.delayWith||c(),r.current&&e.delayWith){const e=r.current;let t=setInterval((()=>{var n;const r=(null==(n=e.parentElement)?void 0:n.offsetLeft)||0;l===r&&r>0&&(clearInterval(t),c()),l=r}),300)}return()=>{a&&a.destroy()}}),[]),p.exports.useEffect((()=>{u()}),[e]),b(p.exports.Fragment,{children:[w.cloneElement(e.children,{ref:r,onMouseEnter:function(){o(!0)},onMouseLeave:function(){o(!1)}}),b("div",{role:"tooltip",ref:s,className:x(Gl,{[Wl]:!i&&t,"u3-invisible u3-inline-block":!t}),children:[e.content,d("div",{className:Kl,"data-popper-arrow":!0})]})]})},$l=w.forwardRef(((e,t)=>{const[n,r]=p.exports.useState(!1),[s,i]=p.exports.useState(!1),[o,a]=p.exports.useState([]),l=Z(e.currentUser),c=_();function u(){r(!1)}p.exports.useEffect((()=>{!l&&n&&(async(t,n)=>{s&&i(!1),n.length||i(!0);const{data:r}=await e.actions.fetchMyChannelsByIds(t,n);a(r.channels),i(!0)})(e.teamId,e.channelIds)}),[n]);return b(p.exports.Fragment,{children:[b("div",{className:e.styles.tab,ref:t,onClick:function(){r(!0)},children:[d("div",{className:e.styles.divider}),d("div",{className:e.styles.background,children:d(Aa,{tabGeometry:e.styles.tabGeometry})}),d(Yl,{placement:"top",content:"Tham gia nhóm",offset:4,delayWith:"offsetLeft",children:d("div",{className:e.styles.content,children:d(Sa,{className:x("u3-mx-0",e.styles.plusIcon)})})})]}),d(to,{appear:!0,show:n,as:p.exports.Fragment,children:d(va,{as:"div",className:Fa.modalJoinMore,onClose:u,children:b("div",{className:"u3-min-h-screen u3-px-4 u3-text-center",children:[d(to.Child,{as:p.exports.Fragment,enter:"u3-ease-out u3-duration-300",enterFrom:"u3-opacity-0",enterTo:"u3-opacity-100",leave:"u3-ease-in u3-duration-200",leaveFrom:"u3-opacity-100",leaveTo:"u3-opacity-0",children:d(va.Overlay,{className:Fa.modalOverlay})}),d("span",{className:Fa.modalTrickCenter,"aria-hidden":"true",children:"​"}),d(to.Child,{as:p.exports.Fragment,enter:"u3-ease-out u3-duration-300",enterFrom:"u3-opacity-0 u3-scale-95",enterTo:"u3-opacity-100 u3-scale-100",leave:"u3-ease-in u3-duration-200",leaveFrom:"u3-opacity-100 u3-scale-100",leaveTo:"u3-opacity-0 u3-scale-95",children:b("div",{className:Fa.modalCard,children:[b("div",{className:Fa.modalHeader,children:[d(va.Title,{as:"h3",className:Fa.modalCardTitle,children:"Danh sách nhóm"}),d("div",{className:Fa.closeBtn,children:d("button",{type:"button",className:x(Fa.modalButton),onClick:u,children:d(Ta,{className:Fa.modalButtonIcon})})})]}),l?b("div",{className:Fa.modalBody,children:[b("p",{children:["Bạn đang là ",d("strong",{children:"Khách"}),"."]}),d("p",{children:"Vui lòng Đăng nhập để sử dụng tính năng này!"})]}):d("div",{className:Fa.modalBody,children:s?d(Ba,{teamName:e.teamName,channels:o,channelJoinned:e.channelJoinned,onJoin:function(t){return e.actions.joinChannelIntegrated(e.currentUser.id,e.teamId,t,"")},onView:function(t){u(),c.push(`/${e.teamName}/group/${t}`)},onExit:async t=>{const{data:{nextPage:n}}=await e.actions.leaveChannel(t);console.info("Next page",n),n&&c.replace(n)}}):d("div",{className:Fa.loader,children:d(Ma,{})})})]})})]})})})]})}));var Xl=g((function(e){const t=ee(e),n=te(e),r=ne(e);return{currentUser:n,channelJoinned:re(e,"all"),channelIds:r,teamId:t,teamName:Y(e).name}}),(function(e){return{actions:y({fetchMyChannelsByIds:se,joinChannelIntegrated:ie,leaveChannel:no},e)}}),null,{forwardRef:!0})($l);var Ql="u3-cxx-b850d275",Jl="u3-cxx-02cab614",Zl="u3-cxx-aa52bda4",ec="u3-cxx-afd93447";const tc=e=>{const[t,n]=p.exports.useState(!1),r=p.exports.useRef(null),s=p.exports.useRef(null),[i,o]=p.exports.useState(!1);let a;return p.exports.useEffect((()=>(r.current&&s.current&&(a=Vl(r.current,s.current,{placement:e.placement,strategy:"absolute",modifiers:[{name:"offset",options:{offset:[0,e.offset||8]}}]})),n(!0),()=>{a&&a.destroy()})),[]),p.exports.useEffect((()=>{a&&a.update()}),[e]),b(p.exports.Fragment,{children:[w.cloneElement(e.children,{ref:r,onMouseEnter:function(){o(!0)},onMouseLeave:function(){o(!1)}}),b("div",{role:"tooltip",ref:s,className:x(Ql,{[Jl]:t,[Zl]:t&&i}),children:[e.content,d("div",{className:x(ec),"data-popper-arrow":!0})]})]})};const nc=[];function rc(e){return e.entities.groups.groups}function sc(e){return e.entities.groups.myGroups}const ic=C(ac,(e=>{const t={};for(const n in e)if(e.hasOwnProperty(n)){const r=e[n];t[r.name]=r}return t}));function oc(e,t,n,r){const s=ac(e,n,r);if(!s)return nc;return function(e,t){let n=t.toLowerCase();return n.startsWith("@")&&(n=n.substr(1)),e.filter((e=>{if(!e)return!1;const t=[],r=oe((e.name||"").toLowerCase(),ae.AUTOCOMPLETE_SPLIT_CHARACTERS);t.push(...r);const s=(e.display_name||"").toLowerCase();return t.push(s),t.filter((e=>""!==e)).some((e=>e.startsWith(n)))}))}(s,t)}function ac(e,t,n){const r=le(e,t),s=ce(e,n);let i=[];if(r&&r.group_constrained&&s&&s.group_constrained){const r=pc(e,n),s=dc(e,t);i=r.concat(s.filter((e=>r.indexOf(e)<0)))}else i=r&&r.group_constrained?dc(e,t):s&&s.group_constrained?pc(e,n):hc(e);return i}C(ac,(e=>new Map(e.map((e=>[`@${e.name}`,e])))));const lc=C(((e,t)=>{var n;return(null==(n=e.entities.teams.groupsAssociatedToTeam[t])?void 0:n.ids)||[]}),(e=>new Set(e))),cc=C(((e,t)=>{var n;return(null==(n=e.entities.channels.groupsAssociatedToChannel[t])?void 0:n.ids)||[]}),(e=>new Set(e)));C(rc,((e,t)=>lc(e,t)),((e,t)=>Object.entries(e).filter((([e])=>!t.has(e))).map((e=>e[1]))));const uc=C(rc,((e,t)=>lc(e,t)),((e,t)=>Object.entries(e).filter((([e])=>t.has(e))).map((e=>e[1]))));C(rc,((e,t)=>cc(e,t)),((e,t,n)=>le(e,n)),((e,t,n)=>uc(e,n)),((e,t,n,r)=>{let s=Object.values(e).filter((e=>!t.has(e.id)));if(n.group_constrained){const e=r.map((e=>e.id));s=s.filter((t=>null==e?void 0:e.includes(t.id)))}return s})),C(rc,((e,t)=>cc(e,t)),((e,t)=>Object.entries(e).filter((([e])=>t.has(e))).map((e=>e[1]))));const dc=C(rc,((e,t)=>lc(e,t)),((e,t)=>Object.entries(e).filter((([e])=>t.has(e))).filter((e=>e[1].allow_reference&&0===e[1].delete_at)).map((e=>e[1])))),pc=C(rc,((e,t)=>cc(e,t)),((e,t)=>Object.entries(e).filter((([e])=>t.has(e))).filter((e=>e[1].allow_reference&&0===e[1].delete_at)).map((e=>e[1])))),hc=C(rc,(e=>Object.entries(e).filter((e=>e[1].allow_reference&&0===e[1].delete_at)).map((e=>e[1])))),fc=C(hc,(e=>{const t={};for(const n in e)if(e.hasOwnProperty(n)){const r=e[n];t[r.name]=r}return t})),mc=C(sc,(e=>Object.values(e).filter((e=>e.allow_reference&&0===e.delete_at)))),gc=C(sc,ic,((e,t)=>Object.values(e).filter((e=>e.allow_reference&&0===e.delete_at&&t[e.name])))),vc=C(mc,(e=>{const t=[];return e.forEach((e=>t.push({key:`@${e.name}`}))),t})),yc=C(gc,(e=>{const t=[];return e.forEach((e=>t.push({key:`@${e.name}`}))),t}));C((e=>e.entities.search.current),ee,((e,t)=>e[t])),C((e=>e.entities.search.currentFlagged),ee,((e,t)=>e[t]));const bc=C(ue,vc,((e,t)=>e.concat(t)));var xc=Array.isArray||function(e){return null!=e&&e.length>=0&&"[object Array]"===Object.prototype.toString.call(e)},wc=xc;var _c=function(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]},Cc=_c;var Sc=function(e){return function t(n){return 0===arguments.length||Cc(n)?t:e.apply(this,arguments)}},Ec=Sc,Tc=_c;var Ac=function(e){return function t(n,r){switch(arguments.length){case 0:return t;case 1:return Tc(n)?t:Ec((function(t){return e(n,t)}));default:return Tc(n)&&Tc(r)?t:Tc(n)?Ec((function(t){return e(t,r)})):Tc(r)?Ec((function(t){return e(n,t)})):e(n,r)}}},Pc=Ac(function(e,t){return function(){var n=arguments.length;if(0===n)return t();var r=arguments[n-1];return wc(r)||"function"!=typeof r[e]?t.apply(this,arguments):r[e].apply(r,Array.prototype.slice.call(arguments,0,n-1))}}("forEach",(function(e,t){for(var n=t.length,r=0;r<n;)e(t[r]),r+=1;return t})));var Ic=xc,Nc=function(e){return null!=e&&"function"==typeof e["@@transducer/step"]};var Mc=function(e,t,n){return function(){if(0===arguments.length)return n();var r=Array.prototype.slice.call(arguments,0),s=r.pop();if(!Ic(s)){for(var i=0;i<e.length;){if("function"==typeof s[e[i]])return s[e[i]].apply(s,r);i+=1}if(Nc(s)){var o=t.apply(null,r);return o(s)}}return n.apply(this,arguments)}};var Rc={init:function(){return this.xf["@@transducer/init"]()},result:function(e){return this.xf["@@transducer/result"](e)}},Oc=Ac,kc=function(e){return e&&e["@@transducer/reduced"]?e:{"@@transducer/value":e,"@@transducer/reduced":!0}},Lc=Rc,Dc=function(){function e(e,t){this.xf=t,this.f=e,this.found=!1}return e.prototype["@@transducer/init"]=Lc.init,e.prototype["@@transducer/result"]=function(e){return this.found||(e=this.xf["@@transducer/step"](e,void 0)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.found=!0,e=kc(this.xf["@@transducer/step"](e,t))),e},e}(),jc=Ac(Mc(["find"],Oc((function(e,t){return new Dc(e,t)})),(function(e,t){for(var n=0,r=t.length;n<r;){if(e(t[n]))return t[n];n+=1}})));var Uc=function(e){return function(){return!e.apply(this,arguments)}};var Hc=function(e,t){for(var n=0,r=t.length,s=[];n<r;)e(t[n])&&(s[s.length]=t[n]),n+=1;return s};var Fc=function(e){return"[object Object]"===Object.prototype.toString.call(e)};var Bc=xc,qc=function(e){return"[object String]"===Object.prototype.toString.call(e)},zc=Sc((function(e){return!!Bc(e)||!!e&&("object"==typeof e&&(!qc(e)&&(1===e.nodeType?!!e.length:0===e.length||e.length>0&&(e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1)))))})),Vc=function(){function e(e){this.f=e}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(e){return e},e.prototype["@@transducer/step"]=function(e,t){return this.f(e,t)},e}();var Gc=function(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(e){return t.apply(this,arguments)};case 2:return function(e,n){return t.apply(this,arguments)};case 3:return function(e,n,r){return t.apply(this,arguments)};case 4:return function(e,n,r,s){return t.apply(this,arguments)};case 5:return function(e,n,r,s,i){return t.apply(this,arguments)};case 6:return function(e,n,r,s,i,o){return t.apply(this,arguments)};case 7:return function(e,n,r,s,i,o,a){return t.apply(this,arguments)};case 8:return function(e,n,r,s,i,o,a,l){return t.apply(this,arguments)};case 9:return function(e,n,r,s,i,o,a,l,c){return t.apply(this,arguments)};case 10:return function(e,n,r,s,i,o,a,l,c,u){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}},Wc=Gc,Kc=zc,Yc=function(e){return new Vc(e)},$c=Ac((function(e,t){return Wc(e.length,(function(){return e.apply(t,arguments)}))}));function Xc(e,t,n){for(var r=n.next();!r.done;){if((t=e["@@transducer/step"](t,r.value))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r=n.next()}return e["@@transducer/result"](t)}function Qc(e,t,n,r){return e["@@transducer/result"](n[r]($c(e["@@transducer/step"],e),t))}var Jc="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";var Zc=function(e,t,n){if("function"==typeof e&&(e=Yc(e)),Kc(n))return function(e,t,n){for(var r=0,s=n.length;r<s;){if((t=e["@@transducer/step"](t,n[r]))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r+=1}return e["@@transducer/result"](t)}(e,t,n);if("function"==typeof n["fantasy-land/reduce"])return Qc(e,t,n,"fantasy-land/reduce");if(null!=n[Jc])return Xc(e,t,n[Jc]());if("function"==typeof n.next)return Xc(e,t,n);if("function"==typeof n.reduce)return Qc(e,t,n,"reduce");throw new TypeError("reduce: list must be array or iterable")},eu=Ac,tu=Rc,nu=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=tu.init,e.prototype["@@transducer/result"]=tu.result,e.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xf["@@transducer/step"](e,t):e},e}(),ru=eu((function(e,t){return new nu(e,t)}));var su=function(e,t){return Object.prototype.hasOwnProperty.call(t,e)},iu=su,ou=Object.prototype.toString,au=Sc,lu=su,cu=function(){return"[object Arguments]"===ou.call(arguments)?function(e){return"[object Arguments]"===ou.call(e)}:function(e){return iu("callee",e)}}(),uu=!{toString:null}.propertyIsEnumerable("toString"),du=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],pu=function(){return arguments.propertyIsEnumerable("length")}(),hu=function(e,t){for(var n=0;n<e.length;){if(e[n]===t)return!0;n+=1}return!1},fu="function"!=typeof Object.keys||pu?au((function(e){if(Object(e)!==e)return[];var t,n,r=[],s=pu&&cu(e);for(t in e)!lu(t,e)||s&&"length"===t||(r[r.length]=t);if(uu)for(n=du.length-1;n>=0;)lu(t=du[n],e)&&!hu(r,t)&&(r[r.length]=t),n-=1;return r})):au((function(e){return Object(e)!==e?[]:Object.keys(e)})),mu=Hc,gu=Fc,vu=Zc,yu=fu,bu=Uc,xu=Ac(Mc(["filter"],ru,(function(e,t){return gu(t)?vu((function(n,r){return e(t[r])&&(n[r]=t[r]),n}),{},yu(t)):mu(e,t)}))),wu=Ac((function(e,t){return xu(bu(e),t)}));var _u=function(e,t){var n;t=t||[];var r=(e=e||[]).length,s=t.length,i=[];for(n=0;n<r;)i[i.length]=e[n],n+=1;for(n=0;n<s;)i[i.length]=t[n],n+=1;return i},Cu=Gc,Su=_c;var Eu=Gc,Tu=Sc,Au=function e(t,n,r){return function(){for(var s=[],i=0,o=t,a=0;a<n.length||i<arguments.length;){var l;a<n.length&&(!Su(n[a])||i>=arguments.length)?l=n[a]:(l=arguments[i],i+=1),s[a]=l,Su(l)||(o-=1),a+=1}return o<=0?r.apply(this,s):Cu(o,e(t,s,r))}},Pu=Ac((function(e,t){return 1===e?Tu(t):Eu(e,Au(e,[],t))})),Iu=_u,Nu=Pu,Mu=Sc((function(e){return Nu(e.length,(function(){var t=0,n=arguments[0],r=arguments[arguments.length-1],s=Array.prototype.slice.call(arguments,0);return s[0]=function(){var e=n.apply(this,Iu(arguments,[t,r]));return t+=1,e},e.apply(this,s)}))}));var Ru=function(e,t){for(var n=0,r=t.length,s=Array(r);n<r;)s[n]=e(t[n]),n+=1;return s},Ou=Ac,ku=Rc,Lu=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=ku.init,e.prototype["@@transducer/result"]=ku.result,e.prototype["@@transducer/step"]=function(e,t){return this.xf["@@transducer/step"](e,this.f(t))},e}(),Du=Ru,ju=Zc,Uu=Pu,Hu=fu,Fu=Ac(Mc(["fantasy-land/map","map"],Ou((function(e,t){return new Lu(e,t)})),(function(e,t){switch(Object.prototype.toString.call(t)){case"[object Function]":return Uu(t.length,(function(){return e.call(this,t.apply(this,arguments))}));case"[object Object]":return ju((function(n,r){return n[r]=e(t[r]),n}),{},Hu(t));default:return Du(e,t)}}))),Bu={},qu={},zu={},Vu={},Gu=S&&S.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vu,"__esModule",{value:!0});var Wu=Gu({0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376}),Ku=String.fromCodePoint||function(e){var t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e)};Vu.default=function(e){return e>=55296&&e<=57343||e>1114111?"�":(e in Wu.default&&(e=Wu.default[e]),Ku(e))};var Yu={Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",amp:"&",AMP:"&",andand:"⩕",And:"⩓",and:"∧",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angmsd:"∡",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",apacir:"⩯",ap:"≈",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",barwed:"⌅",Barwed:"⌆",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",because:"∵",Because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxdl:"┐",boxdL:"╕",boxDl:"╖",boxDL:"╗",boxdr:"┌",boxdR:"╒",boxDr:"╓",boxDR:"╔",boxh:"─",boxH:"═",boxhd:"┬",boxHd:"╤",boxhD:"╥",boxHD:"╦",boxhu:"┴",boxHu:"╧",boxhU:"╨",boxHU:"╩",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxul:"┘",boxuL:"╛",boxUl:"╜",boxUL:"╝",boxur:"└",boxuR:"╘",boxUr:"╙",boxUR:"╚",boxv:"│",boxV:"║",boxvh:"┼",boxvH:"╪",boxVh:"╫",boxVH:"╬",boxvl:"┤",boxvL:"╡",boxVl:"╢",boxVL:"╣",boxvr:"├",boxvR:"╞",boxVr:"╟",boxVR:"╠",bprime:"‵",breve:"˘",Breve:"˘",brvbar:"¦",bscr:"𝒷",Bscr:"ℬ",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsolb:"⧅",bsol:"\\",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",capand:"⩄",capbrcup:"⩉",capcap:"⩋",cap:"∩",Cap:"⋒",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",centerdot:"·",CenterDot:"·",cfr:"𝔠",Cfr:"ℭ",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cir:"○",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",colon:":",Colon:"∷",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",conint:"∮",Conint:"∯",ContourIntegral:"∮",copf:"𝕔",Copf:"ℂ",coprod:"∐",Coproduct:"∐",copy:"©",COPY:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",cross:"✗",Cross:"⨯",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",cupbrcap:"⩈",cupcap:"⩆",CupCap:"≍",cup:"∪",Cup:"⋓",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",dagger:"†",Dagger:"‡",daleth:"ℸ",darr:"↓",Darr:"↡",dArr:"⇓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",ddagger:"‡",ddarr:"⇊",DD:"ⅅ",dd:"ⅆ",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",diamond:"⋄",Diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrowBar:"⤓",downarrow:"↓",DownArrow:"↓",Downarrow:"⇓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVectorBar:"⥖",DownLeftVector:"↽",DownRightTeeVector:"⥟",DownRightVectorBar:"⥗",DownRightVector:"⇁",DownTeeArrow:"↧",DownTee:"⊤",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",Ecirc:"Ê",ecirc:"ê",ecir:"≖",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",edot:"ė",eDot:"≑",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp13:" ",emsp14:" ",emsp:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",escr:"ℯ",Escr:"ℰ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",exponentiale:"ⅇ",ExponentialE:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",forall:"∀",ForAll:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",fscr:"𝒻",Fscr:"ℱ",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",ge:"≥",gE:"≧",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",gescc:"⪩",ges:"⩾",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",gg:"≫",Gg:"⋙",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gla:"⪥",gl:"≷",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gne:"⪈",gnE:"≩",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",gtcc:"⪧",gtcir:"⩺",gt:">",GT:">",Gt:"≫",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",harrcir:"⥈",harr:"↔",hArr:"⇔",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",hfr:"𝔥",Hfr:"ℌ",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",hopf:"𝕙",Hopf:"ℍ",horbar:"―",HorizontalLine:"─",hscr:"𝒽",Hscr:"ℋ",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",ifr:"𝔦",Ifr:"ℑ",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",Im:"ℑ",imof:"⊷",imped:"Ƶ",Implies:"⇒",incare:"℅",in:"∈",infin:"∞",infintie:"⧝",inodot:"ı",intcal:"⊺",int:"∫",Int:"∬",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",iscr:"𝒾",Iscr:"ℐ",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",lang:"⟨",Lang:"⟪",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",larrb:"⇤",larrbfs:"⤟",larr:"←",Larr:"↞",lArr:"⇐",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",latail:"⤙",lAtail:"⤛",lat:"⪫",late:"⪭",lates:"⪭︀",lbarr:"⤌",lBarr:"⤎",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",le:"≤",lE:"≦",LeftAngleBracket:"⟨",LeftArrowBar:"⇤",leftarrow:"←",LeftArrow:"←",Leftarrow:"⇐",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVectorBar:"⥙",LeftDownVector:"⇃",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",leftrightarrow:"↔",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTeeArrow:"↤",LeftTee:"⊣",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangleBar:"⧏",LeftTriangle:"⊲",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVectorBar:"⥘",LeftUpVector:"↿",LeftVectorBar:"⥒",LeftVector:"↼",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",lescc:"⪨",les:"⩽",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",llarr:"⇇",ll:"≪",Ll:"⋘",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoustache:"⎰",lmoust:"⎰",lnap:"⪉",lnapprox:"⪉",lne:"⪇",lnE:"≨",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",longleftarrow:"⟵",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftrightarrow:"⟷",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longmapsto:"⟼",longrightarrow:"⟶",LongRightArrow:"⟶",Longrightarrow:"⟹",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",lscr:"𝓁",Lscr:"ℒ",lsh:"↰",Lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",ltcc:"⪦",ltcir:"⩹",lt:"<",LT:"<",Lt:"≪",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",midast:"*",midcir:"⫰",mid:"∣",middot:"·",minusb:"⊟",minus:"−",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",mscr:"𝓂",Mscr:"ℳ",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natural:"♮",naturals:"ℕ",natur:"♮",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",nearhk:"⤤",nearr:"↗",neArr:"⇗",nearrow:"↗",ne:"≠",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nharr:"↮",nhArr:"⇎",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlarr:"↚",nlArr:"⇍",nldr:"‥",nlE:"≦̸",nle:"≰",nleftarrow:"↚",nLeftarrow:"⇍",nleftrightarrow:"↮",nLeftrightarrow:"⇎",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",nopf:"𝕟",Nopf:"ℕ",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangleBar:"⧏̸",NotLeftTriangle:"⋪",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangleBar:"⧐̸",NotRightTriangle:"⋫",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",nparallel:"∦",npar:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",nprec:"⊀",npreceq:"⪯̸",npre:"⪯̸",nrarrc:"⤳̸",nrarr:"↛",nrArr:"⇏",nrarrw:"↝̸",nrightarrow:"↛",nRightarrow:"⇏",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nvdash:"⊬",nvDash:"⊭",nVdash:"⊮",nVDash:"⊯",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwarr:"↖",nwArr:"⇖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",Ocirc:"Ô",ocirc:"ô",ocir:"⊚",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",orarr:"↻",Or:"⩔",or:"∨",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",otimesas:"⨶",Otimes:"⨷",otimes:"⊗",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",para:"¶",parallel:"∥",par:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plus:"+",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",popf:"𝕡",Popf:"ℙ",pound:"£",prap:"⪷",Pr:"⪻",pr:"≺",prcue:"≼",precapprox:"⪷",prec:"≺",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",pre:"⪯",prE:"⪳",precsim:"≾",prime:"′",Prime:"″",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportional:"∝",Proportion:"∷",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",qopf:"𝕢",Qopf:"ℚ",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",quot:'"',QUOT:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",rang:"⟩",Rang:"⟫",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarr:"→",Rarr:"↠",rArr:"⇒",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",ratail:"⤚",rAtail:"⤜",ratio:"∶",rationals:"ℚ",rbarr:"⤍",rBarr:"⤏",RBarr:"⤐",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",Re:"ℜ",rect:"▭",reg:"®",REG:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",rfr:"𝔯",Rfr:"ℜ",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrowBar:"⇥",rightarrow:"→",RightArrow:"→",Rightarrow:"⇒",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVectorBar:"⥕",RightDownVector:"⇂",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTeeArrow:"↦",RightTee:"⊢",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangleBar:"⧐",RightTriangle:"⊳",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVectorBar:"⥔",RightUpVector:"↾",RightVectorBar:"⥓",RightVector:"⇀",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoustache:"⎱",rmoust:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",ropf:"𝕣",Ropf:"ℝ",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",rscr:"𝓇",Rscr:"ℛ",rsh:"↱",Rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",scap:"⪸",Scaron:"Š",scaron:"š",Sc:"⪼",sc:"≻",sccue:"≽",sce:"⪰",scE:"⪴",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdotb:"⊡",sdot:"⋅",sdote:"⩦",searhk:"⤥",searr:"↘",seArr:"⇘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",solbar:"⌿",solb:"⧄",sol:"/",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",square:"□",Square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squ:"□",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",sub:"⊂",Sub:"⋐",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",subset:"⊂",Subset:"⋐",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succapprox:"⪸",succ:"≻",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",sum:"∑",Sum:"∑",sung:"♪",sup1:"¹",sup2:"²",sup3:"³",sup:"⊃",Sup:"⋑",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",supset:"⊃",Supset:"⋑",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swarr:"↙",swArr:"⇙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"\t",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",therefore:"∴",Therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",ThinSpace:" ",thinsp:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",tilde:"˜",Tilde:"∼",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",timesbar:"⨱",timesb:"⊠",times:"×",timesd:"⨰",tint:"∭",toea:"⤨",topbot:"⌶",topcir:"⫱",top:"⊤",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",trade:"™",TRADE:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",uarr:"↑",Uarr:"↟",uArr:"⇑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrowBar:"⤒",uparrow:"↑",UpArrow:"↑",Uparrow:"⇑",UpArrowDownArrow:"⇅",updownarrow:"↕",UpDownArrow:"↕",Updownarrow:"⇕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",upsi:"υ",Upsi:"ϒ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTeeArrow:"↥",UpTee:"⊥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",varr:"↕",vArr:"⇕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",vBar:"⫨",Vbar:"⫫",vBarv:"⫩",Vcy:"В",vcy:"в",vdash:"⊢",vDash:"⊨",Vdash:"⊩",VDash:"⊫",Vdashl:"⫦",veebar:"⊻",vee:"∨",Vee:"⋁",veeeq:"≚",vellip:"⋮",verbar:"|",Verbar:"‖",vert:"|",Vert:"‖",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",wedge:"∧",Wedge:"⋀",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xharr:"⟷",xhArr:"⟺",Xi:"Ξ",xi:"ξ",xlarr:"⟵",xlArr:"⟸",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrarr:"⟶",xrArr:"⟹",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",yuml:"ÿ",Yuml:"Ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",zfr:"𝔷",Zfr:"ℨ",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",zopf:"𝕫",Zopf:"ℤ",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"};var $u={Aacute:"Á",aacute:"á",Acirc:"Â",acirc:"â",acute:"´",AElig:"Æ",aelig:"æ",Agrave:"À",agrave:"à",amp:"&",AMP:"&",Aring:"Å",aring:"å",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",brvbar:"¦",Ccedil:"Ç",ccedil:"ç",cedil:"¸",cent:"¢",copy:"©",COPY:"©",curren:"¤",deg:"°",divide:"÷",Eacute:"É",eacute:"é",Ecirc:"Ê",ecirc:"ê",Egrave:"È",egrave:"è",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",frac12:"½",frac14:"¼",frac34:"¾",gt:">",GT:">",Iacute:"Í",iacute:"í",Icirc:"Î",icirc:"î",iexcl:"¡",Igrave:"Ì",igrave:"ì",iquest:"¿",Iuml:"Ï",iuml:"ï",laquo:"«",lt:"<",LT:"<",macr:"¯",micro:"µ",middot:"·",nbsp:" ",not:"¬",Ntilde:"Ñ",ntilde:"ñ",Oacute:"Ó",oacute:"ó",Ocirc:"Ô",ocirc:"ô",Ograve:"Ò",ograve:"ò",ordf:"ª",ordm:"º",Oslash:"Ø",oslash:"ø",Otilde:"Õ",otilde:"õ",Ouml:"Ö",ouml:"ö",para:"¶",plusmn:"±",pound:"£",quot:'"',QUOT:'"',raquo:"»",reg:"®",REG:"®",sect:"§",shy:"­",sup1:"¹",sup2:"²",sup3:"³",szlig:"ß",THORN:"Þ",thorn:"þ",times:"×",Uacute:"Ú",uacute:"ú",Ucirc:"Û",ucirc:"û",Ugrave:"Ù",ugrave:"ù",uml:"¨",Uuml:"Ü",uuml:"ü",Yacute:"Ý",yacute:"ý",yen:"¥",yuml:"ÿ"};var Xu={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'},Qu=S&&S.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zu,"__esModule",{value:!0});var Ju=Qu(Vu),Zu=Qu(Yu),ed=Qu($u),td=Qu(Xu);function nd(e){return" "===e||"\n"===e||"\t"===e||"\f"===e||"\r"===e}function rd(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}function sd(e,t,n){var r=e.toLowerCase();return e===r?function(e,s){s===r?e._state=t:(e._state=n,e._index--)}:function(s,i){i===r||i===e?s._state=t:(s._state=n,s._index--)}}function id(e,t){var n=e.toLowerCase();return function(r,s){s===n||s===e?r._state=t:(r._state=3,r._index--)}}var od=sd("C",24,16),ad=sd("D",25,16),ld=sd("A",26,16),cd=sd("T",27,16),ud=sd("A",28,16),dd=id("R",35),pd=id("I",36),hd=id("P",37),fd=id("T",38),md=sd("R",40,1),gd=sd("I",41,1),vd=sd("P",42,1),yd=sd("T",43,1),bd=id("Y",45),xd=id("L",46),wd=id("E",47),_d=sd("Y",49,1),Cd=sd("L",50,1),Sd=sd("E",51,1),Ed=id("I",54),Td=id("T",55),Ad=id("L",56),Pd=id("E",57),Id=sd("I",58,1),Nd=sd("T",59,1),Md=sd("L",60,1),Rd=sd("E",61,1),Od=sd("#",63,64),kd=sd("X",66,65),Ld=function(){function e(e,t){var n;this._state=1,this.buffer="",this.sectionStart=0,this._index=0,this.bufferOffset=0,this.baseState=1,this.special=1,this.running=!0,this.ended=!1,this.cbs=t,this.xmlMode=!!(null==e?void 0:e.xmlMode),this.decodeEntities=null===(n=null==e?void 0:e.decodeEntities)||void 0===n||n}return e.prototype.reset=function(){this._state=1,this.buffer="",this.sectionStart=0,this._index=0,this.bufferOffset=0,this.baseState=1,this.special=1,this.running=!0,this.ended=!1},e.prototype.write=function(e){this.ended&&this.cbs.onerror(Error(".write() after done!")),this.buffer+=e,this.parse()},e.prototype.end=function(e){this.ended&&this.cbs.onerror(Error(".end() after done!")),e&&this.write(e),this.ended=!0,this.running&&this.finish()},e.prototype.pause=function(){this.running=!1},e.prototype.resume=function(){this.running=!0,this._index<this.buffer.length&&this.parse(),this.ended&&this.finish()},e.prototype.getAbsoluteIndex=function(){return this.bufferOffset+this._index},e.prototype.stateText=function(e){"<"===e?(this._index>this.sectionStart&&this.cbs.ontext(this.getSection()),this._state=2,this.sectionStart=this._index):!this.decodeEntities||"&"!==e||1!==this.special&&4!==this.special||(this._index>this.sectionStart&&this.cbs.ontext(this.getSection()),this.baseState=1,this._state=62,this.sectionStart=this._index)},e.prototype.stateBeforeTagName=function(e){"/"===e?this._state=5:"<"===e?(this.cbs.ontext(this.getSection()),this.sectionStart=this._index):">"===e||1!==this.special||nd(e)?this._state=1:"!"===e?(this._state=15,this.sectionStart=this._index+1):"?"===e?(this._state=17,this.sectionStart=this._index+1):rd(e)?(this._state=this.xmlMode||"s"!==e&&"S"!==e?this.xmlMode||"t"!==e&&"T"!==e?3:52:32,this.sectionStart=this._index):this._state=1},e.prototype.stateInTagName=function(e){("/"===e||">"===e||nd(e))&&(this.emitToken("onopentagname"),this._state=8,this._index--)},e.prototype.stateBeforeClosingTagName=function(e){nd(e)||(">"===e?this._state=1:1!==this.special?"s"===e||"S"===e?this._state=33:"t"===e||"T"===e?this._state=53:(this._state=1,this._index--):rd(e)?(this._state=6,this.sectionStart=this._index):(this._state=20,this.sectionStart=this._index))},e.prototype.stateInClosingTagName=function(e){(">"===e||nd(e))&&(this.emitToken("onclosetag"),this._state=7,this._index--)},e.prototype.stateAfterClosingTagName=function(e){">"===e&&(this._state=1,this.sectionStart=this._index+1)},e.prototype.stateBeforeAttributeName=function(e){">"===e?(this.cbs.onopentagend(),this._state=1,this.sectionStart=this._index+1):"/"===e?this._state=4:nd(e)||(this._state=9,this.sectionStart=this._index)},e.prototype.stateInSelfClosingTag=function(e){">"===e?(this.cbs.onselfclosingtag(),this._state=1,this.sectionStart=this._index+1,this.special=1):nd(e)||(this._state=8,this._index--)},e.prototype.stateInAttributeName=function(e){("="===e||"/"===e||">"===e||nd(e))&&(this.cbs.onattribname(this.getSection()),this.sectionStart=-1,this._state=10,this._index--)},e.prototype.stateAfterAttributeName=function(e){"="===e?this._state=11:"/"===e||">"===e?(this.cbs.onattribend(void 0),this._state=8,this._index--):nd(e)||(this.cbs.onattribend(void 0),this._state=9,this.sectionStart=this._index)},e.prototype.stateBeforeAttributeValue=function(e){'"'===e?(this._state=12,this.sectionStart=this._index+1):"'"===e?(this._state=13,this.sectionStart=this._index+1):nd(e)||(this._state=14,this.sectionStart=this._index,this._index--)},e.prototype.handleInAttributeValue=function(e,t){e===t?(this.emitToken("onattribdata"),this.cbs.onattribend(t),this._state=8):this.decodeEntities&&"&"===e&&(this.emitToken("onattribdata"),this.baseState=this._state,this._state=62,this.sectionStart=this._index)},e.prototype.stateInAttributeValueDoubleQuotes=function(e){this.handleInAttributeValue(e,'"')},e.prototype.stateInAttributeValueSingleQuotes=function(e){this.handleInAttributeValue(e,"'")},e.prototype.stateInAttributeValueNoQuotes=function(e){nd(e)||">"===e?(this.emitToken("onattribdata"),this.cbs.onattribend(null),this._state=8,this._index--):this.decodeEntities&&"&"===e&&(this.emitToken("onattribdata"),this.baseState=this._state,this._state=62,this.sectionStart=this._index)},e.prototype.stateBeforeDeclaration=function(e){this._state="["===e?23:"-"===e?18:16},e.prototype.stateInDeclaration=function(e){">"===e&&(this.cbs.ondeclaration(this.getSection()),this._state=1,this.sectionStart=this._index+1)},e.prototype.stateInProcessingInstruction=function(e){">"===e&&(this.cbs.onprocessinginstruction(this.getSection()),this._state=1,this.sectionStart=this._index+1)},e.prototype.stateBeforeComment=function(e){"-"===e?(this._state=19,this.sectionStart=this._index+1):this._state=16},e.prototype.stateInComment=function(e){"-"===e&&(this._state=21)},e.prototype.stateInSpecialComment=function(e){">"===e&&(this.cbs.oncomment(this.buffer.substring(this.sectionStart,this._index)),this._state=1,this.sectionStart=this._index+1)},e.prototype.stateAfterComment1=function(e){this._state="-"===e?22:19},e.prototype.stateAfterComment2=function(e){">"===e?(this.cbs.oncomment(this.buffer.substring(this.sectionStart,this._index-2)),this._state=1,this.sectionStart=this._index+1):"-"!==e&&(this._state=19)},e.prototype.stateBeforeCdata6=function(e){"["===e?(this._state=29,this.sectionStart=this._index+1):(this._state=16,this._index--)},e.prototype.stateInCdata=function(e){"]"===e&&(this._state=30)},e.prototype.stateAfterCdata1=function(e){this._state="]"===e?31:29},e.prototype.stateAfterCdata2=function(e){">"===e?(this.cbs.oncdata(this.buffer.substring(this.sectionStart,this._index-2)),this._state=1,this.sectionStart=this._index+1):"]"!==e&&(this._state=29)},e.prototype.stateBeforeSpecialS=function(e){"c"===e||"C"===e?this._state=34:"t"===e||"T"===e?this._state=44:(this._state=3,this._index--)},e.prototype.stateBeforeSpecialSEnd=function(e){2!==this.special||"c"!==e&&"C"!==e?3!==this.special||"t"!==e&&"T"!==e?this._state=1:this._state=48:this._state=39},e.prototype.stateBeforeSpecialLast=function(e,t){("/"===e||">"===e||nd(e))&&(this.special=t),this._state=3,this._index--},e.prototype.stateAfterSpecialLast=function(e,t){">"===e||nd(e)?(this.special=1,this._state=6,this.sectionStart=this._index-t,this._index--):this._state=1},e.prototype.parseFixedEntity=function(e){if(void 0===e&&(e=this.xmlMode?td.default:Zu.default),this.sectionStart+1<this._index){var t=this.buffer.substring(this.sectionStart+1,this._index);Object.prototype.hasOwnProperty.call(e,t)&&(this.emitPartial(e[t]),this.sectionStart=this._index+1)}},e.prototype.parseLegacyEntity=function(){for(var e=this.sectionStart+1,t=Math.min(this._index-e,6);t>=2;){var n=this.buffer.substr(e,t);if(Object.prototype.hasOwnProperty.call(ed.default,n))return this.emitPartial(ed.default[n]),void(this.sectionStart+=t+1);t--}},e.prototype.stateInNamedEntity=function(e){";"===e?(this.parseFixedEntity(),1===this.baseState&&this.sectionStart+1<this._index&&!this.xmlMode&&this.parseLegacyEntity(),this._state=this.baseState):(e<"0"||e>"9")&&!rd(e)&&(this.xmlMode||this.sectionStart+1===this._index||(1!==this.baseState?"="!==e&&this.parseFixedEntity(ed.default):this.parseLegacyEntity()),this._state=this.baseState,this._index--)},e.prototype.decodeNumericEntity=function(e,t,n){var r=this.sectionStart+e;if(r!==this._index){var s=this.buffer.substring(r,this._index),i=parseInt(s,t);this.emitPartial(Ju.default(i)),this.sectionStart=n?this._index+1:this._index}this._state=this.baseState},e.prototype.stateInNumericEntity=function(e){";"===e?this.decodeNumericEntity(2,10,!0):(e<"0"||e>"9")&&(this.xmlMode?this._state=this.baseState:this.decodeNumericEntity(2,10,!1),this._index--)},e.prototype.stateInHexEntity=function(e){";"===e?this.decodeNumericEntity(3,16,!0):(e<"a"||e>"f")&&(e<"A"||e>"F")&&(e<"0"||e>"9")&&(this.xmlMode?this._state=this.baseState:this.decodeNumericEntity(3,16,!1),this._index--)},e.prototype.cleanup=function(){this.sectionStart<0?(this.buffer="",this.bufferOffset+=this._index,this._index=0):this.running&&(1===this._state?(this.sectionStart!==this._index&&this.cbs.ontext(this.buffer.substr(this.sectionStart)),this.buffer="",this.bufferOffset+=this._index,this._index=0):this.sectionStart===this._index?(this.buffer="",this.bufferOffset+=this._index,this._index=0):(this.buffer=this.buffer.substr(this.sectionStart),this._index-=this.sectionStart,this.bufferOffset+=this.sectionStart),this.sectionStart=0)},e.prototype.parse=function(){for(;this._index<this.buffer.length&&this.running;){var e=this.buffer.charAt(this._index);1===this._state?this.stateText(e):12===this._state?this.stateInAttributeValueDoubleQuotes(e):9===this._state?this.stateInAttributeName(e):19===this._state?this.stateInComment(e):20===this._state?this.stateInSpecialComment(e):8===this._state?this.stateBeforeAttributeName(e):3===this._state?this.stateInTagName(e):6===this._state?this.stateInClosingTagName(e):2===this._state?this.stateBeforeTagName(e):10===this._state?this.stateAfterAttributeName(e):13===this._state?this.stateInAttributeValueSingleQuotes(e):11===this._state?this.stateBeforeAttributeValue(e):5===this._state?this.stateBeforeClosingTagName(e):7===this._state?this.stateAfterClosingTagName(e):32===this._state?this.stateBeforeSpecialS(e):21===this._state?this.stateAfterComment1(e):14===this._state?this.stateInAttributeValueNoQuotes(e):4===this._state?this.stateInSelfClosingTag(e):16===this._state?this.stateInDeclaration(e):15===this._state?this.stateBeforeDeclaration(e):22===this._state?this.stateAfterComment2(e):18===this._state?this.stateBeforeComment(e):33===this._state?this.stateBeforeSpecialSEnd(e):53===this._state?Id(this,e):39===this._state?md(this,e):40===this._state?gd(this,e):41===this._state?vd(this,e):34===this._state?dd(this,e):35===this._state?pd(this,e):36===this._state?hd(this,e):37===this._state?fd(this,e):38===this._state?this.stateBeforeSpecialLast(e,2):42===this._state?yd(this,e):43===this._state?this.stateAfterSpecialLast(e,6):44===this._state?bd(this,e):29===this._state?this.stateInCdata(e):45===this._state?xd(this,e):46===this._state?wd(this,e):47===this._state?this.stateBeforeSpecialLast(e,3):48===this._state?_d(this,e):49===this._state?Cd(this,e):50===this._state?Sd(this,e):51===this._state?this.stateAfterSpecialLast(e,5):52===this._state?Ed(this,e):54===this._state?Td(this,e):55===this._state?Ad(this,e):56===this._state?Pd(this,e):57===this._state?this.stateBeforeSpecialLast(e,4):58===this._state?Nd(this,e):59===this._state?Md(this,e):60===this._state?Rd(this,e):61===this._state?this.stateAfterSpecialLast(e,5):17===this._state?this.stateInProcessingInstruction(e):64===this._state?this.stateInNamedEntity(e):23===this._state?od(this,e):62===this._state?Od(this,e):24===this._state?ad(this,e):25===this._state?ld(this,e):30===this._state?this.stateAfterCdata1(e):31===this._state?this.stateAfterCdata2(e):26===this._state?cd(this,e):27===this._state?ud(this,e):28===this._state?this.stateBeforeCdata6(e):66===this._state?this.stateInHexEntity(e):65===this._state?this.stateInNumericEntity(e):63===this._state?kd(this,e):this.cbs.onerror(Error("unknown _state"),this._state),this._index++}this.cleanup()},e.prototype.finish=function(){this.sectionStart<this._index&&this.handleTrailingData(),this.cbs.onend()},e.prototype.handleTrailingData=function(){var e=this.buffer.substr(this.sectionStart);29===this._state||30===this._state||31===this._state?this.cbs.oncdata(e):19===this._state||21===this._state||22===this._state?this.cbs.oncomment(e):64!==this._state||this.xmlMode?65!==this._state||this.xmlMode?66!==this._state||this.xmlMode?3!==this._state&&8!==this._state&&11!==this._state&&10!==this._state&&9!==this._state&&13!==this._state&&12!==this._state&&14!==this._state&&6!==this._state&&this.cbs.ontext(e):(this.decodeNumericEntity(3,16,!1),this.sectionStart<this._index&&(this._state=this.baseState,this.handleTrailingData())):(this.decodeNumericEntity(2,10,!1),this.sectionStart<this._index&&(this._state=this.baseState,this.handleTrailingData())):(this.parseLegacyEntity(),this.sectionStart<this._index&&(this._state=this.baseState,this.handleTrailingData()))},e.prototype.getSection=function(){return this.buffer.substring(this.sectionStart,this._index)},e.prototype.emitToken=function(e){this.cbs[e](this.getSection()),this.sectionStart=-1},e.prototype.emitPartial=function(e){1!==this.baseState?this.cbs.onattribdata(e):this.cbs.ontext(e)},e}();zu.default=Ld;var Dd=S&&S.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qu,"__esModule",{value:!0}),qu.Parser=void 0;var jd=Dd(zu),Ud=new Set(["input","option","optgroup","select","button","datalist","textarea"]),Hd=new Set(["p"]),Fd={tr:new Set(["tr","th","td"]),th:new Set(["th"]),td:new Set(["thead","th","td"]),body:new Set(["head","link","script"]),li:new Set(["li"]),p:Hd,h1:Hd,h2:Hd,h3:Hd,h4:Hd,h5:Hd,h6:Hd,select:Ud,input:Ud,output:Ud,button:Ud,datalist:Ud,textarea:Ud,option:new Set(["option"]),optgroup:new Set(["optgroup","option"]),dd:new Set(["dt","dd"]),dt:new Set(["dt","dd"]),address:Hd,article:Hd,aside:Hd,blockquote:Hd,details:Hd,div:Hd,dl:Hd,fieldset:Hd,figcaption:Hd,figure:Hd,footer:Hd,form:Hd,header:Hd,hr:Hd,main:Hd,nav:Hd,ol:Hd,pre:Hd,section:Hd,table:Hd,ul:Hd,rt:new Set(["rt","rp"]),rp:new Set(["rt","rp"]),tbody:new Set(["thead","tbody"]),tfoot:new Set(["thead","tbody"])},Bd=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),qd=new Set(["math","svg"]),zd=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),Vd=/\s|\//,Gd=function(){function e(e,t){var n,r,s,i,o;void 0===t&&(t={}),this.startIndex=0,this.endIndex=null,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.options=t,this.cbs=null!=e?e:{},this.lowerCaseTagNames=null!==(n=t.lowerCaseTags)&&void 0!==n?n:!t.xmlMode,this.lowerCaseAttributeNames=null!==(r=t.lowerCaseAttributeNames)&&void 0!==r?r:!t.xmlMode,this.tokenizer=new(null!==(s=t.Tokenizer)&&void 0!==s?s:jd.default)(this.options,this),null===(o=(i=this.cbs).onparserinit)||void 0===o||o.call(i,this)}return e.prototype.updatePosition=function(e){null===this.endIndex?this.tokenizer.sectionStart<=e?this.startIndex=0:this.startIndex=this.tokenizer.sectionStart-e:this.startIndex=this.endIndex+1,this.endIndex=this.tokenizer.getAbsoluteIndex()},e.prototype.ontext=function(e){var t,n;this.updatePosition(1),this.endIndex--,null===(n=(t=this.cbs).ontext)||void 0===n||n.call(t,e)},e.prototype.onopentagname=function(e){var t,n;if(this.lowerCaseTagNames&&(e=e.toLowerCase()),this.tagname=e,!this.options.xmlMode&&Object.prototype.hasOwnProperty.call(Fd,e))for(var r=void 0;this.stack.length>0&&Fd[e].has(r=this.stack[this.stack.length-1]);)this.onclosetag(r);!this.options.xmlMode&&Bd.has(e)||(this.stack.push(e),qd.has(e)?this.foreignContext.push(!0):zd.has(e)&&this.foreignContext.push(!1)),null===(n=(t=this.cbs).onopentagname)||void 0===n||n.call(t,e),this.cbs.onopentag&&(this.attribs={})},e.prototype.onopentagend=function(){var e,t;this.updatePosition(1),this.attribs&&(null===(t=(e=this.cbs).onopentag)||void 0===t||t.call(e,this.tagname,this.attribs),this.attribs=null),!this.options.xmlMode&&this.cbs.onclosetag&&Bd.has(this.tagname)&&this.cbs.onclosetag(this.tagname),this.tagname=""},e.prototype.onclosetag=function(e){if(this.updatePosition(1),this.lowerCaseTagNames&&(e=e.toLowerCase()),(qd.has(e)||zd.has(e))&&this.foreignContext.pop(),!this.stack.length||!this.options.xmlMode&&Bd.has(e))this.options.xmlMode||"br"!==e&&"p"!==e||(this.onopentagname(e),this.closeCurrentTag());else{var t=this.stack.lastIndexOf(e);if(-1!==t)if(this.cbs.onclosetag)for(t=this.stack.length-t;t--;)this.cbs.onclosetag(this.stack.pop());else this.stack.length=t;else"p"!==e||this.options.xmlMode||(this.onopentagname(e),this.closeCurrentTag())}},e.prototype.onselfclosingtag=function(){this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?this.closeCurrentTag():this.onopentagend()},e.prototype.closeCurrentTag=function(){var e,t,n=this.tagname;this.onopentagend(),this.stack[this.stack.length-1]===n&&(null===(t=(e=this.cbs).onclosetag)||void 0===t||t.call(e,n),this.stack.pop())},e.prototype.onattribname=function(e){this.lowerCaseAttributeNames&&(e=e.toLowerCase()),this.attribname=e},e.prototype.onattribdata=function(e){this.attribvalue+=e},e.prototype.onattribend=function(e){var t,n;null===(n=(t=this.cbs).onattribute)||void 0===n||n.call(t,this.attribname,this.attribvalue,e),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribname="",this.attribvalue=""},e.prototype.getInstructionName=function(e){var t=e.search(Vd),n=t<0?e:e.substr(0,t);return this.lowerCaseTagNames&&(n=n.toLowerCase()),n},e.prototype.ondeclaration=function(e){if(this.cbs.onprocessinginstruction){var t=this.getInstructionName(e);this.cbs.onprocessinginstruction("!"+t,"!"+e)}},e.prototype.onprocessinginstruction=function(e){if(this.cbs.onprocessinginstruction){var t=this.getInstructionName(e);this.cbs.onprocessinginstruction("?"+t,"?"+e)}},e.prototype.oncomment=function(e){var t,n,r,s;this.updatePosition(4),null===(n=(t=this.cbs).oncomment)||void 0===n||n.call(t,e),null===(s=(r=this.cbs).oncommentend)||void 0===s||s.call(r)},e.prototype.oncdata=function(e){var t,n,r,s,i,o;this.updatePosition(1),this.options.xmlMode||this.options.recognizeCDATA?(null===(n=(t=this.cbs).oncdatastart)||void 0===n||n.call(t),null===(s=(r=this.cbs).ontext)||void 0===s||s.call(r,e),null===(o=(i=this.cbs).oncdataend)||void 0===o||o.call(i)):this.oncomment("[CDATA["+e+"]]")},e.prototype.onerror=function(e){var t,n;null===(n=(t=this.cbs).onerror)||void 0===n||n.call(t,e)},e.prototype.onend=function(){var e,t;if(this.cbs.onclosetag)for(var n=this.stack.length;n>0;this.cbs.onclosetag(this.stack[--n]));null===(t=(e=this.cbs).onend)||void 0===t||t.call(e)},e.prototype.reset=function(){var e,t,n,r;null===(t=(e=this.cbs).onreset)||void 0===t||t.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack=[],null===(r=(n=this.cbs).onparserinit)||void 0===r||r.call(n,this)},e.prototype.parseComplete=function(e){this.reset(),this.end(e)},e.prototype.write=function(e){this.tokenizer.write(e)},e.prototype.end=function(e){this.tokenizer.end(e)},e.prototype.pause=function(){this.tokenizer.pause()},e.prototype.resume=function(){this.tokenizer.resume()},e.prototype.parseChunk=function(e){this.write(e)},e.prototype.done=function(e){this.end(e)},e}();qu.Parser=Gd;var Wd,Kd={},Yd={},$d=S&&S.__extends||(Wd=function(e,t){return(Wd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Wd(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Xd=S&&S.__assign||function(){return(Xd=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};Object.defineProperty(Yd,"__esModule",{value:!0}),Yd.cloneNode=Yd.Element=Yd.NodeWithChildren=Yd.ProcessingInstruction=Yd.Comment=Yd.Text=Yd.DataNode=Yd.Node=void 0;var Qd=new Map([["tag",1],["script",1],["style",1],["directive",1],["text",3],["cdata",4],["comment",8]]),Jd=function(){function e(e){this.type=e,this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"nodeType",{get:function(){var e;return null!==(e=Qd.get(this.type))&&void 0!==e?e:1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(e){this.parent=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(e){this.prev=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(e){this.next=e},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(e){return void 0===e&&(e=!1),ip(this,e)},e}();Yd.Node=Jd;var Zd=function(e){function t(t,n){var r=e.call(this,t)||this;return r.data=n,r}return $d(t,e),Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(e){this.data=e},enumerable:!1,configurable:!0}),t}(Jd);Yd.DataNode=Zd;var ep=function(e){function t(t){return e.call(this,"text",t)||this}return $d(t,e),t}(Zd);Yd.Text=ep;var tp=function(e){function t(t){return e.call(this,"comment",t)||this}return $d(t,e),t}(Zd);Yd.Comment=tp;var np=function(e){function t(t,n){var r=e.call(this,"directive",n)||this;return r.name=t,r}return $d(t,e),t}(Zd);Yd.ProcessingInstruction=np;var rp=function(e){function t(t,n){var r=e.call(this,t)||this;return r.children=n,r}return $d(t,e),Object.defineProperty(t.prototype,"firstChild",{get:function(){var e;return null!==(e=this.children[0])&&void 0!==e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(e){this.children=e},enumerable:!1,configurable:!0}),t}(Jd);Yd.NodeWithChildren=rp;var sp=function(e){function t(t,n,r){void 0===r&&(r=[]);var s=e.call(this,"script"===t?"script":"style"===t?"style":"tag",r)||this;return s.name=t,s.attribs=n,s.attribs=n,s}return $d(t,e),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(e){this.name=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var e=this;return Object.keys(this.attribs).map((function(t){return{name:t,value:e.attribs[t]}}))},enumerable:!1,configurable:!0}),t}(rp);function ip(e,t){switch(void 0===t&&(t=!1),e.type){case"text":return new ep(e.data);case"directive":var n=e;return new np(n.name,n.data);case"comment":return new tp(e.data);case"tag":case"script":case"style":var r=e,s=t?op(r.children):[],i=new sp(r.name,Xd({},r.attribs),s);return s.forEach((function(e){return e.parent=i})),i;case"cdata":s=t?op(e.children):[];var o=new rp("cdata",s);return s.forEach((function(e){return e.parent=o})),o;case"doctype":throw new Error("Not implemented yet: ElementType.Doctype case")}}function op(e){for(var t=e.map((function(e){return ip(e,!0)})),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}Yd.Element=sp,Yd.cloneNode=ip,function(e){var t=S&&S.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=S&&S.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var r=Yd;n(Yd,e);var s=/\s+/g,i={normalizeWhitespace:!1,withStartIndices:!1,withEndIndices:!1},o=function(){function e(e,t,n){this.dom=[],this._done=!1,this._tagStack=[],this._lastNode=null,this._parser=null,"function"==typeof t&&(n=t,t=i),"object"==typeof e&&(t=e,e=void 0),this._callback=null!=e?e:null,this._options=null!=t?t:i,this._elementCB=null!=n?n:null}return e.prototype.onparserinit=function(e){this._parser=e},e.prototype.onreset=function(){var e;this.dom=[],this._done=!1,this._tagStack=[],this._lastNode=null,this._parser=null!==(e=this._parser)&&void 0!==e?e:null},e.prototype.onend=function(){this._done||(this._done=!0,this._parser=null,this.handleCallback(null))},e.prototype.onerror=function(e){this.handleCallback(e)},e.prototype.onclosetag=function(){this._lastNode=null;var e=this._tagStack.pop();e&&this._parser&&(this._options.withEndIndices&&(e.endIndex=this._parser.endIndex),this._elementCB&&this._elementCB(e))},e.prototype.onopentag=function(e,t){var n=new r.Element(e,t);this.addNode(n),this._tagStack.push(n)},e.prototype.ontext=function(e){var t=this._options.normalizeWhitespace,n=this._lastNode;if(n&&"text"===n.type)t?n.data=(n.data+e).replace(s," "):n.data+=e;else{t&&(e=e.replace(s," "));var i=new r.Text(e);this.addNode(i),this._lastNode=i}},e.prototype.oncomment=function(e){if(this._lastNode&&"comment"===this._lastNode.type)this._lastNode.data+=e;else{var t=new r.Comment(e);this.addNode(t),this._lastNode=t}},e.prototype.oncommentend=function(){this._lastNode=null},e.prototype.oncdatastart=function(){var e=new r.Text(""),t=new r.NodeWithChildren("cdata",[e]);this.addNode(t),e.parent=t,this._lastNode=e},e.prototype.oncdataend=function(){this._lastNode=null},e.prototype.onprocessinginstruction=function(e,t){var n=new r.ProcessingInstruction(e,t);this.addNode(n)},e.prototype.handleCallback=function(e){if("function"==typeof this._callback)this._callback(e,this.dom);else if(e)throw e},e.prototype.addNode=function(e){var t=this._tagStack[this._tagStack.length-1],n=t?t.children:this.dom,r=n[n.length-1];this._parser&&(this._options.withStartIndices&&(e.startIndex=this._parser.startIndex),this._options.withEndIndices&&(e.endIndex=this._parser.endIndex)),n.push(e),r&&(e.prev=r,r.next=e),t&&(e.parent=t),this._lastNode=null},e.prototype.addDataNode=function(e){this.addNode(e),this._lastNode=e},e}();e.DomHandler=o,e.default=o}(Kd);var ap,lp,cp,up={};ap=up,Object.defineProperty(ap,"__esModule",{value:!0}),ap.Doctype=ap.CDATA=ap.Tag=ap.Style=ap.Script=ap.Comment=ap.Directive=ap.Text=ap.Root=ap.isTag=ap.ElementType=void 0,(cp=lp=ap.ElementType||(ap.ElementType={})).Root="root",cp.Text="text",cp.Directive="directive",cp.Comment="comment",cp.Script="script",cp.Style="style",cp.Tag="tag",cp.CDATA="cdata",cp.Doctype="doctype",ap.isTag=function(e){return e.type===lp.Tag||e.type===lp.Script||e.type===lp.Style},ap.Root=lp.Root,ap.Text=lp.Text,ap.Directive=lp.Directive,ap.Comment=lp.Comment,ap.Script=lp.Script,ap.Style=lp.Style,ap.Tag=lp.Tag,ap.CDATA=lp.CDATA,ap.Doctype=lp.Doctype;var dp={},pp={},hp={},fp={},mp={},gp=S&&S.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vp=S&&S.__assign||function(){return(vp=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};Object.defineProperty(mp,"__esModule",{value:!0}),mp.cloneNode=mp.hasChildren=mp.isDocument=mp.isDirective=mp.isComment=mp.isText=mp.isCDATA=mp.isTag=mp.Element=mp.Document=mp.NodeWithChildren=mp.ProcessingInstruction=mp.Comment=mp.Text=mp.DataNode=mp.Node=void 0;var yp=up,bp=new Map([[yp.ElementType.Tag,1],[yp.ElementType.Script,1],[yp.ElementType.Style,1],[yp.ElementType.Directive,1],[yp.ElementType.Text,3],[yp.ElementType.CDATA,4],[yp.ElementType.Comment,8],[yp.ElementType.Root,9]]),xp=function(){function e(e){this.type=e,this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"nodeType",{get:function(){var e;return null!==(e=bp.get(this.type))&&void 0!==e?e:1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(e){this.parent=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(e){this.prev=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(e){this.next=e},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(e){return void 0===e&&(e=!1),kp(this,e)},e}();mp.Node=xp;var wp=function(e){function t(t,n){var r=e.call(this,t)||this;return r.data=n,r}return gp(t,e),Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(e){this.data=e},enumerable:!1,configurable:!0}),t}(xp);mp.DataNode=wp;var _p=function(e){function t(t){return e.call(this,yp.ElementType.Text,t)||this}return gp(t,e),t}(wp);mp.Text=_p;var Cp=function(e){function t(t){return e.call(this,yp.ElementType.Comment,t)||this}return gp(t,e),t}(wp);mp.Comment=Cp;var Sp=function(e){function t(t,n){var r=e.call(this,yp.ElementType.Directive,n)||this;return r.name=t,r}return gp(t,e),t}(wp);mp.ProcessingInstruction=Sp;var Ep=function(e){function t(t,n){var r=e.call(this,t)||this;return r.children=n,r}return gp(t,e),Object.defineProperty(t.prototype,"firstChild",{get:function(){var e;return null!==(e=this.children[0])&&void 0!==e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(e){this.children=e},enumerable:!1,configurable:!0}),t}(xp);mp.NodeWithChildren=Ep;var Tp=function(e){function t(t){return e.call(this,yp.ElementType.Root,t)||this}return gp(t,e),t}(Ep);mp.Document=Tp;var Ap=function(e){function t(t,n,r,s){void 0===r&&(r=[]),void 0===s&&(s="script"===t?yp.ElementType.Script:"style"===t?yp.ElementType.Style:yp.ElementType.Tag);var i=e.call(this,s,r)||this;return i.name=t,i.attribs=n,i}return gp(t,e),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(e){this.name=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var e=this;return Object.keys(this.attribs).map((function(t){var n,r;return{name:t,value:e.attribs[t],namespace:null===(n=e["x-attribsNamespace"])||void 0===n?void 0:n[t],prefix:null===(r=e["x-attribsPrefix"])||void 0===r?void 0:r[t]}}))},enumerable:!1,configurable:!0}),t}(Ep);function Pp(e){return(0,yp.isTag)(e)}function Ip(e){return e.type===yp.ElementType.CDATA}function Np(e){return e.type===yp.ElementType.Text}function Mp(e){return e.type===yp.ElementType.Comment}function Rp(e){return e.type===yp.ElementType.Directive}function Op(e){return e.type===yp.ElementType.Root}function kp(e,t){var n;if(void 0===t&&(t=!1),Np(e))n=new _p(e.data);else if(Mp(e))n=new Cp(e.data);else if(Pp(e)){var r=t?Lp(e.children):[],s=new Ap(e.name,vp({},e.attribs),r);r.forEach((function(e){return e.parent=s})),e["x-attribsNamespace"]&&(s["x-attribsNamespace"]=vp({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(s["x-attribsPrefix"]=vp({},e["x-attribsPrefix"])),n=s}else if(Ip(e)){r=t?Lp(e.children):[];var i=new Ep(yp.ElementType.CDATA,r);r.forEach((function(e){return e.parent=i})),n=i}else if(Op(e)){r=t?Lp(e.children):[];var o=new Tp(r);r.forEach((function(e){return e.parent=o})),e["x-mode"]&&(o["x-mode"]=e["x-mode"]),n=o}else{if(!Rp(e))throw new Error("Not implemented yet: "+e.type);var a=new Sp(e.name,e.data);null!=e["x-name"]&&(a["x-name"]=e["x-name"],a["x-publicId"]=e["x-publicId"],a["x-systemId"]=e["x-systemId"]),n=a}return n.startIndex=e.startIndex,n.endIndex=e.endIndex,n}function Lp(e){for(var t=e.map((function(e){return kp(e,!0)})),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}mp.Element=Ap,mp.isTag=Pp,mp.isCDATA=Ip,mp.isText=Np,mp.isComment=Mp,mp.isDirective=Rp,mp.isDocument=Op,mp.hasChildren=function(e){return Object.prototype.hasOwnProperty.call(e,"children")},mp.cloneNode=kp,function(e){var t=S&&S.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=S&&S.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var r=up,s=mp;n(mp,e);var i=/\s+/g,o={normalizeWhitespace:!1,withStartIndices:!1,withEndIndices:!1,xmlMode:!1},a=function(){function e(e,t,n){this.dom=[],this.root=new s.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,"function"==typeof t&&(n=t,t=o),"object"==typeof e&&(t=e,e=void 0),this.callback=null!=e?e:null,this.options=null!=t?t:o,this.elementCB=null!=n?n:null}return e.prototype.onparserinit=function(e){this.parser=e},e.prototype.onreset=function(){this.dom=[],this.root=new s.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},e.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},e.prototype.onerror=function(e){this.handleCallback(e)},e.prototype.onclosetag=function(){this.lastNode=null;var e=this.tagStack.pop();this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(e)},e.prototype.onopentag=function(e,t){var n=this.options.xmlMode?r.ElementType.Tag:void 0,i=new s.Element(e,t,void 0,n);this.addNode(i),this.tagStack.push(i)},e.prototype.ontext=function(e){var t=this.options.normalizeWhitespace,n=this.lastNode;if(n&&n.type===r.ElementType.Text)t?n.data=(n.data+e).replace(i," "):n.data+=e,this.options.withEndIndices&&(n.endIndex=this.parser.endIndex);else{t&&(e=e.replace(i," "));var o=new s.Text(e);this.addNode(o),this.lastNode=o}},e.prototype.oncomment=function(e){if(this.lastNode&&this.lastNode.type===r.ElementType.Comment)this.lastNode.data+=e;else{var t=new s.Comment(e);this.addNode(t),this.lastNode=t}},e.prototype.oncommentend=function(){this.lastNode=null},e.prototype.oncdatastart=function(){var e=new s.Text(""),t=new s.NodeWithChildren(r.ElementType.CDATA,[e]);this.addNode(t),e.parent=t,this.lastNode=e},e.prototype.oncdataend=function(){this.lastNode=null},e.prototype.onprocessinginstruction=function(e,t){var n=new s.ProcessingInstruction(e,t);this.addNode(n)},e.prototype.handleCallback=function(e){if("function"==typeof this.callback)this.callback(e,this.dom);else if(e)throw e},e.prototype.addNode=function(e){var t=this.tagStack[this.tagStack.length-1],n=t.children[t.children.length-1];this.options.withStartIndices&&(e.startIndex=this.parser.startIndex),this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),t.children.push(e),n&&(e.prev=n,n.next=e),e.parent=t,this.lastNode=null},e}();e.DomHandler=a,e.default=a}(fp);var Dp={},jp={},Up={},Hp=S&&S.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Up,"__esModule",{value:!0}),Up.decodeHTML=Up.decodeHTMLStrict=Up.decodeXML=void 0;var Fp=Hp(Yu),Bp=Hp($u),qp=Hp(Xu),zp=Hp(Vu),Vp=/&(?:[a-zA-Z0-9]+|#[xX][\da-fA-F]+|#\d+);/g;function Gp(e){var t=Kp(e);return function(e){return String(e).replace(Vp,t)}}Up.decodeXML=Gp(qp.default),Up.decodeHTMLStrict=Gp(Fp.default);var Wp=function(e,t){return e<t?1:-1};function Kp(e){return function(t){if("#"===t.charAt(1)){var n=t.charAt(2);return"X"===n||"x"===n?zp.default(parseInt(t.substr(3),16)):zp.default(parseInt(t.substr(2),10))}return e[t.slice(1,-1)]||t}}Up.decodeHTML=function(){for(var e=Object.keys(Bp.default).sort(Wp),t=Object.keys(Fp.default).sort(Wp),n=0,r=0;n<t.length;n++)e[r]===t[n]?(t[n]+=";?",r++):t[n]+=";";var s=new RegExp("&(?:"+t.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),i=Kp(Fp.default);function o(e){return";"!==e.substr(-1)&&(e+=";"),i(e)}return function(e){return String(e).replace(s,o)}}();var Yp={},$p=S&&S.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Yp,"__esModule",{value:!0}),Yp.escapeUTF8=Yp.escape=Yp.encodeNonAsciiHTML=Yp.encodeHTML=Yp.encodeXML=void 0;var Xp=nh($p(Xu).default),Qp=rh(Xp);Yp.encodeXML=lh(Xp);var Jp,Zp,eh=nh($p(Yu).default),th=rh(eh);function nh(e){return Object.keys(e).sort().reduce((function(t,n){return t[e[n]]="&"+n+";",t}),{})}function rh(e){for(var t=[],n=[],r=0,s=Object.keys(e);r<s.length;r++){var i=s[r];1===i.length?t.push("\\"+i):n.push(i)}t.sort();for(var o=0;o<t.length-1;o++){for(var a=o;a<t.length-1&&t[a].charCodeAt(1)+1===t[a+1].charCodeAt(1);)a+=1;var l=1+a-o;l<3||t.splice(o,l,t[o]+"-"+t[a])}return n.unshift("["+t.join("")+"]"),new RegExp(n.join("|"),"g")}Yp.encodeHTML=(Jp=eh,Zp=th,function(e){return e.replace(Zp,(function(e){return Jp[e]})).replace(sh,oh)}),Yp.encodeNonAsciiHTML=lh(eh);var sh=/(?:[\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,ih=null!=String.prototype.codePointAt?function(e){return e.codePointAt(0)}:function(e){return 1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)-56320+65536};function oh(e){return"&#x"+(e.length>1?ih(e):e.charCodeAt(0)).toString(16).toUpperCase()+";"}var ah=new RegExp(Qp.source+"|"+sh.source,"g");function lh(e){return function(t){return t.replace(ah,(function(t){return e[t]||oh(t)}))}}Yp.escape=function(e){return e.replace(ah,oh)},Yp.escapeUTF8=function(e){return e.replace(Qp,oh)},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.decodeXMLStrict=e.decodeHTML5Strict=e.decodeHTML4Strict=e.decodeHTML5=e.decodeHTML4=e.decodeHTMLStrict=e.decodeHTML=e.decodeXML=e.encodeHTML5=e.encodeHTML4=e.escapeUTF8=e.escape=e.encodeNonAsciiHTML=e.encodeHTML=e.encodeXML=e.encode=e.decodeStrict=e.decode=void 0;var t=Up,n=Yp;e.decode=function(e,n){return(!n||n<=0?t.decodeXML:t.decodeHTML)(e)},e.decodeStrict=function(e,n){return(!n||n<=0?t.decodeXML:t.decodeHTMLStrict)(e)},e.encode=function(e,t){return(!t||t<=0?n.encodeXML:n.encodeHTML)(e)};var r=Yp;Object.defineProperty(e,"encodeXML",{enumerable:!0,get:function(){return r.encodeXML}}),Object.defineProperty(e,"encodeHTML",{enumerable:!0,get:function(){return r.encodeHTML}}),Object.defineProperty(e,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return r.encodeNonAsciiHTML}}),Object.defineProperty(e,"escape",{enumerable:!0,get:function(){return r.escape}}),Object.defineProperty(e,"escapeUTF8",{enumerable:!0,get:function(){return r.escapeUTF8}}),Object.defineProperty(e,"encodeHTML4",{enumerable:!0,get:function(){return r.encodeHTML}}),Object.defineProperty(e,"encodeHTML5",{enumerable:!0,get:function(){return r.encodeHTML}});var s=Up;Object.defineProperty(e,"decodeXML",{enumerable:!0,get:function(){return s.decodeXML}}),Object.defineProperty(e,"decodeHTML",{enumerable:!0,get:function(){return s.decodeHTML}}),Object.defineProperty(e,"decodeHTMLStrict",{enumerable:!0,get:function(){return s.decodeHTMLStrict}}),Object.defineProperty(e,"decodeHTML4",{enumerable:!0,get:function(){return s.decodeHTML}}),Object.defineProperty(e,"decodeHTML5",{enumerable:!0,get:function(){return s.decodeHTML}}),Object.defineProperty(e,"decodeHTML4Strict",{enumerable:!0,get:function(){return s.decodeHTMLStrict}}),Object.defineProperty(e,"decodeHTML5Strict",{enumerable:!0,get:function(){return s.decodeHTMLStrict}}),Object.defineProperty(e,"decodeXMLStrict",{enumerable:!0,get:function(){return s.decodeXML}})}(jp);var ch={};Object.defineProperty(ch,"__esModule",{value:!0}),ch.attributeNames=ch.elementNames=void 0,ch.elementNames=new Map([["altglyph","altGlyph"],["altglyphdef","altGlyphDef"],["altglyphitem","altGlyphItem"],["animatecolor","animateColor"],["animatemotion","animateMotion"],["animatetransform","animateTransform"],["clippath","clipPath"],["feblend","feBlend"],["fecolormatrix","feColorMatrix"],["fecomponenttransfer","feComponentTransfer"],["fecomposite","feComposite"],["feconvolvematrix","feConvolveMatrix"],["fediffuselighting","feDiffuseLighting"],["fedisplacementmap","feDisplacementMap"],["fedistantlight","feDistantLight"],["fedropshadow","feDropShadow"],["feflood","feFlood"],["fefunca","feFuncA"],["fefuncb","feFuncB"],["fefuncg","feFuncG"],["fefuncr","feFuncR"],["fegaussianblur","feGaussianBlur"],["feimage","feImage"],["femerge","feMerge"],["femergenode","feMergeNode"],["femorphology","feMorphology"],["feoffset","feOffset"],["fepointlight","fePointLight"],["fespecularlighting","feSpecularLighting"],["fespotlight","feSpotLight"],["fetile","feTile"],["feturbulence","feTurbulence"],["foreignobject","foreignObject"],["glyphref","glyphRef"],["lineargradient","linearGradient"],["radialgradient","radialGradient"],["textpath","textPath"]]),ch.attributeNames=new Map([["definitionurl","definitionURL"],["attributename","attributeName"],["attributetype","attributeType"],["basefrequency","baseFrequency"],["baseprofile","baseProfile"],["calcmode","calcMode"],["clippathunits","clipPathUnits"],["diffuseconstant","diffuseConstant"],["edgemode","edgeMode"],["filterunits","filterUnits"],["glyphref","glyphRef"],["gradienttransform","gradientTransform"],["gradientunits","gradientUnits"],["kernelmatrix","kernelMatrix"],["kernelunitlength","kernelUnitLength"],["keypoints","keyPoints"],["keysplines","keySplines"],["keytimes","keyTimes"],["lengthadjust","lengthAdjust"],["limitingconeangle","limitingConeAngle"],["markerheight","markerHeight"],["markerunits","markerUnits"],["markerwidth","markerWidth"],["maskcontentunits","maskContentUnits"],["maskunits","maskUnits"],["numoctaves","numOctaves"],["pathlength","pathLength"],["patterncontentunits","patternContentUnits"],["patterntransform","patternTransform"],["patternunits","patternUnits"],["pointsatx","pointsAtX"],["pointsaty","pointsAtY"],["pointsatz","pointsAtZ"],["preservealpha","preserveAlpha"],["preserveaspectratio","preserveAspectRatio"],["primitiveunits","primitiveUnits"],["refx","refX"],["refy","refY"],["repeatcount","repeatCount"],["repeatdur","repeatDur"],["requiredextensions","requiredExtensions"],["requiredfeatures","requiredFeatures"],["specularconstant","specularConstant"],["specularexponent","specularExponent"],["spreadmethod","spreadMethod"],["startoffset","startOffset"],["stddeviation","stdDeviation"],["stitchtiles","stitchTiles"],["surfacescale","surfaceScale"],["systemlanguage","systemLanguage"],["tablevalues","tableValues"],["targetx","targetX"],["targety","targetY"],["textlength","textLength"],["viewbox","viewBox"],["viewtarget","viewTarget"],["xchannelselector","xChannelSelector"],["ychannelselector","yChannelSelector"],["zoomandpan","zoomAndPan"]]);var uh=S&&S.__assign||function(){return(uh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},dh=S&&S.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),ph=S&&S.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),hh=S&&S.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&dh(t,e,n);return ph(t,e),t};Object.defineProperty(Dp,"__esModule",{value:!0});var fh=hh(up),mh=jp,gh=ch,vh=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);var yh=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function bh(e,t){void 0===t&&(t={});for(var n=("length"in e?e:[e]),r="",s=0;s<n.length;s++)r+=xh(n[s],t);return r}function xh(e,t){switch(e.type){case fh.Root:return bh(e.children,t);case fh.Directive:case fh.Doctype:return"<"+e.data+">";case fh.Comment:return function(e){return"\x3c!--"+e.data+"--\x3e"}(e);case fh.CDATA:return function(e){return"<![CDATA["+e.children[0].data+"]]>"}(e);case fh.Script:case fh.Style:case fh.Tag:return function(e,t){var n;"foreign"===t.xmlMode&&(e.name=null!==(n=gh.elementNames.get(e.name))&&void 0!==n?n:e.name,e.parent&&wh.has(e.parent.name)&&(t=uh(uh({},t),{xmlMode:!1})));!t.xmlMode&&_h.has(e.name)&&(t=uh(uh({},t),{xmlMode:"foreign"}));var r="<"+e.name,s=function(e,t){if(e)return Object.keys(e).map((function(n){var r,s,i=null!==(r=e[n])&&void 0!==r?r:"";return"foreign"===t.xmlMode&&(n=null!==(s=gh.attributeNames.get(n))&&void 0!==s?s:n),t.emptyAttrs||t.xmlMode||""!==i?n+'="'+(!1!==t.decodeEntities?mh.encodeXML(i):i.replace(/"/g,"&quot;"))+'"':n})).join(" ")}(e.attribs,t);s&&(r+=" "+s);0===e.children.length&&(t.xmlMode?!1!==t.selfClosingTags:t.selfClosingTags&&yh.has(e.name))?(t.xmlMode||(r+=" "),r+="/>"):(r+=">",e.children.length>0&&(r+=bh(e.children,t)),!t.xmlMode&&yh.has(e.name)||(r+="</"+e.name+">"));return r}(e,t);case fh.Text:return function(e,t){var n=e.data||"";!1===t.decodeEntities||!t.xmlMode&&e.parent&&vh.has(e.parent.name)||(n=mh.encodeXML(n));return n}(e,t)}}Dp.default=bh;var wh=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),_h=new Set(["svg","math"]);var Ch=S&&S.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hp,"__esModule",{value:!0}),hp.innerText=hp.textContent=hp.getText=hp.getInnerHTML=hp.getOuterHTML=void 0;var Sh=fp,Eh=Ch(Dp),Th=up;function Ah(e,t){return(0,Eh.default)(e,t)}hp.getOuterHTML=Ah,hp.getInnerHTML=function(e,t){return(0,Sh.hasChildren)(e)?e.children.map((function(e){return Ah(e,t)})).join(""):""},hp.getText=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,Sh.isTag)(t)?"br"===t.name?"\n":e(t.children):(0,Sh.isCDATA)(t)?e(t.children):(0,Sh.isText)(t)?t.data:""},hp.textContent=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,Sh.hasChildren)(t)&&!(0,Sh.isComment)(t)?e(t.children):(0,Sh.isText)(t)?t.data:""},hp.innerText=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,Sh.hasChildren)(t)&&(t.type===Th.ElementType.Tag||(0,Sh.isCDATA)(t))?e(t.children):(0,Sh.isText)(t)?t.data:""};var Ph={};Object.defineProperty(Ph,"__esModule",{value:!0}),Ph.prevElementSibling=Ph.nextElementSibling=Ph.getName=Ph.hasAttrib=Ph.getAttributeValue=Ph.getSiblings=Ph.getParent=Ph.getChildren=void 0;var Ih=fp,Nh=[];function Mh(e){var t;return null!==(t=e.children)&&void 0!==t?t:Nh}function Rh(e){return e.parent||null}Ph.getChildren=Mh,Ph.getParent=Rh,Ph.getSiblings=function(e){var t=Rh(e);if(null!=t)return Mh(t);for(var n=[e],r=e.prev,s=e.next;null!=r;)n.unshift(r),r=r.prev;for(;null!=s;)n.push(s),s=s.next;return n},Ph.getAttributeValue=function(e,t){var n;return null===(n=e.attribs)||void 0===n?void 0:n[t]},Ph.hasAttrib=function(e,t){return null!=e.attribs&&Object.prototype.hasOwnProperty.call(e.attribs,t)&&null!=e.attribs[t]},Ph.getName=function(e){return e.name},Ph.nextElementSibling=function(e){for(var t=e.next;null!==t&&!(0,Ih.isTag)(t);)t=t.next;return t},Ph.prevElementSibling=function(e){for(var t=e.prev;null!==t&&!(0,Ih.isTag)(t);)t=t.prev;return t};var Oh={};function kh(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){var t=e.parent.children;t.splice(t.lastIndexOf(e),1)}}Object.defineProperty(Oh,"__esModule",{value:!0}),Oh.prepend=Oh.prependChild=Oh.append=Oh.appendChild=Oh.replaceElement=Oh.removeElement=void 0,Oh.removeElement=kh,Oh.replaceElement=function(e,t){var n=t.prev=e.prev;n&&(n.next=t);var r=t.next=e.next;r&&(r.prev=t);var s=t.parent=e.parent;if(s){var i=s.children;i[i.lastIndexOf(e)]=t}},Oh.appendChild=function(e,t){if(kh(t),t.next=null,t.parent=e,e.children.push(t)>1){var n=e.children[e.children.length-2];n.next=t,t.prev=n}else t.prev=null},Oh.append=function(e,t){kh(t);var n=e.parent,r=e.next;if(t.next=r,t.prev=e,e.next=t,t.parent=n,r){if(r.prev=t,n){var s=n.children;s.splice(s.lastIndexOf(r),0,t)}}else n&&n.children.push(t)},Oh.prependChild=function(e,t){if(kh(t),t.parent=e,t.prev=null,1!==e.children.unshift(t)){var n=e.children[1];n.prev=t,t.next=n}else t.next=null},Oh.prepend=function(e,t){kh(t);var n=e.parent;if(n){var r=n.children;r.splice(r.indexOf(e),0,t)}e.prev&&(e.prev.next=t),t.parent=n,t.prev=e.prev,t.next=e,e.prev=t};var Lh={};Object.defineProperty(Lh,"__esModule",{value:!0}),Lh.findAll=Lh.existsOne=Lh.findOne=Lh.findOneChild=Lh.find=Lh.filter=void 0;var Dh=fp;function jh(e,t,n,r){for(var s=[],i=0,o=t;i<o.length;i++){var a=o[i];if(e(a)&&(s.push(a),--r<=0))break;if(n&&(0,Dh.hasChildren)(a)&&a.children.length>0){var l=jh(e,a.children,n,r);if(s.push.apply(s,l),(r-=l.length)<=0)break}}return s}Lh.filter=function(e,t,n,r){return void 0===n&&(n=!0),void 0===r&&(r=1/0),Array.isArray(t)||(t=[t]),jh(e,t,n,r)},Lh.find=jh,Lh.findOneChild=function(e,t){return t.find(e)},Lh.findOne=function e(t,n,r){void 0===r&&(r=!0);for(var s=null,i=0;i<n.length&&!s;i++){var o=n[i];(0,Dh.isTag)(o)&&(t(o)?s=o:r&&o.children.length>0&&(s=e(t,o.children)))}return s},Lh.existsOne=function e(t,n){return n.some((function(n){return(0,Dh.isTag)(n)&&(t(n)||n.children.length>0&&e(t,n.children))}))},Lh.findAll=function(e,t){for(var n,r,s=[],i=t.filter(Dh.isTag);r=i.shift();){var o=null===(n=r.children)||void 0===n?void 0:n.filter(Dh.isTag);o&&o.length>0&&i.unshift.apply(i,o),e(r)&&s.push(r)}return s};var Uh={};Object.defineProperty(Uh,"__esModule",{value:!0}),Uh.getElementsByTagType=Uh.getElementsByTagName=Uh.getElementById=Uh.getElements=Uh.testElement=void 0;var Hh=fp,Fh=Lh,Bh={tag_name:function(e){return"function"==typeof e?function(t){return(0,Hh.isTag)(t)&&e(t.name)}:"*"===e?Hh.isTag:function(t){return(0,Hh.isTag)(t)&&t.name===e}},tag_type:function(e){return"function"==typeof e?function(t){return e(t.type)}:function(t){return t.type===e}},tag_contains:function(e){return"function"==typeof e?function(t){return(0,Hh.isText)(t)&&e(t.data)}:function(t){return(0,Hh.isText)(t)&&t.data===e}}};function qh(e,t){return"function"==typeof t?function(n){return(0,Hh.isTag)(n)&&t(n.attribs[e])}:function(n){return(0,Hh.isTag)(n)&&n.attribs[e]===t}}function zh(e,t){return function(n){return e(n)||t(n)}}function Vh(e){var t=Object.keys(e).map((function(t){var n=e[t];return Object.prototype.hasOwnProperty.call(Bh,t)?Bh[t](n):qh(t,n)}));return 0===t.length?null:t.reduce(zh)}Uh.testElement=function(e,t){var n=Vh(e);return!n||n(t)},Uh.getElements=function(e,t,n,r){void 0===r&&(r=1/0);var s=Vh(e);return s?(0,Fh.filter)(s,t,n,r):[]},Uh.getElementById=function(e,t,n){return void 0===n&&(n=!0),Array.isArray(t)||(t=[t]),(0,Fh.findOne)(qh("id",e),t,n)},Uh.getElementsByTagName=function(e,t,n,r){return void 0===n&&(n=!0),void 0===r&&(r=1/0),(0,Fh.filter)(Bh.tag_name(e),t,n,r)},Uh.getElementsByTagType=function(e,t,n,r){return void 0===n&&(n=!0),void 0===r&&(r=1/0),(0,Fh.filter)(Bh.tag_type(e),t,n,r)};var Gh={};Object.defineProperty(Gh,"__esModule",{value:!0}),Gh.uniqueSort=Gh.compareDocumentPosition=Gh.removeSubsets=void 0;var Wh=fp;function Kh(e,t){var n=[],r=[];if(e===t)return 0;for(var s=(0,Wh.hasChildren)(e)?e:e.parent;s;)n.unshift(s),s=s.parent;for(s=(0,Wh.hasChildren)(t)?t:t.parent;s;)r.unshift(s),s=s.parent;for(var i=Math.min(n.length,r.length),o=0;o<i&&n[o]===r[o];)o++;if(0===o)return 1;var a=n[o-1],l=a.children,c=n[o],u=r[o];return l.indexOf(c)>l.indexOf(u)?a===t?20:4:a===e?10:2}Gh.removeSubsets=function(e){for(var t=e.length;--t>=0;){var n=e[t];if(t>0&&e.lastIndexOf(n,t-1)>=0)e.splice(t,1);else for(var r=n.parent;r;r=r.parent)if(e.includes(r)){e.splice(t,1);break}}return e},Gh.compareDocumentPosition=Kh,Gh.uniqueSort=function(e){return(e=e.filter((function(e,t,n){return!n.includes(e,t+1)}))).sort((function(e,t){var n=Kh(e,t);return 2&n?-1:4&n?1:0})),e};var Yh={};Object.defineProperty(Yh,"__esModule",{value:!0}),Yh.getFeed=void 0;var $h=hp,Xh=Uh;Yh.getFeed=function(e){var t=ef(rf,e);return t?"feed"===t.name?function(e){var t,n=e.children,r={type:"atom",items:(0,Xh.getElementsByTagName)("entry",n).map((function(e){var t,n=e.children,r={media:Zh(n)};nf(r,"id","id",n),nf(r,"title","title",n);var s=null===(t=ef("link",n))||void 0===t?void 0:t.attribs.href;s&&(r.link=s);var i=tf("summary",n)||tf("content",n);i&&(r.description=i);var o=tf("updated",n);return o&&(r.pubDate=new Date(o)),r}))};nf(r,"id","id",n),nf(r,"title","title",n);var s=null===(t=ef("link",n))||void 0===t?void 0:t.attribs.href;s&&(r.link=s);nf(r,"description","subtitle",n);var i=tf("updated",n);i&&(r.updated=new Date(i));return nf(r,"author","email",n,!0),r}(t):function(e){var t,n,r=null!==(n=null===(t=ef("channel",e.children))||void 0===t?void 0:t.children)&&void 0!==n?n:[],s={type:e.name.substr(0,3),id:"",items:(0,Xh.getElementsByTagName)("item",e.children).map((function(e){var t=e.children,n={media:Zh(t)};nf(n,"id","guid",t),nf(n,"title","title",t),nf(n,"link","link",t),nf(n,"description","description",t);var r=tf("pubDate",t);return r&&(n.pubDate=new Date(r)),n}))};nf(s,"title","title",r),nf(s,"link","link",r),nf(s,"description","description",r);var i=tf("lastBuildDate",r);i&&(s.updated=new Date(i));return nf(s,"author","managingEditor",r,!0),s}(t):null};var Qh=["url","type","lang"],Jh=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function Zh(e){return(0,Xh.getElementsByTagName)("media:content",e).map((function(e){for(var t=e.attribs,n={medium:t.medium,isDefault:!!t.isDefault},r=0,s=Qh;r<s.length;r++){t[a=s[r]]&&(n[a]=t[a])}for(var i=0,o=Jh;i<o.length;i++){var a;t[a=o[i]]&&(n[a]=parseInt(t[a],10))}return t.expression&&(n.expression=t.expression),n}))}function ef(e,t){return(0,Xh.getElementsByTagName)(e,t,!0,1)[0]}function tf(e,t,n){return void 0===n&&(n=!1),(0,$h.textContent)((0,Xh.getElementsByTagName)(e,t,n,1)).trim()}function nf(e,t,n,r,s){void 0===s&&(s=!1);var i=tf(n,r,s);i&&(e[t]=i)}function rf(e){return"rss"===e||"feed"===e||"rdf:RDF"===e}!function(e){var t=S&&S.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=S&&S.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.hasChildren=e.isDocument=e.isComment=e.isText=e.isCDATA=e.isTag=void 0,n(hp,e),n(Ph,e),n(Oh,e),n(Lh,e),n(Uh,e),n(Gh,e),n(Yh,e);var r=fp;Object.defineProperty(e,"isTag",{enumerable:!0,get:function(){return r.isTag}}),Object.defineProperty(e,"isCDATA",{enumerable:!0,get:function(){return r.isCDATA}}),Object.defineProperty(e,"isText",{enumerable:!0,get:function(){return r.isText}}),Object.defineProperty(e,"isComment",{enumerable:!0,get:function(){return r.isComment}}),Object.defineProperty(e,"isDocument",{enumerable:!0,get:function(){return r.isDocument}}),Object.defineProperty(e,"hasChildren",{enumerable:!0,get:function(){return r.hasChildren}})}(pp);var sf=S&&S.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),of=S&&S.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),af=S&&S.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),lf=S&&S.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&of(t,e,n);return af(t,e),t},cf=S&&S.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(dp,"__esModule",{value:!0}),dp.parseFeed=dp.FeedHandler=void 0;var uf,df,pf,hf,ff=cf(Kd),mf=lf(pp),gf=qu;(df=uf||(uf={}))[df.image=0]="image",df[df.audio=1]="audio",df[df.video=2]="video",df[df.document=3]="document",df[df.executable=4]="executable",(hf=pf||(pf={}))[hf.sample=0]="sample",hf[hf.full=1]="full",hf[hf.nonstop=2]="nonstop";var vf=function(e){function t(t,n){return"object"==typeof t&&(n=t=void 0),e.call(this,t,n)||this}return sf(t,e),t.prototype.onend=function(){var e,t,n={},r=xf(Sf,this.dom);if(r)if("feed"===r.name){var s=r.children;n.type="atom",Cf(n,"id","id",s),Cf(n,"title","title",s);var i=_f("href",xf("link",s));i&&(n.link=i),Cf(n,"description","subtitle",s),(o=wf("updated",s))&&(n.updated=new Date(o)),Cf(n,"author","email",s,!0),n.items=bf("entry",s).map((function(e){var t={},n=e.children;Cf(t,"id","id",n),Cf(t,"title","title",n);var r=_f("href",xf("link",n));r&&(t.link=r);var s=wf("summary",n)||wf("content",n);s&&(t.description=s);var i=wf("updated",n);return i&&(t.pubDate=new Date(i)),t.media=yf(n),t}))}else{var o;s=null!==(t=null===(e=xf("channel",r.children))||void 0===e?void 0:e.children)&&void 0!==t?t:[];n.type=r.name.substr(0,3),n.id="",Cf(n,"title","title",s),Cf(n,"link","link",s),Cf(n,"description","description",s),(o=wf("lastBuildDate",s))&&(n.updated=new Date(o)),Cf(n,"author","managingEditor",s,!0),n.items=bf("item",r.children).map((function(e){var t={},n=e.children;Cf(t,"id","guid",n),Cf(t,"title","title",n),Cf(t,"link","link",n),Cf(t,"description","description",n);var r=wf("pubDate",n);return r&&(t.pubDate=new Date(r)),t.media=yf(n),t}))}this.feed=n,this.handleCallback(r?null:Error("couldn't find root of feed"))},t}(ff.default);function yf(e){return bf("media:content",e).map((function(e){var t={medium:e.attribs.medium,isDefault:!!e.attribs.isDefault};return e.attribs.url&&(t.url=e.attribs.url),e.attribs.fileSize&&(t.fileSize=parseInt(e.attribs.fileSize,10)),e.attribs.type&&(t.type=e.attribs.type),e.attribs.expression&&(t.expression=e.attribs.expression),e.attribs.bitrate&&(t.bitrate=parseInt(e.attribs.bitrate,10)),e.attribs.framerate&&(t.framerate=parseInt(e.attribs.framerate,10)),e.attribs.samplingrate&&(t.samplingrate=parseInt(e.attribs.samplingrate,10)),e.attribs.channels&&(t.channels=parseInt(e.attribs.channels,10)),e.attribs.duration&&(t.duration=parseInt(e.attribs.duration,10)),e.attribs.height&&(t.height=parseInt(e.attribs.height,10)),e.attribs.width&&(t.width=parseInt(e.attribs.width,10)),e.attribs.lang&&(t.lang=e.attribs.lang),t}))}function bf(e,t){return mf.getElementsByTagName(e,t,!0)}function xf(e,t){return mf.getElementsByTagName(e,t,!0,1)[0]}function wf(e,t,n){return void 0===n&&(n=!1),mf.getText(mf.getElementsByTagName(e,t,n,1)).trim()}function _f(e,t){return t?t.attribs[e]:null}function Cf(e,t,n,r,s){void 0===s&&(s=!1);var i=wf(n,r,s);i&&(e[t]=i)}function Sf(e){return"rss"===e||"feed"===e||"rdf:RDF"===e}dp.FeedHandler=vf;var Ef={xmlMode:!0};dp.parseFeed=function(e,t){void 0===t&&(t=Ef);var n=new vf(t);return new gf.Parser(n,t).end(e),n.feed},function(e){var t=S&&S.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=S&&S.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=S&&S.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&t(r,e,s);return n(r,e),r},s=S&&S.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)},i=S&&S.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.RssHandler=e.DefaultHandler=e.DomUtils=e.ElementType=e.Tokenizer=e.createDomStream=e.parseDOM=e.DomHandler=e.Parser=void 0;var o=qu;Object.defineProperty(e,"Parser",{enumerable:!0,get:function(){return o.Parser}});var a=Kd;Object.defineProperty(e,"DomHandler",{enumerable:!0,get:function(){return a.DomHandler}}),Object.defineProperty(e,"DefaultHandler",{enumerable:!0,get:function(){return a.DomHandler}}),e.parseDOM=function(e,t){var n=new a.DomHandler(void 0,t);return new o.Parser(n,t).end(e),n.dom},e.createDomStream=function(e,t,n){var r=new a.DomHandler(e,t,n);return new o.Parser(r,t)};var l=zu;Object.defineProperty(e,"Tokenizer",{enumerable:!0,get:function(){return i(l).default}});var c=r(up);e.ElementType=c,s(dp,e),e.DomUtils=r(pp);var u=dp;Object.defineProperty(e,"RssHandler",{enumerable:!0,get:function(){return u.FeedHandler}})}(Bu);var Tf={shouldProcessEveryNode:function(e){return!0}},Af=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Pf=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,If="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Nf="[\\ud800-\\udfff]",Mf="["+If+"]",Rf="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",Of="\\d+",kf="[\\u2700-\\u27bf]",Lf="[a-z\\xdf-\\xf6\\xf8-\\xff]",Df="[^\\ud800-\\udfff"+If+Of+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",jf="\\ud83c[\\udffb-\\udfff]",Uf="[^\\ud800-\\udfff]",Hf="(?:\\ud83c[\\udde6-\\uddff]){2}",Ff="[\\ud800-\\udbff][\\udc00-\\udfff]",Bf="[A-Z\\xc0-\\xd6\\xd8-\\xde]",qf="(?:"+Lf+"|"+Df+")",zf="(?:"+Bf+"|"+Df+")",Vf="(?:"+Rf+"|"+jf+")"+"?",Gf="[\\ufe0e\\ufe0f]?"+Vf+("(?:\\u200d(?:"+[Uf,Hf,Ff].join("|")+")[\\ufe0e\\ufe0f]?"+Vf+")*"),Wf="(?:"+[kf,Hf,Ff].join("|")+")"+Gf,Kf="(?:"+[Uf+Rf+"?",Rf,Hf,Ff,Nf].join("|")+")",Yf=RegExp("['’]","g"),$f=RegExp(Rf,"g"),Xf=RegExp(jf+"(?="+jf+")|"+Kf+Gf,"g"),Qf=RegExp([Bf+"?"+Lf+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[Mf,Bf,"$"].join("|")+")",zf+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[Mf,Bf+qf,"$"].join("|")+")",Bf+"?"+qf+"+(?:['’](?:d|ll|m|re|s|t|ve))?",Bf+"+(?:['’](?:D|LL|M|RE|S|T|VE))?",Of,Wf].join("|"),"g"),Jf=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),Zf=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,em="object"==typeof S&&S&&S.Object===Object&&S,tm="object"==typeof self&&self&&self.Object===Object&&self,nm=em||tm||Function("return this")();var rm,sm=(rm={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"ss"},function(e){return null==rm?void 0:rm[e]});function im(e){return Jf.test(e)}function om(e){return im(e)?function(e){return e.match(Xf)||[]}(e):function(e){return e.split("")}(e)}var am=Object.prototype.toString,lm=nm.Symbol,cm=lm?lm.prototype:void 0,um=cm?cm.toString:void 0;function dm(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==am.call(e)}(e))return um?um.call(e):"";var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}function pm(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:function(e,t,n){var r=-1,s=e.length;t<0&&(t=-t>s?0:s+t),(n=n>s?s:n)<0&&(n+=s),s=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(s);++r<s;)i[r]=e[r+t];return i}(e,t,n)}function hm(e){return null==e?"":dm(e)}var fm,mm=(fm=function(e,t,n){return t=t.toLowerCase(),e+(n?vm(hm(t).toLowerCase()):t)},function(e){return function(e,t,n,r){var s=-1,i=e?e.length:0;for(r&&i&&(n=e[++s]);++s<i;)n=t(n,e[s],s,e);return n}(function(e,t,n){return e=hm(e),void 0===(t=n?void 0:t)?function(e){return Zf.test(e)}(e)?function(e){return e.match(Qf)||[]}(e):function(e){return e.match(Af)||[]}(e):e.match(t)||[]}(function(e){return(e=hm(e))&&e.replace(Pf,sm).replace($f,"")}(e).replace(Yf,"")),fm,"")});var gm,vm=(gm="toUpperCase",function(e){var t=im(e=hm(e))?om(e):void 0,n=t?t[0]:e.charAt(0),r=t?pm(t,1).join(""):e.slice(1);return n[gm]()+r});var ym=mm,bm=su,xm=Sc((function(e){var t=[];for(var n in e)bm(n,e)&&(t[t.length]=[n,e[n]]);return t})),wm=Sc,_m=Ac,Cm=_c;var Sm=function(e){return function t(n,r,s){switch(arguments.length){case 0:return t;case 1:return Cm(n)?t:_m((function(t,r){return e(n,t,r)}));case 2:return Cm(n)&&Cm(r)?t:Cm(n)?_m((function(t,n){return e(t,r,n)})):Cm(r)?_m((function(t,r){return e(n,t,r)})):wm((function(t){return e(n,r,t)}));default:return Cm(n)&&Cm(r)&&Cm(s)?t:Cm(n)&&Cm(r)?_m((function(t,n){return e(t,n,s)})):Cm(n)&&Cm(s)?_m((function(t,n){return e(t,r,n)})):Cm(r)&&Cm(s)?_m((function(t,r){return e(n,t,r)})):Cm(n)?wm((function(t){return e(t,r,s)})):Cm(r)?wm((function(t){return e(n,t,s)})):Cm(s)?wm((function(t){return e(n,r,t)})):e(n,r,s)}}}(Zc);var Em=function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n};var Tm=function(e,t,n){for(var r=0,s=n.length;r<s;){if(e(t,n[r]))return!0;r+=1}return!1};var Am=function(e){var t=String(e).match(/^function (\w*)/);return null==t?"":t[1]};var Pm="function"==typeof Object.is?Object.is:function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},Im=Em,Nm=Tm,Mm=Am,Rm=su,Om=Pm,km=fu,Lm=Sc((function(e){return null===e?"Null":void 0===e?"Undefined":Object.prototype.toString.call(e).slice(8,-1)}));function Dm(e,t,n,r){var s=Im(e),i=Im(t);function o(e,t){return jm(e,t,n.slice(),r.slice())}return!Nm((function(e,t){return!Nm(o,t,e)}),i,s)}function jm(e,t,n,r){if(Om(e,t))return!0;var s=Lm(e);if(s!==Lm(t))return!1;if(null==e||null==t)return!1;if("function"==typeof e["fantasy-land/equals"]||"function"==typeof t["fantasy-land/equals"])return"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](t)&&"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](e);if("function"==typeof e.equals||"function"==typeof t.equals)return"function"==typeof e.equals&&e.equals(t)&&"function"==typeof t.equals&&t.equals(e);switch(s){case"Arguments":case"Array":case"Object":if("function"==typeof e.constructor&&"Promise"===Mm(e.constructor))return e===t;break;case"Boolean":case"Number":case"String":if(typeof e!=typeof t||!Om(e.valueOf(),t.valueOf()))return!1;break;case"Date":if(!Om(e.valueOf(),t.valueOf()))return!1;break;case"Error":return e.name===t.name&&e.message===t.message;case"RegExp":if(e.source!==t.source||e.global!==t.global||e.ignoreCase!==t.ignoreCase||e.multiline!==t.multiline||e.sticky!==t.sticky||e.unicode!==t.unicode)return!1}for(var i=n.length-1;i>=0;){if(n[i]===e)return r[i]===t;i-=1}switch(s){case"Map":return e.size===t.size&&Dm(e.entries(),t.entries(),n.concat([e]),r.concat([t]));case"Set":return e.size===t.size&&Dm(e.values(),t.values(),n.concat([e]),r.concat([t]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var o=km(e);if(o.length!==km(t).length)return!1;var a=n.concat([e]),l=r.concat([t]);for(i=o.length-1;i>=0;){var c=o[i];if(!Rm(c,t)||!jm(t[c],e[c],a,l))return!1;i-=1}return!0}var Um=jm,Hm=Ac((function(e,t){return Um(e,t,[],[])}));var Fm=function(e,t,n){var r,s;if("function"==typeof e.indexOf)switch(typeof t){case"number":if(0===t){for(r=1/t;n<e.length;){if(0===(s=e[n])&&1/s===r)return n;n+=1}return-1}if(t!=t){for(;n<e.length;){if("number"==typeof(s=e[n])&&s!=s)return n;n+=1}return-1}return e.indexOf(t,n);case"string":case"boolean":case"function":case"undefined":return e.indexOf(t,n);case"object":if(null===t)return e.indexOf(t,n)}for(;n<e.length;){if(Hm(e[n],t))return n;n+=1}return-1};var Bm=Ac((function(e,t){return Fm(t,e,0)>=0})),qm=["accept","acceptCharset","accessKey","action","allowFullScreen","allowTransparency","alt","async","autoComplete","autoFocus","autoPlay","capture","cellPadding","cellSpacing","challenge","charSet","checked","cite","classID","className","colSpan","cols","content","contentEditable","contextMenu","controls","coords","crossOrigin","data","dateTime","default","defer","dir","disabled","download","draggable","encType","form","formAction","formEncType","formMethod","formNoValidate","formTarget","frameBorder","headers","height","hidden","high","href","hrefLang","htmlFor","httpEquiv","icon","id","inputMode","integrity","is","keyParams","keyType","kind","label","lang","list","loop","low","manifest","marginHeight","marginWidth","max","maxLength","media","mediaGroup","method","min","minLength","multiple","muted","name","noValidate","nonce","open","optimum","pattern","placeholder","poster","preload","profile","radioGroup","readOnly","rel","required","reversed","role","rowSpan","rows","sandbox","scope","scoped","scrolling","seamless","selected","shape","size","sizes","span","spellCheck","src","srcDoc","srcLang","srcSet","start","step","style","summary","tabIndex","target","title","type","useMap","value","width","wmode","wrap","onClick"].concat(["autoCapitalize","autoCorrect","color","itemProp","itemScope","itemType","itemRef","itemID","security","unselectable","results","autoSave"]).concat(["accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baseProfile","baselineShift","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","ideographic","imageRendering","in","in2","intercept","k","k1","k2","k3","k4","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","points","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","scale","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","vHanging","vIdeographic","vMathematical","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","viewBox","viewTarget","visibility","widths","wordSpacing","writingMode","x","x1","x2","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlns","xmlnsXlink","xmlBase","xmlLang","xmlSpace","y","y1","y2","yChannelSelector","z","zoomAndPan"]).reduce((function(e,t){var n=t.toLowerCase();return n!==t&&(e[n]=t),e}),{}),zm=ym,Vm=xm,Gm=Sm,Wm=p.exports,Km=Bm,Ym=qm;var $m=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected","truespeed"];var Xm={createElement:function(e,t,n,r){var s={key:t};e.attribs&&(s=Gm((function(e,t){var n=t[0],r=t[1];return"style"===(n=Ym[n.replace(/[-:]/,"")]||n)?r=function(e){for(var t,n,r,s=(e=e||"").split(/;(?!base64)/),i={},o=0;o<s.length;++o)(t=s[o].split(":")).length>2&&(t[1]=t.slice(1).join(":")),n=t[0],"string"==typeof(r=t[1])&&(r=r.trim()),null!=n&&null!=r&&n.length>0&&r.length>0&&(i[zm(n)]=r);return i}(r):"class"===n?n="className":"for"===n&&(n="htmlFor"),Km(n,$m)&&""===(r||"")&&(r=n),e[n]=r,e}),s,Vm(e.attribs))),r=r||[];var i=null!=n?[n].concat(r):r;return Wm.createElement.apply(null,[e.name,s].concat(i))}},Qm=Xm,Jm=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr","menuitem","textarea"];var Zm=function(){return{processDefaultNode:function(e,t,n){return"text"===e.type?e.data:"comment"!==e.type&&(Jm.indexOf(e.name)>-1?Qm.createElement(e,n):Qm.createElement(e,n,e.data,t))}}},eg=Tf,tg=Zm;var ng=function(){var e=new tg;return{defaultProcessingInstructions:[{shouldProcessNode:eg.shouldProcessEveryNode,processNode:e.processDefaultNode}]}};var rg={alwaysValid:function(){return!0}},sg=Pc,ig=jc,og=wu,ag=Mu,lg=Fu,cg=Bu.Parser,ug=Kd.DomHandler,dg=ng,pg=rg,hg=Xm;var fg={Parser:function(e){function t(e,n,r,s,i){if(n(e)){sg((function(t){t.shouldPreprocessNode(e)&&t.preprocessNode(e,i)}),s||[]);var o=ig((function(t){return t.shouldProcessNode(e)}),r||[]);if(null!=o){var a=og((function(e){return null==e||!1===e}),ag(lg)((function(e,i){return t(e,n,r,s,i)}),e.children||[]));return o.replaceChildren?hg.createElement(e,i,e.data,[o.processNode(e,a,i)]):o.processNode(e,a,i)}return!1}return!1}function n(n,r,s,i){var o=function(t){(e=e||{}).decodeEntities=!0;var n=new ug;return new cg(n,e).parseComplete(t),n.dom.filter((function(e){return"directive"!==e.type}))}(n).map((function(e,n){return t(e,r,s,i,n)}));return o.length<=1?o[0]:o}return{parse:function(e){var t=new dg;return n(e,pg.alwaysValid,t.defaultProcessingInstructions)},parseWithInstructions:n}},ProcessingInstructions:ng,IsValidNodeDefinitions:rg,ProcessNodeDefinitions:Zm};class mg extends w.PureComponent{constructor(e){super(e),u(this,"handleClick",(e=>{})),u(this,"hideOverlay",(()=>{this.setState({show:!1})})),this.state={show:!1},this.overlayRef=w.createRef()}getUserFromMentionName(){const{usersByUsername:e,mentionName:t}=this.props;let n=t.toLowerCase();for(;n.length>0;){if(e.hasOwnProperty(n))return e[n];if(!/[._-]$/.test(n))break;n=n.substring(0,n.length-1)}return""}getGroupFromMentionName(){const{groupsByName:e,mentionName:t}=this.props,n=t.toLowerCase().replace(/[._-]*$/,"");return(null==e?void 0:e[n])||{}}render(){const e=this.getUserFromMentionName();if(!this.props.disableGroupHighlight&&!e){const e=this.getGroupFromMentionName();if(e.allow_reference)return d("span",{className:"group-mention-link",children:"@"+e.name})}if(!e)return d(w.Fragment,{children:this.props.children});const t=this.props.mentionName.substring(e.username.length);let n="mention-link";return this.props.disableHighlight||e.id!==this.props.currentUserId||(n+=" mention--highlight"),b("span",{children:[d("a",{className:n,onClick:this.handleClick,ref:this.overlayRef,children:"@"+de(e,this.props.teammateNameDisplay)}),t]})}}u(mg,"propTypes",{children:E.node,currentUserId:E.string.isRequired,channelId:E.string,hasMention:E.bool,disableHighlight:E.bool,disableGroupHighlight:E.bool,isRHS:E.bool,mentionName:E.string.isRequired,teammateNameDisplay:E.string.isRequired,usersByUsername:E.object.isRequired,groupsByName:E.object.isRequired}),u(mg,"defaultProps",{isRHS:!1,hasMention:!1,disableHighlight:!1,disableGroupHighlight:!1});var gg=g((function(e){return{currentUserId:pe(e),teammateNameDisplay:he(e),usersByUsername:fe(e),groupsByName:fc(e)}}))(mg);var vg=g(((e,{postId:t,imageKey:n})=>({isExpanded:me(e,t,n)})),(e=>({actions:y({toggleInlineImageVisibility:ge},e)})))((({children:e,alt:t,isExpanded:n,postId:r,actions:s,onToggle:i,imageKey:o})=>{const{toggleInlineImageVisibility:a}=s;p.exports.useEffect((()=>{i(n)}),[n]);const l=()=>{a(r,o)};return b("div",{className:"markdown-image-expand "+(n?"markdown-image-expand--expanded":""),children:[n&&b(T,{children:[d("button",{className:"markdown-image-expand__collapse-button",type:"button",onClick:l,children:d("span",{className:"icon icon-menu-down"})}),e]}),!n&&b("button",{className:"markdown-image-expand__expand-button",type:"button",onClick:l,children:[d("span",{className:"icon icon-menu-right markdown-image-expand__expand-icon"}),d("span",{className:"markdown-image-expand__alt-text",children:t})]})]})}));class yg extends w.PureComponent{constructor(){super(...arguments),u(this,"isSVGImage",(()=>this.props.imageMetadata?"svg"===this.props.imageMetadata.format:-1!==this.props.src.indexOf(".svg"))),u(this,"shouldRenderImage",(()=>this.props.enableSVGs||!this.isSVGImage()))}render(){let e=ve(this.props.src,this.props.hasImageProxy);return this.shouldRenderImage()||(e=""),this.props.children(e)}}var bg=g((function(e){const t=W(e);return{enableSVGs:"true"===t.EnableSVGs,hasImageProxy:"true"===t.HasImageProxy}}))(yg);function xg(e){return J.getFileRoute(e)}function wg(e){return`${J.getFileRoute(e)}?download=1`}function _g(e,t){return t&&J.getCdnEndpoint()?`${J.getCdnEndpoint()}/${t.replace(/ /g,"%20")}`:`${J.getFileRoute(e)}/thumbnail`}function Cg(e,t){return t&&J.getCdnEndpoint()?`${J.getCdnEndpoint()}/${t}`:`${J.getFileRoute(e)}/preview`}function Sg(e=[],t=ae.DEFAULT_LOCALE){return e.sort(((e,n)=>e.create_at!==n.create_at?e.create_at-n.create_at:e.name.localeCompare(n.name,t,{numeric:!0})))}const Eg=({loading:e,progress:t,containerClass:n})=>{let r=d("span",{className:"loader-percent"});return t&&(r=d("span",{className:"loader-percent",children:`${e} ${t}%`})),b("div",{className:n,children:[d(Ma,{}),r]})};Eg.defaultProps={containerClass:"view-image__loading"};class Tg extends w.PureComponent{constructor(e){super(e),u(this,"dimensionsAvailable",(e=>e&&e.width&&e.height)),u(this,"isSmallImage",((e,t)=>e<48||t<48)),u(this,"handleLoad",(e=>{if(this.mounted){const t=e.target,n=this.isSmallImage(t.naturalWidth,t.naturalHeight);this.setState({loaded:!0,error:!1,isSmallImage:n,imageWidth:t.naturalWidth},(()=>{this.props.onImageLoaded&&t.naturalHeight&&this.props.onImageLoaded({height:t.naturalHeight,width:t.naturalWidth})}))}})),u(this,"handleError",(()=>{this.mounted&&(this.props.onImageLoadFail&&this.props.onImageLoadFail(),this.setState({error:!0}))})),u(this,"onEnterKeyDown",(e=>{"Enter"===e.key&&this.props.onClick(e)})),u(this,"renderImageLoaderIfNeeded",(()=>this.state.loaded||!this.props.showLoader||this.state.error?null:d("div",{style:{position:"absolute",top:"50%",transform:"translate(-50%, -50%)",left:"50%"},children:d(Eg,{containerClass:"file__image-loading"})}))),u(this,"renderImageWithContainerIfNeeded",(()=>{const e=this.props,{fileInfo:t,src:n}=e,r=c(e,["fileInfo","src"]);Reflect.deleteProperty(r,"showLoader"),Reflect.deleteProperty(r,"onImageLoaded"),Reflect.deleteProperty(r,"onImageLoadFail"),Reflect.deleteProperty(r,"dimensions"),Reflect.deleteProperty(r,"handleSmallImageContainer");let s=ye("file_attachment.thumbnail","file thumbnail");t&&(s+=` ${t.name}`.toLowerCase());let i="";t&&t.has_preview_image&&n&&(i=Cg(t.id,t.preview_path));const o=d("img",l(a({},r),{"aria-label":s,tabIndex:0,onKeyDown:this.onEnterKeyDown,className:this.props.className+(this.props.handleSmallImageContainer&&this.state.isSmallImage?" small-image--inside-container":""),src:i||n,onError:this.handleError,onLoad:this.handleLoad}));if(this.props.handleSmallImageContainer&&this.state.isSmallImage){let e="small-image__container cursor--pointer a11y--active";return this.state.imageWidth<48&&(e+=" small-image__container--min-width"),d("div",{onClick:this.props.onClick,className:e,style:this.state.imageWidth>48?{width:this.state.imageWidth+2}:{},children:o})}return o})),u(this,"renderImageOrPlaceholder",(()=>{const{dimensions:e}=this.props;let t;this.dimensionsAvailable(e)&&!this.state.loaded&&(t=b("div",{className:`image-loading__container ${this.props.className}`,style:{maxWidth:e.width},children:[this.renderImageLoaderIfNeeded(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${e.width} ${e.height}`,style:{maxHeight:e.height,maxWidth:e.width,verticalAlign:"middle"}})]}));const n=!this.dimensionsAvailable(e)||this.state.loaded;return b(w.Fragment,{children:[t,d("div",{className:"file-preview__button",style:{display:n?"initial":"none"},children:this.renderImageWithContainerIfNeeded()})]})}));const{dimensions:t}=e;this.state={loaded:!1,isSmallImage:!!this.dimensionsAvailable(t)&&this.isSmallImage(t.width,t.height)},this.heightTimeout=0}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){return this.renderImageOrPlaceholder()}}function Ag(e){const t="true"===e.EnableFileAttachments,n="true"===e.EnableMobileFileUpload;return!!t&&(!be()||n)}function Pg(e){return!be()||"true"===e.EnableMobileFileDownload}function Ig(e){let t=e;return e.length>G.MAX_FILENAME_LENGTH&&(t=e.substring(0,Math.min(G.MAX_FILENAME_LENGTH,e.length))+"..."),t}u(Tg,"propTypes",{src:E.string.isRequired,dimensions:E.object,fileInfo:E.object,showLoader:E.bool,onImageLoaded:E.func,onImageLoadFail:E.func,onClick:E.func,className:E.string,handleSmallImageContainer:E.bool});var Ng="u3-cxx-ce20bc45",Mg="u3-cxx-f0385757",Rg="u3-cxx-8d40a816",Og="u3-cxx-71f430a9",kg="u3-cxx-75c03e13",Lg="u3-cxx-03c2df77",Dg="u3-cxx-e89c81c0",jg="u3-cxx-79da9d53",Ug="u3-cxx-754a863b",Hg="u3-cxx-cc6f35b9",Fg="u3-cxx-bc663f14";function Bg(e){let[t,n]=p.exports.useState(e.show),[r,s]=p.exports.useState(!1),i=p.exports.useRef();return p.exports.useEffect((()=>(s(!0),()=>{s(!1)})),[]),p.exports.useEffect((()=>{e.show&&!t&&n(!0),!e.show&&r&&"function"==typeof e.onExited&&e.onExited()}),[e.show]),d(to,{appear:!0,show:t,as:p.exports.Fragment,children:d(va,{as:"div",ref:i,className:x(Ng,e.dialogClassName),onClose:function(){n(!1),"function"==typeof e.onHide&&e.onHide()},unmount:!0,children:b("div",{className:Mg,children:[d(to.Child,{as:p.exports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:d(va.Overlay,{className:Rg})}),d("span",{className:Og,"aria-hidden":"true",children:"​"}),d(to.Child,{as:p.exports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:d("div",{className:kg,children:e.children})})]})})})}var qg=e=>{let t=null;return e.closeButton&&(t=d("div",{className:jg,children:d("button",{type:"button",className:x(Ug),onClick:e.onClose,children:d(Ta,{className:Hg})})})),b("div",{className:Lg,children:[d(va.Title,{as:"h3",className:Dg,children:e.children}),t]})},zg=e=>d("div",{className:Fg,children:e.children});class Vg extends w.PureComponent{render(){const e=this.props.fileInfo,t=this.props.fileUrl,n=[];""!==e.extension&&n.push(ye("file_info_preview.type","File type ")+e.extension.toUpperCase()),e.size&&n.push(ye("file_info_preview.size","Size ")+xe(e.size));const r=n.join(", ");let s=null;return s=this.props.canDownloadFiles?b("a",{className:"file-details__preview",href:t,target:"_blank",rel:"noopener noreferrer",children:[d("span",{className:"file-details__preview-helper"}),d("img",{alt:"file preview",src:we(e),loading:"lazy"})]}):b("span",{className:"file-details__preview",children:[d("span",{className:"file-details__preview-helper"}),d("img",{alt:"file preview",src:we(e),loading:"lazy"})]}),b("div",{className:"file-details__container",children:[s,b("div",{className:"file-details",children:[d("div",{className:"file-details__name",children:e.name}),d("div",{className:"file-details__info",children:r})]})]})}}var Gg,Wg,Kg=g((function(e){return{canDownloadFiles:Pg(W(e))}}))(Vg),Yg={exports:{}};Gg="undefined"!=typeof window?window:S,Wg=function(e,t){var n=[],r=Object.getPrototypeOf,s=n.slice,i=function(e){return n.concat.apply([],e)},o=n.push,a=n.indexOf,l={},c=l.toString,u=l.hasOwnProperty,d=u.toString,p=d.call(Object),h={},f=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},m=function(e){return null!=e&&e===e.window},g=e.document,v={type:!0,src:!0,nonce:!0,noModule:!0};function y(e,t,n){var r,s,i=(n=n||g).createElement("script");if(i.text=e,t)for(r in v)(s=t[r]||t.getAttribute&&t.getAttribute(r))&&i.setAttribute(r,s);n.head.appendChild(i).parentNode.removeChild(i)}function b(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[c.call(e)]||"object":typeof e}var x="3.6.0",w=function(e,t){return new w.fn.init(e,t)};function _(e){var t=!!e&&"length"in e&&e.length,n=b(e);return!f(e)&&!m(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}w.fn=w.prototype={jquery:x,constructor:w,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return w.each(this,e)},map:function(e){return this.pushStack(w.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(w.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(w.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:o,sort:n.sort,splice:n.splice},w.extend=w.fn.extend=function(){var e,t,n,r,s,i,o=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[a]||{},a++),"object"==typeof o||f(o)||(o={}),a===l&&(o=this,a--);a<l;a++)if(null!=(e=arguments[a]))for(t in e)r=e[t],"__proto__"!==t&&o!==r&&(c&&r&&(w.isPlainObject(r)||(s=Array.isArray(r)))?(n=o[t],i=s&&!Array.isArray(n)?[]:s||w.isPlainObject(n)?n:{},s=!1,o[t]=w.extend(c,i,r)):void 0!==r&&(o[t]=r));return o},w.extend({expando:"jQuery"+(x+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==c.call(e)||(t=r(e))&&("function"!=typeof(n=u.call(t,"constructor")&&t.constructor)||d.call(n)!==p))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){y(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(_(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(_(Object(e))?w.merge(n,"string"==typeof e?[e]:e):o.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:a.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,s=e.length;r<n;r++)e[s++]=t[r];return e.length=s,e},grep:function(e,t,n){for(var r=[],s=0,i=e.length,o=!n;s<i;s++)!t(e[s],s)!==o&&r.push(e[s]);return r},map:function(e,t,n){var r,s,o=0,a=[];if(_(e))for(r=e.length;o<r;o++)null!=(s=t(e[o],o,n))&&a.push(s);else for(o in e)null!=(s=t(e[o],o,n))&&a.push(s);return i(a)},guid:1,support:h}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=n[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){l["[object "+t+"]"]=t.toLowerCase()}));var C=function(e){var t,n,r,s,i,o,a,l,c,u,d,p,h,f,m,g,v,y,b,x="sizzle"+1*new Date,w=e.document,_=0,C=0,S=le(),E=le(),T=le(),A=le(),P=function(e,t){return e===t&&(d=!0),0},I={}.hasOwnProperty,N=[],M=N.pop,R=N.push,O=N.push,k=N.slice,L=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},D="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",j="[\\x20\\t\\r\\n\\f]",U="(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",H="\\[[\\x20\\t\\r\\n\\f]*("+U+")(?:"+j+"*([*^$|!~]?=)"+j+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+U+"))|)"+j+"*\\]",F=":("+U+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+H+")*)|.*)\\)|)",B=new RegExp(j+"+","g"),q=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),z=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),V=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),G=new RegExp(j+"|>"),W=new RegExp(F),K=new RegExp("^"+U+"$"),Y={ID:new RegExp("^#("+U+")"),CLASS:new RegExp("^\\.("+U+")"),TAG:new RegExp("^("+U+"|[*])"),ATTR:new RegExp("^"+H),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+D+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},$=/HTML$/i,X=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,se=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ie=function(){p()},oe=xe((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{O.apply(N=k.call(w.childNodes),w.childNodes),N[w.childNodes.length].nodeType}catch(Ee){O={apply:N.length?function(e,t){R.apply(e,k.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function ae(e,t,r,s){var i,a,c,u,d,f,v,y=t&&t.ownerDocument,w=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==w&&9!==w&&11!==w)return r;if(!s&&(p(t),t=t||h,m)){if(11!==w&&(d=Z.exec(e)))if(i=d[1]){if(9===w){if(!(c=t.getElementById(i)))return r;if(c.id===i)return r.push(c),r}else if(y&&(c=y.getElementById(i))&&b(t,c)&&c.id===i)return r.push(c),r}else{if(d[2])return O.apply(r,t.getElementsByTagName(e)),r;if((i=d[3])&&n.getElementsByClassName&&t.getElementsByClassName)return O.apply(r,t.getElementsByClassName(i)),r}if(n.qsa&&!A[e+" "]&&(!g||!g.test(e))&&(1!==w||"object"!==t.nodeName.toLowerCase())){if(v=e,y=t,1===w&&(G.test(e)||V.test(e))){for((y=ee.test(e)&&ve(t.parentNode)||t)===t&&n.scope||((u=t.getAttribute("id"))?u=u.replace(re,se):t.setAttribute("id",u=x)),a=(f=o(e)).length;a--;)f[a]=(u?"#"+u:":scope")+" "+be(f[a]);v=f.join(",")}try{return O.apply(r,y.querySelectorAll(v)),r}catch(_){A(e,!0)}finally{u===x&&t.removeAttribute("id")}}}return l(e.replace(q,"$1"),t,r,s)}function le(){var e=[];return function t(n,s){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=s}}function ce(e){return e[x]=!0,e}function ue(e){var t=h.createElement("fieldset");try{return!!e(t)}catch(Ee){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function de(e,t){for(var n=e.split("|"),s=n.length;s--;)r.attrHandle[n[s]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function he(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function fe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function me(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&oe(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ge(e){return ce((function(t){return t=+t,ce((function(n,r){for(var s,i=e([],n.length,t),o=i.length;o--;)n[s=i[o]]&&(n[s]=!(r[s]=n[s]))}))}))}function ve(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=ae.support={},i=ae.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!$.test(t||n&&n.nodeName||"HTML")},p=ae.setDocument=function(e){var t,s,o=e?e.ownerDocument||e:w;return o!=h&&9===o.nodeType&&o.documentElement?(f=(h=o).documentElement,m=!i(h),w!=h&&(s=h.defaultView)&&s.top!==s&&(s.addEventListener?s.addEventListener("unload",ie,!1):s.attachEvent&&s.attachEvent("onunload",ie)),n.scope=ue((function(e){return f.appendChild(e).appendChild(h.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),n.attributes=ue((function(e){return e.className="i",!e.getAttribute("className")})),n.getElementsByTagName=ue((function(e){return e.appendChild(h.createComment("")),!e.getElementsByTagName("*").length})),n.getElementsByClassName=J.test(h.getElementsByClassName),n.getById=ue((function(e){return f.appendChild(e).id=x,!h.getElementsByName||!h.getElementsByName(x).length})),n.getById?(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n,r,s,i=t.getElementById(e);if(i){if((n=i.getAttributeNode("id"))&&n.value===e)return[i];for(s=t.getElementsByName(e),r=0;i=s[r++];)if((n=i.getAttributeNode("id"))&&n.value===e)return[i]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],s=0,i=t.getElementsByTagName(e);if("*"===e){for(;n=i[s++];)1===n.nodeType&&r.push(n);return r}return i},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&m)return t.getElementsByClassName(e)},v=[],g=[],(n.qsa=J.test(h.querySelectorAll))&&(ue((function(e){var t;f.appendChild(e).innerHTML="<a id='"+x+"'></a><select id='"+x+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+D+")"),e.querySelectorAll("[id~="+x+"-]").length||g.push("~="),(t=h.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||g.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+x+"+*").length||g.push(".#.+[+~]"),e.querySelectorAll("\\\f"),g.push("[\\r\\n\\f]")})),ue((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=h.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),f.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")}))),(n.matchesSelector=J.test(y=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&ue((function(e){n.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),v.push("!=",F)})),g=g.length&&new RegExp(g.join("|")),v=v.length&&new RegExp(v.join("|")),t=J.test(f.compareDocumentPosition),b=t||J.test(f.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},P=t?function(e,t){if(e===t)return d=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e==h||e.ownerDocument==w&&b(w,e)?-1:t==h||t.ownerDocument==w&&b(w,t)?1:u?L(u,e)-L(u,t):0:4&r?-1:1)}:function(e,t){if(e===t)return d=!0,0;var n,r=0,s=e.parentNode,i=t.parentNode,o=[e],a=[t];if(!s||!i)return e==h?-1:t==h?1:s?-1:i?1:u?L(u,e)-L(u,t):0;if(s===i)return pe(e,t);for(n=e;n=n.parentNode;)o.unshift(n);for(n=t;n=n.parentNode;)a.unshift(n);for(;o[r]===a[r];)r++;return r?pe(o[r],a[r]):o[r]==w?-1:a[r]==w?1:0},h):h},ae.matches=function(e,t){return ae(e,null,null,t)},ae.matchesSelector=function(e,t){if(p(e),n.matchesSelector&&m&&!A[t+" "]&&(!v||!v.test(t))&&(!g||!g.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(Ee){A(t,!0)}return ae(t,h,null,[e]).length>0},ae.contains=function(e,t){return(e.ownerDocument||e)!=h&&p(e),b(e,t)},ae.attr=function(e,t){(e.ownerDocument||e)!=h&&p(e);var s=r.attrHandle[t.toLowerCase()],i=s&&I.call(r.attrHandle,t.toLowerCase())?s(e,t,!m):void 0;return void 0!==i?i:n.attributes||!m?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},ae.escape=function(e){return(e+"").replace(re,se)},ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ae.uniqueSort=function(e){var t,r=[],s=0,i=0;if(d=!n.detectDuplicates,u=!n.sortStable&&e.slice(0),e.sort(P),d){for(;t=e[i++];)t===e[i]&&(s=r.push(i));for(;s--;)e.splice(r[s],1)}return u=null,e},s=ae.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=s(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=s(t);return n},(r=ae.selectors={cacheLength:50,createPseudo:ce,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ae.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ae.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return Y.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&W.test(n)&&(t=o(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=S[e+" "];return t||(t=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+e+"("+j+"|$)"))&&S(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(r){var s=ae.attr(r,e);return null==s?"!="===t:!t||(s+="","="===t?s===n:"!="===t?s!==n:"^="===t?n&&0===s.indexOf(n):"*="===t?n&&s.indexOf(n)>-1:"$="===t?n&&s.slice(-n.length)===n:"~="===t?(" "+s.replace(B," ")+" ").indexOf(n)>-1:"|="===t&&(s===n||s.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,s){var i="nth"!==e.slice(0,3),o="last"!==e.slice(-4),a="of-type"===t;return 1===r&&0===s?function(e){return!!e.parentNode}:function(t,n,l){var c,u,d,p,h,f,m=i!==o?"nextSibling":"previousSibling",g=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!l&&!a,b=!1;if(g){if(i){for(;m;){for(p=t;p=p[m];)if(a?p.nodeName.toLowerCase()===v:1===p.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[o?g.firstChild:g.lastChild],o&&y){for(b=(h=(c=(u=(d=(p=g)[x]||(p[x]={}))[p.uniqueID]||(d[p.uniqueID]={}))[e]||[])[0]===_&&c[1])&&c[2],p=h&&g.childNodes[h];p=++h&&p&&p[m]||(b=h=0)||f.pop();)if(1===p.nodeType&&++b&&p===t){u[e]=[_,h,b];break}}else if(y&&(b=h=(c=(u=(d=(p=t)[x]||(p[x]={}))[p.uniqueID]||(d[p.uniqueID]={}))[e]||[])[0]===_&&c[1]),!1===b)for(;(p=++h&&p&&p[m]||(b=h=0)||f.pop())&&((a?p.nodeName.toLowerCase()!==v:1!==p.nodeType)||!++b||(y&&((u=(d=p[x]||(p[x]={}))[p.uniqueID]||(d[p.uniqueID]={}))[e]=[_,b]),p!==t)););return(b-=s)===r||b%r==0&&b/r>=0}}},PSEUDO:function(e,t){var n,s=r.pseudos[e]||r.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);return s[x]?s(t):s.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?ce((function(e,n){for(var r,i=s(e,t),o=i.length;o--;)e[r=L(e,i[o])]=!(n[r]=i[o])})):function(e){return s(e,0,n)}):s}},pseudos:{not:ce((function(e){var t=[],n=[],r=a(e.replace(q,"$1"));return r[x]?ce((function(e,t,n,s){for(var i,o=r(e,null,s,[]),a=e.length;a--;)(i=o[a])&&(e[a]=!(t[a]=i))})):function(e,s,i){return t[0]=e,r(t,null,i,n),t[0]=null,!n.pop()}})),has:ce((function(e){return function(t){return ae(e,t).length>0}})),contains:ce((function(e){return e=e.replace(te,ne),function(t){return(t.textContent||s(t)).indexOf(e)>-1}})),lang:ce((function(e){return K.test(e||"")||ae.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:me(!1),disabled:me(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return X.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ge((function(){return[0]})),last:ge((function(e,t){return[t-1]})),eq:ge((function(e,t,n){return[n<0?n+t:n]})),even:ge((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:ge((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:ge((function(e,t,n){for(var r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e})),gt:ge((function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e}))}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=he(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=fe(t);function ye(){}function be(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function xe(e,t,n){var r=t.dir,s=t.next,i=s||r,o=n&&"parentNode"===i,a=C++;return t.first?function(t,n,s){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,s);return!1}:function(t,n,l){var c,u,d,p=[_,a];if(l){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,l))return!0}else for(;t=t[r];)if(1===t.nodeType||o)if(u=(d=t[x]||(t[x]={}))[t.uniqueID]||(d[t.uniqueID]={}),s&&s===t.nodeName.toLowerCase())t=t[r]||t;else{if((c=u[i])&&c[0]===_&&c[1]===a)return p[2]=c[2];if(u[i]=p,p[2]=e(t,n,l))return!0}return!1}}function we(e){return e.length>1?function(t,n,r){for(var s=e.length;s--;)if(!e[s](t,n,r))return!1;return!0}:e[0]}function _e(e,t,n,r,s){for(var i,o=[],a=0,l=e.length,c=null!=t;a<l;a++)(i=e[a])&&(n&&!n(i,r,s)||(o.push(i),c&&t.push(a)));return o}function Ce(e,t,n,r,s,i){return r&&!r[x]&&(r=Ce(r)),s&&!s[x]&&(s=Ce(s,i)),ce((function(i,o,a,l){var c,u,d,p=[],h=[],f=o.length,m=i||function(e,t,n){for(var r=0,s=t.length;r<s;r++)ae(e,t[r],n);return n}(t||"*",a.nodeType?[a]:a,[]),g=!e||!i&&t?m:_e(m,p,e,a,l),v=n?s||(i?e:f||r)?[]:o:g;if(n&&n(g,v,a,l),r)for(c=_e(v,h),r(c,[],a,l),u=c.length;u--;)(d=c[u])&&(v[h[u]]=!(g[h[u]]=d));if(i){if(s||e){if(s){for(c=[],u=v.length;u--;)(d=v[u])&&c.push(g[u]=d);s(null,v=[],c,l)}for(u=v.length;u--;)(d=v[u])&&(c=s?L(i,d):p[u])>-1&&(i[c]=!(o[c]=d))}}else v=_e(v===o?v.splice(f,v.length):v),s?s(null,o,v,l):O.apply(o,v)}))}function Se(e){for(var t,n,s,i=e.length,o=r.relative[e[0].type],a=o||r.relative[" "],l=o?1:0,u=xe((function(e){return e===t}),a,!0),d=xe((function(e){return L(t,e)>-1}),a,!0),p=[function(e,n,r){var s=!o&&(r||n!==c)||((t=n).nodeType?u(e,n,r):d(e,n,r));return t=null,s}];l<i;l++)if(n=r.relative[e[l].type])p=[xe(we(p),n)];else{if((n=r.filter[e[l].type].apply(null,e[l].matches))[x]){for(s=++l;s<i&&!r.relative[e[s].type];s++);return Ce(l>1&&we(p),l>1&&be(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(q,"$1"),n,l<s&&Se(e.slice(l,s)),s<i&&Se(e=e.slice(s)),s<i&&be(e))}p.push(n)}return we(p)}return ye.prototype=r.filters=r.pseudos,r.setFilters=new ye,o=ae.tokenize=function(e,t){var n,s,i,o,a,l,c,u=E[e+" "];if(u)return t?0:u.slice(0);for(a=e,l=[],c=r.preFilter;a;){for(o in n&&!(s=z.exec(a))||(s&&(a=a.slice(s[0].length)||a),l.push(i=[])),n=!1,(s=V.exec(a))&&(n=s.shift(),i.push({value:n,type:s[0].replace(q," ")}),a=a.slice(n.length)),r.filter)!(s=Y[o].exec(a))||c[o]&&!(s=c[o](s))||(n=s.shift(),i.push({value:n,type:o,matches:s}),a=a.slice(n.length));if(!n)break}return t?a.length:a?ae.error(e):E(e,l).slice(0)},a=ae.compile=function(e,t){var n,s=[],i=[],a=T[e+" "];if(!a){for(t||(t=o(e)),n=t.length;n--;)(a=Se(t[n]))[x]?s.push(a):i.push(a);(a=T(e,function(e,t){var n=t.length>0,s=e.length>0,i=function(i,o,a,l,u){var d,f,g,v=0,y="0",b=i&&[],x=[],w=c,C=i||s&&r.find.TAG("*",u),S=_+=null==w?1:Math.random()||.1,E=C.length;for(u&&(c=o==h||o||u);y!==E&&null!=(d=C[y]);y++){if(s&&d){for(f=0,o||d.ownerDocument==h||(p(d),a=!m);g=e[f++];)if(g(d,o||h,a)){l.push(d);break}u&&(_=S)}n&&((d=!g&&d)&&v--,i&&b.push(d))}if(v+=y,n&&y!==v){for(f=0;g=t[f++];)g(b,x,o,a);if(i){if(v>0)for(;y--;)b[y]||x[y]||(x[y]=M.call(l));x=_e(x)}O.apply(l,x),u&&!i&&x.length>0&&v+t.length>1&&ae.uniqueSort(l)}return u&&(_=S,c=w),b};return n?ce(i):i}(i,s))).selector=e}return a},l=ae.select=function(e,t,n,s){var i,l,c,u,d,p="function"==typeof e&&e,h=!s&&o(e=p.selector||e);if(n=n||[],1===h.length){if((l=h[0]=h[0].slice(0)).length>2&&"ID"===(c=l[0]).type&&9===t.nodeType&&m&&r.relative[l[1].type]){if(!(t=(r.find.ID(c.matches[0].replace(te,ne),t)||[])[0]))return n;p&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(i=Y.needsContext.test(e)?0:l.length;i--&&(c=l[i],!r.relative[u=c.type]);)if((d=r.find[u])&&(s=d(c.matches[0].replace(te,ne),ee.test(l[0].type)&&ve(t.parentNode)||t))){if(l.splice(i,1),!(e=s.length&&be(l)))return O.apply(n,s),n;break}}return(p||a(e,h))(s,t,!m,n,!t||ee.test(e)&&ve(t.parentNode)||t),n},n.sortStable=x.split("").sort(P).join("")===x,n.detectDuplicates=!!d,p(),n.sortDetached=ue((function(e){return 1&e.compareDocumentPosition(h.createElement("fieldset"))})),ue((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||de("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),n.attributes&&ue((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||de("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),ue((function(e){return null==e.getAttribute("disabled")}))||de(D,(function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null})),ae}(e);w.find=C,w.expr=C.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=C.uniqueSort,w.text=C.getText,w.isXMLDoc=C.isXML,w.contains=C.contains,w.escapeSelector=C.escape;var S=function(e,t,n){for(var r=[],s=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(s&&w(e).is(n))break;r.push(e)}return r},E=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},T=w.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var P=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function I(e,t,n){return f(t)?w.grep(e,(function(e,r){return!!t.call(e,r,e)!==n})):t.nodeType?w.grep(e,(function(e){return e===t!==n})):"string"!=typeof t?w.grep(e,(function(e){return a.call(t,e)>-1!==n})):w.filter(t,e,n)}w.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?w.find.matchesSelector(r,e)?[r]:[]:w.find.matches(e,w.grep(t,(function(e){return 1===e.nodeType})))},w.fn.extend({find:function(e){var t,n,r=this.length,s=this;if("string"!=typeof e)return this.pushStack(w(e).filter((function(){for(t=0;t<r;t++)if(w.contains(s[t],this))return!0})));for(n=this.pushStack([]),t=0;t<r;t++)w.find(e,s[t],n);return r>1?w.uniqueSort(n):n},filter:function(e){return this.pushStack(I(this,e||[],!1))},not:function(e){return this.pushStack(I(this,e||[],!0))},is:function(e){return!!I(this,"string"==typeof e&&T.test(e)?w(e):e||[],!1).length}});var N,M=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(e,t,n){var r,s;if(!e)return this;if(n=n||N,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:M.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof w?t[0]:t,w.merge(this,w.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:g,!0)),P.test(r[1])&&w.isPlainObject(t))for(r in t)f(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(s=g.getElementById(r[2]))&&(this[0]=s,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):f(e)?void 0!==n.ready?n.ready(e):e(w):w.makeArray(e,this)}).prototype=w.fn,N=w(g);var R=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};function k(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}w.fn.extend({has:function(e){var t=w(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(w.contains(this,t[e]))return!0}))},closest:function(e,t){var n,r=0,s=this.length,i=[],o="string"!=typeof e&&w(e);if(!T.test(e))for(;r<s;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&w.find.matchesSelector(n,e))){i.push(n);break}return this.pushStack(i.length>1?w.uniqueSort(i):i)},index:function(e){return e?"string"==typeof e?a.call(w(e),this[0]):a.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),w.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return S(e,"parentNode")},parentsUntil:function(e,t,n){return S(e,"parentNode",n)},next:function(e){return k(e,"nextSibling")},prev:function(e){return k(e,"previousSibling")},nextAll:function(e){return S(e,"nextSibling")},prevAll:function(e){return S(e,"previousSibling")},nextUntil:function(e,t,n){return S(e,"nextSibling",n)},prevUntil:function(e,t,n){return S(e,"previousSibling",n)},siblings:function(e){return E((e.parentNode||{}).firstChild,e)},children:function(e){return E(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(A(e,"template")&&(e=e.content||e),w.merge([],e.childNodes))}},(function(e,t){w.fn[e]=function(n,r){var s=w.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(s=w.filter(r,s)),this.length>1&&(O[e]||w.uniqueSort(s),R.test(e)&&s.reverse()),this.pushStack(s)}}));var L=/[^\x20\t\r\n\f]+/g;function D(e){return e}function j(e){throw e}function U(e,t,n,r){var s;try{e&&f(s=e.promise)?s.call(e).done(t).fail(n):e&&f(s=e.then)?s.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(i){n.apply(void 0,[i])}}w.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return w.each(e.match(L)||[],(function(e,n){t[n]=!0})),t}(e):w.extend({},e);var t,n,r,s,i=[],o=[],a=-1,l=function(){for(s=s||e.once,r=t=!0;o.length;a=-1)for(n=o.shift();++a<i.length;)!1===i[a].apply(n[0],n[1])&&e.stopOnFalse&&(a=i.length,n=!1);e.memory||(n=!1),t=!1,s&&(i=n?[]:"")},c={add:function(){return i&&(n&&!t&&(a=i.length-1,o.push(n)),function t(n){w.each(n,(function(n,r){f(r)?e.unique&&c.has(r)||i.push(r):r&&r.length&&"string"!==b(r)&&t(r)}))}(arguments),n&&!t&&l()),this},remove:function(){return w.each(arguments,(function(e,t){for(var n;(n=w.inArray(t,i,n))>-1;)i.splice(n,1),n<=a&&a--})),this},has:function(e){return e?w.inArray(e,i)>-1:i.length>0},empty:function(){return i&&(i=[]),this},disable:function(){return s=o=[],i=n="",this},disabled:function(){return!i},lock:function(){return s=o=[],n||t||(i=n=""),this},locked:function(){return!!s},fireWith:function(e,n){return s||(n=[e,(n=n||[]).slice?n.slice():n],o.push(n),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},w.extend({Deferred:function(t){var n=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],r="pending",s={state:function(){return r},always:function(){return i.done(arguments).fail(arguments),this},catch:function(e){return s.then(null,e)},pipe:function(){var e=arguments;return w.Deferred((function(t){w.each(n,(function(n,r){var s=f(e[r[4]])&&e[r[4]];i[r[1]]((function(){var e=s&&s.apply(this,arguments);e&&f(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,s?[e]:arguments)}))})),e=null})).promise()},then:function(t,r,s){var i=0;function o(t,n,r,s){return function(){var a=this,l=arguments,c=function(){var e,c;if(!(t<i)){if((e=r.apply(a,l))===n.promise())throw new TypeError("Thenable self-resolution");c=e&&("object"==typeof e||"function"==typeof e)&&e.then,f(c)?s?c.call(e,o(i,n,D,s),o(i,n,j,s)):(i++,c.call(e,o(i,n,D,s),o(i,n,j,s),o(i,n,D,n.notifyWith))):(r!==D&&(a=void 0,l=[e]),(s||n.resolveWith)(a,l))}},u=s?c:function(){try{c()}catch(e){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(e,u.stackTrace),t+1>=i&&(r!==j&&(a=void 0,l=[e]),n.rejectWith(a,l))}};t?u():(w.Deferred.getStackHook&&(u.stackTrace=w.Deferred.getStackHook()),e.setTimeout(u))}}return w.Deferred((function(e){n[0][3].add(o(0,e,f(s)?s:D,e.notifyWith)),n[1][3].add(o(0,e,f(t)?t:D)),n[2][3].add(o(0,e,f(r)?r:j))})).promise()},promise:function(e){return null!=e?w.extend(e,s):s}},i={};return w.each(n,(function(e,t){var o=t[2],a=t[5];s[t[1]]=o.add,a&&o.add((function(){r=a}),n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),o.add(t[3].fire),i[t[0]]=function(){return i[t[0]+"With"](this===i?void 0:this,arguments),this},i[t[0]+"With"]=o.fireWith})),s.promise(i),t&&t.call(i,i),i},when:function(e){var t=arguments.length,n=t,r=Array(n),i=s.call(arguments),o=w.Deferred(),a=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?s.call(arguments):n,--t||o.resolveWith(r,i)}};if(t<=1&&(U(e,o.done(a(n)).resolve,o.reject,!t),"pending"===o.state()||f(i[n]&&i[n].then)))return o.then();for(;n--;)U(i[n],a(n),o.reject);return o.promise()}});var H=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&H.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},w.readyException=function(t){e.setTimeout((function(){throw t}))};var F=w.Deferred();function B(){g.removeEventListener("DOMContentLoaded",B),e.removeEventListener("load",B),w.ready()}w.fn.ready=function(e){return F.then(e).catch((function(e){w.readyException(e)})),this},w.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--w.readyWait:w.isReady)||(w.isReady=!0,!0!==e&&--w.readyWait>0||F.resolveWith(g,[w]))}}),w.ready.then=F.then,"complete"===g.readyState||"loading"!==g.readyState&&!g.documentElement.doScroll?e.setTimeout(w.ready):(g.addEventListener("DOMContentLoaded",B),e.addEventListener("load",B));var q=function(e,t,n,r,s,i,o){var a=0,l=e.length,c=null==n;if("object"===b(n))for(a in s=!0,n)q(e,t,a,n[a],!0,i,o);else if(void 0!==r&&(s=!0,f(r)||(o=!0),c&&(o?(t.call(e,r),t=null):(c=t,t=function(e,t,n){return c.call(w(e),n)})),t))for(;a<l;a++)t(e[a],n,o?r:r.call(e[a],a,t(e[a],n)));return s?e:c?t.call(e):l?t(e[0],n):i},z=/^-ms-/,V=/-([a-z])/g;function G(e,t){return t.toUpperCase()}function W(e){return e.replace(z,"ms-").replace(V,G)}var K=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Y(){this.expando=w.expando+Y.uid++}Y.uid=1,Y.prototype={cache:function(e){var t=e[this.expando];return t||(t={},K(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,s=this.cache(e);if("string"==typeof t)s[W(t)]=n;else for(r in t)s[W(r)]=t[r];return s},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][W(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(W):(t=W(t))in r?[t]:t.match(L)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||w.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!w.isEmptyObject(t)}};var $=new Y,X=new Y,Q=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,J=/[A-Z]/g;function Z(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(J,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Q.test(e)?JSON.parse(e):e)}(n)}catch(s){}X.set(e,t,n)}else n=void 0;return n}w.extend({hasData:function(e){return X.hasData(e)||$.hasData(e)},data:function(e,t,n){return X.access(e,t,n)},removeData:function(e,t){X.remove(e,t)},_data:function(e,t,n){return $.access(e,t,n)},_removeData:function(e,t){$.remove(e,t)}}),w.fn.extend({data:function(e,t){var n,r,s,i=this[0],o=i&&i.attributes;if(void 0===e){if(this.length&&(s=X.get(i),1===i.nodeType&&!$.get(i,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&0===(r=o[n].name).indexOf("data-")&&(r=W(r.slice(5)),Z(i,r,s[r]));$.set(i,"hasDataAttrs",!0)}return s}return"object"==typeof e?this.each((function(){X.set(this,e)})):q(this,(function(t){var n;if(i&&void 0===t)return void 0!==(n=X.get(i,e))||void 0!==(n=Z(i,e))?n:void 0;this.each((function(){X.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){X.remove(this,e)}))}}),w.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=$.get(e,t),n&&(!r||Array.isArray(n)?r=$.access(e,t,w.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=w.queue(e,t),r=n.length,s=n.shift(),i=w._queueHooks(e,t);"inprogress"===s&&(s=n.shift(),r--),s&&("fx"===t&&n.unshift("inprogress"),delete i.stop,s.call(e,(function(){w.dequeue(e,t)}),i)),!r&&i&&i.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return $.get(e,n)||$.access(e,n,{empty:w.Callbacks("once memory").add((function(){$.remove(e,[t+"queue",n])}))})}}),w.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?w.queue(this[0],e):void 0===t?this:this.each((function(){var n=w.queue(this,e,t);w._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&w.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){w.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,s=w.Deferred(),i=this,o=this.length,a=function(){--r||s.resolveWith(i,[i])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(n=$.get(i[o],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(a));return a(),s.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],re=g.documentElement,se=function(e){return w.contains(e.ownerDocument,e)},ie={composed:!0};re.getRootNode&&(se=function(e){return w.contains(e.ownerDocument,e)||e.getRootNode(ie)===e.ownerDocument});var oe=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&se(e)&&"none"===w.css(e,"display")};function ae(e,t,n,r){var s,i,o=20,a=r?function(){return r.cur()}:function(){return w.css(e,t,"")},l=a(),c=n&&n[3]||(w.cssNumber[t]?"":"px"),u=e.nodeType&&(w.cssNumber[t]||"px"!==c&&+l)&&te.exec(w.css(e,t));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;o--;)w.style(e,t,u+c),(1-i)*(1-(i=a()/l||.5))<=0&&(o=0),u/=i;u*=2,w.style(e,t,u+c),n=n||[]}return n&&(u=+u||+l||0,s=n[1]?u+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=u,r.end=s)),s}var le={};function ce(e){var t,n=e.ownerDocument,r=e.nodeName,s=le[r];return s||(t=n.body.appendChild(n.createElement(r)),s=w.css(t,"display"),t.parentNode.removeChild(t),"none"===s&&(s="block"),le[r]=s,s)}function ue(e,t){for(var n,r,s=[],i=0,o=e.length;i<o;i++)(r=e[i]).style&&(n=r.style.display,t?("none"===n&&(s[i]=$.get(r,"display")||null,s[i]||(r.style.display="")),""===r.style.display&&oe(r)&&(s[i]=ce(r))):"none"!==n&&(s[i]="none",$.set(r,"display",n)));for(i=0;i<o;i++)null!=s[i]&&(e[i].style.display=s[i]);return e}w.fn.extend({show:function(){return ue(this,!0)},hide:function(){return ue(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){oe(this)?w(this).show():w(this).hide()}))}});var de,pe,he=/^(?:checkbox|radio)$/i,fe=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,me=/^$|^module$|\/(?:java|ecma)script/i;de=g.createDocumentFragment().appendChild(g.createElement("div")),(pe=g.createElement("input")).setAttribute("type","radio"),pe.setAttribute("checked","checked"),pe.setAttribute("name","t"),de.appendChild(pe),h.checkClone=de.cloneNode(!0).cloneNode(!0).lastChild.checked,de.innerHTML="<textarea>x</textarea>",h.noCloneChecked=!!de.cloneNode(!0).lastChild.defaultValue,de.innerHTML="<option></option>",h.option=!!de.lastChild;var ge={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ve(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?w.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)$.set(e[n],"globalEval",!t||$.get(t[n],"globalEval"))}ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td,h.option||(ge.optgroup=ge.option=[1,"<select multiple='multiple'>","</select>"]);var be=/<|&#?\w+;/;function xe(e,t,n,r,s){for(var i,o,a,l,c,u,d=t.createDocumentFragment(),p=[],h=0,f=e.length;h<f;h++)if((i=e[h])||0===i)if("object"===b(i))w.merge(p,i.nodeType?[i]:i);else if(be.test(i)){for(o=o||d.appendChild(t.createElement("div")),a=(fe.exec(i)||["",""])[1].toLowerCase(),l=ge[a]||ge._default,o.innerHTML=l[1]+w.htmlPrefilter(i)+l[2],u=l[0];u--;)o=o.lastChild;w.merge(p,o.childNodes),(o=d.firstChild).textContent=""}else p.push(t.createTextNode(i));for(d.textContent="",h=0;i=p[h++];)if(r&&w.inArray(i,r)>-1)s&&s.push(i);else if(c=se(i),o=ve(d.appendChild(i),"script"),c&&ye(o),n)for(u=0;i=o[u++];)me.test(i.type||"")&&n.push(i);return d}var we=/^([^.]*)(?:\.(.+)|)/;function _e(){return!0}function Ce(){return!1}function Se(e,t){return e===function(){try{return g.activeElement}catch(e){}}()==("focus"===t)}function Ee(e,t,n,r,s,i){var o,a;if("object"==typeof t){for(a in"string"!=typeof n&&(r=r||n,n=void 0),t)Ee(e,a,n,r,t[a],i);return e}if(null==r&&null==s?(s=n,r=n=void 0):null==s&&("string"==typeof n?(s=r,r=void 0):(s=r,r=n,n=void 0)),!1===s)s=Ce;else if(!s)return e;return 1===i&&(o=s,(s=function(e){return w().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=w.guid++)),e.each((function(){w.event.add(this,t,s,r,n)}))}function Te(e,t,n){n?($.set(e,t,!1),w.event.add(e,t,{namespace:!1,handler:function(e){var r,i,o=$.get(this,t);if(1&e.isTrigger&&this[t]){if(o.length)(w.event.special[t]||{}).delegateType&&e.stopPropagation();else if(o=s.call(arguments),$.set(this,t,o),r=n(this,t),this[t](),o!==(i=$.get(this,t))||r?$.set(this,t,!1):i={},o!==i)return e.stopImmediatePropagation(),e.preventDefault(),i&&i.value}else o.length&&($.set(this,t,{value:w.event.trigger(w.extend(o[0],w.Event.prototype),o.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===$.get(e,t)&&w.event.add(e,t,_e)}w.event={global:{},add:function(e,t,n,r,s){var i,o,a,l,c,u,d,p,h,f,m,g=$.get(e);if(K(e))for(n.handler&&(n=(i=n).handler,s=i.selector),s&&w.find.matchesSelector(re,s),n.guid||(n.guid=w.guid++),(l=g.events)||(l=g.events=Object.create(null)),(o=g.handle)||(o=g.handle=function(t){return void 0!==w&&w.event.triggered!==t.type?w.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(L)||[""]).length;c--;)h=m=(a=we.exec(t[c])||[])[1],f=(a[2]||"").split(".").sort(),h&&(d=w.event.special[h]||{},h=(s?d.delegateType:d.bindType)||h,d=w.event.special[h]||{},u=w.extend({type:h,origType:m,data:r,handler:n,guid:n.guid,selector:s,needsContext:s&&w.expr.match.needsContext.test(s),namespace:f.join(".")},i),(p=l[h])||((p=l[h]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,r,f,o)||e.addEventListener&&e.addEventListener(h,o)),d.add&&(d.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),s?p.splice(p.delegateCount++,0,u):p.push(u),w.event.global[h]=!0)},remove:function(e,t,n,r,s){var i,o,a,l,c,u,d,p,h,f,m,g=$.hasData(e)&&$.get(e);if(g&&(l=g.events)){for(c=(t=(t||"").match(L)||[""]).length;c--;)if(h=m=(a=we.exec(t[c])||[])[1],f=(a[2]||"").split(".").sort(),h){for(d=w.event.special[h]||{},p=l[h=(r?d.delegateType:d.bindType)||h]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=i=p.length;i--;)u=p[i],!s&&m!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||r&&r!==u.selector&&("**"!==r||!u.selector)||(p.splice(i,1),u.selector&&p.delegateCount--,d.remove&&d.remove.call(e,u));o&&!p.length&&(d.teardown&&!1!==d.teardown.call(e,f,g.handle)||w.removeEvent(e,h,g.handle),delete l[h])}else for(h in l)w.event.remove(e,h+t[c],n,r,!0);w.isEmptyObject(l)&&$.remove(e,"handle events")}},dispatch:function(e){var t,n,r,s,i,o,a=new Array(arguments.length),l=w.event.fix(e),c=($.get(this,"events")||Object.create(null))[l.type]||[],u=w.event.special[l.type]||{};for(a[0]=l,t=1;t<arguments.length;t++)a[t]=arguments[t];if(l.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,l)){for(o=w.event.handlers.call(this,l,c),t=0;(s=o[t++])&&!l.isPropagationStopped();)for(l.currentTarget=s.elem,n=0;(i=s.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==i.namespace&&!l.rnamespace.test(i.namespace)||(l.handleObj=i,l.data=i.data,void 0!==(r=((w.event.special[i.origType]||{}).handle||i.handler).apply(s.elem,a))&&!1===(l.result=r)&&(l.preventDefault(),l.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,l),l.result}},handlers:function(e,t){var n,r,s,i,o,a=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(i=[],o={},n=0;n<l;n++)void 0===o[s=(r=t[n]).selector+" "]&&(o[s]=r.needsContext?w(s,this).index(c)>-1:w.find(s,this,null,[c]).length),o[s]&&i.push(r);i.length&&a.push({elem:c,handlers:i})}return c=this,l<t.length&&a.push({elem:c,handlers:t.slice(l)}),a},addProp:function(e,t){Object.defineProperty(w.Event.prototype,e,{enumerable:!0,configurable:!0,get:f(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[w.expando]?e:new w.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return he.test(t.type)&&t.click&&A(t,"input")&&Te(t,"click",_e),!1},trigger:function(e){var t=this||e;return he.test(t.type)&&t.click&&A(t,"input")&&Te(t,"click"),!0},_default:function(e){var t=e.target;return he.test(t.type)&&t.click&&A(t,"input")&&$.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},w.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},w.Event=function(e,t){if(!(this instanceof w.Event))return new w.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?_e:Ce,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&w.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:Ce,isPropagationStopped:Ce,isImmediatePropagationStopped:Ce,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=_e,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=_e,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=_e,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},w.event.addProp),w.each({focus:"focusin",blur:"focusout"},(function(e,t){w.event.special[e]={setup:function(){return Te(this,e,Se),!1},trigger:function(){return Te(this,e),!0},_default:function(){return!0},delegateType:t}})),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){w.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,s=e.relatedTarget,i=e.handleObj;return s&&(s===r||w.contains(r,s))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}})),w.fn.extend({on:function(e,t,n,r){return Ee(this,e,t,n,r)},one:function(e,t,n,r){return Ee(this,e,t,n,r,1)},off:function(e,t,n){var r,s;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,w(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(s in e)this.off(s,t,e[s]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Ce),this.each((function(){w.event.remove(this,e,n,t)}))}});var Ae=/<script|<style|<link/i,Pe=/checked\s*(?:[^=]|=\s*.checked.)/i,Ie=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ne(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&w(e).children("tbody")[0]||e}function Me(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Re(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Oe(e,t){var n,r,s,i,o,a;if(1===t.nodeType){if($.hasData(e)&&(a=$.get(e).events))for(s in $.remove(t,"handle events"),a)for(n=0,r=a[s].length;n<r;n++)w.event.add(t,s,a[s][n]);X.hasData(e)&&(i=X.access(e),o=w.extend({},i),X.set(t,o))}}function ke(e,t,n,r){t=i(t);var s,o,a,l,c,u,d=0,p=e.length,m=p-1,g=t[0],v=f(g);if(v||p>1&&"string"==typeof g&&!h.checkClone&&Pe.test(g))return e.each((function(s){var i=e.eq(s);v&&(t[0]=g.call(this,s,i.html())),ke(i,t,n,r)}));if(p&&(o=(s=xe(t,e[0].ownerDocument,!1,e,r)).firstChild,1===s.childNodes.length&&(s=o),o||r)){for(l=(a=w.map(ve(s,"script"),Me)).length;d<p;d++)c=s,d!==m&&(c=w.clone(c,!0,!0),l&&w.merge(a,ve(c,"script"))),n.call(e[d],c,d);if(l)for(u=a[a.length-1].ownerDocument,w.map(a,Re),d=0;d<l;d++)c=a[d],me.test(c.type||"")&&!$.access(c,"globalEval")&&w.contains(u,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?w._evalUrl&&!c.noModule&&w._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},u):y(c.textContent.replace(Ie,""),c,u))}return e}function Le(e,t,n){for(var r,s=t?w.filter(t,e):e,i=0;null!=(r=s[i]);i++)n||1!==r.nodeType||w.cleanData(ve(r)),r.parentNode&&(n&&se(r)&&ye(ve(r,"script")),r.parentNode.removeChild(r));return e}w.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,s,i,o,a,l,c,u=e.cloneNode(!0),d=se(e);if(!(h.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||w.isXMLDoc(e)))for(o=ve(u),r=0,s=(i=ve(e)).length;r<s;r++)a=i[r],l=o[r],c=void 0,"input"===(c=l.nodeName.toLowerCase())&&he.test(a.type)?l.checked=a.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=a.defaultValue);if(t)if(n)for(i=i||ve(e),o=o||ve(u),r=0,s=i.length;r<s;r++)Oe(i[r],o[r]);else Oe(e,u);return(o=ve(u,"script")).length>0&&ye(o,!d&&ve(e,"script")),u},cleanData:function(e){for(var t,n,r,s=w.event.special,i=0;void 0!==(n=e[i]);i++)if(K(n)){if(t=n[$.expando]){if(t.events)for(r in t.events)s[r]?w.event.remove(n,r):w.removeEvent(n,r,t.handle);n[$.expando]=void 0}n[X.expando]&&(n[X.expando]=void 0)}}}),w.fn.extend({detach:function(e){return Le(this,e,!0)},remove:function(e){return Le(this,e)},text:function(e){return q(this,(function(e){return void 0===e?w.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return ke(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ne(this,e).appendChild(e)}))},prepend:function(){return ke(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ne(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return ke(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return ke(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(w.cleanData(ve(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return w.clone(this,e,t)}))},html:function(e){return q(this,(function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ae.test(e)&&!ge[(fe.exec(e)||["",""])[1].toLowerCase()]){e=w.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(w.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(s){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return ke(this,arguments,(function(t){var n=this.parentNode;w.inArray(this,e)<0&&(w.cleanData(ve(this)),n&&n.replaceChild(t,this))}),e)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){w.fn[e]=function(e){for(var n,r=[],s=w(e),i=s.length-1,a=0;a<=i;a++)n=a===i?this:this.clone(!0),w(s[a])[t](n),o.apply(r,n.get());return this.pushStack(r)}}));var De=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),je=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Ue=function(e,t,n){var r,s,i={};for(s in t)i[s]=e.style[s],e.style[s]=t[s];for(s in r=n.call(e),t)e.style[s]=i[s];return r},He=new RegExp(ne.join("|"),"i");function Fe(e,t,n){var r,s,i,o,a=e.style;return(n=n||je(e))&&(""!==(o=n.getPropertyValue(t)||n[t])||se(e)||(o=w.style(e,t)),!h.pixelBoxStyles()&&De.test(o)&&He.test(t)&&(r=a.width,s=a.minWidth,i=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=n.width,a.width=r,a.minWidth=s,a.maxWidth=i)),void 0!==o?o+"":o}function Be(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function t(){if(u){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",re.appendChild(c).appendChild(u);var t=e.getComputedStyle(u);r="1%"!==t.top,l=12===n(t.marginLeft),u.style.right="60%",o=36===n(t.right),s=36===n(t.width),u.style.position="absolute",i=12===n(u.offsetWidth/3),re.removeChild(c),u=null}}function n(e){return Math.round(parseFloat(e))}var r,s,i,o,a,l,c=g.createElement("div"),u=g.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",h.clearCloneStyle="content-box"===u.style.backgroundClip,w.extend(h,{boxSizingReliable:function(){return t(),s},pixelBoxStyles:function(){return t(),o},pixelPosition:function(){return t(),r},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),i},reliableTrDimensions:function(){var t,n,r,s;return null==a&&(t=g.createElement("table"),n=g.createElement("tr"),r=g.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",n.style.cssText="border:1px solid",n.style.height="1px",r.style.height="9px",r.style.display="block",re.appendChild(t).appendChild(n).appendChild(r),s=e.getComputedStyle(n),a=parseInt(s.height,10)+parseInt(s.borderTopWidth,10)+parseInt(s.borderBottomWidth,10)===n.offsetHeight,re.removeChild(t)),a}}))}();var qe=["Webkit","Moz","ms"],ze=g.createElement("div").style,Ve={};function Ge(e){var t=w.cssProps[e]||Ve[e];return t||(e in ze?e:Ve[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=qe.length;n--;)if((e=qe[n]+t)in ze)return e}(e)||e)}var We=/^(none|table(?!-c[ea]).+)/,Ke=/^--/,Ye={position:"absolute",visibility:"hidden",display:"block"},$e={letterSpacing:"0",fontWeight:"400"};function Xe(e,t,n){var r=te.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Qe(e,t,n,r,s,i){var o="width"===t?1:0,a=0,l=0;if(n===(r?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(l+=w.css(e,n+ne[o],!0,s)),r?("content"===n&&(l-=w.css(e,"padding"+ne[o],!0,s)),"margin"!==n&&(l-=w.css(e,"border"+ne[o]+"Width",!0,s))):(l+=w.css(e,"padding"+ne[o],!0,s),"padding"!==n?l+=w.css(e,"border"+ne[o]+"Width",!0,s):a+=w.css(e,"border"+ne[o]+"Width",!0,s));return!r&&i>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-i-l-a-.5))||0),l}function Je(e,t,n){var r=je(e),s=(!h.boxSizingReliable()||n)&&"border-box"===w.css(e,"boxSizing",!1,r),i=s,o=Fe(e,t,r),a="offset"+t[0].toUpperCase()+t.slice(1);if(De.test(o)){if(!n)return o;o="auto"}return(!h.boxSizingReliable()&&s||!h.reliableTrDimensions()&&A(e,"tr")||"auto"===o||!parseFloat(o)&&"inline"===w.css(e,"display",!1,r))&&e.getClientRects().length&&(s="border-box"===w.css(e,"boxSizing",!1,r),(i=a in e)&&(o=e[a])),(o=parseFloat(o)||0)+Qe(e,t,n||(s?"border":"content"),i,r,o)+"px"}function Ze(e,t,n,r,s){return new Ze.prototype.init(e,t,n,r,s)}w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Fe(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,i,o,a=W(t),l=Ke.test(t),c=e.style;if(l||(t=Ge(a)),o=w.cssHooks[t]||w.cssHooks[a],void 0===n)return o&&"get"in o&&void 0!==(s=o.get(e,!1,r))?s:c[t];"string"==(i=typeof n)&&(s=te.exec(n))&&s[1]&&(n=ae(e,t,s),i="number"),null!=n&&n==n&&("number"!==i||l||(n+=s&&s[3]||(w.cssNumber[a]?"":"px")),h.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,r))||(l?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,r){var s,i,o,a=W(t);return Ke.test(t)||(t=Ge(a)),(o=w.cssHooks[t]||w.cssHooks[a])&&"get"in o&&(s=o.get(e,!0,n)),void 0===s&&(s=Fe(e,t,r)),"normal"===s&&t in $e&&(s=$e[t]),""===n||n?(i=parseFloat(s),!0===n||isFinite(i)?i||0:s):s}}),w.each(["height","width"],(function(e,t){w.cssHooks[t]={get:function(e,n,r){if(n)return!We.test(w.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Je(e,t,r):Ue(e,Ye,(function(){return Je(e,t,r)}))},set:function(e,n,r){var s,i=je(e),o=!h.scrollboxSize()&&"absolute"===i.position,a=(o||r)&&"border-box"===w.css(e,"boxSizing",!1,i),l=r?Qe(e,t,r,a,i):0;return a&&o&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(i[t])-Qe(e,t,"border",!1,i)-.5)),l&&(s=te.exec(n))&&"px"!==(s[3]||"px")&&(e.style[t]=n,n=w.css(e,t)),Xe(0,n,l)}}})),w.cssHooks.marginLeft=Be(h.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Fe(e,"marginLeft"))||e.getBoundingClientRect().left-Ue(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),w.each({margin:"",padding:"",border:"Width"},(function(e,t){w.cssHooks[e+t]={expand:function(n){for(var r=0,s={},i="string"==typeof n?n.split(" "):[n];r<4;r++)s[e+ne[r]+t]=i[r]||i[r-2]||i[0];return s}},"margin"!==e&&(w.cssHooks[e+t].set=Xe)})),w.fn.extend({css:function(e,t){return q(this,(function(e,t,n){var r,s,i={},o=0;if(Array.isArray(t)){for(r=je(e),s=t.length;o<s;o++)i[t[o]]=w.css(e,t[o],!1,r);return i}return void 0!==n?w.style(e,t,n):w.css(e,t)}),e,t,arguments.length>1)}}),w.Tween=Ze,Ze.prototype={constructor:Ze,init:function(e,t,n,r,s,i){this.elem=e,this.prop=n,this.easing=s||w.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=i||(w.cssNumber[n]?"":"px")},cur:function(){var e=Ze.propHooks[this.prop];return e&&e.get?e.get(this):Ze.propHooks._default.get(this)},run:function(e){var t,n=Ze.propHooks[this.prop];return this.options.duration?this.pos=t=w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Ze.propHooks._default.set(this),this}},Ze.prototype.init.prototype=Ze.prototype,Ze.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=w.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){w.fx.step[e.prop]?w.fx.step[e.prop](e):1!==e.elem.nodeType||!w.cssHooks[e.prop]&&null==e.elem.style[Ge(e.prop)]?e.elem[e.prop]=e.now:w.style(e.elem,e.prop,e.now+e.unit)}}},Ze.propHooks.scrollTop=Ze.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},w.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},w.fx=Ze.prototype.init,w.fx.step={};var et,tt,nt=/^(?:toggle|show|hide)$/,rt=/queueHooks$/;function st(){tt&&(!1===g.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(st):e.setTimeout(st,w.fx.interval),w.fx.tick())}function it(){return e.setTimeout((function(){et=void 0})),et=Date.now()}function ot(e,t){var n,r=0,s={height:e};for(t=t?1:0;r<4;r+=2-t)s["margin"+(n=ne[r])]=s["padding"+n]=e;return t&&(s.opacity=s.width=e),s}function at(e,t,n){for(var r,s=(lt.tweeners[t]||[]).concat(lt.tweeners["*"]),i=0,o=s.length;i<o;i++)if(r=s[i].call(n,t,e))return r}function lt(e,t,n){var r,s,i=0,o=lt.prefilters.length,a=w.Deferred().always((function(){delete l.elem})),l=function(){if(s)return!1;for(var t=et||it(),n=Math.max(0,c.startTime+c.duration-t),r=1-(n/c.duration||0),i=0,o=c.tweens.length;i<o;i++)c.tweens[i].run(r);return a.notifyWith(e,[c,r,n]),r<1&&o?n:(o||a.notifyWith(e,[c,1,0]),a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},n),originalProperties:t,originalOptions:n,startTime:et||it(),duration:n.duration,tweens:[],createTween:function(t,n){var r=w.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(r),r},stop:function(t){var n=0,r=t?c.tweens.length:0;if(s)return this;for(s=!0;n<r;n++)c.tweens[n].run(1);return t?(a.notifyWith(e,[c,1,0]),a.resolveWith(e,[c,t])):a.rejectWith(e,[c,t]),this}}),u=c.props;for(function(e,t){var n,r,s,i,o;for(n in e)if(s=t[r=W(n)],i=e[n],Array.isArray(i)&&(s=i[1],i=e[n]=i[0]),n!==r&&(e[r]=i,delete e[n]),(o=w.cssHooks[r])&&"expand"in o)for(n in i=o.expand(i),delete e[r],i)n in e||(e[n]=i[n],t[n]=s);else t[r]=s}(u,c.opts.specialEasing);i<o;i++)if(r=lt.prefilters[i].call(c,e,u,c.opts))return f(r.stop)&&(w._queueHooks(c.elem,c.opts.queue).stop=r.stop.bind(r)),r;return w.map(u,at,c),f(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),w.fx.timer(w.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}w.Animation=w.extend(lt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ae(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){f(e)?(t=e,e=["*"]):e=e.match(L);for(var n,r=0,s=e.length;r<s;r++)n=e[r],lt.tweeners[n]=lt.tweeners[n]||[],lt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,s,i,o,a,l,c,u,d="width"in t||"height"in t,p=this,h={},f=e.style,m=e.nodeType&&oe(e),g=$.get(e,"fxshow");for(r in n.queue||(null==(o=w._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,a=o.empty.fire,o.empty.fire=function(){o.unqueued||a()}),o.unqueued++,p.always((function(){p.always((function(){o.unqueued--,w.queue(e,"fx").length||o.empty.fire()}))}))),t)if(s=t[r],nt.test(s)){if(delete t[r],i=i||"toggle"===s,s===(m?"hide":"show")){if("show"!==s||!g||void 0===g[r])continue;m=!0}h[r]=g&&g[r]||w.style(e,r)}if((l=!w.isEmptyObject(t))||!w.isEmptyObject(h))for(r in d&&1===e.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],null==(c=g&&g.display)&&(c=$.get(e,"display")),"none"===(u=w.css(e,"display"))&&(c?u=c:(ue([e],!0),c=e.style.display||c,u=w.css(e,"display"),ue([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===w.css(e,"float")&&(l||(p.done((function(){f.display=c})),null==c&&(u=f.display,c="none"===u?"":u)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",p.always((function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}))),l=!1,h)l||(g?"hidden"in g&&(m=g.hidden):g=$.access(e,"fxshow",{display:c}),i&&(g.hidden=!m),m&&ue([e],!0),p.done((function(){for(r in m||ue([e]),$.remove(e,"fxshow"),h)w.style(e,r,h[r])}))),l=at(m?g[r]:0,r,p),r in g||(g[r]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?lt.prefilters.unshift(e):lt.prefilters.push(e)}}),w.speed=function(e,t,n){var r=e&&"object"==typeof e?w.extend({},e):{complete:n||!n&&t||f(e)&&e,duration:e,easing:n&&t||t&&!f(t)&&t};return w.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in w.fx.speeds?r.duration=w.fx.speeds[r.duration]:r.duration=w.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){f(r.old)&&r.old.call(this),r.queue&&w.dequeue(this,r.queue)},r},w.fn.extend({fadeTo:function(e,t,n,r){return this.filter(oe).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var s=w.isEmptyObject(e),i=w.speed(t,n,r),o=function(){var t=lt(this,w.extend({},e),i);(s||$.get(this,"finish"))&&t.stop(!0)};return o.finish=o,s||!1===i.queue?this.each(o):this.queue(i.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,s=null!=e&&e+"queueHooks",i=w.timers,o=$.get(this);if(s)o[s]&&o[s].stop&&r(o[s]);else for(s in o)o[s]&&o[s].stop&&rt.test(s)&&r(o[s]);for(s=i.length;s--;)i[s].elem!==this||null!=e&&i[s].queue!==e||(i[s].anim.stop(n),t=!1,i.splice(s,1));!t&&n||w.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=$.get(this),r=n[e+"queue"],s=n[e+"queueHooks"],i=w.timers,o=r?r.length:0;for(n.finish=!0,w.queue(this,e,[]),s&&s.stop&&s.stop.call(this,!0),t=i.length;t--;)i[t].elem===this&&i[t].queue===e&&(i[t].anim.stop(!0),i.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish}))}}),w.each(["toggle","show","hide"],(function(e,t){var n=w.fn[t];w.fn[t]=function(e,r,s){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ot(t,!0),e,r,s)}})),w.each({slideDown:ot("show"),slideUp:ot("hide"),slideToggle:ot("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){w.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}})),w.timers=[],w.fx.tick=function(){var e,t=0,n=w.timers;for(et=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||w.fx.stop(),et=void 0},w.fx.timer=function(e){w.timers.push(e),w.fx.start()},w.fx.interval=13,w.fx.start=function(){tt||(tt=!0,st())},w.fx.stop=function(){tt=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(t,n){return t=w.fx&&w.fx.speeds[t]||t,n=n||"fx",this.queue(n,(function(n,r){var s=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(s)}}))},function(){var e=g.createElement("input"),t=g.createElement("select").appendChild(g.createElement("option"));e.type="checkbox",h.checkOn=""!==e.value,h.optSelected=t.selected,(e=g.createElement("input")).value="t",e.type="radio",h.radioValue="t"===e.value}();var ct,ut=w.expr.attrHandle;w.fn.extend({attr:function(e,t){return q(this,w.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){w.removeAttr(this,e)}))}}),w.extend({attr:function(e,t,n){var r,s,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return void 0===e.getAttribute?w.prop(e,t,n):(1===i&&w.isXMLDoc(e)||(s=w.attrHooks[t.toLowerCase()]||(w.expr.match.bool.test(t)?ct:void 0)),void 0!==n?null===n?void w.removeAttr(e,t):s&&"set"in s&&void 0!==(r=s.set(e,n,t))?r:(e.setAttribute(t,n+""),n):s&&"get"in s&&null!==(r=s.get(e,t))?r:null==(r=w.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!h.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,s=t&&t.match(L);if(s&&1===e.nodeType)for(;n=s[r++];)e.removeAttribute(n)}}),ct={set:function(e,t,n){return!1===t?w.removeAttr(e,n):e.setAttribute(n,n),n}},w.each(w.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=ut[t]||w.find.attr;ut[t]=function(e,t,r){var s,i,o=t.toLowerCase();return r||(i=ut[o],ut[o]=s,s=null!=n(e,t,r)?o:null,ut[o]=i),s}}));var dt=/^(?:input|select|textarea|button)$/i,pt=/^(?:a|area)$/i;function ht(e){return(e.match(L)||[]).join(" ")}function ft(e){return e.getAttribute&&e.getAttribute("class")||""}function mt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(L)||[]}w.fn.extend({prop:function(e,t){return q(this,w.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[w.propFix[e]||e]}))}}),w.extend({prop:function(e,t,n){var r,s,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return 1===i&&w.isXMLDoc(e)||(t=w.propFix[t]||t,s=w.propHooks[t]),void 0!==n?s&&"set"in s&&void 0!==(r=s.set(e,n,t))?r:e[t]=n:s&&"get"in s&&null!==(r=s.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,"tabindex");return t?parseInt(t,10):dt.test(e.nodeName)||pt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),h.optSelected||(w.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){w.propFix[this.toLowerCase()]=this})),w.fn.extend({addClass:function(e){var t,n,r,s,i,o,a,l=0;if(f(e))return this.each((function(t){w(this).addClass(e.call(this,t,ft(this)))}));if((t=mt(e)).length)for(;n=this[l++];)if(s=ft(n),r=1===n.nodeType&&" "+ht(s)+" "){for(o=0;i=t[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");s!==(a=ht(r))&&n.setAttribute("class",a)}return this},removeClass:function(e){var t,n,r,s,i,o,a,l=0;if(f(e))return this.each((function(t){w(this).removeClass(e.call(this,t,ft(this)))}));if(!arguments.length)return this.attr("class","");if((t=mt(e)).length)for(;n=this[l++];)if(s=ft(n),r=1===n.nodeType&&" "+ht(s)+" "){for(o=0;i=t[o++];)for(;r.indexOf(" "+i+" ")>-1;)r=r.replace(" "+i+" "," ");s!==(a=ht(r))&&n.setAttribute("class",a)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):f(e)?this.each((function(n){w(this).toggleClass(e.call(this,n,ft(this),t),t)})):this.each((function(){var t,s,i,o;if(r)for(s=0,i=w(this),o=mt(e);t=o[s++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else void 0!==e&&"boolean"!==n||((t=ft(this))&&$.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":$.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+ht(ft(n))+" ").indexOf(t)>-1)return!0;return!1}});var gt=/\r/g;w.fn.extend({val:function(e){var t,n,r,s=this[0];return arguments.length?(r=f(e),this.each((function(n){var s;1===this.nodeType&&(null==(s=r?e.call(this,n,w(this).val()):e)?s="":"number"==typeof s?s+="":Array.isArray(s)&&(s=w.map(s,(function(e){return null==e?"":e+""}))),(t=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,s,"value")||(this.value=s))}))):s?(t=w.valHooks[s.type]||w.valHooks[s.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(s,"value"))?n:"string"==typeof(n=s.value)?n.replace(gt,""):null==n?"":n:void 0}}),w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,"value");return null!=t?t:ht(w.text(e))}},select:{get:function(e){var t,n,r,s=e.options,i=e.selectedIndex,o="select-one"===e.type,a=o?null:[],l=o?i+1:s.length;for(r=i<0?l:o?i:0;r<l;r++)if(((n=s[r]).selected||r===i)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=w(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,r,s=e.options,i=w.makeArray(t),o=s.length;o--;)((r=s[o]).selected=w.inArray(w.valHooks.option.get(r),i)>-1)&&(n=!0);return n||(e.selectedIndex=-1),i}}}}),w.each(["radio","checkbox"],(function(){w.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=w.inArray(w(e).val(),t)>-1}},h.checkOn||(w.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),h.focusin="onfocusin"in e;var vt=/^(?:focusinfocus|focusoutblur)$/,yt=function(e){e.stopPropagation()};w.extend(w.event,{trigger:function(t,n,r,s){var i,o,a,l,c,d,p,h,v=[r||g],y=u.call(t,"type")?t.type:t,b=u.call(t,"namespace")?t.namespace.split("."):[];if(o=h=a=r=r||g,3!==r.nodeType&&8!==r.nodeType&&!vt.test(y+w.event.triggered)&&(y.indexOf(".")>-1&&(b=y.split("."),y=b.shift(),b.sort()),c=y.indexOf(":")<0&&"on"+y,(t=t[w.expando]?t:new w.Event(y,"object"==typeof t&&t)).isTrigger=s?2:3,t.namespace=b.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:w.makeArray(n,[t]),p=w.event.special[y]||{},s||!p.trigger||!1!==p.trigger.apply(r,n))){if(!s&&!p.noBubble&&!m(r)){for(l=p.delegateType||y,vt.test(l+y)||(o=o.parentNode);o;o=o.parentNode)v.push(o),a=o;a===(r.ownerDocument||g)&&v.push(a.defaultView||a.parentWindow||e)}for(i=0;(o=v[i++])&&!t.isPropagationStopped();)h=o,t.type=i>1?l:p.bindType||y,(d=($.get(o,"events")||Object.create(null))[t.type]&&$.get(o,"handle"))&&d.apply(o,n),(d=c&&o[c])&&d.apply&&K(o)&&(t.result=d.apply(o,n),!1===t.result&&t.preventDefault());return t.type=y,s||t.isDefaultPrevented()||p._default&&!1!==p._default.apply(v.pop(),n)||!K(r)||c&&f(r[y])&&!m(r)&&((a=r[c])&&(r[c]=null),w.event.triggered=y,t.isPropagationStopped()&&h.addEventListener(y,yt),r[y](),t.isPropagationStopped()&&h.removeEventListener(y,yt),w.event.triggered=void 0,a&&(r[c]=a)),t.result}},simulate:function(e,t,n){var r=w.extend(new w.Event,n,{type:e,isSimulated:!0});w.event.trigger(r,null,t)}}),w.fn.extend({trigger:function(e,t){return this.each((function(){w.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return w.event.trigger(e,t,n,!0)}}),h.focusin||w.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){w.event.simulate(t,e.target,w.event.fix(e))};w.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,s=$.access(r,t);s||r.addEventListener(e,n,!0),$.access(r,t,(s||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,s=$.access(r,t)-1;s?$.access(r,t,s):(r.removeEventListener(e,n,!0),$.remove(r,t))}}}));var bt=e.location,xt={guid:Date.now()},wt=/\?/;w.parseXML=function(t){var n,r;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(s){}return r=n&&n.getElementsByTagName("parsererror")[0],n&&!r||w.error("Invalid XML: "+(r?w.map(r.childNodes,(function(e){return e.textContent})).join("\n"):t)),n};var _t=/\[\]$/,Ct=/\r?\n/g,St=/^(?:submit|button|image|reset|file)$/i,Et=/^(?:input|select|textarea|keygen)/i;function Tt(e,t,n,r){var s;if(Array.isArray(t))w.each(t,(function(t,s){n||_t.test(e)?r(e,s):Tt(e+"["+("object"==typeof s&&null!=s?t:"")+"]",s,n,r)}));else if(n||"object"!==b(t))r(e,t);else for(s in t)Tt(e+"["+s+"]",t[s],n,r)}w.param=function(e,t){var n,r=[],s=function(e,t){var n=f(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!w.isPlainObject(e))w.each(e,(function(){s(this.name,this.value)}));else for(n in e)Tt(n,e[n],t,s);return r.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=w.prop(this,"elements");return e?w.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!w(this).is(":disabled")&&Et.test(this.nodeName)&&!St.test(e)&&(this.checked||!he.test(e))})).map((function(e,t){var n=w(this).val();return null==n?null:Array.isArray(n)?w.map(n,(function(e){return{name:t.name,value:e.replace(Ct,"\r\n")}})):{name:t.name,value:n.replace(Ct,"\r\n")}})).get()}});var At=/%20/g,Pt=/#.*$/,It=/([?&])_=[^&]*/,Nt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Mt=/^(?:GET|HEAD)$/,Rt=/^\/\//,Ot={},kt={},Lt="*/".concat("*"),Dt=g.createElement("a");function jt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,s=0,i=t.toLowerCase().match(L)||[];if(f(n))for(;r=i[s++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Ut(e,t,n,r){var s={},i=e===kt;function o(a){var l;return s[a]=!0,w.each(e[a]||[],(function(e,a){var c=a(t,n,r);return"string"!=typeof c||i||s[c]?i?!(l=c):void 0:(t.dataTypes.unshift(c),o(c),!1)})),l}return o(t.dataTypes[0])||!s["*"]&&o("*")}function Ht(e,t){var n,r,s=w.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((s[n]?e:r||(r={}))[n]=t[n]);return r&&w.extend(!0,e,r),e}Dt.href=bt.href,w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:bt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(bt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Lt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ht(Ht(e,w.ajaxSettings),t):Ht(w.ajaxSettings,e)},ajaxPrefilter:jt(Ot),ajaxTransport:jt(kt),ajax:function(t,n){"object"==typeof t&&(n=t,t=void 0),n=n||{};var r,s,i,o,a,l,c,u,d,p,h=w.ajaxSetup({},n),f=h.context||h,m=h.context&&(f.nodeType||f.jquery)?w(f):w.event,v=w.Deferred(),y=w.Callbacks("once memory"),b=h.statusCode||{},x={},_={},C="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(c){if(!o)for(o={};t=Nt.exec(i);)o[t[1].toLowerCase()+" "]=(o[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=o[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?i:null},setRequestHeader:function(e,t){return null==c&&(e=_[e.toLowerCase()]=_[e.toLowerCase()]||e,x[e]=t),this},overrideMimeType:function(e){return null==c&&(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)S.always(e[S.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||C;return r&&r.abort(t),E(0,t),this}};if(v.promise(S),h.url=((t||h.url||bt.href)+"").replace(Rt,bt.protocol+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(L)||[""],null==h.crossDomain){l=g.createElement("a");try{l.href=h.url,l.href=l.href,h.crossDomain=Dt.protocol+"//"+Dt.host!=l.protocol+"//"+l.host}catch(T){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=w.param(h.data,h.traditional)),Ut(Ot,h,n,S),c)return S;for(d in(u=w.event&&h.global)&&0==w.active++&&w.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Mt.test(h.type),s=h.url.replace(Pt,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(At,"+")):(p=h.url.slice(s.length),h.data&&(h.processData||"string"==typeof h.data)&&(s+=(wt.test(s)?"&":"?")+h.data,delete h.data),!1===h.cache&&(s=s.replace(It,"$1"),p=(wt.test(s)?"&":"?")+"_="+xt.guid+++p),h.url=s+p),h.ifModified&&(w.lastModified[s]&&S.setRequestHeader("If-Modified-Since",w.lastModified[s]),w.etag[s]&&S.setRequestHeader("If-None-Match",w.etag[s])),(h.data&&h.hasContent&&!1!==h.contentType||n.contentType)&&S.setRequestHeader("Content-Type",h.contentType),S.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Lt+"; q=0.01":""):h.accepts["*"]),h.headers)S.setRequestHeader(d,h.headers[d]);if(h.beforeSend&&(!1===h.beforeSend.call(f,S,h)||c))return S.abort();if(C="abort",y.add(h.complete),S.done(h.success),S.fail(h.error),r=Ut(kt,h,n,S)){if(S.readyState=1,u&&m.trigger("ajaxSend",[S,h]),c)return S;h.async&&h.timeout>0&&(a=e.setTimeout((function(){S.abort("timeout")}),h.timeout));try{c=!1,r.send(x,E)}catch(T){if(c)throw T;E(-1,T)}}else E(-1,"No Transport");function E(t,n,o,l){var d,p,g,x,_,C=n;c||(c=!0,a&&e.clearTimeout(a),r=void 0,i=l||"",S.readyState=t>0?4:0,d=t>=200&&t<300||304===t,o&&(x=function(e,t,n){for(var r,s,i,o,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(s in a)if(a[s]&&a[s].test(r)){l.unshift(s);break}if(l[0]in n)i=l[0];else{for(s in n){if(!l[0]||e.converters[s+" "+l[0]]){i=s;break}o||(o=s)}i=i||o}if(i)return i!==l[0]&&l.unshift(i),n[i]}(h,S,o)),!d&&w.inArray("script",h.dataTypes)>-1&&w.inArray("json",h.dataTypes)<0&&(h.converters["text script"]=function(){}),x=function(e,t,n,r){var s,i,o,a,l,c={},u=e.dataTypes.slice();if(u[1])for(o in e.converters)c[o.toLowerCase()]=e.converters[o];for(i=u.shift();i;)if(e.responseFields[i]&&(n[e.responseFields[i]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=i,i=u.shift())if("*"===i)i=l;else if("*"!==l&&l!==i){if(!(o=c[l+" "+i]||c["* "+i]))for(s in c)if((a=s.split(" "))[1]===i&&(o=c[l+" "+a[0]]||c["* "+a[0]])){!0===o?o=c[s]:!0!==c[s]&&(i=a[0],u.unshift(a[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(T){return{state:"parsererror",error:o?T:"No conversion from "+l+" to "+i}}}return{state:"success",data:t}}(h,x,S,d),d?(h.ifModified&&((_=S.getResponseHeader("Last-Modified"))&&(w.lastModified[s]=_),(_=S.getResponseHeader("etag"))&&(w.etag[s]=_)),204===t||"HEAD"===h.type?C="nocontent":304===t?C="notmodified":(C=x.state,p=x.data,d=!(g=x.error))):(g=C,!t&&C||(C="error",t<0&&(t=0))),S.status=t,S.statusText=(n||C)+"",d?v.resolveWith(f,[p,C,S]):v.rejectWith(f,[S,C,g]),S.statusCode(b),b=void 0,u&&m.trigger(d?"ajaxSuccess":"ajaxError",[S,h,d?p:g]),y.fireWith(f,[S,C]),u&&(m.trigger("ajaxComplete",[S,h]),--w.active||w.event.trigger("ajaxStop")))}return S},getJSON:function(e,t,n){return w.get(e,t,n,"json")},getScript:function(e,t){return w.get(e,void 0,t,"script")}}),w.each(["get","post"],(function(e,t){w[t]=function(e,n,r,s){return f(n)&&(s=s||r,r=n,n=void 0),w.ajax(w.extend({url:e,type:t,dataType:s,data:n,success:r},w.isPlainObject(e)&&e))}})),w.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),w._evalUrl=function(e,t,n){return w.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){w.globalEval(e,t,n)}})},w.fn.extend({wrapAll:function(e){var t;return this[0]&&(f(e)&&(e=e.call(this[0])),t=w(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return f(e)?this.each((function(t){w(this).wrapInner(e.call(this,t))})):this.each((function(){var t=w(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=f(e);return this.each((function(n){w(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){w(this).replaceWith(this.childNodes)})),this}}),w.expr.pseudos.hidden=function(e){return!w.expr.pseudos.visible(e)},w.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(t){}};var Ft={0:200,1223:204},Bt=w.ajaxSettings.xhr();h.cors=!!Bt&&"withCredentials"in Bt,h.ajax=Bt=!!Bt,w.ajaxTransport((function(t){var n,r;if(h.cors||Bt&&!t.crossDomain)return{send:function(s,i){var o,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)a[o]=t.xhrFields[o];for(o in t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest"),s)a.setRequestHeader(o,s[o]);n=function(e){return function(){n&&(n=r=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?i(0,"error"):i(a.status,a.statusText):i(Ft[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=n(),r=a.onerror=a.ontimeout=n("error"),void 0!==a.onabort?a.onabort=r:a.onreadystatechange=function(){4===a.readyState&&e.setTimeout((function(){n&&r()}))},n=n("abort");try{a.send(t.hasContent&&t.data||null)}catch(l){if(n)throw l}},abort:function(){n&&n()}}})),w.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return w.globalEval(e),e}}}),w.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),w.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,s){t=w("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&s("error"===e.type?404:200,e.type)}),g.head.appendChild(t[0])},abort:function(){n&&n()}}}));var qt,zt=[],Vt=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=zt.pop()||w.expando+"_"+xt.guid++;return this[e]=!0,e}}),w.ajaxPrefilter("json jsonp",(function(t,n,r){var s,i,o,a=!1!==t.jsonp&&(Vt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Vt.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return s=t.jsonpCallback=f(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Vt,"$1"+s):!1!==t.jsonp&&(t.url+=(wt.test(t.url)?"&":"?")+t.jsonp+"="+s),t.converters["script json"]=function(){return o||w.error(s+" was not called"),o[0]},t.dataTypes[0]="json",i=e[s],e[s]=function(){o=arguments},r.always((function(){void 0===i?w(e).removeProp(s):e[s]=i,t[s]&&(t.jsonpCallback=n.jsonpCallback,zt.push(s)),o&&f(i)&&i(o[0]),o=i=void 0})),"script"})),h.createHTMLDocument=((qt=g.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===qt.childNodes.length),w.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(h.createHTMLDocument?((r=(t=g.implementation.createHTMLDocument("")).createElement("base")).href=g.location.href,t.head.appendChild(r)):t=g),i=!n&&[],(s=P.exec(e))?[t.createElement(s[1])]:(s=xe([e],t,i),i&&i.length&&w(i).remove(),w.merge([],s.childNodes)));var r,s,i},w.fn.load=function(e,t,n){var r,s,i,o=this,a=e.indexOf(" ");return a>-1&&(r=ht(e.slice(a)),e=e.slice(0,a)),f(t)?(n=t,t=void 0):t&&"object"==typeof t&&(s="POST"),o.length>0&&w.ajax({url:e,type:s||"GET",dataType:"html",data:t}).done((function(e){i=arguments,o.html(r?w("<div>").append(w.parseHTML(e)).find(r):e)})).always(n&&function(e,t){o.each((function(){n.apply(this,i||[e.responseText,t,e])}))}),this},w.expr.pseudos.animated=function(e){return w.grep(w.timers,(function(t){return e===t.elem})).length},w.offset={setOffset:function(e,t,n){var r,s,i,o,a,l,c=w.css(e,"position"),u=w(e),d={};"static"===c&&(e.style.position="relative"),a=u.offset(),i=w.css(e,"top"),l=w.css(e,"left"),("absolute"===c||"fixed"===c)&&(i+l).indexOf("auto")>-1?(o=(r=u.position()).top,s=r.left):(o=parseFloat(i)||0,s=parseFloat(l)||0),f(t)&&(t=t.call(e,n,w.extend({},a))),null!=t.top&&(d.top=t.top-a.top+o),null!=t.left&&(d.left=t.left-a.left+s),"using"in t?t.using.call(e,d):u.css(d)}},w.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){w.offset.setOffset(this,e,t)}));var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],s={top:0,left:0};if("fixed"===w.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===w.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((s=w(e).offset()).top+=w.css(e,"borderTopWidth",!0),s.left+=w.css(e,"borderLeftWidth",!0))}return{top:t.top-s.top-w.css(r,"marginTop",!0),left:t.left-s.left-w.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===w.css(e,"position");)e=e.offsetParent;return e||re}))}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;w.fn[e]=function(r){return q(this,(function(e,r,s){var i;if(m(e)?i=e:9===e.nodeType&&(i=e.defaultView),void 0===s)return i?i[t]:e[r];i?i.scrollTo(n?i.pageXOffset:s,n?s:i.pageYOffset):e[r]=s}),e,r,arguments.length)}})),w.each(["top","left"],(function(e,t){w.cssHooks[t]=Be(h.pixelPosition,(function(e,n){if(n)return n=Fe(e,t),De.test(n)?w(e).position()[t]+"px":n}))})),w.each({Height:"height",Width:"width"},(function(e,t){w.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,r){w.fn[r]=function(s,i){var o=arguments.length&&(n||"boolean"!=typeof s),a=n||(!0===s||!0===i?"margin":"border");return q(this,(function(t,n,s){var i;return m(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===s?w.css(t,n,a):w.style(t,n,s,a)}),t,o?s:void 0,o)}}))})),w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){w.fn[t]=function(e){return this.on(t,e)}})),w.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){w.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}));var Gt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;w.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),f(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||w.guid++,i},w.holdReady=function(e){e?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=A,w.isFunction=f,w.isWindow=m,w.camelCase=W,w.type=b,w.now=Date.now,w.isNumeric=function(e){var t=w.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},w.trim=function(e){return null==e?"":(e+"").replace(Gt,"")};var Wt=e.jQuery,Kt=e.$;return w.noConflict=function(t){return e.$===w&&(e.$=Kt),t&&e.jQuery===w&&(e.jQuery=Wt),w},void 0===t&&(e.jQuery=e.$=w),w};var $g=Yg.exports=Gg.document?Wg(Gg,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return Wg(e)};class Xg extends w.PureComponent{constructor(e){super(e),u(this,"videoRef"),u(this,"sourceRef"),u(this,"handleFileInfoChanged",(e=>{let t=this.videoDOM;t||(t=document.createElement("video"));const n=t.canPlayType(e.mime_type);this.setState({canPlay:"probably"===n||"maybe"===n})})),u(this,"handleLoadError",(()=>{this.setState({canPlay:!1})})),u(this,"stop",(()=>{if(this.videoDOM){const e=this.videoDOM;e.pause(),e.currentTime=0}})),this.state={canPlay:!0},this.videoRef=w.createRef(),this.sourceRef=w.createRef()}componentDidMount(){this.handleFileInfoChanged(this.props.fileInfo),this.sourceDOM&&$g(this.sourceDOM).one("error",this.handleLoadError)}componentDidUpdate(e){this.props.fileUrl!==e.fileUrl&&this.handleFileInfoChanged(this.props.fileInfo),this.sourceDOM&&$g(this.sourceDOM).one("error",this.handleLoadError)}get sourceDOM(){return A.findDOMNode(this.sourceRef.current)}get videoDOM(){return A.findDOMNode(this.videoRef.current)}render(){if(!this.state.canPlay)return d(Kg,{fileInfo:this.props.fileInfo,fileUrl:this.props.fileUrl});let e=G.WEB_VIDEO_WIDTH,t=G.WEB_VIDEO_HEIGHT;return _e()&&(e=G.MOBILE_VIDEO_WIDTH,t=G.MOBILE_VIDEO_HEIGHT),d("video",{ref:this.videoRef,"data-setup":"{}",controls:!0,width:e,height:t,children:d("source",{ref:this.sourceRef,src:this.props.fileUrl})},this.props.fileInfo.id)}}function Qg({fileInfo:e,canDownloadFiles:t}){const n=!e.id;let r,s;return n?(r=e.link,s=e.link):(r=wg(e.id),s=e.has_preview_image?Cg(e.id,e.preview_path):r),t?d("a",{href:r,target:"_blank",rel:"noopener noreferrer",download:!n,children:d("img",{"data-testid":"imagePreview",alt:"preview url image",src:s})}):d("img",{src:s})}u(Xg,"propTypes",{fileInfo:E.object.isRequired,fileUrl:E.string.isRequired}),Qg.propTypes={fileInfo:E.object.isRequired,canDownloadFiles:E.bool.isRequired};const Jg=G.KeyCodes;class Zg extends w.PureComponent{constructor(e){super(e),u(this,"handleNext",(e=>{e&&e.stopPropagation();let t=this.state.imageIndex+1;t>this.props.fileInfos.length-1&&(t=0),this.showImage(t)})),u(this,"handlePrev",(e=>{e&&e.stopPropagation();let t=this.state.imageIndex-1;t<0&&(t=this.props.fileInfos.length-1),this.showImage(t)})),u(this,"handleKeyPress",(e=>{Ee(e,Jg.RIGHT)?this.handleNext():Ee(e,Jg.LEFT)&&this.handlePrev()})),u(this,"onModalShown",(e=>{document.addEventListener("keyup",this.handleKeyPress),this.showImage(e.startIndex)})),u(this,"onModalHidden",(()=>{document.removeEventListener("keyup",this.handleKeyPress),this.videoRef.current&&this.videoRef.current.stop()})),u(this,"showImage",(e=>{this.setState({imageIndex:e});const t=window.innerHeight-100;this.setState({imageHeight:t}),this.state.loaded[e]||this.loadImage(e)})),u(this,"loadImage",(e=>{const t=this.props.fileInfos[e];Ae(t.extension)===Te.IMAGE&&Boolean(t.id),this.handleImageLoaded(e)})),u(this,"handleImageLoaded",(e=>{this.setState((t=>({loaded:l(a({},t.loaded),{[e]:!0})})))})),u(this,"handleImageProgress",((e,t)=>{this.setState((n=>({progress:l(a({},n.progress),{[e]:t})})))})),u(this,"handleGetPublicLink",(()=>{this.handleModalClose(),ro(this.props.fileInfos[this.state.imageIndex].id)})),u(this,"onMouseEnterImage",(()=>{this.setState({showCloseBtn:!0})})),u(this,"onMouseLeaveImage",(()=>{this.setState({showCloseBtn:!1})})),u(this,"setScale",((e,t)=>{this.setState((n=>({scale:l(a({},n.scale),{[e]:t})})))})),u(this,"handleZoomIn",(()=>{let e=this.state.scale[this.state.imageIndex];e=Math.min(e+Se.SCALE_DELTA,Se.MAX_SCALE),this.setScale(this.state.imageIndex,e)})),u(this,"handleZoomOut",(()=>{let e=this.state.scale[this.state.imageIndex];e=Math.max(e-Se.SCALE_DELTA,Se.MIN_SCALE),this.setScale(this.state.imageIndex,e)})),u(this,"handleZoomReset",(()=>{this.setScale(this.state.imageIndex,Se.DEFAULT_SCALE)})),u(this,"handleModalClose",(()=>{this.props.onModalDismissed(),this.setState({scale:Ce(Se.DEFAULT_SCALE,this.props.fileInfos.length)})})),this.state={imageIndex:this.props.startIndex,imageHeight:"100%",loaded:Ce(!1,this.props.fileInfos.length),progress:Ce(0,this.props.fileInfos.length),showCloseBtn:!1,showZoomControls:!1,scale:Ce(Se.DEFAULT_SCALE,this.props.fileInfos.length)},this.videoRef=w.createRef()}componentDidUpdate(e){!0===this.props.show&&!1===e.show?this.onModalShown(this.props):!1===this.props.show&&!0===e.show&&this.onModalHidden()}static getDerivedStateFromProps(e,t){const n={};return e.fileInfos[t.imageIndex]&&e.fileInfos[t.imageIndex].extension===Te.PDF?n.showZoomControls=!0:n.showZoomControls=!1,e.fileInfos.length!==t.prevFileInfosCount&&(n.loaded=Ce(!1,e.fileInfos.length),n.progress=Ce(0,e.fileInfos.length),n.prevFileInfosCount=e.fileInfos.length),Object.keys(n).length?n:null}render(){if(this.props.fileInfos.length<1||this.props.fileInfos.length-1<this.state.imageIndex)return null;const e=this.props.fileInfos[this.state.imageIndex];e.link,e.link||e.name;const t=Ae(e.extension),n=e.link||xg(e.id);e.link||wg(e.id),e.id;let r;if(this.state.loaded[this.state.imageIndex])r=t===Te.IMAGE||t===Te.SVG?d(Qg,{fileInfo:e,canDownloadFiles:this.props.canDownloadFiles}):t===Te.VIDEO||t===Te.AUDIO?d(Xg,{fileInfo:e,fileUrl:n}):d(Kg,{fileInfo:e,fileUrl:n});else{const e=ye("view_image.loading","Loading"),t=Math.floor(this.state.progress[this.state.imageIndex]);r=d(Eg,{loading:e,progress:t})}for(const o of this.props.pluginFilePreviewComponents)if(o.override(e,this.props.post)){r=d(o.component,{fileInfo:e,post:this.props.post,onModalDismissed:this.props.onModalDismissed});break}let s=null,i=null;return this.props.fileInfos.length>1&&(s=d("a",{id:"previewArrowLeft",ref:this.previewArrowLeft,className:"modal-prev-bar",href:"#",onClick:this.handlePrev,children:d("i",{className:"image-control image-prev"})}),i=d("a",{id:"previewArrowRight",ref:this.previewArrowRight,className:"modal-next-bar",href:"#",onClick:this.handleNext,children:d("i",{className:"image-control image-next"})})),this.state.showCloseBtn&&this.handleModalClose,d(Bg,{show:this.props.show,onHide:this.handleModalClose,className:"modal-image",dialogClassName:"a11y__modal modal-image",children:b(zg,{children:[d("div",{className:"modal-image__wrapper",onClick:this.handleModalClose,children:d("div",{onMouseEnter:this.onMouseEnterImage,onMouseLeave:this.onMouseLeaveImage,onClick:e=>e.stopPropagation(),children:d("div",{className:"modal-image__background",children:d("div",{className:"modal-image__content",children:r})})})}),s,i]})})}}u(Zg,"propTypes",{postId:E.string,post:E.object,show:E.bool.isRequired,onModalDismissed:E.func.isRequired,fileInfos:E.arrayOf(E.object).isRequired,startIndex:E.number,canDownloadFiles:E.bool,enablePublicLink:E.bool,pluginFilePreviewComponents:E.arrayOf(E.object)}),u(Zg,"defaultProps",{show:!1,fileInfos:[],startIndex:0,pluginFilePreviewComponents:[],post:{}});var ev=g((function(e,t){const n=W(e);return{canDownloadFiles:Pg(n),enablePublicLink:"true"===n.EnablePublicLink,pluginFilePreviewComponents:e.plugins.components.FilePreview,post:t.post||Pe(e,t.postId)}}))(Zg);class tv extends w.PureComponent{constructor(e){super(e),u(this,"showModal",(e=>{this.props.imageIsLink||(e.preventDefault(),this.setState({showModal:!0}))})),u(this,"hideModal",(()=>{this.setState({showModal:!1})})),u(this,"handleLoadFail",(()=>{this.setState({loadFailed:!0})})),u(this,"isHeaderChangeMessage",(()=>this.props.postType&&this.props.postType===G.PostTypes.HEADER_CHANGE)),u(this,"onUpdated",(e=>{this.props.src&&this.props.src!==e&&this.setState({loadFailed:!1})})),u(this,"handleImageLoaded",(({height:e,width:t})=>{this.setState({loaded:!0},(()=>{this.props.onImageLoaded&&this.props.onImageLoaded({height:e,width:t})}))})),this.state={showModal:!1,loadFailed:!1,loaded:!1}}componentDidUpdate(e){this.onUpdated(e.src)}render(){const{imageMetadata:e,src:t,alt:n,imageIsLink:r}=this.props;if(""===t||this.state.loadFailed){let e="markdown-inline-img broken-image";return this.isHeaderChangeMessage()&&(e+=" broken-image--scaled-down"),d("div",{style:{display:"inline-block"},children:d("img",{className:e,alt:n,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAABs0lEQVR4AeRUAasBYRD0//8AekUkIAQApBJRiQKALogKACHNa7ZS6qmOU9X7arv7LmZ2Z2dXZzKZfjweD74RxNbx5Xg8fiWI/U8IkskkHA4HnE7ny8jlcu8RpNNpeL1eVKtVrFarP6PVaiEQCKgj2O/3iEajiEQiqNVq6Pf7eHUmk4k6gs1mA7/fL9nf73fU63VtCfiNf6CuDJINh0PtCPR6PU6n01PwaErw6pzPZ5RKJUr3OcH1emUfHvrvdjuxq8vlQjgcxu12+4wgk8kgHo/DbDaj3W7DarWiUqngcDggm82KfWezGd2mnoCZ2+12bLdbATcajWg0Gk+/KxQKMBgMsNls6ggIRO9Pp1Os12v5Np/P5akoimS+WCx4ZwUcNrrsvUkOBoMol8vy3uv1RK58Pk+5qP17u2g8HjNTAfL5fAJaLBb5lEp42HjeuSYURWFF6npAYOrKhrJ8i8WC5XL5ZFkmwiHksvt4Di6Xi7aDlkqlZE0nEgmxaiwWeyw/zkAoFGJ/BNjtdqsjoC2bzSaDGsu90+lIdLtdNlt6MBgMRL7RaCRu+t3wrDJp2WwBJeNZAIlqEBoS31jNAAAAAElFTkSuQmCC",loading:"lazy"})})}return d(bg,{src:t,imageMetadata:e,children:s=>{if(!s)return d("a",{className:"theme markdown__link",href:t,rel:"noopener noreferrer",target:"_blank",title:this.props.title,children:n});const i=(e=>{const t=e.lastIndexOf(".");return t>0?e.substring(t+1):null})(s);let o="";if(this.state.loaded)o=r||!i?`${this.props.className} markdown-inline-img--hover markdown-inline-img--no-border`:`${this.props.className} markdown-inline-img--hover cursor--pointer a11y--active`,this.isHeaderChangeMessage()&&(o+=" markdown-inline-img--scaled-down");else{const e=this.isHeaderChangeMessage()?"markdown-inline-img--scaled-down-loading":"markdown-inline-img--loading";o=`${this.props.className} ${e}`}const{height:a,width:l,title:c,postId:u,onImageHeightChanged:p}=this.props,h=b(T,{children:[d(Tg,{alt:n,className:o,src:s,height:a,width:l,title:c,dimensions:e,showLoader:!1,onClick:this.showModal,onImageLoadFail:this.handleLoadFail,onImageLoaded:this.handleImageLoaded}),!r&&i&&d(ev,{show:this.state.showModal,onModalDismissed:this.hideModal,postId:this.props.postId,startIndex:0,fileInfos:[{has_preview_image:!1,link:s,extension:e.format||i,name:n}]})]});return(null!=a?a:e.height)>=G.EXPANDABLE_INLINE_IMAGE_MIN_HEIGHT?d(vg,{alt:n||s,postId:u,imageKey:s,onToggle:p,children:h}):h}})}}u(tv,"defaultProps",{imageMetadata:{}}),u(tv,"propTypes",{alt:E.string,imageMetadata:E.object,src:E.string.isRequired,height:E.number,width:E.number,title:E.string,className:E.string.isRequired,postId:E.string.isRequired,imageIsLink:E.bool.isRequired,onImageLoaded:E.func,onImageHeightChanged:E.func,postType:E.string});class nv extends w.PureComponent{render(){const e=":"+this.props.name+":";return this.props.imageUrl?d("span",{alt:this.props.name,className:x("emoticon",{"emoticon-big":"custom"===this.props.category}),title:e,style:{backgroundImage:"url("+this.props.imageUrl+")"},children:e}):e}}var rv=g((function(e,t){const n=Ie(e).get(t.name);return{imageUrl:n?Ne(n):"",category:n?n.category:""}}))(nv);class sv extends w.PureComponent{render(){if(!this.props.enableFormatting)return d("span",{children:this.props.message});const e=Object.assign({autolinkedUrlSchemes:this.props.autolinkedUrlSchemes,siteURL:this.props.siteURL,mentionKeys:this.props.mentionKeys,atMentions:!0,channelNamesMap:this.props.channelNamesMap,proxyImages:this.props.hasImageProxy&&this.props.proxyImages,team:this.props.team,minimumHashtagLength:this.props.minimumHashtagLength,managedResourcePaths:this.props.managedResourcePaths},this.props.options);return function(e,t,n={}){if(!e)return null;const r=new fg.Parser,s=new fg.ProcessNodeDefinitions(w),i=[{replaceChildren:!1,shouldProcessNode:e=>"tag"===e.type&&"input"===e.name&&"checkbox"===e.attribs.type,processNode:e=>{const t=e.attribs||{};return e.attribs.checked=Boolean(t.checked),w.createElement("input",a({},e.attribs))}}];if(!("mentions"in n)||n.mentions){const e=!("mentionHighlight"in n)||n.mentionHighlight,r="disableGroupHighlight"in n&&!0===n.disableGroupHighlight,s="data-mention";i.push({replaceChildren:!0,shouldProcessNode:e=>e.attribs&&e.attribs[s],processNode:(i,o)=>{const a=i.attribs[s];return d(gg,{mentionName:a,isRHS:t,hasMention:!0,disableHighlight:!e,disableGroupHighlight:r,channelId:n.channelId,children:o})}})}if(!("emoji"in n)||n.emoji){const e="data-emoticon";i.push({replaceChildren:!0,shouldProcessNode:t=>t.attribs&&t.attribs[e],processNode:t=>{const n=t.attribs[e];return d(rv,{name:n})}})}return"images"in n&&!n.images||i.push({shouldProcessNode:e=>"tag"===e.type&&"img"===e.name,processNode:e=>{const t=e.attribs,{class:r}=t,s=c(t,["class"]);return d(tv,l(a(a({className:r,imageMetadata:n.imagesMetadata&&n.imagesMetadata[s.src]},s),n.imageProps),{postId:n.postId,imageIsLink:(i=e.parentNode,!(!i||"tag"!==i.type||"a"!==i.name)),postType:n.postType}));var i}}),i.push({shouldProcessNode:()=>!0,processNode:s.processDefaultNode}),r.parseWithInstructions(e,(function(){return!0}),i)}(Me(this.props.message,e,this.props.emojiMap),this.props.isRHS,{imageProps:this.props.imageProps,imagesMetadata:this.props.imagesMetadata,hasPluginTooltips:this.props.hasPluginTooltips,postId:this.props.postId,channelId:this.props.channelId,postType:this.props.postType,mentionHighlight:this.props.options.mentionHighlight,disableGroupHighlight:this.props.options.disableGroupHighlight})}}u(sv,"defaultProps",{options:{},isRHS:!1,proxyImages:!0,imagesMetadata:{},postId:""});var iv=g((function(){const e=C(Re,((e,t)=>t&&t.channelNamesMap),((e,t)=>t?Object.assign({},t,e):e));return function(t,n){var r;const s=W(t);let i;return n.postId&&(i=null==(r=Pe(t,n.postId))?void 0:r.channel_id),{autolinkedUrlSchemes:Oe(t),channelNamesMap:e(t,n),enableFormatting:ke(t,Le.CATEGORY_ADVANCED_SETTINGS,"formatting",!0),managedResourcePaths:De(t),mentionKeys:n.mentionKeys||bc(t),siteURL:je(),team:Y(t),hasImageProxy:"true"===s.HasImageProxy,minimumHashtagLength:parseInt(s.MinimumHashtagLength||"",10),emojiMap:Ie(t),channelId:i}}}))(sv);Zi.jsx,Zi.jsx;var ov=Zi.jsx,av=Zi.jsxs;var lv=function(e){return av("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},e)),{children:[ov("path",{d:"M4 3a2 2 0 100 4h12a2 2 0 100-4H4z"}),ov("path",{fillRule:"evenodd",d:"M3 8h14v7a2 2 0 01-2 2H5a2 2 0 01-2-2V8zm5 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z",clipRule:"evenodd"})]}))};const cv={singleline:!1,mentionHighlight:!1};class uv extends w.PureComponent{constructor(e){super(e),u(this,"onHide",(()=>{this.setState({show:!1})})),u(this,"handleFormattedTextClick",(e=>Ue(e,this.props.currentRelativeTeamUrl))),u(this,"getHeaderMarkdownOptions",He((e=>l(a({},cv),{channelNamesMap:e})))),this.state={show:!0}}componentDidUpdate(e){var t,n;const r=!e.isRHSOpen&&this.props.isRHSOpen,s=(null==(t=e.channel)?void 0:t.id)!==(null==(n=this.props.currentChannel)?void 0:n.id);(r||s)&&this.onHide()}render(){let e=this.props.channel;const t=0!==e.delete_at;if(!e){const t=ye("channel_info.notFound","No Channel Found");e={display_name:t,name:t,purpose:t,header:t,id:t,team_id:t,type:t,delete_at:0,create_at:0,update_at:0,last_post_at:0,total_msg_count:0,total_msg_count_root:0,extra_update_at:0,creator_id:t,scheme_id:t,group_constrained:!1,last_picture_update:0,verified:!1}}const n=this.props.channel.props&&this.props.channel.props.channel_mentions;t||"O"===e.type||e.type;const r=je()+"/"+this.props.currentTeam.name+"/group/"+e.name;let s,i;e.purpose?s=e.purpose:e.name===G.DEFAULT_CHANNEL&&(s=d(P,{id:"default_channel.purpose",defaultMessage:"Post messages here that you want everyone to see. Everyone automatically becomes a permanent member of this channel when they join the team."})),s&&(i=b("div",{className:"form-group",children:[d("div",{className:"info__label",children:d(P,{id:"channel_info.purpose",defaultMessage:"Purpose:"})}),d("div",{className:"info__value",children:s})]}));let o=null;return e.header&&(o=b("div",{className:"form-group",children:[d("div",{className:"info__label",children:d(P,{id:"channel_info.header",defaultMessage:"Header:"})}),d("div",{onClick:this.handleFormattedTextClick,className:"info__value",children:d(iv,{message:e.header,options:this.getHeaderMarkdownOptions(n)})})]})),b(Bg,{dialogClassName:"",show:this.state.show,onHide:this.onHide,onExited:this.props.onHide,children:[b(qg,{closeButton:!0,onClose:this.onHide,children:[d(P,{id:"channel_info.about",defaultMessage:"About"}),d("span",{dangerouslySetInnerHTML:{__html:"&nbsp;"}}),e.display_name]}),b(zg,{children:[i,o,b("div",{className:"form-group",children:[d("div",{className:"info__label",children:d(P,{id:"channel_info.url",defaultMessage:"URL:"})}),d("div",{className:"info__value",children:r})]}),d("div",{className:"about-modal__hash form-group pt-3",children:b("p",{children:[d(P,{id:"channel_info.id",defaultMessage:"ID: "}),e.id]})})]})]})}}u(uv,"propTypes",{onHide:E.func.isRequired,channel:E.object.isRequired,currentChannel:E.object.isRequired,currentTeam:E.object.isRequired,isRHSOpen:E.bool,currentRelativeTeamUrl:E.string});var dv=g((function(e){return{isRHSOpen:Fe(e),currentRelativeTeamUrl:Be(e),currentChannel:K(e),currentTeam:Y(e)}}))(uv);function pv(e){return{type:qe.SET_MODAL_SEARCH,data:e}}var hv=Zi.jsx;var fv=function(e){return hv("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},e)),{children:hv("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}))};var mv="u3-cxx-b3424807",gv="u3-cxx-66895934",vv="u3-cxx-86b2ed45",yv="u3-cxx-fb5ce607",bv="u3-cxx-3c634e23",xv="u3-cxx-b0fd5a7d",wv="u3-cxx-025b39da";class _v extends w.PureComponent{constructor(e){super(e),u(this,"handleRemoveFromChannel",(async()=>{if(this.state.removing)return;const{actions:e,channel:t,user:n}=this.props;this.setState({removing:!0});const{error:r}=await e.removeChannelMember(t.id,n.id);r?this.setState({serverError:r.message,removing:!1}):(this.setState({removing:!1}),e.getChannelStats(t.id))})),u(this,"handleRevertUser",(async()=>{const{actions:e,channel:t,user:n}=this.props;this.setState({removing:!0});const{error:r}=await e.removeChannelMember(t.id,n.id);if(r)return void this.setState({serverError:r.message,removing:!1});const{error2:s}=await e.addChannelMember(t.id,n.id);s?this.setState({serverError:s.message,removing:!1}):(e.getChannelStats(t.id),e.getChannelMember(t.id,n.id))})),u(this,"handleChangeUserRole",(async(e,t,n)=>{const{channel:{id:r},user:{id:s}}=this.props,{error:i}=await this.props.actions.updateChannelMemberSchemeRoles(r,s,e,t,n);i?this.setState({serverError:i.message}):(this.props.actions.getChannelStats(this.props.channel.id),this.props.actions.getChannelMember(this.props.channel.id,this.props.user.id))})),u(this,"handleUserPref",((e,t)=>{const n={user_id:this.props.user.id,category:t,name:this.props.channel.id,value:this.props.currentUserId};return e(this.props.currentUserId,n)})),u(this,"handleUpdateUserPref",(async e=>{await this.handleUserPref(this.props.actions.updateUserChannelPreferences,e)})),u(this,"handleDeleteUserPref",(async e=>{await this.handleUserPref(this.props.actions.deleteUserChannelPreferences,e)})),u(this,"handleLimitUserPermission",(async e=>{const{channel:{id:t},user:{id:n}}=this.props,{error:r}=await this.props.actions.updateChannelMemberRoles(t,n,e);r?this.setState({serverError:r.message}):(this.props.actions.getChannelStats(t),this.props.actions.getChannelMember(t,n))})),u(this,"handleMakeChannelMember",(async()=>{this.handleChangeUserRole(!0,!1,!1)})),u(this,"handleMakeChannelMod",(async()=>{this.handleChangeUserRole(!0,!0,!1)})),u(this,"handleMakeChannelAdmin",(async()=>{this.handleChangeUserRole(!0,!1,!0)})),u(this,"handleMakeBlockUser",(async e=>{e?(this.handleRevertUser(),this.handleDeleteUserPref(Le.CATEGORY_CHANNEL_BLOCK)):(this.handleLimitUserPermission(ae.CHANNEL_BLOCK_ROLE),this.handleUpdateUserPref(Le.CATEGORY_CHANNEL_BLOCK))})),u(this,"handleMakeBanUser",(async e=>{e?(this.handleRevertUser(),this.handleDeleteUserPref(Le.CATEGORY_CHANNEL_BAN)):(this.handleLimitUserPermission(ae.CHANNEL_BAN_ROLE),this.handleUpdateUserPref(Le.CATEGORY_CHANNEL_BAN))})),this.state={serverError:null,removing:!1}}renderRole(e,t,n,r,s){return d(P,e?{id:"channel_members_dropdown.channel_admin",defaultMessage:"Group Admin"}:t?{id:"channel_members_dropdown.channel_mod",defaultMessage:"Group Mod"}:n?{id:"channel_members_dropdown.channel_guest",defaultMessage:"Channel Guest"}:r?{id:"channel_members_dropdown.channel_block",defaultMessage:"Chặn chat"}:s?{id:"channel_members_dropdown.channel_ban",defaultMessage:"Ban khỏi nhóm"}:{id:"channel_members_dropdown.channel_member",defaultMessage:"Channel Member"})}render(){const{isLicensed:e,channelMember:t,user:n,channel:r,currentUserId:s,canChangeMemberRoles:i,canRemoveMember:o,myChannelRoles:a,userChannelPrefs:l}=this.props,{serverError:c}=this.state,u=ze(e,t.roles,t.scheme_admin),h=Ve(e,t.roles,t.scheme_mod),f=Z(n),m=!u&&!h&&!f,g=l.findIndex((e=>e.category==Le.CATEGORY_CHANNEL_BLOCK))>-1,v=l.findIndex((e=>e.category==Le.CATEGORY_CHANNEL_BAN))>-1,y=r.name===G.DEFAULT_CHANNEL,w=this.renderRole(u,h,f,g,v);if(n.id===s)return null;const _=Ge(a,n.roles),C=_&&i&&(u||h),S=_&&i&&e&&(m||u),E=_&&i&&e&&(m||h),T=_&&o&&(!r.group_constrained||n.is_bot)&&(!y||f);if((C||E||S||T)&&!f){const e=[];return T&&(e.push(d(so.Item,{children:({active:e})=>d("button",{className:x(bv,{[xv]:e}),onClick:()=>this.handleMakeBlockUser(g),children:g?ye("channel_members_dropdown.make_channel_block_revert","Bỏ chặn chat"):ye("channel_members_dropdown.make_channel_block","Chặn chat")})},"canRemoveUserFromChannelBlock")),e.push(d(so.Item,{children:({active:e})=>d("button",{className:x(bv,{[xv]:e}),onClick:()=>this.handleMakeBanUser(v),children:v?ye("channel_members_dropdown.make_channel_ban_revert","Bỏ BAN"):ye("channel_members_dropdown.make_channel_ban","Ban khỏi nhóm")})},"canRemoveUserFromChannelBan"))),E&&e.push(d(so.Item,{children:({active:e})=>d("button",{className:x(bv,{[xv]:e}),onClick:this.handleMakeChannelAdmin,children:ye("channel_members_dropdown.make_channel_admin","Make Channel Admin")})},"handleMakeChannelAdmin")),S&&e.push(d(so.Item,{children:({active:e})=>d("button",{className:x(bv,{[xv]:e}),onClick:this.handleMakeChannelMod,children:ye("channel_members_dropdown.make_channel_mod","Make Group Mod")})},"handleMakeChannelMod")),C&&e.push(d(so.Item,{children:({active:e})=>d("button",{className:x(bv,{[xv]:e}),onClick:this.handleMakeChannelMember,children:ye("channel_members_dropdown.make_channel_member","Make Channel Member")})},"handleMakeChannelMember")),b(so,{as:"div",className:mv,children:[b(so.Button,{className:gv,children:[d("span",{children:w}),d(fv,{className:vv,"aria-hidden":"true"})]}),d(to,{as:p.exports.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:d(so.Items,{className:yv,children:d("div",{className:"u3-px-1 u3-py-1",children:e})})})]})}return y?d("div",{}):b("div",{className:wv,children:[w,c]})}}var Cv=g((function(e,t){const{channel:n,user:r}=t,s=We(e,{channel:n.id,team:n.team_id,permission:Ke.MANAGE_CHANNEL_ROLES})&&Ye(e,n),i="true"===$e(e).IsLicensed,o=Ye(e,n),a=Xe(e)[n.id],l=Qe(e,r.id).reduce(((e,t)=>(t.name===n.id&&e.push(t),e)),[]);return{currentUserId:pe(e),isLicensed:i,canChangeMemberRoles:s,canRemoveMember:o,myChannelRoles:a,userChannelPrefs:l}}),(function(e){return{actions:y({getChannelMember:Je,getChannelStats:Ze,updateChannelMemberSchemeRoles:et,updateChannelMemberRoles:tt,removeChannelMember:nt,addChannelMember:rt,updateUserChannelPreferences:st,deleteUserChannelPreferences:it},e)}}))(_v),Sv=Zi.jsx;var Ev=function(e){return Sv("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},e)),{children:Sv("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}))};class Tv extends w.PureComponent{constructor(e){super(e),u(this,"height"),u(this,"textAreaRef"),u(this,"referenceRef"),u(this,"recalculateSize",(()=>{if(!this.referenceRef.current||!this.textAreaRef.current)return;const e=this.referenceRef.current.scrollHeight,t=this.textAreaRef.current;if(e>0&&e!==this.height){const n=getComputedStyle(t),r=parseInt(n.borderTopWidth||"0",10)+parseInt(n.borderBottomWidth||"0",10);t.style.height=String(e+r)+"px",this.height=e,window.requestAnimationFrame((()=>{var t,r;null==(r=(t=this.props).onHeightChange)||r.call(t,e,parseInt(n.maxHeight||"0",10))}))}})),u(this,"getDOMNode",(()=>this.textAreaRef.current)),u(this,"handleChange",(e=>{this.props.onChange&&this.props.onChange(e)})),this.height=0,this.textAreaRef=w.createRef(),this.referenceRef=w.createRef()}get value(){return this.textAreaRef.current.value}set value(e){this.textAreaRef.current.value=e}get selectionStart(){return this.textAreaRef.current.selectionStart}set selectionStart(e){this.textAreaRef.current.selectionStart=e}get selectionEnd(){return this.textAreaRef.current.selectionEnd}set selectionEnd(e){this.textAreaRef.current.selectionEnd=e}focus(){var e;null==(e=this.textAreaRef.current)||e.focus()}blur(){var e;null==(e=this.textAreaRef.current)||e.blur()}componentDidMount(){this.recalculateSize()}componentDidUpdate(){this.recalculateSize()}render(){const e=a({},this.props);Reflect.deleteProperty(e,"onHeightChange"),Reflect.deleteProperty(e,"providers"),Reflect.deleteProperty(e,"channelId");const t=e,{value:n,defaultValue:r,placeholder:s,disabled:i,onInput:o,id:u}=t,h=c(t,["value","defaultValue","placeholder","disabled","onInput","id"]),f={rows:0,height:0};this.height<=0?f.rows=1:f.height=this.height;let m=null;const g="string"==typeof s?s.toLowerCase():"";return this.props.value||this.props.defaultValue||(m=d("div",l(a({},h),{style:Av.placeholder,children:s}))),b(p.exports.Fragment,{children:[m,d("textarea",l(a(a({ref:this.textAreaRef,"data-testid":u,id:u},f),h),{role:"textbox","aria-label":g,dir:"auto",disabled:i,onChange:this.handleChange,onInput:o,value:n,defaultValue:r})),d("div",{style:Av.container,children:d("textarea",l(a({ref:this.referenceRef,id:u+"-reference",style:Av.reference,dir:"auto",disabled:!0,rows:1},h),{value:n||r,"aria-hidden":!0}))})]})}}const Av={container:{height:0,overflow:"hidden"},reference:{height:"auto",width:"100%"},placeholder:{overflow:"hidden",textOverflow:"ellipsis",opacity:.5,pointerEvents:"none",position:"absolute",whiteSpace:"nowrap",background:"none",borderColor:"transparent"}};var Pv="u3-cxx-796d8f00";class Iv extends w.PureComponent{constructor(){super(...arguments),u(this,"updateInputFromProps",(()=>{this.input&&this.input.value!==this.props.value&&(this.input.value=this.props.value)})),u(this,"getInput",(()=>this.input)),u(this,"setInput",(e=>{this.input=e})),u(this,"onClear",(e=>{e.preventDefault(),e.stopPropagation(),this.props.onClear&&this.props.onClear(),this.focus()}))}componentDidUpdate(e){e.value!==this.props.value&&(this.props.delayInputUpdate?requestAnimationFrame(this.updateInputFromProps):this.updateInputFromProps())}get value(){return this.input.value}set value(e){this.input.value=e}focus(){this.input.focus()}blur(){this.input.blur()}render(){const e=this.props,{value:t,inputComponent:n,clearable:r,clearClassName:s,tooltipPosition:i,clearableWithoutValue:o}=e,u=c(e,["value","inputComponent","clearable","clearClassName","tooltipPosition","clearableWithoutValue"]);Reflect.deleteProperty(u,"delayInputUpdate"),Reflect.deleteProperty(u,"onClear"),Reflect.deleteProperty(u,"clearableTooltipText"),Reflect.deleteProperty(u,"channelId"),Reflect.deleteProperty(u,"clearClassName"),Reflect.deleteProperty(u,"tooltipPosition"),n!==Tv&&Reflect.deleteProperty(u,"onHeightChange");const h=w.createElement(n||"input",l(a({},u),{ref:this.setInput,defaultValue:t})),f=this.props.onClear&&(o||r&&t);return b(p.exports.Fragment,{children:[h,f&&d("div",{className:x(Pv,s,"input-clear visible"),onMouseDown:this.onClear,onTouchEnd:this.onClear,children:d("span",{className:"input-clear-x","aria-hidden":"true",children:d(Ev,{className:"u3-h-6 u3-w-6"})})})]})}}u(Iv,"propTypes",{delayInputUpdate:E.bool,inputComponent:E.elementType,value:E.string.isRequired,clearable:E.bool,clearableTooltipText:E.oneOfType([E.string,E.element]),onClear:E.func,clearClassName:E.string,tooltipPosition:E.oneOf(["top","bottom"]),onChange:E.func,clearableWithoutValue:E.bool}),u(Iv,"defaultProps",{delayInputUpdate:!1,value:"",clearable:!1,tooltipPosition:"bottom"}),p.exports.forwardRef(((e,t)=>{var n=e,{className:r,defaultValue:s,maxLength:i}=n,o=c(n,["className","defaultValue","maxLength"]);const l=s?s.length-i:0,u=x({MaxLengthInput:!0,[r]:Boolean(r),"has-error":l>0});return b(p.exports.Fragment,{children:[d("input",a({className:u,defaultValue:s,ref:t},o)),l>0&&b("span",{className:"MaxLengthInput__validation",children:["-",l]})]})}));class Nv extends p.exports.PureComponent{render(){const{disablePopover:e,displayName:t,displayUsername:n,isBusy:r,isRHS:s,isShared:i,hasMention:o,hideStatus:a,overwriteName:l,overwriteIcon:c,user:u,userId:p,channelId:h,clientId:f}=this.props;let m;m=u&&n?`@${u.username.replace(`${f.toLowerCase()}.`,"")}`:l||t||"...";const g="string"==typeof m?m.toLowerCase():"",v=ot(u);return e?d("div",{className:x("user-popover",{banned:v}),children:m}):(u&&at(u.id,u.last_picture_update),d(w.Fragment,{children:d("button",{"aria-label":g,className:x("user-popover style--none",{banned:v}),children:m})}))}}u(Nv,"defaultProps",{disablePopover:!1,displayUsername:!1,hasMention:!1,hideStatus:!1,isRHS:!1,overwriteImage:"",overwriteName:""});var Mv=g((function(){const e=lt();return(t,n)=>{const r=ct(t),s=$(t,n.userId);return{clientId:r.clientId,displayName:e(t,n.userId,!0),user:s,isShared:Boolean(s&&s.remote_id)}}}))(Nv);var Rv="u3-cxx-b34b8053",Ov="u3-cxx-76902285",kv="u3-cxx-58bbf9cc",Lv="u3-cxx-3c3b7a31",Dv="u3-cxx-b7784f11";class jv extends w.PureComponent{constructor(e){super(e)}render(){let e=null;this.props.actions&&(e=this.props.actions.map(((e,t)=>d(e,a(a({user:this.props.user,index:this.props.index,totalUsers:this.props.totalUsers},this.props.actionProps),this.props.actionUserProps),t.toString()))));let t,n=this.props.user.email,r="more-modal__description";return this.props.extraInfo&&this.props.extraInfo.length>0?(n=d(jo,{id:"admin.user_item.emailTitle",defaultMessage:"**Email:** {email}",values:{email:this.props.user.email}}),r=""):t=this.props.user.status?this.props.user.status:this.props.status,this.props.user.is_bot&&(t=null,n=null),this.props.userCount>=0&&(ut("userListRowName"+this.props.userCount),ut("userListRowEmail"+this.props.userCount)),b("div",{className:Rv,children:[d(Ha,{src:J.getProfilePictureUrl(this.props.user.id,this.props.user.last_picture_update),status:t,size:"lg",userId:this.props.user.id,hasMention:!0,username:this.props.user.username}),b("div",{className:Ov,"data-testid":"userListItemDetails",children:[d("div",{className:kv,children:b("div",{className:Lv,children:[d(Mv,{userId:this.props.user.id,hasMention:!0,displayUsername:!0}),d("span",{dangerouslySetInnerHTML:{__html:"&nbsp;"}}),this.props.user.first_name||this.props.user.last_name||this.props.user.nickname?"-":null,d("span",{dangerouslySetInnerHTML:{__html:"&nbsp;"}}),dt(this.props.user)]})}),d("div",{className:r,children:n}),this.props.extraInfo]}),d("div",{className:Dv,children:e})]},this.props.user.id)}}var Uv=g((function(e,t){const n=t.user||{};return{status:pt(e,n.id)}}))(jv);const Hv=w.forwardRef(((e,t)=>{const n=e.rowComponentType||Uv,{users:r,extraInfo:s,actions:i,actionProps:o,actionUserProps:a,isDisabled:l}=e;let c;return null==r?d(Ma,{}):(c=r.length>0?r.map(((e,t)=>d(n,{user:e,extraInfo:s[e.id],actions:i,actionProps:o,actionUserProps:a[e.id],index:t,totalUsers:r.length,userCount:t>=0&&t<999?t:-1,isDisabled:l},e.id))):d("div",{className:"more-modal__placeholder-row u3-text-center u3-py-3 u3-text-gray-600",children:d(P,{id:"user_list.notFound",defaultMessage:"No users found"})},"no-users-found"),d("div",{ref:t,className:"u3-py-4 u3-divide-y",children:c}))})),Fv=w.forwardRef(((e,t)=>{const n=e,{placeholder:{id:r,defaultMessage:s,values:i}}=n,o=c(n,["placeholder"]),{formatMessage:u}=I();return d("input",l(a({},o),{ref:t,placeholder:u({id:r,defaultMessage:s},i)}))}));Fv.displayName="LocalizedInput";var Bv="u3-cxx-50be99d4",qv="u3-cxx-3962f073",zv="u3-cxx-eadf0d13",Vv="u3-cxx-aced781b",Gv="u3-cxx-4664807c",Wv="u3-cxx-a4e5a757",Kv="u3-cxx-83ed90f3";class Yv extends w.PureComponent{constructor(e){super(e),u(this,"nextTimeoutId"),u(this,"filterRef"),u(this,"userListRef"),u(this,"channelListScrollRef"),u(this,"nextPage",(e=>{e.preventDefault(),this.setState({nextDisabled:!0}),this.nextTimeoutId=setTimeout((()=>this.setState({nextDisabled:!1})),500),this.props.nextPage(),this.channelListScrollDOM&&$g(this.channelListScrollDOM).scrollTop(0)})),u(this,"previousPage",(e=>{e.preventDefault(),this.props.previousPage(),this.channelListScrollDOM&&$g(this.channelListScrollDOM).scrollTop(0)})),u(this,"focusSearchBar",(()=>{this.props.focusOnMount&&this.filterRef.current.focus()})),u(this,"handleInput",(e=>{this.props.onTermChange(e.target.value),this.props.search(e.target.value)})),u(this,"renderCount",(e=>{if(!e)return null;if(this.props.filter)return null;const t=e.length,n=this.props.total,r=Boolean(this.props.term);let s,i;return r?(s=-1,i=-1):(s=this.props.page*this.props.usersPerPage,i=Math.min(s+this.props.usersPerPage,n),this.props.users.length<i&&(i=this.props.users.length)),this.props.renderCount?this.props.renderCount(t,this.props.total,s,i,r):this.props.total?d(P,r?{id:"filtered_user_list.countTotal",defaultMessage:"{count, number} {count, plural, one {member} other {members}} of {total, number} total",values:{count:t,total:n}}:{id:"filtered_user_list.countTotalPage",defaultMessage:"{startCount, number} - {endCount, number} {count, plural, one {member} other {members}} of {total, number} total",values:{count:t,startCount:s+1,endCount:i,total:n}}):null})),this.filterRef=w.createRef(),this.userListRef=w.createRef(),this.channelListScrollRef=w.createRef(),this.state={nextDisabled:!1}}componentDidMount(){this.focusSearchBar()}componentDidUpdate(e){this.props.page===e.page&&this.props.term===e.term||this.userList&&(this.userList.scrollTop=0)}componentWillUnmount(){this.nextTimeoutId&&clearTimeout(this.nextTimeoutId)}get userList(){return this.userListRef.current}get channelListScroll(){return this.channelListScrollRef.current}get channelListScrollDOM(){return A.findDOMNode(this.channelListScroll)}render(){let e,t,n;const{formatMessage:r}=this.props.intl;if(this.props.term||!this.props.users)n=this.props.users;else if(!this.props.term){const r=this.props.page*this.props.usersPerPage;let s=r+this.props.usersPerPage;this.props.users.length<s&&(s=this.props.users.length),n=this.props.users.slice(r,s),s<this.props.total&&(e=d("button",{id:"searchableUserListNextBtn",className:"btn btn-link filter-control filter-control__next",onClick:this.nextPage,disabled:this.state.nextDisabled,children:d(P,{id:"filtered_user_list.next",defaultMessage:"Next"})})),this.props.page>0&&(t=d("button",{id:"searchableUserListPrevBtn",className:"btn btn-link filter-control filter-control__prev",onClick:this.previousPage,children:d(P,{id:"filtered_user_list.prev",defaultMessage:"Previous"})}))}let s;if(this.props.renderFilterRow)s=this.props.renderFilterRow(this.handleInput);else{const e={id:ht("filtered_user_list.search"),defaultMessage:"Search users"};s=b("div",{className:Vv,children:[d("label",{className:"hidden-label",htmlFor:"searchUsersInput",children:d(P,{id:"filtered_user_list.search",defaultMessage:"Search users"})}),d(Iv,{id:"searchUsersInput",ref:this.filterRef,className:x(Gv,"form-control filter-textbox"),placeholder:e,inputComponent:Fv,value:this.props.term,onInput:this.handleInput,"aria-label":r(e).toLowerCase()})]})}return b("div",{className:Bv,children:[b("div",{className:qv,children:[s,d("div",{className:zv,children:this.renderCount(n)})]}),d("div",{className:Wv,children:d(Hv,{ref:this.userListRef,users:n,extraInfo:this.props.extraInfo,actions:this.props.actions,actionProps:this.props.actionProps,actionUserProps:this.props.actionUserProps,rowComponentType:this.props.rowComponentType,isDisabled:this.props.isDisabled})}),b("div",{className:x(Kv,"filter-controls"),children:[t,e]})]})}}u(Yv,"propTypes",{users:E.arrayOf(E.object),usersPerPage:E.number,total:E.number,extraInfo:E.object,nextPage:E.func.isRequired,previousPage:E.func.isRequired,search:E.func.isRequired,actions:E.arrayOf(E.any),actionProps:E.object,actionUserProps:E.object,focusOnMount:E.bool,renderCount:E.func,filter:E.string,renderFilterRow:E.func,page:E.number.isRequired,term:E.string.isRequired,onTermChange:E.func.isRequired,intl:E.any,isDisabled:E.bool,rowComponentType:E.func}),u(Yv,"defaultProps",{users:[],usersPerPage:50,extraInfo:{},actions:[],actionProps:{},actionUserProps:{},showTeamToggle:!1,focusOnMount:!1});var $v=f(Yv);class Xv extends w.PureComponent{constructor(e){super(e),u(this,"handleTermChange",(e=>{this.setState({term:e})})),u(this,"nextPage",(()=>{this.setState({page:this.state.page+1}),this.props.nextPage(this.state.page+1)})),u(this,"previousPage",(()=>{this.setState({page:this.state.page-1})})),u(this,"search",(e=>{this.props.search(e),""!==e&&this.setState({page:0})})),this.state={term:"",page:0}}render(){return d($v,l(a({},this.props),{nextPage:this.nextPage,previousPage:this.previousPage,search:this.search,page:this.state.page,term:this.state.term,onTermChange:this.handleTermChange}))}}u(Xv,"propTypes",{users:E.arrayOf(E.object),usersPerPage:E.number,total:E.number,extraInfo:E.object,nextPage:E.func.isRequired,search:E.func.isRequired,actions:E.arrayOf(E.any),actionProps:E.object,actionUserProps:E.object,focusOnMount:E.bool});class Qv extends w.PureComponent{constructor(e){super(e),u(this,"searchTimeoutId"),u(this,"loadComplete",(()=>{this.setState({loading:!1})})),u(this,"nextPage",(e=>{const{actions:t,currentChannelId:n,currentTeamId:r}=this.props;t.loadProfilesAndTeamMembersAndChannelMembers(e+1,50,r,n,{active:!0})})),u(this,"handleSearch",(e=>{this.props.actions.setModalSearchTerm(e)})),this.searchTimeoutId=0,this.state={loading:!0}}async componentDidMount(){const{actions:e,currentChannelId:t,currentTeamId:n,missingUserPrefs:r}=this.props;await Promise.all([e.loadProfilesAndTeamMembersAndChannelMembers(0,G.PROFILE_CHUNK_SIZE,n,t,{active:!0}),e.getChannelMembers(t),e.getChannelStats(t),e.fetchChannelUsersPreference(t,r)]),this.loadComplete()}componentWillUnmount(){this.props.actions.setModalSearchTerm("")}componentDidUpdate(e){if(e.searchTerm!==this.props.searchTerm){clearTimeout(this.searchTimeoutId);const t=this.props.searchTerm;if(""===t)return this.loadComplete(),void(this.searchTimeoutId=0);const n=window.setTimeout((async()=>{const{data:r}=await e.actions.searchProfiles(t,{team_id:this.props.currentTeamId,in_channel_id:this.props.currentChannelId});if(n!==this.searchTimeoutId)return;const s=r.reduce(((e,t)=>(e.push(t.id),e)),[]);this.props.actions.loadStatusesForProfilesList(r),this.props.actions.loadTeamMembersAndChannelMembersForProfilesList(r,this.props.currentTeamId,this.props.currentChannelId).then((({data:e})=>{e&&this.loadComplete()})),this.props.actions.fetchChannelUsersPreference(this.props.currentChannelId,s)}),G.SEARCH_TIMEOUT_MILLISECONDS);this.searchTimeoutId=n}}render(){if(this.state.loading)return d(Ma,{});const e=0!==this.props.channel.delete_at;return d(Xv,{users:this.props.usersToDisplay,usersPerPage:50,total:this.props.totalChannelMembers,nextPage:this.nextPage,search:this.handleSearch,actions:e?[()=>{}]:[Cv],actionUserProps:this.props.actionUserProps,focusOnMount:!ft()})}}const Jv=C(((e,t)=>t),mt,gt,K,((e=[],t={},n={},r)=>{const s={},i=[];for(let o=0;o<e.length;o++){const a=e[o];t[a.id]&&n[a.id]&&0===a.delete_at&&(i.push(a),s[a.id]={channel:r,teamMember:t[a.id],channelMember:n[a.id]})}return{usersToDisplay:i.sort(vt),actionUserProps:s}}));var Zv=g((function(e,t){const n=e.views.search.modalSearch,r=yt(e);let s;s=n?bt(e,n):xt(e);let i=[];for(let a of s)r[a.id]||i.push(a.id);const o=wt(e)||{member_count:0};return l(a({},Jv(e,s)),{missingUserPrefs:i,currentTeamId:e.entities.teams.currentTeamId,currentChannelId:t.channel.id,searchTerm:n,totalChannelMembers:o.member_count})}),(function(e){return{actions:y({getChannelMembers:_t,searchProfiles:Ct,getChannelStats:Ze,setModalSearchTerm:pv,loadProfilesAndTeamMembersAndChannelMembers:St,loadStatusesForProfilesList:Et,loadTeamMembersAndChannelMembersForProfilesList:Tt,fetchChannelUsersPreference:At},e)}}))(Qv);class ey extends w.PureComponent{constructor(e){super(e),u(this,"handleHide",(()=>{this.setState({show:!1})})),u(this,"handleExit",(()=>{this.props.onHide()})),this.state={show:!0}}render(){return this.props.channel.delete_at,d("div",{children:b(Bg,{dialogClassName:"a11y__modal more-modal more-modal--action",show:this.state.show,onHide:this.handleHide,onExited:this.handleExit,"aria-labelledby":"channelMembersModalLabel",children:[b(qg,{closeButton:!0,onClose:this.handleHide,children:[d(P,{id:"channel_members_modal.members",defaultMessage:" Members"}),d("span",{className:"name",children:this.props.channel.display_name})]}),d(zg,{children:d(Zv,{channel:this.props.channel})})]})})}}var ty=g((e=>({canManageChannelMembers:Pt(e)})),(e=>({actions:y({openModal:It},e)})))(ey);class ny extends w.PureComponent{show(e){e&&e.preventDefault();const{modalId:t,dialogProps:n,dialogType:r}=this.props,s={modalId:t,dialogProps:n,dialogType:r};this.props.actions.openModal(s)}render(){const e=this.props,{children:t,onClick:n,intl:{formatMessage:r}}=e,s=c(e,["children","onClick","intl"]);r({id:"accessibility.button.dialog",defaultMessage:"{dialogName} dialog"},{dialogName:s.accessibilityLabel});let i=null;this.props.showUnread&&(i=d("span",{className:"unread-badge"})),Reflect.deleteProperty(s,"modalId"),Reflect.deleteProperty(s,"dialogType"),Reflect.deleteProperty(s,"dialogProps"),Reflect.deleteProperty(s,"accessibilityLabel"),Reflect.deleteProperty(s,"actions"),Reflect.deleteProperty(s,"showUnread");let o=e=>this.show(e);n&&(o=e=>{n(e),this.show(e)});const u=s.className||"u3-group u3-text-gray-900 u3-flex u3-rounded-md u3-items-center u3-w-full u3-px-2 u3-py-1 u3-text-sm",p=s.classActive||"u3-bg-primary u3-text-white";return d(so.Item,{children:({active:e})=>b("button",l(a({},s),{onClick:o,className:x(u,{[p]:e}),children:[t,i]}))})}}u(ny,"defaultProps",{dialogProps:{},className:""});var ry=f(ny);var sy=g(null,(function(e){return{actions:y({openModal:It},e)}}))(ry);const iy=function(e){class t extends w.PureComponent{render(){const t=this.props,{id:n,show:r,icon:s,text:i}=t,o=c(t,["id","show","icon","text"]);if(!r)return null;let l=i;return s&&(l=b(w.Fragment,{children:[d("span",{className:"icon",children:s}),i]})),d(e,a({text:l},o))}}return u(t,"defaultProps",{show:!0}),u(t,"displayName"),t}((({modalId:e,dialogType:t,dialogProps:n,text:r,accessibilityLabel:s,extraText:i,children:o,className:a,sibling:l,showUnread:c})=>b(T,{children:[b(sy,{accessibilityLabel:s||r,modalId:e,dialogType:t,dialogProps:n,className:x({"MenuItem__with-help":i,[`${a}`]:a}),showUnread:c,children:[r&&d("span",{className:"MenuItem__primary-text",children:r}),i&&d("span",{className:"MenuItem__help-text",children:i}),o]}),l]})));iy.displayName="MenuItemToggleModalRedux";class oy extends w.PureComponent{render(){const{hasPermission:e,children:t,invert:n=!1}=this.props;return e&&!n||!e&&n?t:null}}var ay=g((function(e,t){if(!t.channelId||null===t.teamId||void 0===t.teamId)return{hasPermission:!1};for(const n of t.permissions)if(We(e,{channel:t.channelId,team:t.teamId,permission:n}))return{hasPermission:!0};return{hasPermission:!1}}))(oy);var ly="u3-cxx-b1a11290",cy="u3-cxx-5d96f235",uy=Zi.jsx;var dy=function(e){return uy("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},e)),{children:uy("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})}))},py=e=>b(so,{as:"div",className:e.stylex.close,children:[d(so.Button,{children:d(dy,{className:e.stylex.closeIcon})}),d(io,{children:d(so.Items,{className:ly,children:d(hy,{stylex:e.stylex,channel:e.channel,isMobile:!1})})})]});const hy=g((e=>({user:te(e),isArchived:Mt(e),isDefault:Rt(e)})))((e=>{const{channel:t,isArchived:n,isDefault:r}=e,s=t.type===G.PRIVATE_CHANNEL?Ke.MANAGE_PRIVATE_CHANNEL_MEMBERS:Ke.MANAGE_PUBLIC_CHANNEL_MEMBERS;return d(p.exports.Fragment,{children:d("div",{className:cy,children:b(ay,{channelId:t.id,teamId:t.team_id,permissions:[s],children:[d(iy,{id:"channelViewInfo",show:t.type!==G.DM_CHANNEL&&t.type!==G.GM_CHANNEL,modalId:Nt.CHANNEL_INFO,dialogType:dv,dialogProps:{channel:t},text:ye("navbar.viewInfo","View Info")}),d(iy,{id:"channelManageMembers",show:t.type!==G.DM_CHANNEL&&t.type!==G.GM_CHANNEL&&!n&&!r,modalId:Nt.CHANNEL_MEMBERS,dialogType:ty,dialogProps:{channel:t},text:ye("channel_header.manageMembers","Manage Members")})]})})})}));var fy=Zi.jsx,my=Zi.jsxs;var gy=function(e){return my("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},e)),{children:[fy("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),fy("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]}))};var vy="u3-cxx-c47132a1",yy="u3-cxx-f7299146";function by(e,t,n){return e&&Boolean(e.message.trim()||e.fileInfos.length||e.uploadsInProgress.length)&&t!==(null==n?void 0:n.id)}var xy=g((function(e,t){var n;const r=Ot(e);return{hasDraft:by(!!(null==(n=t.channel)?void 0:n.id)&&kt(e,Lt.DRAFT,t.channel.id),r,t.channel)}}),(function(e){return{actions:y({},e)}}))((e=>0!==e.channel.delete_at?d(lv,{className:x(vy,yy)}):e.hasDraft?d(gy,{className:x(vy,yy)}):e.icon));var wy="u3-cxx-afa6b0a9",_y="u3-cxx-2f0cc8e8",Cy="u3-cxx-49bfa606",Sy="u3-cxx-013daa6f",Ey="u3-cxx-133903d4";class Ty extends w.PureComponent{constructor(e){super(e),u(this,"labelRef"),u(this,"gmItemRef"),u(this,"enableToolTipIfNeeded",(()=>{const e=this.gmItemRef.current||this.labelRef.current,t=e&&e.offsetWidth<e.scrollWidth;this.setState({showTooltip:Boolean(t)})})),u(this,"getAriaLabel",(()=>{const{label:e,ariaLabelPrefix:t,unreadMentions:n}=this.props;let r=e;return t&&(r+=` ${t}`),1===n?r+=` ${n} ${ye("accessibility.sidebar.types.mention","mention")}`:n>1&&(r+=` ${n} ${ye("accessibility.sidebar.types.mentions","mentions")}`),this.showChannelAsUnread()&&0===n&&(r+=` ${ye("accessibility.sidebar.types.unread","unread")}`),r.toLowerCase()})),u(this,"removeTooltipLink",(()=>{var e,t;return null==(t=null==(e=this.gmItemRef.current)?void 0:e.removeAttribute)?void 0:t.call(e,"aria-describedby")})),u(this,"handleMenuToggle",(e=>this.setState({isMenuOpen:e}))),u(this,"showChannelAsUnread",(()=>this.props.unreadMentions>0||this.props.unreadMsgs>0&&this.props.showUnreadForMsgs)),this.labelRef=w.createRef(),this.gmItemRef=w.createRef(),this.state={isMenuOpen:!1,showTooltip:!0}}componentDidMount(){-1===this.props.memberCount&&this.props.actions.getChannelStats(this.props.channel.id),this.enableToolTipIfNeeded()}componentDidUpdate(e){e.label!==this.props.label&&this.enableToolTipIfNeeded()}render(){const{link:e,label:t,channel:n,currentChannelId:r,icon:s,memberCount:i,isMuted:o,canManage:a,styles:l}=this.props,c=r===n.id;let u=null,h=null;return c&&a&&(u=d(py,{stylex:l,channel:n})),!c&&i>0&&(h=d(tc,{placement:"top",content:`${i} thành viên`,children:d("div",{className:l.badge,children:i>99?"99+":i})})),c&&i>0&&!a&&(h=d(tc,{placement:"top",content:`${i} thành viên`,children:d("div",{className:l.badge,children:i>99?"99+":i})})),d(p.exports.Fragment,{children:b(N,{className:x(l.content,Sy),to:e,title:t,children:[d("div",{className:x(l.icon,Ey),children:d(xy,{channel:n,icon:s})}),d("div",{className:x(l.title,{[_y]:o,[wy]:this.showChannelAsUnread(),[Cy]:0!==n.delete_at}),children:t}),h,u]})})}}var Ay=g((function(e,t){const n=Dt(e)[t.channel.id],r=Ot(e),s=jt(e);let i=null;s[t.channel.id]&&(i=s[t.channel.id]);let o=0,a=0,l=!0;const c=Ut(e),u=Pt(e);return n&&(o=c?n.mention_count_root:n.mention_count,t.channel&&(a=Ht(c,t.channel,n)),n.notify_props&&(l=n.notify_props.mark_unread!==Ft.MENTION)),{unreadMentions:o,unreadMsgs:a,showUnreadForMsgs:l,isMuted:Bt(n),memberCount:i?i.member_count-i.guest_count:-1,canManage:u,currentChannelId:r}}),(function(e){return{actions:y({getChannelStats:Ze},e)}}))(Ty);var Py=g(null,(function(e){return{actions:y({leaveChannel:ao},e)}}))((e=>{const t=()=>{e.actions.leaveChannel(e.channel.id)},n=()=>{oo({id:e.channel.id,display_name:e.channel.display_name})};let r;e.channel.type===G.OPEN_CHANNEL?r=ye("accessibility.sidebar.types.public","public channel"):e.channel.type===G.PRIVATE_CHANNEL&&(r=ye("accessibility.sidebar.types.private","private channel"));const{channel:s,currentTeamName:i,styles:o}=e;return d(Ay,{channel:s,styles:o,link:`/${i}/group/${s.name}`,label:s.display_name,ariaLabelPrefix:r,closeHandler:(()=>{const{channel:r}=e;return r.type===G.OPEN_CHANNEL&&r.name!==G.DEFAULT_CHANNEL?t:r.type===G.PRIVATE_CHANNEL?n:null})(),icon:(()=>{const{channel:t}=e;return d(Ha,{src:J.getChannelPictureUrl(t.id,t.last_picture_update),size:"tab",status:"",wrapperClass:"",newStatusIcon:!0})})()})}));var Iy=f((e=>{const{channel:t,teammate:n,currentTeamName:r,currentUserId:s,intl:i}=e;if(!n)return null;let o=t.display_name;return s===n.id&&(o=i.formatMessage({id:"sidebar.directchannel.you",defaultMessage:"{displayname} (you)"},{displayname:o})),d(Ay,{teammateId:n.id,channel:t,link:`/${r}/messages/@${n.username}`,label:o,closeHandler:t=>{const n=e.channel.teammate_id,r=G.Preferences.CATEGORY_DIRECT_CHANNEL_SHOW,s=e.currentUserId;e.actions.savePreferences(s,[{user_id:s,category:r,name:n,value:"false"}]).then(t),e.actions.leaveDirectChannel(e.channel.name),e.active&&qt.push(`#u3-app/${e.currentTeamName}/group/${e.redirectChannel}`)},icon:(()=>{const{channel:t,teammate:n}=e;if(!n)return null;if(n.id&&n.delete_at)return d("i",{className:"icon icon-archive-outline"});let r="";return"online"===t.status?r="status-online":"away"===t.status?r="status-away":"dnd"===t.status&&(r="status-dnd"),d(Ha,{src:J.getProfilePictureUrl(n.id,n.last_picture_update),size:"tab",status:n.is_bot?"":t.status,wrapperClass:"DirectChannel__profile-picture",newStatusIcon:!1,statusClass:`DirectChannel__status-icon ${r}`})})(),styles:e.styles})}));var Ny=g((function(e,t){const n=$(e,t.channel.teammate_id),r=te(e),s=Y(e),i=zt(e,s.id),o=Ot(e),a=t.channel.id===o;return{teammate:n,currentUserId:r.id,redirectChannel:i,active:a}}),(function(e){return{actions:y({savePreferences:Vt,leaveDirectChannel:lo},e)}}))(Iy);class My extends w.PureComponent{constructor(){super(...arguments),u(this,"handleLeaveChannel",(e=>{const t=this.props.channel.id,n=G.Preferences.CATEGORY_GROUP_CHANNEL_SHOW,r=this.props.currentUserId;this.props.actions.savePreferences(r,[{user_id:r,category:n,name:t,value:"false"}]).then(e),this.props.active&&qt.push(`#u3-app/${this.props.currentTeamName}/group/${this.props.redirectChannel}`)})),u(this,"getIcon",(()=>d("div",{className:"status status--group",children:this.props.membersCount})))}render(){const{channel:e,currentTeamName:t,styles:n}=this.props;return d(Ay,{channel:e,link:`/${t}/messages/${e.name}`,label:e.display_name,closeHandler:this.handleLeaveChannel,icon:this.getIcon(),styles:n})}}var Ry=g((function(e,t){const n=te(e),r=Y(e),s=zt(e,r.id),i=Ot(e),o=t.channel.id===i,a=Gt(e);let l=0;if(a&&a[t.channel.id]){const e=a[t.channel.id];l=e.size,e.has(n.id)&&l--}return{currentUserId:n.id,redirectChannel:s,active:o,membersCount:l}}),(function(e){return{actions:y({savePreferences:Vt},e)}}))(My);var Oy={itemTabChannel:"u3-cxx-aef0f632",tab:"u3-cxx-636eaf61",divider:"u3-cxx-8894bce1",background:"u3-cxx-d23cabb8",tabGeometry:"u3-cxx-3f282ffb",active:"u3-cxx-04826ad9",justAdded:"u3-cxx-9a5930be",tabWasJustAdded:"u3-cxx-eafa980b",content:"u3-cxx-70df9724",icon:"u3-cxx-9cb71bdb",title:"u3-cxx-a034c782",badge:"u3-cxx-b324cfe6",close:"u3-cxx-cece8b76",closeIcon:"u3-cxx-9bf0a77c"};const ky=p.exports.forwardRef(((e,t)=>{if(!e.channel)return null;let n=Py;return e.channel.type===G.DM_CHANNEL?n=Ny:e.channel.type===G.GM_CHANNEL&&(n=Ry),b("div",{ref:t,className:x(Oy.tab,{[Oy.active]:e.isCurrentChannel}),children:[d("div",{className:Oy.divider}),d("div",{className:Oy.background,children:d(Aa,{tabGeometry:Oy.tabGeometry})}),d(n,{channel:e.channel,currentTeamName:e.currentTeamName,styles:Oy})]})}));var Ly=g(function(){const e=Wt();return(t,n)=>{const r=e(t,{id:n.channelId}),s=Y(t),i=Dt(t)[n.channelId],o=Ot(t);let a=0,l=0,c=!0;return i&&(a=i.mention_count,r&&(l=Ht(!1,r,i)),i.notify_props&&(c=i.notify_props.mark_unread!==Ft.MENTION)),{channel:r,currentTeamName:s.name,isCurrentChannel:r.id===o,unreadMentions:a,unreadMsgs:l,showUnreadForMsgs:c}}}(),null,null,{forwardRef:!0})(ky);var Dy={items:"u3-cxx-de39095c",listItems:"u3-cxx-f90cfba6",chromeTabs:"u3-cxx-0ba29205",chromeContent:"u3-cxx-ccf8ee20",tab:"u3-cxx-06382617",divider:"u3-cxx-18a40aa8",background:"u3-cxx-726bf2a2",tabGeometry:"u3-cxx-a8269bbb",active:"u3-cxx-5a764161",justAdded:"u3-cxx-d113a3d5",tabWasJustAdded:"u3-cxx-146f5b8a",content:"u3-cxx-c9390443",icon:"u3-cxx-fae86490",title:"u3-cxx-20552f1b",badge:"u3-cxx-f73abad0",close:"u3-cxx-a67f3ebe",closeIcon:"u3-cxx-a004418d",plusIcon:"u3-cxx-bf387a6e",bottomBar:"u3-cxx-9b0723b5"};class jy extends w.PureComponent{constructor(e){super(e),u(this,"chromeTabsRef"),u(this,"tabsContentRef"),u(this,"joinMoreRef"),u(this,"tabItemRefs"),u(this,"layoutTabsDebounce"),u(this,"firstLoad"),u(this,"refKey",(e=>`refKey_${e}`)),u(this,"handleTabItemRef",(e=>t=>{this.tabItemRefs.set(this.refKey(e),t),this.layoutTabsDebounce()})),this.chromeTabsRef=p.exports.createRef(),this.tabsContentRef=p.exports.createRef(),this.joinMoreRef=p.exports.createRef(),this.tabItemRefs=new Map,this.firstLoad=!0,this.layoutTabsDebounce=eo((()=>{this.layoutTabs(this.props.channelIds),this.firstLoad=!1}),50)}componentDidMount(){var e;null==(e=this.chromeTabsRef.current)||e.style.setProperty("--tab-content-margin","9px")}componentWillUnmount(){var e;null==(e=this.chromeTabsRef.current)||e.style.removeProperty("--tab-content-margin"),this.tabItemRefs.clear()}get tabContentWidths(){var e;const t=this.props.channelIds.length,n=(null==(e=this.tabsContentRef.current)?void 0:e.clientWidth)||0,r=1*(t+1-1),s=(n-18+r-52)/t,i=Math.max(24,Math.min(196,s)),o=Math.floor(i),a=[];let l=n-(o*t+18-r+52);for(let c=0;c<t+1;c+=1){const e=o<196&&l>0?1:0;c<t?a.push(o+e):a.push(52),l>0&&(l-=1)}return a}get tabContentPositions(){const e=[],t=this.tabContentWidths;let n=9;return t.forEach(((t,r)=>{const s=1*r;e.push(n-s),n+=t})),e}get tabPositions(){const e=[];return this.tabContentPositions.forEach((t=>{e.push(t-9)})),e}layoutTabs(e){const t=this.tabContentWidths,n=this.tabPositions;e.forEach(((e,r)=>{const s=t[r],i=s+18,o=this.tabItemRefs.get(this.refKey(e));if(o){o.style.width=i+"px",o.removeAttribute("small"),o.removeAttribute("smaller"),o.removeAttribute("mini"),s<84&&o.setAttribute("small",""),s<60&&o.setAttribute("smaller",""),s<48&&o.setAttribute("mini","");const e=n[r];o.style.left=`${e}px`}})),this.joinMoreRef.current&&(this.joinMoreRef.current.style.width="52px",this.joinMoreRef.current.style.left=`${n[n.length-1]}px`,this.joinMoreRef.current.style.display="block")}render(){const{channelIds:e}=this.props;return b("div",{ref:this.chromeTabsRef,className:Dy.chromeTabs,children:[b("div",{ref:this.tabsContentRef,className:Dy.chromeContent,children:[e.map(((e,t)=>d(Ly,{ref:this.handleTabItemRef(e),channelIndex:t,channelId:e},e))),d(Xl,{ref:this.joinMoreRef,styles:Dy})]}),d("div",{className:Dy.bottomBar})]})}}var Uy=g(function(){const e=Jt(),t=Zt(),n=en();return r=>{const s=ne(r),i=Kt(r),o=Yt(r,i),a=$t(r,i),l=re(r,i),c=1===Xt(r);if("all"===i||a.type===Qt.DIRECT_MESSAGES){let i=l.filter((e=>s.includes(e))).reduce(((e,t)=>{const n=ce(r,t);return n&&e.push(n),e}),[]);return i=e(r,i),i=t(r,i),i=n(r,i),{channelIds:i.map((e=>e.id)),categoryLoading:c,sidebarIndex:o}}return{channelIds:[],categoryLoading:c,sidebarIndex:o}}}())(jy);var Hy="u3-cxx-5d502d38",Fy="u3-cxx-98b0c3b7";var By=g()((()=>(p.exports.useRef(null),d("div",{className:Hy,children:d("div",{className:Fy,children:d(Uy,{})})}))));const qy=new M({concurrency:2});class zy extends w.PureComponent{constructor(){super(...arguments),u(this,"prefetchTimeout"),u(this,"prefetchPosts",(e=>e)),u(this,"prefetchData",(()=>{const{prefetchRequestStatus:e,prefetchQueueObj:t}=this.props;for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n];for(const t of r)e.hasOwnProperty(t)||qy.add((async()=>this.prefetchPosts(t)))}}))}async componentDidUpdate(e){const{currentChannelId:t,prefetchQueueObj:n,sidebarLoaded:r}=this.props;!t||!r||e.currentChannelId&&e.sidebarLoaded?e.prefetchQueueObj!==n&&(clearTimeout(this.prefetchTimeout),await qy.clear(),this.prefetchData()):(qy.add((async()=>this.prefetchPosts(t))),await tn(),this.prefetchData(),this.props.actions.trackDMGMOpenChannels())}render(){return null}}var Vy,Gy;(Gy=Vy||(Vy={}))[Gy.high=1]="high",Gy[Gy.medium=2]="medium",Gy[Gy.low=3]="low";const Wy=He(((e,t)=>e.reduce(((e,n)=>{const r=n.id,s=t[r];if(s&&!Bt(s)){if(s.mention_count>0)return l(a({},e),{1:[...e[1],r]});if(s.notify_props&&"mention"!==s.notify_props.mark_unread&&n.total_msg_count-s.msg_count)return l(a({},e),{2:[...e[2],r]})}return e}),{1:[],2:[],3:[]})));function Ky(e){return"true"===W(e).EnableLegacySidebar||sn(e).length>0}var Yy=g((function(e){const t=e.views.channel.lastUnreadChannel,n=Dt(e),r=nn(e,t),s=Wy(r,n),i=e.views.channel.channelPrefetchStatus;return{currentChannelId:Ot(e),prefetchQueueObj:s,prefetchRequestStatus:i,sidebarLoaded:Ky(e),unreadChannels:r}}),(function(e){return{actions:y({prefetchChannelPosts:co,trackDMGMOpenChannels:rn},e)}}))(zy);var $y="u3-cxx-24a7e538";var Xy=g((function(e){return{teamId:Y(e).id}}),(function(e){return{actions:y({loadChannelsForCurrentUser2:uo},e)}}))((e=>{const[t,n]=p.exports.useState(!0);p.exports.useEffect((()=>{e.teamId&&(t||n(!0),e.actions.loadChannelsForCurrentUser2().then((()=>{n(!1)})))}),[e.teamId]);return t?d(on,{}):b("div",{className:$y,children:[d(By,{onJoinMore:()=>{}}),d(Yy,{})]})}));class Qy extends w.PureComponent{constructor(e){super(e)}render(){const e=this.props,{modals:t}=e,n=c(e,["modals"]),{modalState:r}=t;if(!t)return d("div",{});const s=[];for(const i in r)if(r.hasOwnProperty(i)){const e=r[i];if(e.open){const t=w.createElement(e.dialogType,Object.assign({},e.dialogProps,{onHide:n.actions.closeModal.bind(this,i),key:`${i}_modal`}));s.push(t)}}return d("div",{children:s})}}var Jy=g((function(e){return{modals:e.views.modals}}),(function(e){return{actions:y({closeModal:an},e)}}))(Qy);function Zy(e){return e.views.lhs.isOpen}let eb=!1;function tb(e,t,n,r){return async(s,i)=>{if(eb)return{data:!1};const{data:o}=await s(ln(e));if(!o)return(r||qt).replace(`/error?type=${cn.PERMALINK_NOT_FOUND}&returnTo=${t}`),{data:!0};const a=i(),l=o.posts[o.order[0]].channel_id;let c=a.entities.channels.channels[l];const u=Y(a),d=u.id;if(!c){const{data:e}=await s(un(l));if(!e)return(r||qt).replace(`/error?type=${cn.PERMALINK_NOT_FOUND}&returnTo=${t}`),{data:!1};c=e}let p=a.entities.channels.myMembers[l];if(!p){if(c.type===G.DM_CHANNEL||c.type===G.GM_CHANNEL)return(r||qt).replace(`/error?type=${cn.PERMALINK_NOT_FOUND}&returnTo=${t}`),{data:!1};const e=await s(Je(c.id,n));if("data"in e&&(p=e.data),!p){const e=te(a);if(c.type===G.PRIVATE_CHANNEL&&dn(e.roles)){eb=!0;const e=await s(pn(u,c));if(eb=!1,"data"in e&&!e.data.join)return{data:!1}}await s(hn(n,"",l,""))}}if(c.team_id&&c.team_id!==d)return(r||qt).replace(`/error?type=${cn.PERMALINK_NOT_FOUND}&returnTo=${t}`),{data:!1};c&&c.type===G.DM_CHANNEL?s(fn(c.id)):c&&c.type===G.GM_CHANNEL&&s(mn(c.id)),s(gn(l)),s({type:vn.RECEIVED_FOCUSED_POST,data:e,channelId:l});const h=le(a,c.team_id||d);if(c.type===G.DM_CHANNEL){const t=yn(c.name),n=$(a,t);(r||qt).replace(`/${h.name}/messages/@${n.username}/${e}`)}else c.type===G.GM_CHANNEL?(r||qt).replace(`/${h.name}/messages/${c.name}/${e}`):(r||qt).replace(`/${h.name}/group/${c.name}/${e}`);return s(uo()),s(Ze(l)),{data:!0}}}class nb extends w.PureComponent{constructor(e){super(e),u(this,"mounted"),u(this,"doPermalinkEvent",(async e=>{const t=e.match.params.postId;await this.props.actions.focusPost(t,this.props.returnTo,this.props.currentUserId,e.history),this.mounted&&this.setState({valid:!0})})),u(this,"isStateValid",(()=>this.state.valid&&this.props.channelId&&this.props.teamName)),this.state={valid:!1},this.mounted=!1}static getDerivedStateFromProps(e,t){let n={postid:e.match.params.postId,valid:t.valid};return t.postid!==e.match.params.postId&&(n.valid=!1),n}componentDidMount(){this.mounted=!0,this.doPermalinkEvent(this.props),document.body.classList.add("app__body")}componentDidUpdate(){this.state.valid||this.doPermalinkEvent(this.props)}componentWillUnmount(){this.mounted=!1}render(){return this.isStateValid()?null:d("div",{id:"app-content",className:"app__content"})}}var rb=g((function(e){const t=Y(e),n=K(e),r=pe(e);return{channelId:n?n.id:"",teamName:t?t.name:"",currentUserId:r}}),(function(e){return{actions:y({focusPost:tb},e)}}))(nb);const sb=new RegExp("^[a-zA-Z0-9]{26}__[a-zA-Z0-9]{26}$");function ib({match:e,history:t}){return async(n,r)=>{const s=r(),{path:i,identifier:o,team:a}=e.params;if(!o)return{data:void 0};const l=bn(s,a);if(!l)return{data:void 0};switch(function(e,t,n){if("group"===t){const t=Tn(e,n),r=Nn(e).find((e=>e.name===n));return 26===n.length?t||r?"channel_name":"channel_id":!t&&!r&&40===n.length||t&&t.type===G.GM_CHANNEL||r&&r.type===G.GM_CHANNEL?"group_channel_group_id":function(e){return 54===e.length&&sb.test(e)}(n)?"direct_channel_user_ids":"channel_name"}if("messages"===t)return 0===n.indexOf("@")?"direct_channel_username":n.indexOf("@")>0?"direct_channel_email":26===n.length?"direct_channel_user_id":40===n.length?"group_channel_group_id":"error";return"error"}(s,i,o)){case"channel_name":await n(function(e,t){return async(n,r)=>{const s=r(),{team:i,identifier:o}=e.params,a=o.toLowerCase(),l=bn(s,i);if(!l)return{data:void 0};let c,u=Pn(s,l.id)[a];if(!u){const e=await n(In(i,a,!0));"data"in e&&(u=e.data)}if(u&&(c=s.entities.channels.myMembers[u.id],!c)){const e=await n(Je(u.id,pe(s)));"data"in e&&(c=e.data)}if(!u||!c){const o=te(r());if(dn(null==o?void 0:o.roles)&&u.type===G.PRIVATE_CHANNEL){const e=await n(pn(l,u));if("data"in e&&!e.data.join)return{data:void 0}}const c=await n(ie(pe(s),l.id,"",a));if("error"in c){if(!u){const r=await n(In(i,a,!0));if("error"in r||0===r.data.delete_at)return await n(xn(l.id,0,20)),ub(e,t,zt(s,l.id)),{data:void 0};u=r.data}}else u=c.data.channel}return u.type===G.DM_CHANNEL?n(ab(e,t)):u.type===G.GM_CHANNEL?t.replace(`/${i}/messages/${u.name}`):lb(u),{data:void 0}}}(e,t));break;case"channel_id":await n(function(e,t){return async(n,r)=>{const s=r(),{team:i,identifier:o}=e.params,a=o.toLowerCase();let l=ce(s,a);const c=s.entities.channels.myMembers[a],u=bn(s,i);if(!l||!c){const r=await n(ie(pe(s),u.id,a,""));if("error"in r)return await n(xn(u.id,0,20)),ub(e,t,zt(s,u.id)),{data:void 0};l=r.data.channel}return l.type===G.DM_CHANNEL?n(ob(e,t,yn(l.name,pe(s)))):l.type===G.GM_CHANNEL?t.replace(`/${i}/messages/${l.name}`):t.replace(`/${i}/group/${l.name}`),{data:void 0}}}(e,t));break;case"group_channel_group_id":await n(function(e,t){return async(n,r)=>{const s=r(),{identifier:i,team:o}=e.params,a=i.toLowerCase();t.replace(e.url.replace("/group/","/messages/"));let l=Tn(s,a);const c=bn(s,o);if(!l){const r=await n(ie(pe(s),c.id,"",a));if("error"in r)return await n(xn(c.id,0,20)),cb(e,t,zt(s,c.id)),{data:void 0};l=r.data.channel}return n(An(l.id)),lb(l),{data:void 0}}}(e,t));break;case"direct_channel_username":await n(function(e,t){return async(n,r)=>{const s=r(),{team:i,identifier:o}=e.params,a=o.slice(1,o.length).toLowerCase(),l=bn(s,i);let c=Sn(s,a);if(!c){const r=await n(En(a));if("error"in r)return await n(xn(l.id,0,20)),cb(e,t,zt(s,l.id)),{data:void 0};c=r.data}const u=await n(po(c.id));return"error"in u?(await n(xn(l.id,0,20)),cb(e,t,zt(s,l.id)),{data:void 0}):(lb(u.data),{data:void 0})}}(e,t));break;case"direct_channel_email":await n(function(e,t){return async(n,r)=>{const s=r(),{team:i,identifier:o}=e.params,a=o.toLowerCase(),l=bn(s,i);let c=_n(s,a);if(!c){const r=await n(Cn(a));if("error"in r)return await n(xn(l.id,0,20)),cb(e,t,zt(s,l.id)),{data:void 0};c=r.data}return t.replace(`/${i}/messages/@${c.username}`),{data:void 0}}}(e,t));break;case"direct_channel_user_ids":await n(ab(e,t));break;case"direct_channel_user_id":await n(ob(e,t,o));break;case"error":await n(xn(l.id,0,20)),cb(e,t,zt(s,l.id))}return{data:void 0}}}function ob(e,t,n){return async(r,s)=>{const i=s(),{team:o}=e.params,a=bn(i,o);let l=$(i,n);if(!l){const s=await r(wn(n));if("error"in s)return await r(xn(a.id,0,20)),cb(e,t,zt(i,a.id)),{data:void 0};l=s.data}return t.replace(`/${o}/messages/@${l.username}`),{data:void 0}}}function ab(e,t){return async(n,r)=>{const s=r(),{team:i,identifier:o}=e.params,a=yn(o.toLowerCase(),pe(r())),l=bn(s,i);let c=$(s,a);if(!c){const r=await n(wn(a));if("error"in r)return await n(xn(l.id,0,20)),cb(e,t,zt(s,l.id)),{data:void 0};c=r.data}return t.replace(`/${i}/messages/@${c.username}`),{data:void 0}}}function lb(e){ho(e)}function cb(e,t,n){const{team:r}=e.params;t.push(r?`/${r}/group/${n}`:"/")}async function ub(e,t,n){const{team:r}=e.params;t.push(r?`/error?type=channel_not_found&returnTo=/${r}/group/${n}`:"/")}var db=Zi.jsx;var pb=function(e){return db("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},e)),{children:db("path",{fillRule:"evenodd",d:"M13.477 14.89A6 6 0 015.11 6.524l8.367 8.368zm1.414-1.414L6.524 5.11a6 6 0 018.367 8.367zM18 10a8 8 0 11-16 0 8 8 0 0116 0z",clipRule:"evenodd"})}))};var hb={fileOverlay:"u3-cxx-2f227fd2",overlayIndent:"u3-cxx-2988dc4b",rightFileOverlay:"u3-cxx-726b55ee",overlayFiles:"u3-cxx-340def93",overlayCircle:"u3-cxx-9ac0afaf",overlayLogo:"u3-cxx-83477c83",fa:"u3-cxx-ec2ba334"};const fb=e=>d("div",{className:x(hb.fileOverlay,"u3-hidden",{[hb.rightFileOverlay]:"right"===e.overlayType,[hb.centerFileOverlay]:"center"===e.overlayType}),children:d("div",{className:hb.overlayIndent,children:b("div",{className:hb.overlayCircle,children:[d("img",{className:hb.overlayFiles,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAABrCAMAAAAW2X0YAAAC9FBMVEUAAAAAAAAAAAD////Ozs4AAAABAQHPz8/GxsYAAADMzMwAAADv7+/6+vri4uIAAAAAAAD7+/v////+/v78/Pz29vbNzc0AAAAAAAAAAAD9/f3+/v7+/v77+/v29vafn58AAAAAAABCQkL+/v7+/v7r6+vz8/MAAADJycn6+vr8/Pz9/f38/Pz39/f6+vr8/Pz8/Pzo6OjKysq4uLjd3d3////+/v739/f39/f19fXMzMzLy8umpqb////29vb39/f7+/vR0dHMzMzGxsYAAADd3d3JycmmpqYAAAD39/ft7e3Gxsa9vb2tra34+Pi2trbU1NTi4uLw8PD7+/v29vb29vbm5ub19fX7+/vY2Njx8fHW1tbCwsLm5ubt7e3z8/N9fX35+fnp6enPz8/m5ubg4ODa2trU1NTW1tbk5OSysrLq6urPz8/BwcFjY2P9/f3Kysr19fW/v7/k5OSZmZnMzMwAAAC9vb3Hx8dAQECioqK7u7uvr6/w8PCxsbHc3Ny4uLikpKQLCwuoqKjHx8fOzs7u7u7w8PCsrKzT09OPj4+Tk5OXl5eZmZmenp61tbUAAADR0dG1tbX8/Pze3t6zs7OxsbGbm5ugoKC9vb0AAACBgYHq6uqnp6elpaXExMSrq6sAAAD4+PjZ2dmcnJzk5OTv7++kpKStra3n5+e4uLi/v7+JiYmhoaHIyMjAwMDJycm7u7v19fXg4OC3t7cdHR3S0tLw8PCRkZHb29vZ2dmtra2Tk5Pm5ube3t7CwsLr6+vU1NTf39/4+Pj19fXa2trw8PDr6+vz8/O3t7fS0tLKysrGxsbExMS4uLidnZ1zc3MmJiYAAAAAAAAAAAAAAAACAgK5ubmtra2GhoY/Pz8AAAAAAAAAAAC/v7+cnJxfX18FBQUAAAAAAAAAAAAAAADW1ta5ubmEhIQ1NTUAAAAAAAAAAADl5eWkpKTz8/Pg4OBtbW3f39/Z2dmVlZUICAhFRUUjIyPb29tpaWmMjIxycnKq81rdAAAA/HRSTlMAAQL/gAMF/4MI/wQVPxEHDE2zj2Q0CgkQBn2th1cnBAsSDKuoGyAUnLS0oHBBRnOms48k2rGWOWyzs3AXsCksWrOpWA2ztEUWQ7O1uIyzubOzs7T/tXYlVrO1sz+zt7YOnrizuLOzt7y5LbRJRR6zoZRgaP+vDz57Gf//M4n/XE4wFLO0ZH3///+3tbSzs7MKT////7Wzs7OzDiT//7mzsxOa////tbOzcLP/ublEs/+0jmM4FrmEuLtXuSpqXrV6UrqWsrWPgJI8vb/AwLCQbUk9NTEvLbGWdFI4KiebeFU7JCIgHp96VjUcGhilWqyIOYVrPSAoI24uOTKpTH4gAAALmklEQVR4AdTUg34sMRzF8T3pnSnWqW3bbWrbtq1r883vpEydzczq9wbfT/4nNpMBxPcA2EIjgESo9IaECAGargSIjNJIKAhA9Gg1QEyUnRA4nK7gXhPsbo8iICZK14iX0ti4+ITgIYiemKQIMATJySmUl5qWnpEJICiArGxFABfk5NKb8lK8+QgUAgApiAdgI8meQkUAr6i4hAqVlpX7fxIwclRUVtHqmlpAMwHg1YkCXn2DXycBIKGxqYHymhlradXcZgCiQKgtLb3dD5MAkNnRGdtGb+pirLsnp1cZ8LzA+knAqMCbkkvF+hhj/UUDg+qA5wWWTgKAa6iylD5smANGRscUARICCybBjz4+roE+1fgVYEIRICG4mUSn2iT40bd3prXR55o0D5AR8HJTvAXwBQGjfG9KHn2pKbMAeQGvtHKIT0Ly6J1lpfS1pq0AyAt4DXGNCS8bAJtx9LFUphkTgNkHzc1QydrmCfD80S8spqVS2ZZEgLmW5Z6At7L6lIAfV36FePQSrVkHWN+QfYJiVrRJ8PjoG5u2qK8tWwfY3iimcg0z1mO/LwAyYuupSjuWAXalb2iPse5WOwQBQPKpWvv9OweHlgCO1uckAV2MsRadiABiT96iSo2Pz60fBRYwznjH4hNA06ObqFolAQecMF6NromA5KzTsAH0scvO7AQi4DxcABc77LK3m9o9QPa7MAE0s+ve6wQCIOmDlYCPr6UOWGPXfbr7SkH0xM9fwgSwxG76KjyBPbr3W6qlgO8/nu+7CcAMu+vn3RNobk/2L0sBvyOe77cJwDS7SfxKQYwR/AkLwBQT+msnNwJjBP/CAnDxnzmzfFMbj6Lwuutdd5fMum9YrTAf2D4UWGXYKgt1z7rvOHDHh0AtTA06Rt3d+19thPs0c0NCPqQPvHXvCzm/nDmJhEM+YjodpXoI/nuzvgKzW9vmrAI3CIHENJ9Ou55juhN0eC7Q2fVbt1uBxal0Bnt648vAFcG3knH1KH1Hz7Eegr6f+j0XGJAkqfN6YnDISWBWarg5KyNiLh9tATesEudEb1HfArqG1m/wXKBLFdh4PXHbJieBzalYEwgJpYAqrYo/6E5CvZvRg5aZI1u8FthqzsLGbdJ2B4FUaocRYjGaL6JKqTm8qvZI8ZD2FlCb2Am18Y+GwX2IO7cPagOEfgF1SdKYg8D4hOkUCkwb7UF0EYmdTz+iHkTUJiahJgHEnlWgESvHWpwFiK9+26p+vUuSpG2DDgKzSMBg1RyfEYndsQjYMkkCRpv4BGrRi4hzQOUtVBl+y43AmCRtvX6jpLHVQWCRKsAIJpRWPRJlm0h88us9VwTUNrEHahBGlWZQEXtQQxGcLyH1Jd8uqXR3SRp/OQgstAhQJHK2kdjzDL0DRgj2Qg0KqFICDTG2W0bE7A4ngd8HBgc3SSY6bQUmHO7EgWm9PYhYBs7eh59+hNqEFoJ94EwMNWR6O8UyYqbkIPDVNmlgl2TmNvv7ABNgfDmnF/PA2feTegqZKvV+511OKKKOH4goZtKz7AVukzibbAUOmAQic8DKKEaB8fz+mbca9wFqEwfBCR8aKAAQL5UDABDLpA8dthMY/E2ysN1NmSvLCbCQQxEYBykC1CYePgL2UG4RWwGCiCjHAWA4nTpqJzAkWRlzI1BEq8Fb2AqcIw/3UQQqbeIYOFBGosU4TzEE8FY6dchOYECysm2wtkAEEWU/HzFRAc6x9XQFUQhGbAc6MVlGAmMAsGwUsScITcXUuNcfD4SwikEWE8BYMEIRuBKCb6AaYaWAZnZX/kqMQtNu7wVGUUNOgglBloPA+MYcAb1N9P1UdaDLIyNHL1QzNH1RXaBruz1dzgKrKGtmgzBmgbP8pz69yplDsBKsRNDCMuMMxTYS8HJWmYMVzKlV0AecleYIUJtY40ogrt1aSohJuoQ8E6DTumd0WmBqB3gLGGueueduErjSJo6DlSJyeo1DKSdAU85zgV4563uL9R6RSrCJdQ+bI+A00JWRIwsAsn6RhukY9U5AFMBCEkeB87PWI0jAcaBLooUwwLTWGABk06lhLwVsyGMIGI/9aj5EHQc6ES20UbugKnGVBYoYAcafagTMVxANdCeqtmhOiW45mfRJb8bd2Yvm2QsEsAicvytVmqCB7g+woqCFYOXAywx79HxgPJUZpoPHwjQsA+dfNQLs/2870IXRQrLy88MtngmkM4jFfFSsWqX9wHjzPx4Bh4FOkFFHziFRBg1/VPDqCc3RJctaUadVSQSBoHtzEBinpvQIc6U+DVbiiFhQEoLgo9t88So8YkoUsYKc9Zl30jlYAk7/T1SlCceBLuAXQadlFA0iHguc0U6hQEjfg5Ddi33YDJwN1CMI1wNduBU1QiTg2SXkz6rvMax6S9+DdCgSWQwD4+zITOoRhOuB7kv9OtpNAp6G2GgR+kRKFBR/lR6xk3qECfcD3blRRJ/HAhOH0hm6dkIB/SOoorl7MVaYegQ/SFd+AjWZk/A8xAvPKyUkiuWkCBChSMSB8Qn1CA4NdPV50D31ZS9QJBADwLhAVZpBA129BDQiMTqJKpEQMec4yRFsoKuLAPFWfFgmiZ4C5oHzB01yDBro6ihACOE2ikSVSa5Kj2ADXV0FiKDfiIQIjIvVegQf6BpAwIjE7rjzJEfwga5BBBh8kmPQQPdKYwssoB5hG4JTDS3AJzmCD3SNK8AnOYIPdI0q8B6f5KxtYuRsIwtcsusRfKBrVAE+yVWr1N83ssBlmyrNB7pGFXiOHu1x+EDnTkBo+eHw/4zbtQECMQAAwBVYgXm+psR1CmQorE337hq3PXDXK5Mm7rFsx33l+UEYxUmaZntpmsRRGPi5+4ZjW9v/X6+v67XPLeh2QPd3Bto9MLHsJ0ZRVlEUwTjNED5CWRrDfVBVFob9zJqAXvvfDMy+rCNeD+h+2h8MDcB2cmdFKOMQwnhf+ggLqZTSSkmJ0b4W4n0EZ5SsJve2YNBq/PsBYrEr3gog4waj8EQTIkiAy6+Q2DgxKAww0NCAwVxRc7UqFFSLAKXQATgAN5ABAzAUtllhLQAUANKkbXNpu+7u2raFvT95N+bt/E8t9oGqC9/3v+97iS8St6Y4iBZ0aqzDCLorq2sTHJ+cnh0ewrnDwQP3YlBG7QpROSiyoxRGAbOAH5yeHK/9xupKlz2A54kiAqSgU+B10Fle6kqcz1ycScOkwDyX1KO27/bD0AGEYd/121E0GBQwjjSVpjq7mDnvVlha7gTqT2hoJUdBCzoV1iEGQdC5/LF5lR4dZZK5PPXEBepOr2Xatqhg22av54AMN6mmUeQ52Cq92vx52ekEAe/8sZIjS1RV0CkkzH4fjsZZVsChl/LQ45q5EIal67qGgD8tA4SYLdARu76UATogIaOdrVdwEDy8+Hslxy7oCD583L7OkXsiuXstUwjL0jX66aP8j6ZblhBmy5uoKOUwbhZuN1SfIU2v5JgFHcXct/m7bELej/uSvC0MSp6KMIQtRfRjP8FR5Nfbi4wveb64ygjgI7WioHu6u3MP5Os1I7Pq9ZC8RslTERqK6HmYbhCRF9nD/L5i/b1RPEewCrqXB8OFG5nWQVR7HsibwkDfPGEB3YQi4smKKvIxRII8yJBXewT8gu7tItv0FOpISBEkEuTVHgGzoJvbl6YH9mj6kJheAWUk3KTK9dRIfMVKTh0CUtDNbu2MxtWWR9+g6S216fkiMBL1JPIcI6Gu5JQF3catND3eXXHRM03/6EiUZRWJe4wEebWn8pDj7/5r0z8+EsODOhLvFM8RpKB7tj//QJcl0/QNRGIPX+3xPPT502hc5H8sS5vtmwYiUdztvWc5CBep58oLSzQ93zfNRSJqx57gCtAMM3T9RPGE0CBoJHw/dky4DTMvt4QJ1zls0zcvwnE8U1jsW70mB9i86fmRELYko3GJ1NKbNz0/EjqSYV+E+N/k1XR+AWSp9BXRFCxOAAAAAElFTkSuQmCC",alt:"Files",loading:"lazy"}),b("span",{children:[d(P,{id:"generic_icons.upload",defaultMessage:"Upload Icon",children:e=>d("i",{className:"fa fa-upload",title:e})}),d(P,{id:"upload_overlay.info",defaultMessage:"Drop a file to upload it."})]}),d("img",{className:hb.overlayLogo,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANsAAAAkCAYAAAAAR0+MAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAZZSURBVHgB7Z2PWds6EMAv73sD0AlwJyid4JkJXjoBfhMAE2AmgE6QMEHpBA4TJG8CuxOQTnDVoUujKLL+xI5rFP2+74DYiv5Z55PuZDOBEwURz8SvC5ZPQjIWlTXLSsgPIYvJZLKCRCJhhxRMSCGkEvKKh1ELmQnJIZFI7MJKdtdBwWyKV0AikXhTtOsjKJlJ6c4gkbAwgUgRgz8Tv2ZCchiGW7Gee4TEwYhrRuvnvZuW6NcFRMDfECF80SowXLgjkixbd5amg+J6NkLhPsI75y+IDHFhrkBeNN/BvxByK+SLkI8TRvz9QchnIZdC7jmdK5/ewO06s9amrEs+nsHpkEFiXJBFQz9oDVeGrrNogAuZG/IroUfQf515BxFhaygkxgMrQu0xQB+xozODy5qiDCNk0CMorVYI0SicaEvOfboJzyRlGyMoY182yFJMYcTwIDPVm24QZInJqtba+W8QIajNICAConCQoAwwF5YktAvk8h3s/tCt1JOQG1HvtXoQ5bSV0jZC/gMPuI/+Bbn+IctOeX4Xec8d36P0OX9ci/TPWn4XfO67kGdxvnGUu+JyF3AEDPWi8l429U50RJ9yGLiBgWDrNBPygNIr6vu9XKvz0iO9czqMcspbWfqmRktgni2qyjm3zQRZ4Svluw+Wcme2+mOgZUO5Xq/R3s4MEoeDcjDZmMFAoHkq66XouD+oc+gI+q9jW+tpqNc3j7xydE/riZml7t7KhnL97LtxYdRLiVEjOu/G0bkZ9IwpT77gJmgQ+Figufa9znE7NCsahQ6qlrrmhjxKS7va8nptKbNGjzJN/WFpY9sNxVa3DBLhoH2KtIQewd2pCv2eKudKSz1yj7x7dQjgvrOlVuuBcpDqVqoy5GNq145HF9sHPB3LbO2kvKBDf+C+BV2qZXLdlj5lJhygfZrUa6cayvpttdBuYZ1rN9fgwm2owSRTQ3p9gGUt5VZaunPtvK5sbbs8TO3PDOnOtDTPcEB/KOlUK1qjYUbAZarpXiERDtoJdoygvBPOkHdqKMfzljIKPq9f0N8DwLNcl7K5uLCkf7aUq1vAqXa+tJ1X0l0ElFkr6apD+oPTZFqZj5YyH7W05zAw0W3X0lhDOKRgBUjXMQ20go+3hQ0a+sHu+cvNZ2bBx4bAtsaz3cmbgHxM6TfofT1EmCXTPjeWtHp9Bt9rGYOy2RTqECdDrn3+h36wMt1r557UeBHF8XjD7JuIvy/1uFMHDrlxHIMxT8HG0kdGYghqN7ANYOp8gnBeYPeO+bL5QygOWboVl7eyBErXeiC6KyK/D+pntriDhTUS3YnBsv1vOUdOhVDrRuu8r0JIkW71HRakYKR0JkVDua6jNchm7TbD5GZOMDEo28JyjhQtyElCFkkIbZH6EvIwKEpnCilarhwuhPjuXdS3ZLk8mJ3jcBGgzx5sffLH+ysGZSMLY5uyXeORX1nA1qtsOX2Bftu29AX8lSP9teP7ap9k0I5etwbeD/p1ty0b9HNDOHB2ePfKxmujr5YkpGhH2xnPilY5kvkou37ToLjVVUuZZEUz5dDcsEZUB1Nuyovr7lLa0cLOJ7W+henGxu0slENN32vqkwHbY1wqvTsT0Lw7Qccrzsb5laZ681qQyqI1aGVIkxnyMsUF3zZHc16kzLVelkedjPEp3I95lZZ2quV6xdm4HhvJlHR6MJ3GwZvScZ3ucH9sFJA4HHTvkSR2tvJ0LM+1y3xDFpDnGbqVV6e05DcPyKdGs9KORdlUCi1thQHthD9ENEFtdmY8OZK9vQgIO9zZUCrEA8j3nGSO5PchcTae2tC7UHyncpR/aTlPzqFncNOAfN6vgfcJPdPXeKSjfh1qk0HcYJhlqFFO0XycF5tpGU3DfB/lKKEDKKdCdUveFQY8gmPJy/kuFtzdztX6BAPuW7bCkmeltsWjXJ1py3fKQ9s5BNG9N5I7lC6glxIxZFFWLD+V4+ecTwZhrmOXxfEG5c0gg+3T1YtDF/esoBl/bEAG5qNzFJxKO0cB+jlMjsUNJBKnBIY5B/qApq8h1jRxYsS+638IaHpC27o+p38nlbAR5evHmWM/r7QA+UapeVoPJHyI8h9roHSS9P0oyMaJYnxlWyLhIlbLpruG1ywNbOMxP8G+p7JRfjdJuRJdidX1X8DWEq2ToiTGwC8acP0mttuO7QAAAABJRU5ErkJggg==",width:"100",alt:"Logo",loading:"lazy"})]})})});var mb=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},gb=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),vb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yb=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},bb=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,s=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(l){s=!0,i=l}finally{try{!r&&a.return&&a.return()}finally{if(s)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},xb=void 0;xb="undefined"!=typeof window?window:"undefined"!=typeof self?self:global;var wb=null,_b=null,Cb=xb.clearTimeout,Sb=xb.setTimeout,Eb=xb.cancelAnimationFrame||xb.mozCancelAnimationFrame||xb.webkitCancelAnimationFrame,Tb=xb.requestAnimationFrame||xb.mozRequestAnimationFrame||xb.webkitRequestAnimationFrame;function Ab(e){var t=void 0,n=void 0,r=void 0,s=void 0,i=void 0,o=void 0,a=void 0,l="undefined"!=typeof document&&document.attachEvent;if(!l){o=function(e){var t=e.__resizeTriggers__,n=t.firstElementChild,r=t.lastElementChild,s=n.firstElementChild;r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight,s.style.width=n.offsetWidth+1+"px",s.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight},i=function(e){return e.offsetWidth!==e.__resizeLast__.width||e.offsetHeight!==e.__resizeLast__.height},a=function(e){if(!(e.target.className&&"function"==typeof e.target.className.indexOf&&e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var t=this;o(this),this.__resizeRAF__&&wb(this.__resizeRAF__),this.__resizeRAF__=_b((function(){i(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach((function(n){n.call(t,e)})))}))}};var c=!1,u="";r="animationstart";var d="Webkit Moz O ms".split(" "),p="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),h=document.createElement("fakeelement");if(void 0!==h.style.animationName&&(c=!0),!1===c)for(var f=0;f<d.length;f++)if(void 0!==h.style[d[f]+"AnimationName"]){u="-"+d[f].toLowerCase()+"-",r=p[f],c=!0;break}t="@"+u+"keyframes "+(n="resizeanim")+" { from { opacity: 0; } to { opacity: 0; } } ",s=u+"animation: 1ms "+n+"; "}return{addResizeListener:function(i,c){if(l)i.attachEvent("onresize",c);else{if(!i.__resizeTriggers__){var u=i.ownerDocument,d=xb.getComputedStyle(i);d&&"static"===d.position&&(i.style.position="relative"),function(n){if(!n.getElementById("detectElementResize")){var r=(t||"")+".resize-triggers { "+(s||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',i=n.head||n.getElementsByTagName("head")[0],o=n.createElement("style");o.id="detectElementResize",o.type="text/css",null!=e&&o.setAttribute("nonce",e),o.styleSheet?o.styleSheet.cssText=r:o.appendChild(n.createTextNode(r)),i.appendChild(o)}}(u),i.__resizeLast__={},i.__resizeListeners__=[],(i.__resizeTriggers__=u.createElement("div")).className="resize-triggers";var p=u.createElement("div");p.className="expand-trigger",p.appendChild(u.createElement("div"));var h=u.createElement("div");h.className="contract-trigger",i.__resizeTriggers__.appendChild(p),i.__resizeTriggers__.appendChild(h),i.appendChild(i.__resizeTriggers__),o(i),i.addEventListener("scroll",a,!0),r&&(i.__resizeTriggers__.__animationListener__=function(e){e.animationName===n&&o(i)},i.__resizeTriggers__.addEventListener(r,i.__resizeTriggers__.__animationListener__))}i.__resizeListeners__.push(c)}},removeResizeListener:function(e,t){if(l)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",a,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(r,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(n){}}}}}null==Eb||null==Tb?(wb=Cb,_b=function(e){return Sb(e,20)}):(wb=function(e){var t=bb(e,2),n=t[0],r=t[1];Eb(n),Cb(r)},_b=function(e){var t=Tb((function(){Cb(n),e()})),n=Sb((function(){Eb(t),e()}),20);return[t,n]});var Pb=function(e){function t(){var e,n,r;mb(this,t);for(var s=arguments.length,i=Array(s),o=0;o<s;o++)i[o]=arguments[o];return n=r=yb(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={height:r.props.defaultHeight||0,width:r.props.defaultWidth||0},r._onResize=function(){var e=r.props,t=e.disableHeight,n=e.disableWidth,s=e.onResize;if(r._parentNode){var i=r._parentNode.offsetHeight||0,o=r._parentNode.offsetWidth||0,a=window.getComputedStyle(r._parentNode)||{},l=parseInt(a.paddingLeft,10)||0,c=parseInt(a.paddingRight,10)||0,u=parseInt(a.paddingTop,10)||0,d=parseInt(a.paddingBottom,10)||0,p=i-u-d,h=o-l-c;(!t&&r.state.height!==p||!n&&r.state.width!==h)&&(r.setState({height:i-u-d,width:o-l-c}),s({height:i,width:o}))}},r._setRef=function(e){r._autoSizer=e},yb(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,p.exports.PureComponent),gb(t,[{key:"componentDidMount",value:function(){var e=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._detectElementResize=Ab(e),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,r=e.disableHeight,s=e.disableWidth,i=e.style,o=this.state,a=o.height,l=o.width,c={overflow:"visible"},u={},d=!1;return r||(0===a&&(d=!0),c.height=0,u.height=a),s||(0===l&&(d=!0),c.width=0,u.width=l),p.exports.createElement("div",{className:n,ref:this._setRef,style:vb({},c,i)},!d&&t(u))}}]),t}();Pb.defaultProps={onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}};var Ib=function(e,t){return e===t};function Nb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ib,n=void 0,r=[],s=void 0,i=!1,o=function(e,n){return t(e,r[n])},a=function(){for(var t=arguments.length,a=Array(t),l=0;l<t;l++)a[l]=arguments[l];return i&&n===this&&a.length===r.length&&a.every(o)?s:(i=!0,n=this,r=a,s=e.apply(this,a))};return a}function Mb(){var e=window.navigator.userAgent;return-1!==e.indexOf("Safari")&&-1===e.indexOf("Chrome")}var Rb=Mb(),Ob={display:"inline",width:"0px",height:"0px",zIndex:"-1",overflow:"hidden",margin:"0px",padding:"0px"},kb={position:"absolute",flex:"0 0 auto",overflow:"hidden",visibility:"hidden",zIndex:"-1",width:"100%",height:"100%",left:"0px",top:"0px"},Lb={flex:"0 0 auto",overflow:"hidden",zIndex:"-1",visibility:"hidden",left:"-9px",bottom:"-8px",right:"-8px",top:"-9px"},Db={position:"absolute",flex:"0 0 auto",visibility:"hidden",overflow:"scroll",zIndex:"-1",width:"100%",height:"100%"},jb={position:"absolute",height:"200%",width:"200%"},Ub=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))||this)._node=null,t._resizeSensorExpand=w.createRef(),t._resizeSensorShrink=w.createRef(),t._positionScrollbarsRef=null,t._measureItemAnimFrame=null,t.positionScrollBars=function(e,n){void 0===e&&(e=t.props.size),void 0===n&&(n=t.props.width),t._positionScrollbarsRef&&window.cancelAnimationFrame(t._positionScrollbarsRef),t._positionScrollbarsRef=window.requestAnimationFrame((function(){t._resizeSensorExpand.current.scrollTop=e+27,t._resizeSensorShrink.current.scrollTop=2*e+17}))},t.scrollingDiv=function(e){e.target.offsetHeight!==t.props.size&&t._measureItem(e.target.offsetWidth!==t.props.width)},t.renderItems=function(){var e=t.props.item,n={position:"absolute",left:"0",top:"0",height:t.props.size+27+"px",width:"100%"};return b("div",{style:{position:"relative"},children:[e,d("div",{style:Ob,children:d("div",{dir:"ltr",style:kb,children:b("div",{style:Lb,children:[d("div",{style:Db,ref:t._resizeSensorExpand,onScroll:t.scrollingDiv,children:d("div",{style:n})}),d("div",{style:Db,ref:t._resizeSensorShrink,onScroll:t.scrollingDiv,children:d("div",{style:jb})})]})})})]})},t._measureItem=function(e){var n=t.props,r=n.handleNewMeasurements,s=n.size,i=n.itemId,o=t._node;if(o&&o.ownerDocument&&o.ownerDocument.defaultView&&o instanceof o.ownerDocument.defaultView.HTMLElement){var a=Math.ceil(o.offsetHeight);s!==a&&r(i,a,e)}},t}O(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;this._node=h.exports.findDOMNode(this),Rb&&this.props.size?this._measureItemAnimFrame=window.requestAnimationFrame((function(){e._measureItem(!1)})):this._measureItem(!1),this.props.size&&this.positionScrollBars()},n.componentDidUpdate=function(e){(0===e.size&&0!==this.props.size||e.size!==this.props.size)&&this.positionScrollBars()},n.componentWillUnmount=function(){this._positionScrollbarsRef&&window.cancelAnimationFrame(this._positionScrollbarsRef),this._measureItemAnimFrame&&window.cancelAnimationFrame(this._measureItemAnimFrame);var e=this.props,t=e.onUnmount,n=e.itemId,r=e.index;t&&t(n,r)},n.render=function(){return this.renderItems()},t}(p.exports.Component),Hb=function(e,t,n){var r=n.itemOffsetMap,s=n.itemSizeMap,i=e.itemData;return s[i[t]]?{offset:r[i[t]]||0,size:s[i[t]]||0}:{offset:0,size:0}},Fb=function(e,t,n){return Hb(e,t,n).offset},Bb=function(e,t,n){var r=n.totalMeasuredSize,s=e.itemData;return t<=r?function(e,t,n,r,s){for(var i=r;r<=n;)s-Hb(e,r,t).offset<=0&&(i=r),r++;return i}(e,n,s.length,0,t):0},qb=function(e,t,n){return Hb(e,t,n).size},zb=function(e){function t(t){var n;return(n=e.call(this,t)||this)._listMetaData={itemOffsetMap:{},itemSizeMap:{},totalMeasuredSize:0,atBottom:!0},n._itemStyleCache={},n._outerRef=void 0,n._scrollCorrectionInProgress=!1,n._scrollByCorrection=null,n._keepScrollPosition=!1,n._keepScrollToBottom=!1,n._mountingCorrections=0,n._correctedInstances=0,n.state={scrollDirection:"backward",scrollOffset:"number"==typeof n.props.initialScrollOffset?n.props.initialScrollOffset:0,scrollUpdateWasRequested:!1,scrollDelta:0,scrollHeight:0,localOlderPostsToRender:[]},n.scrollBy=function(e,t){return function(){var r=n._outerRef;"function"==typeof r.scrollBy&&t?r.scrollBy(0,t):e&&(r.scrollTop=e),n._scrollCorrectionInProgress=!1}},n._callOnItemsRendered=Nb((function(e,t,r,s){return n.props.onItemsRendered({overscanStartIndex:e,overscanStopIndex:t,visibleStartIndex:r,visibleStopIndex:s})})),n._callOnScroll=Nb((function(e,t,r,s,i){return n.props.onScroll({scrollDirection:e,scrollOffset:t,scrollUpdateWasRequested:r,scrollHeight:s,clientHeight:i})})),n._commitHook=function(){if(!n.state.scrolledToInitIndex&&Object.keys(n._listMetaData.itemOffsetMap).length){var e=n.props.initScrollToIndex(),t=e.index,r=e.position,s=e.offset;n.scrollToItem(t,r,s),n.setState({scrolledToInitIndex:!0}),0===t?n._keepScrollToBottom=!0:n._keepScrollPosition=!0}},n._dataChange=function(){n._listMetaData.totalMeasuredSize<n.props.height&&n.props.canLoadMorePosts()},n._heightChange=function(e,t){t+e>=n._listMetaData.totalMeasuredSize-10&&n.scrollToItem(0,"end")},n._widthChange=function(e,t){t+e>=n._listMetaData.totalMeasuredSize-10&&n.scrollToItem(0,"end")},n._getItemStyle=function(e){var t,r=n.props.itemData,s=n._itemStyleCache;return s.hasOwnProperty(r[e])?t=s[r[e]]:s[r[e]]=t={left:0,top:Fb(n.props,e,n._listMetaData),height:qb(n.props,e,n._listMetaData),width:"100%"},t},n._correctScroll=function(){var e=n.state.scrollOffset,t=n._outerRef;t&&(t.scrollTop=e,n._scrollCorrectionInProgress=!1,n._correctedInstances=0,n._mountingCorrections=0)},n._generateOffsetMeasurements=function(){var e=n._listMetaData,t=e.itemOffsetMap,r=e.itemSizeMap,s=n.props.itemData;n._listMetaData.totalMeasuredSize=0;for(var i=s.length-1;i>=0;i--){var o=t[s[i+1]]||0,a=r[s[i+1]]||0;t[s[i]]=o+a,n._listMetaData.totalMeasuredSize+=r[s[i]]||0,delete n._itemStyleCache[s[i]]}},n._handleNewMeasurements=function(e,t,r){var s=n._listMetaData.itemSizeMap,i=n.props.itemData.findIndex((function(t){return t===e})),o=s[e]||0;if(o!==t)if(s[e]=t,n.state.scrolledToInitIndex){var a=n._outerRef;if((n.props.height+a.scrollTop>=n._listMetaData.totalMeasuredSize-10||n._keepScrollToBottom)&&n.props.correctScrollToBottom)return n._generateOffsetMeasurements(),n.scrollToItem(0,"end"),void n.forceUpdate();if(r||n._keepScrollPosition){var l=t-o,c=n._getRangeToRender(n.state.scrollOffset)[2];if(n._generateOffsetMeasurements(),i<c+1)return;return n._scrollCorrectionInProgress=!0,void n.setState((function(e){var t;return t=0===n._mountingCorrections?l:e.scrollDelta+l,n._mountingCorrections++,{scrollOffset:e.scrollOffset+l,scrollDelta:t}}),(function(){n._correctedInstances++,n._mountingCorrections===n._correctedInstances&&n._correctScroll()}))}n._generateOffsetMeasurements()}else n._generateOffsetMeasurements()},n._onItemRowUnmount=function(e,t){var r=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n).props;if(r.itemData[t]!==e&&!r.itemData.includes(e)){delete n._listMetaData.itemSizeMap[e],delete n._listMetaData.itemOffsetMap[e];var s=n._outerRef,i=s.offsetHeight+s.scrollTop>=n._listMetaData.totalMeasuredSize-10;n._generateOffsetMeasurements(),i&&n.scrollToItem(0,"end"),n.forceUpdate()}},n._renderItems=function(){var e=n.props,t=e.children,r=e.direction,s=e.itemData,i=e.loaderId,o=n.innerRefWidth,a=n._getRangeToRender(),l=a[0],c=a[1],u=s.length,d=[];if(u>0)for(var h=u-1;h>=0;h--){var f=Hb(n.props,h,n._listMetaData).size,m=n.state.localOlderPostsToRender,g=m[0],v=m[1],y=h>=g&&h<v+1&&g===c+1,b=s[h]===i,x=s[h],w=n._getItemStyle(h);if(h>=l&&h<c+1||y||b){var _=p.exports.createElement(t,{data:s,itemId:x});d.push(p.exports.createElement(Ub,{direction:r,handleNewMeasurements:n._handleNewMeasurements,index:h,item:_,key:x,size:f,itemId:x,width:o,onUnmount:n._onItemRowUnmount,itemCount:u}))}else d.push(p.exports.createElement("div",{key:x,style:w}))}return d},n._onScrollVertical=function(e){if(n.state.scrolledToInitIndex){var t=e.currentTarget,r=t.scrollTop,s=t.scrollHeight;n._scrollCorrectionInProgress?n.state.scrollUpdateWasRequested&&n.setState((function(){return{scrollUpdateWasRequested:!1}})):(s!==n.state.scrollHeight&&n.setState({scrollHeight:s}),n.setState((function(e){return e.scrollOffset===r?null:{scrollDirection:e.scrollOffset<r?"forward":"backward",scrollOffset:r,scrollUpdateWasRequested:!1,scrollHeight:s,scrollTop:r,scrollDelta:0}})))}},n._outerRefSetter=function(e){var t=n.props.outerRef;n.innerRefWidth=n.props.innerRef.current.clientWidth,n._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},n}O(t,e),t.getDerivedStateFromProps=function(e,t){return Vb(e),null};var n=t.prototype;return n.scrollTo=function(e,t,n){var r=this;void 0===n&&(n=!1),this._scrollCorrectionInProgress=!0,this.setState((function(n){return{scrollDirection:n.scrollOffset>=e?"backward":"forward",scrollOffset:e,scrollUpdateWasRequested:!0,scrollByValue:t}}),(function(){n?r._scrollByCorrection=window.requestAnimationFrame(r.scrollBy(r.state.scrollOffset,r.state.scrollByValue)):r.scrollBy(r.state.scrollOffset,r.state.scrollByValue)()})),this.forceUpdate()},n.scrollToItem=function(e,t,n){void 0===t&&(t="auto"),void 0===n&&(n=0);var r=this.state.scrollOffset,s=this._outerRef;if(0!==e||"end"!==t){var i=function(e,t,n,r,s){var i=e.height,o=Hb(e,t,s),a=s.totalMeasuredSize,l=Math.max(0,o.offset+o.size-i),c=Math.max(0,o.offset);switch(n){case"start":return c;case"end":return l;case"center":return Math.round(c-i/2+o.size/2);case"auto":default:return r>=c&&r<=l?a-(r+i):r-c<l-r?c:l}}(this.props,e,t,r,this._listMetaData);if(!i)!qb(this.props,e,this._listMetaData)&&this.props.scrollToFailed&&(this.state.scrolledToInitIndex?this.props.scrollToFailed(e):console.warn("Failed to do initial scroll correction",this.props.initRangeToRender,e));this.scrollTo(i+n)}else this.scrollTo(s.scrollHeight-this.props.height)},n.componentDidMount=function(){var e=this.props.initialScrollOffset;"number"==typeof e&&null!==this._outerRef&&(this._outerRef.scrollTop=e);this._commitHook()},n.getSnapshotBeforeUpdate=function(e,t){if(t.localOlderPostsToRender[0]!==this.state.localOlderPostsToRender[0]||t.localOlderPostsToRender[1]!==this.state.localOlderPostsToRender[1]){var n=this._outerRef;return{previousScrollTop:n.scrollTop,previousScrollHeight:n.scrollHeight}}return null},n.componentDidUpdate=function(e,t,n){if(this.state.scrolledToInitIndex){var r=this.state,s=r.scrollDirection,i=r.scrollOffset,o=r.scrollUpdateWasRequested,a=r.scrollHeight,l=t.scrollDirection,c=t.scrollOffset,u=t.scrollUpdateWasRequested,d=t.scrollHeight;s===l&&i===c&&o===u&&a===d||this._callPropsCallbacks(),t.scrolledToInitIndex||(this._keepScrollPosition=!1,this._keepScrollToBottom=!1)}if(this._commitHook(),e.itemData!==this.props.itemData&&this._dataChange(),e.height!==this.props.height&&this._heightChange(e.height,t.scrollOffset),t.scrolledToInitIndex!==this.state.scrolledToInitIndex&&this._dataChange(),e.width!==this.props.width&&(this.innerRefWidth=this.props.innerRef.current.clientWidth,this._widthChange(e.height,t.scrollOffset)),t.localOlderPostsToRender[0]!==this.state.localOlderPostsToRender[0]||t.localOlderPostsToRender[1]!==this.state.localOlderPostsToRender[1]){var p=this._outerRef.scrollHeight,h=n.previousScrollTop+(p-n.previousScrollHeight);this.scrollTo(h,h-n.previousScrollTop,!0)}},n.componentWillUnmount=function(){this._scrollByCorrection&&window.cancelAnimationFrame(this._scrollByCorrection)},n.render=function(){var e=this.props,t=e.className,n=e.innerRef,r=e.innerTagName,s=e.outerTagName,i=e.style,o=e.innerListStyle,a=this._onScrollVertical,l=this._renderItems();return p.exports.createElement(s,{className:t,onScroll:a,ref:this._outerRefSetter,style:k({WebkitOverflowScrolling:"touch",overflowY:"auto",overflowAnchor:"none",willChange:"transform",width:"100%"},i)},p.exports.createElement(r,{children:l,ref:n,style:o}))},n._callPropsCallbacks=function(){var e=this.props,t=e.itemData,n=e.height,r=this.state,s=r.scrollDirection,i=r.scrollOffset,o=r.scrollUpdateWasRequested,a=r.scrollHeight,l=t.length;if("function"==typeof this.props.onItemsRendered&&l>0){var c=this._getRangeToRender(),u=c[0],d=c[1],p=c[2],h=c[3];if(this._callOnItemsRendered(u,d,p,h),"backward"===s&&i<1e3&&d!==l-1)!qb(this.props,d+1,this._listMetaData).size&&this.state.scrolledToInitIndex&&this.setState((function(e){return e.localOlderPostsToRender[0]!==d+1?{localOlderPostsToRender:[d+1,d+50]}:null}))}"function"==typeof this.props.onScroll&&this._callOnScroll(s,i,o,a,n)},n._getRangeToRender=function(e,t){var n=this.props,r=n.itemData,s=n.overscanCountForward,i=n.overscanCountBackward,o=this.state,a=o.scrollDirection,l=o.scrollOffset,c=r.length;if(0===c)return[0,0,0,0];for(var u=e>=0?e:l,d=Bb(this.props,u,this._listMetaData),p=function(e,t,n,r){for(var s=e.itemData,i=t,o=n+e.height,a=Hb(e,i,r),l=a.offset+(a.size||0);i>0&&l<=o;){var c=Hb(e,i,r);l=c.offset+c.size,i--}return i>=s.length?0:i}(this.props,d,u,this._listMetaData),h="backward"===a?i:Math.max(1,s),f="forward"===a?i:Math.max(1,s),m=Math.max(0,p-h),g=Math.max(0,Math.min(c-1,d+f));!qb(this.props,g,this._listMetaData)&&g>0&&this._listMetaData.totalMeasuredSize>this.props.height;)g--;return!this.state.scrolledToInitIndex&&this.props.initRangeToRender.length?this.props.initRangeToRender:[m,g,d,p]},t}(p.exports.PureComponent);zb.defaultProps={innerTagName:"div",itemData:void 0,outerTagName:"div",overscanCountForward:30,overscanCountBackward:10};var Vb=function(e){e.children,e.itemSize};class Gb{constructor(e){u(this,"action"),u(this,"timer"),this.action=e,this.timer=-1,this.fire=this.fire.bind(this)}fire(){this.action(),this.timer=-1}fireAfter(e){this.timer>=0&&window.clearTimeout(this.timer),this.timer=window.setTimeout(this.fire,e)}cancel(){window.clearTimeout(this.timer)}}var Wb=L;var Kb=function(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:Wb(e,t,n)},Yb=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var $b=function(e){return Yb.test(e)};var Xb=function(e){return e.split("")},Qb="[\\ud800-\\udfff]",Jb="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Zb="\\ud83c[\\udffb-\\udfff]",ex="[^\\ud800-\\udfff]",tx="(?:\\ud83c[\\udde6-\\uddff]){2}",nx="[\\ud800-\\udbff][\\udc00-\\udfff]",rx="(?:"+Jb+"|"+Zb+")"+"?",sx="[\\ufe0e\\ufe0f]?"+rx+("(?:\\u200d(?:"+[ex,tx,nx].join("|")+")[\\ufe0e\\ufe0f]?"+rx+")*"),ix="(?:"+[ex+Jb+"?",Jb,tx,nx,Qb].join("|")+")",ox=RegExp(Zb+"(?="+Zb+")|"+ix+sx,"g");var ax=Xb,lx=$b,cx=function(e){return e.match(ox)||[]};var ux=Kb,dx=$b,px=function(e){return lx(e)?cx(e):ax(e)},hx=D;var fx=function(e){return function(t){t=hx(t);var n=dx(t)?px(t):void 0,r=n?n[0]:t.charAt(0),s=n?ux(n,1).join(""):t.slice(1);return r[e]()+s}}("toUpperCase"),mx=D,gx=fx;var vx=function(e){return gx(mx(e).toLowerCase())};const yx=new Map([["year",!0],["quarter",!0],["month",!0],["week",!0],["day",!0],["hour",!1],["minute",!1],["second",!0]]);function bx(e,t,n=(new Intl.DateTimeFormat).resolvedOptions().timeZone,r,s=1,i=yx.get(r)||!1){const o=xx(e,t,n,r,i);return s>=0?o<=s&&o>=0:o>=s&&o<=0}function xx(e,t,n=(new Intl.DateTimeFormat).resolvedOptions().timeZone,r,s=yx.get(r)||!1){const i=j.utc(e.getTime()),o=j.utc(t.getTime());return n&&(i.tz(n),o.tz(n)),s?i.startOf(r).diff(o.startOf(r),r):i.diff(t,r,!0)}function wx(e,t=new Date){return e.getDate()===t.getDate()&&function(e,t=new Date){return e.getMonth()===t.getMonth()&&_x(e,t)}(e,t)}function _x(e,t=new Date){return e.getFullYear()===t.getFullYear()}function Cx(e,t,n){return"function"==typeof e?e(t,n):e}var Sx=p.exports.memo((e=>{var t=e,{value:n,children:r,"aria-label":s=n.toLocaleString()}=t,i=c(t,["value","children","aria-label"]);return d("time",l(a({},i),{"aria-label":s,dateTime:n.toISOString(),children:r}))}));const Ex={within:["day",-1],display:["day"]},Tx={equals:["day",0],display:d(P,{id:"date_separator.today",defaultMessage:"Today"})},Ax={equals:["day",-1],display:d(P,{id:"date_separator.yesterday",defaultMessage:"Yesterday"})},Px={now:{within:["second",-45],display:["second",0]},second:{within:["second",-59],display:["second"]},minute:{within:["minute",-59],display:["minute"]},hour:{within:["hour",-23.75],display:["hour"]},"today-yesterday":Ex,Today:Tx,Yesterday:Ax,day:{within:["day",-6],display:["day"]},week:{within:["week",-3],display:["week"]},month:{within:["month",-11],display:["month"]},quarter:{within:["quarter",-3],display:["quarter"]},year:{within:["year",-1e3],display:["year"]}},Ix=Boolean(new Intl.DateTimeFormat("en-US",{hour:"numeric"}).resolvedOptions().hourCycle);function Nx(e,t){return null!=t?t:!("h23"===e||"h24"===e)}const Mx=new Map([["hour",300],["minute",15],["second",1]]);function Rx(e){return"string"==typeof e||"number"==typeof e?Px[e]:e}const Ox=class extends p.exports.PureComponent{constructor(e){super(e),u(this,"nextUpdate",null),this.state={now:new Date,prevValue:e.value}}formatParts(e,{relative:t,date:n,time:r}){try{let i,o,l;if(null!=(null==(s=t)?void 0:s.message))i=t.message;else if(function(e){return Boolean(null==e?void 0:e.unit)}(t)&&(i=this.formatRelative(e,t),"day"!==t.unit||!r))return{relative:i};if(null==i&&n&&(o=this.formatDateTime(e,n)),r){const{hourCycle:t,hour12:n=(Ix?void 0:Nx(t))}=this.props;l=this.formatDateTime(e,a({hourCycle:t,hour12:n},r))}return{relative:i,date:o,time:l}}catch{const{timeZone:t,hourCycle:s,hour12:i}=this.props,o=j.utc(e.getTime());return t&&o.tz(t),{date:n&&Ox.momentDate(o,a({},n)),time:r&&Ox.momentTime(o,a({hourCycle:s,hour12:i},r))}}var s}formatRelative(e,t){var n=t,{unit:r,relNearest:s,truncateEndpoints:i}=n,o=c(n,["unit","relNearest","truncateEndpoints"]);let a;0===s?a=0:(a=xx(e,this.state.now,this.props.timeZone,r,i),null!=s&&(a=Math.round(a/s)*s)),0===a&&(a=e<=this.state.now?-0:0);const l=this.props.intl.formatRelativeTime(a,r,o);return o.capitalize?vx(l):l}formatDateTime(e,t){const{timeZone:n,intl:{locale:r}}=this.props;return new Intl.DateTimeFormat(r,a({timeZone:n},t)).format(e).replace(/-/g,"/")}static momentTime(e,{hour:t,minute:n,hourCycle:r,hour12:s}){if(t&&n)return e.format(Nx(r,s)?"h:mm A":"HH:mm")}static momentDate(e,{weekday:t,day:n,month:r,year:s}){return t&&n&&r&&s?e.format("dddd, MMMM DD, YYYY"):n&&r&&s?e.format("MMMM DD, YYYY"):n&&r?e.format("MMMM DD"):t?e.format("dddd"):void 0}autoRange(e,t=this.props.units||this.props.ranges){var n;return null!=(n=null==t?void 0:t.map(Rx).find((({equals:t,within:n})=>null!=t?function(e,t,n=(new Intl.DateTimeFormat).resolvedOptions().timeZone,r,s=1,i=yx.get(r)||!1){return s===xx(e,t,n,r,i)}(e,this.state.now,this.props.timeZone,...t):null!=n&&bx(e,this.state.now,this.props.timeZone,...n))))?n:{display:[this.props.unit],updateIntervalInSeconds:this.props.updateIntervalInSeconds}}getFormats(e){const{numeric:t,style:n,useRelative:r=(()=>{const{display:r,updateIntervalInSeconds:s=this.props.updateIntervalInSeconds,capitalize:i=this.props.capitalize}=this.autoRange(e);if(r){if(U.exports.isValidElementType(r)||!Array.isArray(r))return{message:r,updateIntervalInSeconds:s};const[e,o=this.props.relNearest,a=this.props.truncateEndpoints]=r;if(e)return{unit:e,relNearest:o,truncateEndpoints:a,numeric:t,style:n,updateIntervalInSeconds:null!=s?s:Mx.get(e),capitalize:i}}return!1}),year:s,month:i,day:o,weekday:a,hour:l,minute:c,timeZone:u,useDate:d=(()=>bx(e,this.state.now,u,"day",-6)?{weekday:a}:_x(e)?{day:o,month:i}:{year:s,month:i,day:o}),useTime:p={hour:l,minute:c}}=this.props,h=Cx(r,{value:e},this.props);return{relative:h,date:!h&&Cx(d,{value:e},this.props),time:Cx(p,{value:e},this.props)}}componentWillUnmount(){this.nextUpdate&&(clearTimeout(this.nextUpdate),this.nextUpdate=null)}static getDerivedStateFromProps(e,t){return e.value!==t.prevValue?{now:new Date,prevValue:e.value}:null}maybeUpdate(e){return e&&e.updateIntervalInSeconds?setTimeout((()=>this.setState({now:new Date})),1e3*e.updateIntervalInSeconds):null}static format({relative:e,date:t,time:n}){return(e||t)&&n?d(P,{id:"timestamp.datetime",defaultMessage:"{relativeOrDate} at {time}",values:{relativeOrDate:e||t,time:n}}):e||t||n}static formatLabel(e,t){const n=j(e);return t&&n.tz(t),n.toString()+(t?` (${n.tz()})`:"")}render(){const{value:e=this.state.now,children:t,useSemanticOutput:n=!0,timeZone:r,label:s,className:i}=this.props,o=e instanceof Date?e:new Date(e),l=this.getFormats(o),c=this.formatParts(o,l);let u=Ox.format(c);return n&&(u=d(Sx,{value:o,"aria-label":null!=s?s:Ox.formatLabel(o,r),className:i,children:u})),this.nextUpdate=this.maybeUpdate(l.relative),t?Cx(t,a({value:o,timeZone:r,formatted:u},c),l):u}};let kx=Ox;u(kx,"defaultProps",{numeric:"auto",style:"long",relNearest:1,year:"numeric",month:"2-digit",day:"2-digit",weekday:"long",hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h12",timeZoneName:"short"});var Lx=f(kx);var Dx=g((function(e,{userTimezone:t}){var n;const r=pe(e);let s,i,o;Mn(e)&&(s=null!=(n=Rn(null!=t?t:On(e,r)))?n:void 0);const a=ke(e,kn.CATEGORY_DISPLAY_SETTINGS,kn.USE_MILITARY_TIME,!1);return Ix?i=a?"h23":"h12":o=!a,{timeZone:s,hourCycle:i,hour12:o}}))(Lx);var jx="u3-cxx-0320c9fa",Ux="u3-cxx-f63140b7",Hx="u3-cxx-11cd2054";const Fx=[Tx,Ax];class Bx extends w.PureComponent{render(){const{isMobile:e,createAt:t,isScrolling:n,isRhsPost:r,toastPresent:s}=this.props;if(!e||0===t)return null;const i=x("post-list__timestamp",jx,{[Ux]:n,rhs:r,toastAdjustment:s});return d("div",{className:i,"data-testid":"floatingTimestamp",children:d("span",{className:Hx,children:d(Dx,{value:t,useTime:!1,ranges:Fx})})})}}var qx=g((function(e,t){let n=t.postId;if(Ln(n)){const e=Dn(n);n=e[e.length-1]}const r=Pe(e,n),s=fo(e);return{createAt:r?r.create_at:0,toastPresent:s}}))(Bx);class zx extends w.PureComponent{constructor(){super(...arguments),u(this,"getProfilePictureURL",(()=>{const{post:e,user:t}=this.props;return t&&t.id===e.user_id?at(t.id,t.last_picture_update):e.user_id?at(e.user_id):""})),u(this,"getStatus",((e,t,n)=>e||t||n&&n.is_bot?"":this.props.status)),u(this,"getPostIconURL",((e,t,n)=>{const{enablePostIconOverride:r,hasImageProxy:s,post:i}=this.props,o=i.props;let a="",l="";return o&&(a=o.override_icon_url,l=o.use_user_icon),this.props.compactDisplay?"":!t&&n&&!l&&r?a&&""!==a?ve(a,s):G.DEFAULT_WEBHOOK_LOGO:e}))}render(){const{compactDisplay:e,isBusy:t,isRHS:n,post:r,user:s,isBot:i}=this.props,o=Un(r),a=Hn(r);if(o&&!e&&!a&&!i)return d(mo,{className:"u3-w-6 u3-h-6"});const l=Fn(r),c=!l&&!a,u=this.getProfilePictureURL(),p=this.getPostIconURL(u,l,a),h=r.props?r.props.override_icon_emoji:"",f=r.props?r.props.override_username:"",m="string"==typeof h&&""!==h,g=this.getStatus(l,a,s);return d(Ha,{hasMention:c,isBusy:t,isRHS:n,size:"md",src:p,profileSrc:u,isEmoji:m,status:g,userId:null==s?void 0:s.id,channelId:r.channel_id,username:null==s?void 0:s.username,overwriteIcon:this.props.overwriteIcon,overwriteName:f})}}u(zx,"defaultProps",{status:jn.OFFLINE});var Vx=g((function(e,t){const n=W(e),r=$(e,t.userId),s="true"===n.EnablePostIconOverride&&t.post&&t.post.props&&t.post.props.override_icon_url;let i;return s&&(i=J.getAbsoluteUrl(s)),{enablePostIconOverride:"true"===n.EnablePostIconOverride,overwriteIcon:i,hasImageProxy:"true"===n.HasImageProxy,status:pt(e,t.userId),isBot:Boolean(r&&r.is_bot),user:r}}))(zx);const Gx=w.createContext({handlePopupOpened:null});var Wx=Zi.jsx;var Kx=function(e){return Wx("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e)),{children:Wx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}))};const Yx=[Tx,Ax];class $x extends w.PureComponent{constructor(){super(...arguments),u(this,"handleClick",(()=>{_e()&&go()}))}render(){const{eventTime:e,isPermalink:t,location:n,postId:r,teamUrl:s,styles:i,timestampProps:o={}}=this.props,l=d(Dx,a({value:e,className:"post__time",useDate:!1},o)),c=ft()||!t?b("div",{role:"presentation",className:x("post_permalink_mobile_view",i.permarlink),children:[d(Kx,{className:i.timeIcon}),l]}):b(N,{id:`${n}_time_${r}`,to:`${s}/pl/${r}`,className:x("post__permalink",i.permarlink),onClick:this.handleClick,children:[d(Kx,{className:i.timeIcon}),l]});return d(tc,{placement:"top",content:d(Dx,{value:e,ranges:Yx}),children:c})}}u($x,"defaultProps",{eventTime:0,location:Bn.CENTER});var Xx=g((function(e){return{teamUrl:Be(e)}}))($x),Qx=Zi.jsx;var Jx=function(e){return Qx("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e)),{children:Qx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})}))},Zx=Zi.jsx;var ew,tw,nw,rw,sw=function(e){return Zx("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e)),{children:Zx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}))};(tw=ew||(ew={}))[tw.Flagged=0]="Flagged",tw[tw.Pinned=1]="Pinned",tw[tw.PinnedAndFlagged=2]="PinnedAndFlagged",tw[tw.Neither=3]="Neither",(rw=nw||(nw={})).Flagged="flagged",rw.Pinned="pinned",rw.PinnedAndFlagged="pinnedAndFlagged";class iw extends w.PureComponent{constructor(){super(...arguments),u(this,"messageInfos",{flagged:{id:ht("post_pre_header.flagged"),defaultMessage:"Saved"},pinned:{id:ht("post_pre_header.pinned"),defaultMessage:"Pinned"}}),u(this,"handleLinkClick",((e,t)=>{e===nw.Pinned&&t?this.props.actions.showPinnedPosts(t):this.props.actions.showFlaggedPosts()}))}getPostStatus(e,t){return e?t?2:0:t?1:3}getMessageInfo(e,t,n){if(t&&n)return!1;if(2===e){if(!n&&!t)return nw.PinnedAndFlagged;if(n)return nw.Flagged;if(t)return nw.Pinned}return 0!==e||t?1===e&&!n&&nw.Pinned:nw.Flagged}render(){const{isFlagged:e,isPinned:t,skipPinned:n,skipFlagged:r,channelId:s,styles:i}=this.props,o=this.getMessageInfo(this.getPostStatus(e,t),r,n);if(!e&&!t||!o)return null;const a=[];return t&&!n&&a.push(b("div",{className:i.postMoreX,children:[d(sw,{className:i.xIcon}),d("a",{className:i.postMoreLink,onClick:()=>this.handleLinkClick(nw.Pinned,s),children:d(P,{id:this.messageInfos[nw.Pinned].id,defaultMessage:this.messageInfos[nw.Pinned].defaultMessage})})]},"post-more-pin")),e&&!r&&a.push(b("div",{className:i.postMoreX,children:[d(Jx,{className:i.xIcon}),d("a",{onClick:()=>this.handleLinkClick(nw.Flagged),children:d(P,{id:this.messageInfos[nw.Flagged].id,defaultMessage:this.messageInfos[nw.Flagged].defaultMessage})})]},"post-more-flag")),a.length?a:null}}var ow=f(iw);var aw=g(null,(e=>({actions:y({showFlaggedPosts:qn,showPinnedPosts:zn},e)})))(ow),lw=Zi.jsx;var cw=function(e){return lw("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e)),{children:lw("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}))};class uw extends w.PureComponent{render(){const{styles:e}=this.props;let t=null,n="post-menu__item post-menu__item--wide";return this.props.commentCount>0?(n+=" post-menu__item--show",t=d("span",{className:"post-menu__comment-count",children:this.props.commentCount})):""!==this.props.searchStyle&&(n=n+" "+this.props.searchStyle),b("button",{id:`${this.props.location}_commentIcon_${this.props.postId}`,"aria-label":ye("post_info.comment_icon.tooltip.reply","Reply").toLowerCase(),className:x(e.postComment,n,this.props.extraClass),onClick:this.props.handleCommentClick,children:[d(cw,{className:e.commentIcon}),t]})}}function dw(e){return e.entities.files.files}function pw(e,t){return t&&e.entities.files.fileIdsByPostId[t]||[]}function hw(){return C(dw,pw,Vn,((e,t,n)=>Sg(t.map((t=>e[t])).filter((e=>Boolean(e))),n)))}u(uw,"defaultProps",{location:"CENTER",searchStyle:"",commentCount:0,extraClass:""}),C((function(e){return e.entities.files.filesFromSearch}),(e=>e.entities.search.fileResults),((e,t)=>t?t.map((t=>e[t])):[]));class fw extends w.PureComponent{render(){if(!this.props.fileInfos||0===this.props.fileInfos.length)return null;let e=null;return this.props.fileInfos.length>1&&(e=d(P,{id:"post_body.plusMore",defaultMessage:" plus {count, number} other {count, plural, one {file} other {files}}",values:{count:this.props.fileInfos.length-1}})),b("span",{children:[this.props.fileInfos[0].name,e]})}}u(fw,"propTypes",{parentPostId:E.string.isRequired,fileInfos:E.arrayOf(E.object)});var mw=g((function(){const e=hw();return function(t,n){let r;return n.parentPostId&&(r=e(t,n.parentPostId)),{fileInfos:r}}}))(fw);class gw extends p.exports.PureComponent{constructor(){super(...arguments),u(this,"makeUsername",(()=>{const e=this.props.post.props;let t=this.props.displayName;return this.props.enablePostUsernameOverride&&e&&"true"===e.from_webhook&&e.override_username&&(t=e.override_username),t})),u(this,"makeCommentedOnMessage",(()=>{const{post:e}=this.props;let t="";if(e.message)t=Gn(e.message);else if(e.file_ids&&e.file_ids.length>0)t=d(mw,{parentPostId:e.id});else if(e.props&&e.props.attachments&&e.props.attachments.length>0){const n=e.props.attachments[0],r=n.pretext||n.title||n.text||n.fallback||"";t=Gn(r)}return t}))}render(){const e=this.makeUsername(),t=this.makeCommentedOnMessage(),n=this.props.parentPostUser,r=n&&n.id||"";return d("div",{"data-testid":"post-link",className:"post__link",children:b("span",{children:[d(P,{id:"post_body.commentedOn",defaultMessage:"Commented on {name}'s message: ",values:{name:d("a",{className:"theme user_name",children:d(Nv,{user:n,userId:r,displayName:e,hasMention:!0,disablePopover:!1})})}}),d("a",{className:"theme",onClick:this.props.onCommentClick,children:"string"==typeof t?Wn(t):t})]})})}}var vw=g((function(e,t){let n="";if(t.post){const r=$(e,t.post.user_id);n=Kn(e,r)}return{displayName:n,enablePostUsernameOverride:"true"===W(e).EnablePostUsernameOverride}}))(gw),yw=Zi.jsx;var bw=function(e){return yw("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},e)),{children:yw("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}))},xw=Zi.jsx;var ww=function(e){return xw("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e)),{children:xw("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})}))};class _w extends w.PureComponent{render(){const{canDownload:e,children:t,compactDisplay:n,fileInfo:r,handleImageClick:s,iconClass:i}=this.props,o=r.name,a=Ig(o);let l;return l=n?b("a",{id:"file-attachment-link",href:"#",onClick:s,className:"post-image__name",rel:"noopener noreferrer",children:[d(ww,{className:"icon"}),a]}):e?d("div",{className:i||"post-image__name",children:d("a",{href:wg(r.id),"aria-label":ye("view_image_popover.download","Download").toLowerCase(),download:o,target:"_blank",rel:"noopener noreferrer",children:t||a})}):d("span",{className:"post-image__name u3-block u3-whitespace-nowrap u3-overflow-ellipsis u3-text-sm u3-mr-3 u3-overflow-hidden",children:a}),l}}class Cw extends w.PureComponent{render(){var e;const{fileInfo:t}=this.props,n=Ae(t.extension);let r;if(n===Te.IMAGE){let n="post-image";t.width<G.THUMBNAIL_WIDTH&&t.height<G.THUMBNAIL_HEIGHT?n+=" small":n+=" normal";let r=_g(t.id,null==(e=t.preview_path)?void 0:e.replace("_preview.jpg","_thumb.jpg"));return Yn(t.extension)&&!t.has_preview_image&&(r=xg(t.id)),d("div",{className:n,style:{backgroundImage:`url(${r})`,backgroundSize:"cover"}})}return r=t.extension===Te.SVG&&this.props.enableSVGs?d("img",{alt:"file thumbnail image",className:"post-image normal",src:xg(t.id),loading:"lazy"}):d("div",{className:"file-icon "+$n(n)}),r}}var Sw=g((function(e){return{enableSVGs:"true"===W(e).EnableSVGs}}))(Cw);class Ew extends w.PureComponent{constructor(e){super(e),u(this,"mounted",!1),u(this,"loadFiles",(()=>{const e=this.props.fileInfo;Ae(e.extension)===Te.IMAGE?this.setState({loaded:!0}):e.extension===Te.SVG&&this.props.enableSVGs&&Xn(xg(e.id),this.handleImageLoaded)})),u(this,"handleImageLoaded",(()=>{this.mounted&&this.setState({loaded:!0})})),u(this,"onAttachmentClick",(e=>{e.preventDefault(),"blur"in e.target&&e.target.blur(),this.props.handleImageClick&&this.props.handleImageClick(this.props.index)})),this.state={loaded:Ae(e.fileInfo.extension)!==Te.IMAGE,fileInfo:e.fileInfo}}componentDidMount(){this.mounted=!0,this.loadFiles()}static getDerivedStateFromProps(e,t){if(e.fileInfo.id!==t.fileInfo.id){const t=e.fileInfo.extension;return{loaded:Ae(t)!==Te.IMAGE&&!(e.enableSVGs&&t===Te.SVG),fileInfo:e.fileInfo}}return null}componentDidUpdate(e){this.state.loaded||this.props.fileInfo.id===e.fileInfo.id||this.loadFiles()}componentWillUnmount(){this.mounted=!1}render(){const{compactDisplay:e,fileInfo:t}=this.props,n=Ig(t.name);let r,s;const i=`${ye("file_attachment.thumbnail","file thumbnail")} ${t.name}`.toLowerCase();let o;return e||(r=d("a",{"aria-label":i,className:"post-image__thumbnail",href:"#",onClick:this.onAttachmentClick,children:this.state.loaded?d(Sw,{fileInfo:t}):d("div",{className:"post-image__load"})}),s=d("div",{className:"post-image__detail_wrapper",onClick:this.onAttachmentClick,children:b("div",{className:"post-image__detail",children:[d("span",{className:"post-image__name",children:n}),d("span",{className:"post-image__type",children:t.extension.toUpperCase()}),d("span",{className:"post-image__size",children:xe(t.size)})]})})),this.props.canDownloadFiles&&(o=d(_w,{fileInfo:t,compactDisplay:e,canDownload:this.props.canDownloadFiles,handleImageClick:this.onAttachmentClick,iconClass:"post-image__download",children:d(bw,{className:"u3-w-5 u3-h-5"})})),b("div",{className:"post-image__column",children:[r,d("div",{className:"post-image__details",children:s}),o]})}}var Tw=g((function(e){const t=W(e);return{canDownloadFiles:Pg(t),enableSVGs:"true"===t.EnableSVGs}}))(Ew);var Aw={fileViewSingle:"u3-cxx-b97d3817"};class Pw extends w.PureComponent{constructor(e){var t,n;super(e),u(this,"mounted"),u(this,"imageLoaded",(()=>{this.mounted&&this.setState({loaded:!0})})),u(this,"handleImageClick",(e=>{e.preventDefault(),this.setState({showPreviewModal:!0})})),u(this,"showPreviewModal",(()=>{this.setState({showPreviewModal:!1})})),u(this,"toggleEmbedVisibility",(()=>{this.props.actions.toggleEmbedVisibility(this.props.postId)})),this.mounted=!0,this.state={loaded:!1,showPreviewModal:!1,dimensions:{width:(null==(t=e.fileInfo)?void 0:t.width)||0,height:(null==(n=e.fileInfo)?void 0:n.height)||0}}}componentDidMount(){this.mounted=!0}static getDerivedStateFromProps(e,t){var n,r,s;return(null==(n=e.fileInfo)?void 0:n.width)!==t.dimensions.width||e.fileInfo.height!==t.dimensions.height?{dimensions:{width:null==(r=e.fileInfo)?void 0:r.width,height:null==(s=e.fileInfo)?void 0:s.height}}:null}componentWillUnmount(){this.mounted=!1}render(){const{fileInfo:e,compactDisplay:t}=this.props,{loaded:n}=this.state;if(void 0===e)return d(p.exports.Fragment,{});const{has_preview_image:r,id:s}=e,i=xg(s),o=r?Cg(s):i,a=e.height,l=e.width,c={};let u;(l<50||a<50)&&(c[Aw.minPreview]=!0,a>l&&(c[Aw.minPreviewPortrait]=!0)),t&&(c[Aw.minPreviewCompact]=!0);let h="";let f={},m={},g="";return Ae(e.extension)===Te.SVG&&(g="svg",this.state.dimensions.height?f={width:"100%"}:m={height:350,maxWidth:"100%"}),n&&(u=d(ev,{show:this.state.showPreviewModal,onModalDismissed:this.showPreviewModal,fileInfos:[e],postId:this.props.postId}),h="image-fade-in"),d("div",{className:x(Aw.fileViewSingle),children:b("div",{className:"file__image",children:[this.props.isEmbedVisible&&d("div",{className:"image-container",style:m,children:d("div",{className:`image-loaded ${h} ${g}`,style:f,children:d(Tg,{onClick:this.handleImageClick,className:x(c),src:o,dimensions:this.state.dimensions,fileInfo:this.props.fileInfo,onImageLoaded:this.imageLoaded,showLoader:this.props.isEmbedVisible,handleSmallImageContainer:!0})})}),u]})})}}u(Pw,"defaultProps",{compactDisplay:!1});var Iw=g((function(e){return{isRhsOpen:Fe(e)}}),(function(e){return{actions:y({toggleEmbedVisibility:Qn},e)}}))(Pw);class Nw extends w.PureComponent{constructor(e){super(e),u(this,"handleImageClick",(e=>{this.setState({showPreviewModal:!0,startImgIndex:e})})),u(this,"hidePreviewModal",(()=>{this.setState({showPreviewModal:!1})})),this.state={showPreviewModal:!1,startImgIndex:0}}render(){const{compactDisplay:e,enableSVGs:t,fileInfos:n,fileCount:r,locale:s}=this.props;if(n&&1===n.length){const r=Ae(n[0].extension);if(r===Te.IMAGE||r===Te.SVG&&t)return d(Iw,{fileInfo:n[0],isEmbedVisible:this.props.isEmbedVisible,postId:this.props.post.id,compactDisplay:e})}else if(1===r&&this.props.isEmbedVisible)return d("div",{style:Mw.minHeightPlaceholder});const i=Sg(n,s),o=[];if(i&&i.length>0)for(let a=0;a<i.length;a++){const t=i[a];o.push(d(Tw,{fileInfo:i[a],index:a,handleImageClick:this.handleImageClick,compactDisplay:e},t.id))}else if(r>0)for(let a=0;a<r;a++)o.push(d("div",{className:"post-image__column post-image__column--placeholder"},`fileCount-${a}`));return b(T,{children:[d("div",{"data-testid":"fileAttachmentList",className:x("post-image__columns clearfix",{"u3-grid-cols-2":r>1,"u3-grid-cols-1":r<2}),children:o}),d(ev,{show:this.state.showPreviewModal,onModalDismissed:this.hidePreviewModal,startIndex:this.state.startImgIndex,fileInfos:i,postId:this.props.post.id})]})}}const Mw={minHeightPlaceholder:{minHeight:"385px"}};var Rw=g((function(){const e=hw();return function(t,n){const r=n.post?n.post.id:"",s=e(t,r);let i=0;return n.post.metadata&&n.post.metadata.files?i=(n.post.metadata.files||[]).length:n.post.file_ids?i=n.post.file_ids.length:n.post.filenames&&(i=n.post.filenames.length),{enableSVGs:"true"===W(t).EnableSVGs,fileInfos:s,fileCount:i,isEmbedVisible:Jn(t,n.post.id),locale:Zn(t)}}}))(Nw);class Ow extends w.PureComponent{constructor(){super(...arguments),u(this,"retryPost",(e=>{e.preventDefault();const t=a({},this.props.post);Reflect.deleteProperty(t,"id"),this.props.actions.createPost(t)})),u(this,"cancelPost",(e=>{e.preventDefault(),this.props.actions.removePost(this.props.post)}))}render(){return b("span",{className:"pending-post-actions",children:[d("a",{className:"post-retry",href:"#",onClick:this.retryPost,children:d(P,{id:"pending_post_actions.retry",defaultMessage:"Retry"})})," - ",d("a",{className:"post-cancel",href:"#",onClick:this.cancelPost,children:d(P,{id:"pending_post_actions.cancel",defaultMessage:"Cancel"})})]})}}var kw=g(null,(function(e){return{actions:y({createPost:er,removePost:tr},e)}}))(Ow);function Lw(e){return async(t,n)=>{const r=await nr(e)(t,n);return r.error&&"api.post.update_post.permissions_time_limit.app_error"===r.error.server_error_id&&t(rr({type:sr.ANNOUNCEMENT,message:r.error.message},!0)),r}}function Dw(e){return void 0!==e.height&&void 0!==e.width}function jw(e,t){return Math.sqrt(Math.pow(e.width-t.width,2)+Math.pow(e.height-t.height,2))}var Uw={attachmentOpengraph:"u3-cxx-6cc8f915",attachmentContainer:"u3-cxx-e7a58115",bodyWrap:"u3-cxx-1169cf76",bodySitename:"u3-cxx-e1371c16",attachmentTitle:"u3-cxx-83fe2fc2",titleUrl:"u3-cxx-18bfc7fe",attachmentBody:"u3-cxx-7017ff1b"};const Hw={height:80,width:80};class Fw extends w.PureComponent{constructor(){super(...arguments),u(this,"getImageMetadata",(e=>{if(!e)return;const t=this.props.post.metadata.images;return t?t[e]:void 0})),u(this,"isLargeImage",(e=>{if(!e)return!1;const{height:t,width:n}=e;return n>=150&&n/t>=16/9})),u(this,"handleRemovePreview",(async()=>{const e=Object.assign({},this.props.post.props);e[ir.REMOVE_LINK_PREVIEW]="true";const t={id:this.props.post.id,props:e};return this.props.actions.editPost(t)}))}renderImageToggle(){return d("button",{className:"style--none post__embed-visibility color--link","data-expanded":this.props.isEmbedVisible,"aria-label":"Toggle Embed Visibility",onClick:this.props.toggleEmbedVisibility})}renderLargeImage(e,t){if(this.props.isEmbedVisible)return d(bg,{src:e,imageMetadata:t,children:e=>d(Tg,{className:"attachment__image attachment__image--opengraph large_image",src:e,dimensions:t})})}renderSmallImage(e,t){if(this.props.isEmbedVisible)return d("div",{className:"attachment__image__container--opengraph",children:d(bg,{src:e,imageMetadata:t,children:e=>d(Tg,{className:"attachment__image attachment__image--opengraph",src:e,dimensions:t})})})}truncateText(e){return e&&e.length>128?e.substring(0,128-"...".length)+"...":e}hasPreviewBeenRemoved(){const{post:e}=this.props;return!(!e||!e.props)&&"true"===e.props[ir.REMOVE_LINK_PREVIEW]}render(){if(!this.props.previewEnabled||!this.props.enableLinkPreviews)return null;if(!this.props.post||Un(this.props.post))return null;if(this.hasPreviewBeenRemoved())return null;const e=this.props.openGraphData;if(!e)return null;const t=function(e,t){var n;if(!(null==(n=null==e?void 0:e.images)?void 0:n.length))return;const r=e.images.map((e=>{const n=e.secure_url||e.url;return e.width&&e.height||!t||!t[n]?e:l(a({},e),{height:e.height||t[n].height,width:e.width||t[n].width})})),s=(i=Hw,o=r,o.reduce(((e,t)=>Dw(e)&&Dw(t)&&jw(t,i)>=jw(e,i)?e:t),{}));var i,o;return s.secure_url||s.url}(e,this.props.post.metadata.images),n=this.getImageMetadata(t),r=this.isLargeImage(n);let s,i;return this.props.currentUserId===this.props.post.user_id&&(s=d("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:this.handleRemovePreview,"data-testid":"removeLinkPreviewButton",children:d("span",{"aria-hidden":"true",children:"×"})})),(e.description||t)&&(i=b("div",{className:Uw.attachmentBody,children:[b("div",{children:[this.truncateText(e.description)," ",t&&r&&this.renderImageToggle()]}),t&&r&&this.renderLargeImage(t,n)]})),d("div",{className:Uw.attachmentOpengraph,children:b("div",{className:x(Uw.attachmentContainer,Uw.clearfix),children:[b("div",{className:x(Uw.bodyWrap,"attachment__body__wrap attachment__body__wrap--opengraph"),children:[d("span",{className:Uw.bodySitename,children:this.truncateText(e.site_name)}),s,d("h1",{className:x(Uw.attachmentTitle,{[Uw.titleUrl]:!!e.title}),children:d("a",{className:Uw.attachmentTitleLink,href:or(e.url||this.props.link),target:"_blank",rel:"noopener noreferrer",title:e.title||e.url||this.props.link,children:this.truncateText(e.title||e.url||this.props.link)})}),i]}),t&&!r&&this.renderSmallImage(t,n)]})})}}var Bw=g((function(e,t){const n=W(e);return{currentUserId:pe(e),enableLinkPreviews:"true"===n.EnableLinkPreviews,openGraphData:ar(e,t.postId,t.link),previewEnabled:ke(e,kn.CATEGORY_DISPLAY_SETTINGS,kn.LINK_PREVIEW_DISPLAY,!0)}}),(function(e){return{actions:y({editPost:Lw},e)}}))(Fw);const qw=/(?:http|https):\/\/(?:www\.|m\.)?(?:(?:youtube\.com\/(?:(?:v\/)|(?:(?:watch|embed\/watch)(?:\/|.*v=))|(?:embed\/)|(?:user\/[^/]+\/u\/[0-9]\/)))|(?:youtu\.be\/))([^#&?]*)/;var zw="u3-cxx-94991666",Vw="u3-cxx-178c5de4",Gw="u3-cxx-0a594c35",Ww="u3-cxx-f8cd4376",Kw="u3-cxx-a456e5e8",Yw="u3-cxx-a9524bbe";class $w extends w.PureComponent{constructor(e,t){super(e,t),u(this,"play",(()=>{this.setState({playing:!0})})),u(this,"stop",(()=>{this.setState({playing:!1})})),this.state={playing:!1}}static getDerivedStateFromProps(e,t){return!e.show&&t.playing?{playing:!1}:null}render(){const{metadata:e,link:t}=this.props,n=function(e){const t=e.trim().match(qw);return t&&11===t[1].length?t[1]:null}(t),r=function(e){var t,n,r,s,i,o;const a=e.match(/[\\?&](t|time|start|time_continue)=([0-9]+h)?([0-9]+m)?([0-9]+s?)/);if(!(null==a?void 0:a[0]))return"";const l=null!=(n=null==(t=a[2])?void 0:t.match(/([0-9]+)h/))?n:null,c=null!=(s=null==(r=a[3])?void 0:r.match(/([0-9]+)m/))?s:null,u=null!=(o=null==(i=a[4])?void 0:i.match(/([0-9]+)s?/))?o:null;let d=0;return(null==l?void 0:l[1])&&(d+=3600*parseInt(l[1],10)),(null==c?void 0:c[1])&&(d+=60*parseInt(c[1],10)),(null==u?void 0:u[1])&&(d+=parseInt(u[1],10)),`&start=${d}`}(t),s=b("h4",{children:[d("span",{className:Vw,children:"YouTube - "}),d("span",{className:Gw,children:d("a",{href:this.props.link,target:"_blank",rel:"noopener noreferrer",children:(null==e?void 0:e.title)||"unknown"})})]});let i;if(this.state.playing)i=d("iframe",{src:"https://www.youtube.com/embed/"+n+"?autoplay=1&autohide=1&border=0&wmode=opaque&fs=1&enablejsapi=1"+r,width:"480px",height:"360px",frameBorder:"0",allowFullScreen:!0});else{const t=null==e?void 0:e.images[0];i=d("div",{className:"embed-responsive video-div__placeholder",children:b("div",{className:x("u3-aspect-w-16 u3-aspect-h-9"),children:[d(bg,{src:(null==t?void 0:t.secure_url)||(null==t?void 0:t.url)||"",children:e=>d("img",{src:e,alt:"youtube video thumbnail",className:"video-thumbnail",loading:"lazy"})}),d("div",{className:Kw,children:d("span",{className:Yw,children:d("span",{})})})]})})}return b("div",{className:zw,children:[s,d("div",{className:x(Ww,"u3-aspect-w-16 u3-aspect-h-9"),onClick:this.play,children:i})]})}static isYoutubeLink(e){return Boolean(e.trim().match(qw))}}var Xw=g((function(e,t){const n=W(e);return{currentChannelId:Ot(e),googleDeveloperKey:n.GoogleDeveloperKey,hasImageProxy:"true"===n.HasImageProxy,metadata:ar(e,t.postId,t.link)}}))($w);class Qw extends w.PureComponent{constructor(){super(...arguments),u(this,"toggleEmbedVisibility",(()=>{this.props.actions.toggleEmbedVisibility(this.props.post.id)})),u(this,"getEmbed",(()=>{const{metadata:e}=this.props.post;return lr(e)})),u(this,"isEmbedToggleable",(e=>{const t=this.props.pluginPostWillRenderEmbedComponents||[];for(const n of t)if(n.match(e))return Boolean(n.toggleable);return"image"===e.type||"opengraph"===e.type&&Xw.isYoutubeLink(e.url)})),u(this,"renderEmbed",(e=>{const t=this.props.pluginPostWillRenderEmbedComponents||[];for(const n of t)if(n.match(e)){const t=n.component;return this.props.isEmbedVisible&&d(t,{embed:e})}switch(e.type){case"opengraph":return Xw.isYoutubeLink(e.url)?this.props.isEmbedVisible?d(Xw,{postId:this.props.post.id,link:e.url,show:this.props.isEmbedVisible}):null:d(Bw,{postId:this.props.post.id,link:e.url,isEmbedVisible:this.props.isEmbedVisible,post:this.props.post,toggleEmbedVisibility:this.toggleEmbedVisibility});default:return null}})),u(this,"renderToggle",(e=>d("button",{className:"u3-hidden style--none post__embed-visibility color--link "+(e?"pull-left":""),"data-expanded":this.props.isEmbedVisible,"aria-label":"Toggle Embed Visibility",onClick:this.toggleEmbedVisibility},"toggle")))}render(){const e=this.getEmbed();if(e){const t=this.isEmbedToggleable(e),n=/^\s*https?:\/\/.*$/.test(this.props.post.message);return b(p.exports.Fragment,{children:[t&&n&&this.renderToggle(!0),this.props.children,t&&!n&&this.renderToggle(!1),this.renderEmbed(e)]})}return this.props.children}}var Jw=g((function(e,t){return{isEmbedVisible:Jn(e,t.post.id),pluginPostWillRenderEmbedComponents:e.plugins.components.PostWillRenderEmbedComponent,appsEnabled:vo(e)}}),(function(e){return{actions:y({toggleEmbedVisibility:Qn},e)}}))(Qw),Zw=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function e_(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(r=e[n],s=t[n],!(r===s||Zw(r)&&Zw(s)))return!1;var r,s;return!0}function t_(e){return n_("@"===e[0]?e:`@${e}`,{markdown:!1})}function n_(e,t,n){return d(iv,{message:e,options:t,postId:n&&n.id,postType:n&&n.type})}function r_(e){const t=t_(e.props.username),n=t_(e.props.addedUsername);return d(P,{id:"api.channel.add_member.added",defaultMessage:"{addedUsername} added to the channel by {username}.",values:{username:t,addedUsername:n}})}const s_={[ur.POST_TYPES.JOIN_CHANNEL]:function(e){const t=t_(e.props.username);return d(P,{id:"api.channel.join_channel.post_and_forget",defaultMessage:"{username} joined the channel.",values:{username:t}})},[ur.POST_TYPES.GUEST_JOIN_CHANNEL]:function(e){const t=t_(e.props.username);return d(P,{id:"api.channel.guest_join_channel.post_and_forget",defaultMessage:"{username} joined the channel as a guest.",values:{username:t}})},[ur.POST_TYPES.LEAVE_CHANNEL]:function(e){const t=t_(e.props.username);return d(P,{id:"api.channel.leave.left",defaultMessage:"{username} has left the channel.",values:{username:t}})},[ur.POST_TYPES.ADD_TO_CHANNEL]:r_,[ur.POST_TYPES.ADD_GUEST_TO_CHANNEL]:function(e){const t=t_(e.props.username),n=t_(e.props.addedUsername);return d(P,{id:"api.channel.add_guest.added",defaultMessage:"{addedUsername} added to the channel as a guest by {username}.",values:{username:t,addedUsername:n}})},[ur.POST_TYPES.REMOVE_FROM_CHANNEL]:function(e){const t=t_(e.props.removedUsername);return d(P,{id:"api.channel.remove_member.removed",defaultMessage:"{removedUsername} was removed from the channel",values:{removedUsername:t}})},[ur.POST_TYPES.JOIN_TEAM]:function(e){const t=t_(e.props.username);return d(P,{id:"api.team.join_team.post_and_forget",defaultMessage:"{username} joined the team.",values:{username:t}})},[ur.POST_TYPES.LEAVE_TEAM]:function(e){const t=t_(e.props.username);return d(P,{id:"api.team.leave.left",defaultMessage:"{username} left the team.",values:{username:t}})},[ur.POST_TYPES.ADD_TO_TEAM]:function(e){const t=t_(e.props.username),n=t_(e.props.addedUsername);return d(P,{id:"api.team.add_member.added",defaultMessage:"{addedUsername} added to the team by {username}.",values:{username:t,addedUsername:n}})},[ur.POST_TYPES.REMOVE_FROM_TEAM]:function(e){const t=t_(e.props.username);return d(P,{id:"api.team.remove_user_from_team.removed",defaultMessage:"{removedUsername} was removed from the team.",values:{removedUsername:t}})},[ur.POST_TYPES.HEADER_CHANGE]:function(e){if(!e.props.username)return null;const t={singleline:!0,channelNamesMap:e.props&&e.props.channel_mentions,mentionHighlight:!0},n=t_(e.props.username),r=e.props.old_header?n_(e.props.old_header,t,e):null,s=e.props.new_header?n_(e.props.new_header,t,e):null;return e.props.new_header?e.props.old_header?d(P,{id:"api.channel.post_update_channel_header_message_and_forget.updated_from",defaultMessage:"{username} updated the channel header <br></br><strong>From:</strong> {old} <br></br><strong>To:</strong> {new}",values:{username:n,old:r,new:s,strong:e=>d("strong",{children:e}),br:e=>b(T,{children:[d("br",{}),e]})}}):d(P,{id:"api.channel.post_update_channel_header_message_and_forget.updated_to",defaultMessage:"{username} updated the channel header to: {new}",values:{username:n,new:s}}):e.props.old_header?d(P,{id:"api.channel.post_update_channel_header_message_and_forget.removed",defaultMessage:"{username} removed the channel header (was: {old})",values:{username:n,old:r}}):null},[ur.POST_TYPES.DISPLAYNAME_CHANGE]:function(e){if(!(e.props.username&&e.props.old_displayname&&e.props.new_displayname))return null;const t=t_(e.props.username),n=e.props.old_displayname,r=e.props.new_displayname;return d(P,{id:"api.channel.post_update_channel_displayname_message_and_forget.updated_from",defaultMessage:"{username} updated the channel display name from: {old} to: {new}",values:{username:t,old:n,new:r}})},[ur.POST_TYPES.CONVERT_CHANNEL]:function(e){if(!e.props.username)return null;const t=t_(e.props.username);return d(P,{id:"api.channel.post_convert_channel_to_private.updated_from",defaultMessage:"{username} converted the channel from public to private",values:{username:t}})},[ur.POST_TYPES.PURPOSE_CHANGE]:function(e){if(!e.props.username)return null;const t=t_(e.props.username),n=e.props.old_purpose,r=e.props.new_purpose;return e.props.new_purpose?e.props.old_purpose?d(P,{id:"app.channel.post_update_channel_purpose_message.updated_from",defaultMessage:"{username} updated the channel purpose from: {old} to: {new}",values:{username:t,old:n,new:r}}):d(P,{id:"app.channel.post_update_channel_purpose_message.updated_to",defaultMessage:"{username} updated the channel purpose to: {new}",values:{username:t,new:r}}):e.props.old_purpose?d(P,{id:"app.channel.post_update_channel_purpose_message.removed",defaultMessage:"{username} removed the channel purpose (was: {old})",values:{username:t,old:n}}):null},[ur.POST_TYPES.CHANNEL_DELETED]:function(e){if(!e.props.username)return null;const t=t_(e.props.username);return d(P,{id:"api.channel.delete_channel.archived",defaultMessage:"{username} has archived the channel.",values:{username:t}})},[ur.POST_TYPES.CHANNEL_UNARCHIVED]:function(e){if(!e.props.username)return null;const t=t_(e.props.username);return d(P,{id:"api.channel.restore_channel.unarchived",defaultMessage:"{username} has unarchived the channel.",values:{username:t}})},[ur.POST_TYPES.ME]:function(e){return n_(e.message.replace(/^\*|\*$/g,""))}};class i_ extends w.PureComponent{constructor(){super(...arguments),u(this,"getOptions",function(e,t){var n;void 0===t&&(t=e_);var r,s=[],i=!1;return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return i&&n===this&&t(o,s)||(r=e.apply(this,o),i=!0,n=this,s=o),r}}(((e,t,n)=>l(a({},e),{disableGroupHighlight:t,mentionHighlight:n}))))}render(){var e,t,n;let{message:r}=this.props;const{post:s,mentionKeys:i}=this.props;if(s){const e=function(e,t,n){return e.props&&e.props.add_channel_member?(cr(e),null):s_[e.type]?s_[e.type](e):e.type===ur.POST_TYPES.EPHEMERAL_ADD_TO_CHANNEL?r_(e):e.type===ur.POST_TYPES.COMBINED_USER_ACTIVITY?(e.props.user_activity,null):null}(s,this.props.channel,this.props.isUserCanManageMembers);if(e)return d("div",{children:e})}const o=!s||!s.message_source||s.message===s.message_source,a=s&&s.props&&s.props.channel_mentions;null==(e=this.props.pluginHooks)||e.forEach((e=>{e&&e.hook&&s&&(r=e.hook(s,r))}));let l=null==(t=this.props.options)?void 0:t.mentionHighlight;s&&s.props&&(l=!s.props.mentionHighlightDisabled);const c=this.getOptions(this.props.options,!0===(null==(n=null==s?void 0:s.props)?void 0:n.disable_group_highlight),l);return d(iv,{imageProps:this.props.imageProps,isRHS:this.props.isRHS,message:r,proxyImages:o,mentionKeys:i,options:c,channelNamesMap:a,hasPluginTooltips:this.props.hasPluginTooltips,imagesMetadata:this.props.post&&this.props.post.metadata&&this.props.post.metadata.images,postId:this.props.post&&this.props.post.id})}}u(i_,"defaultProps",{isRHS:!1,pluginHooks:[],options:{}});var o_=g((function(){const e=C(ue,((e,t)=>t),((e,t,n)=>n?yc(e,n.team_id,n.id):vc(e)),((e,t,n)=>{var r,s;let i=e;return(null==(r=null==t?void 0:t.props)?void 0:r.disable_group_highlight)||(i=i.concat(n)),(null==(s=null==t?void 0:t.props)?void 0:s.mentionHighlightDisabled)&&(i=i.filter((e=>!["@all","@group","@here"].includes(e.key)))),i}));return(t,n)=>{const r=ce(t,n.channelId);return{channel:r,pluginHooks:t.plugins.components.MessageWillFormat,hasPluginTooltips:Boolean(t.plugins.components.LinkTooltip),isUserCanManageMembers:r&&Ye(t,r),mentionKeys:e(t,n.post,r)}}}))(i_),a_=Zi.jsx;var l_=function(e){return a_("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},e)),{children:a_("path",{fillRule:"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z",clipRule:"evenodd"})}))};var c_={postMessageCollapsed:"u3-cxx-f9c1bc6c",postMessageTextContainer:"u3-cxx-73aa12ca",allEmoji:"u3-cxx-891139f6",emoticon:"u3-cxx-c6409bd1",emoticonUnicode:"u3-cxx-14df24fa",osWindows:"u3-cxx-963640c5",emoticonBig:"u3-cxx-55563ce3",postCollapseGradient:"u3-cxx-4ee04c9f",postAttachmentCollapseGradient:"u3-cxx-ba3d91ab",postCollapseShowMore:"u3-cxx-7a691046",postCollapse:"u3-cxx-342fb210",postCollapseShowmore:"u3-cxx-14c45232",showMoreButton:"u3-cxx-a3d41e1d",postMoreIcon:"u3-cxx-3f591d27",postMessageExpanded:"u3-cxx-a41ece2d",postMessageOverflow:"u3-cxx-d1da61d1"};class u_ extends w.PureComponent{constructor(e){super(e),u(this,"maxHeight"),u(this,"textContainer"),u(this,"overflowRef"),u(this,"toggleCollapse",(e=>{e.preventDefault(),this.setState((e=>({isCollapsed:!e.isCollapsed})))})),u(this,"checkTextOverflow",(()=>{this.overflowRef&&window.cancelAnimationFrame(this.overflowRef),this.overflowRef=window.requestAnimationFrame((()=>{let e=!1;this.textContainer.current&&this.textContainer.current.scrollHeight>this.maxHeight&&(e=!0),e!==this.state.isOverflow&&this.setState({isOverflow:e})}))})),u(this,"handleResize",(()=>{this.checkTextOverflow()})),this.maxHeight=this.props.isAttachmentText?200:100,this.textContainer=w.createRef(),this.state={isCollapsed:!0,isOverflow:!1}}componentDidMount(){if(this.checkTextOverflow(),window.addEventListener("resize",this.handleResize),this.textContainer.current){const e=getComputedStyle(this.textContainer.current);this.maxHeight=this.props.isAttachmentText?200:5*parseFloat(e.lineHeight.replace("px",""))}}componentDidUpdate(e){this.props.text===e.text&&this.props.isRHSExpanded===e.isRHSExpanded&&this.props.isRHSOpen===e.isRHSOpen&&this.props.checkOverflow===e.checkOverflow||this.checkTextOverflow()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize),this.overflowRef&&window.cancelAnimationFrame(this.overflowRef)}render(){const{isCollapsed:e,isOverflow:t}=this.state,{text:n,children:r,isAttachmentText:s,compactDisplay:i,isMe:o}=this.props;let a,l={"post-message":!0};e?(a=this.maxHeight,l[c_.postMessageCollapsed]=!0):l[c_.postMessageExpanded]=!0,""===n&&(l["u3-hidden"]=!0);let c=null;if(t){!s&&e&&i&&a&&(a-=22);let t=d(l_,{className:c_.postMoreIcon}),n=ye("post_info.message.show_less","Show less");e&&(t=d(fv,{className:c_.postMoreIcon}),n=ye("post_info.message.show_more","Show more")),c=b("div",{className:x(c_.postCollapse,{[c_.postCollapseMe]:o}),children:[d("div",{className:x({[c_.postCollapseGradient]:!s,[c_.postAttachmentCollapseGradient]:s})}),b("div",{className:x({[c_.postCollapseShowmore]:!s,[c_.postAttachmentCollapseShowmore]:s}),children:[d("div",{className:"post-collapse__show-more-line"}),b("button",{id:"showMoreButton",className:c_.showMoreButton,onClick:this.toggleCollapse,children:[t," ",n]}),d("div",{className:"post-collapse__show-more-line"})]})]}),l[c_.postMessageOverflow]=!0}return b("div",{className:x(l),children:[d("div",{style:{maxHeight:a},className:x(c_.postMessageTextContainer),ref:this.textContainer,children:r}),c]})}}var d_=g((function(e){return{isRHSExpanded:dr(e),isRHSOpen:Fe(e),compactDisplay:pr(e,kn.CATEGORY_DISPLAY_SETTINGS,kn.MESSAGE_DISPLAY,kn.MESSAGE_DISPLAY_DEFAULT)===kn.MESSAGE_DISPLAY_COMPACT}}))(u_);var p_="u3-cxx-db20077f",h_="u3-cxx-459e6526";class f_ extends w.PureComponent{constructor(e){super(e),u(this,"imageProps"),u(this,"checkPostOverflow",(()=>{this.setState((e=>({checkOverflow:e.checkOverflow+1})))})),u(this,"handleHeightReceived",(e=>{e>0&&this.checkPostOverflow()})),u(this,"handleFormattedTextClick",(e=>Ue(e,this.props.currentRelativeTeamUrl))),this.state={collapse:!0,hasOverflow:!1,checkOverflow:0},this.imageProps={onImageLoaded:this.handleHeightReceived,onImageHeightChanged:this.checkPostOverflow}}renderDeletedPost(){return d("p",{children:d(P,{id:"post_body.deleted",defaultMessage:"(message deleted)"})})}renderEditedIndicator(){return hr(this.props.post)?d("span",{id:`postEdited_${this.props.post.id}`,className:h_,children:d(P,{id:"post_message_view.edited",defaultMessage:"(edited)"})}):null}render(){const{post:e,enableFormatting:t,options:n,pluginPostTypes:r,compactDisplay:s,isRHS:i,theme:o,wordBlocked:a}=this.props;if(e.state===ur.POST_DELETED)return this.renderDeletedPost();let l=a.reduce(((e,t)=>{const n=new RegExp(t,"ig");return t.length<3?e.replace(n,"✴✴"):e.replace(n,"✴✴✴")}),e.message);if(!t)return d("span",{children:l});const c=e.props&&e.props.type?e.props.type:e.type;if(r&&r.hasOwnProperty(c)){const t=r[c].component;return d(t,{post:e,compactDisplay:s,isRHS:i,theme:o})}const u=cr(e);if(s&&u){const e=ye("post_info.message.visible.compact"," (Only visible to you)");l=l.concat(e)}const p=i?`rhsPostMessageText_${e.id}`:`postMessageText_${e.id}`;return b(d_,{checkOverflow:this.state.checkOverflow,isMe:fr(e),text:l||"",children:[d("div",{"aria-readonly":"true",tabIndex:0,id:p,className:x(p_,"post-message__text"),dir:"auto",onClick:this.handleFormattedTextClick,children:d(o_,{message:l,imageProps:this.imageProps,isRHS:i,options:n,post:e,channelId:e.channel_id,mentionKeys:[]})}),this.renderEditedIndicator()]})}}u(f_,"defaultProps",{options:{},isRHS:!1,pluginPostTypes:{}});var m_=g((function(e){return{enableFormatting:ke(e,Le.CATEGORY_ADVANCED_SETTINGS,"formatting",!0),isRHSExpanded:dr(e),isRHSOpen:Fe(e),pluginPostTypes:e.plugins.postTypes,theme:mr(e),currentRelativeTeamUrl:Be(e),wordBlocked:gr(e)}}))(f_),g_=()=>b("div",{className:Na.messageSend,children:[d("span",{}),d("span",{}),d("span",{})]});var v_="u3-cxx-da250324",y_="u3-cxx-22b21436",b_="u3-cxx-f0fab7a5",x_="u3-cxx-8e707ddc",w_="u3-cxx-d4b42dec",__="u3-cxx-7203e589",C_="u3-cxx-73977263";class S_ extends w.PureComponent{constructor(e){super(e),this.sendingAction=new Gb((()=>{const e=this.props.post;e&&e.id===e.pending_post_id&&this.setState({sending:!0})})),this.state={sending:!1}}static getDerivedStateFromProps(e,t){return t.sending&&e.post&&e.post.id!==e.post.pending_post_id?{sending:!1}:null}componentDidUpdate(){!1===this.state.sending&&this.sendingAction.cancel()}componentDidMount(){const e=this.props.post;e&&e.id===e.pending_post_id&&this.sendingAction.fireAfter(3e3)}componentWillUnmount(){this.sendingAction.cancel()}render(){const e=this.props.post,t=this.props.user,n=this.props.parentPost,r=this.props.parentPostUser,s={};let i;const o=cr(e);if(ot(t))return d("div",{className:"post__link banned",children:"Nội dung bị ẩn do tài khoản bị BAN"});let a;this.props.isFirstReply&&n&&e.type!==G.PostTypes.EPHEMERAL&&(i=d(vw,{post:n,parentPostUser:r,onCommentClick:this.props.handleCommentClick})),this.props.post.failed&&(s[b_]=!0,a=d(kw,{post:this.props.post})),hr(this.props.post)&&(s[x_]=!0);let l=null;(e.file_ids&&e.file_ids.length>0||e.filenames&&e.filenames.length>0)&&this.props.post.state!==ur.POST_DELETED&&(l=d(Rw,{post:e,compactDisplay:this.props.compactDisplay})),this.state.sending&&(s[w_]=!0);const c=b(w.Fragment,{children:[a,this.state.sending&&d(g_,{}),!this.state.sending&&d(m_,{post:this.props.post,compactDisplay:this.props.compactDisplay,hasMention:!0})]}),u=e.type&&this.props.pluginPostTypes.hasOwnProperty(e.type)||e.props&&e.props.type&&this.props.pluginPostTypes.hasOwnProperty(e.props.type);let h;h=this.props.post.state===ur.POST_DELETED||u?c:d(Jw,{post:this.props.post,isEmbedVisible:this.props.isEmbedVisible,children:c});const{isCommentMention:f,hasComment:m}=this.props;return b(p.exports.Fragment,{children:[i,b("div",{id:`${e.id}_message`,className:x(v_,{[__]:f,[C_]:o,[y_]:m},s),children:[h,l]})]})}}u(S_,"propTypes",{post:E.object.isRequired,parentPost:E.object,parentPostUser:E.object,handleCommentClick:E.func.isRequired,compactDisplay:E.bool,isCommentMention:E.bool,isFirstReply:E.bool,pluginPostTypes:E.object,isEmbedVisible:E.bool,enablePostUsernameOverride:E.bool.isRequired,isReadOnly:E.bool,user:E.object,hasComment:E.bool}),u(S_,"defaultProps",{isReadOnly:!1});var E_=g((function(e,t){let n,r;t.post.root_id&&(n=Pe(e,t.post.root_id),r=n?$(e,n.user_id):null);const s="true"===W(e).EnablePostUsernameOverride,i=0!==(K(e)||{}).delete_at;return{parentPost:n,parentPostUser:r,pluginPostTypes:e.plugins.postTypes,enablePostUsernameOverride:s,isReadOnly:vr(e)||i,user:$(e,t.post.user_id)}}))(S_),T_=()=>d("div",{children:"Bot"}),A_=({chidlren:e})=>d("div",{children:e});var P_="u3-cxx-c266591c";class I_ extends w.PureComponent{render(){var e;const{post:t}=this.props,n=Un(t),r=Fn(t),s="true"===(null==(e=null==t?void 0:t.props)?void 0:e.from_webhook);let i,o,a=d(Mv,{userId:t.user_id,hasMention:!0});return s?(a=t.props.override_username&&this.props.enablePostUsernameOverride?d(Mv,{userId:t.user_id,hideStatus:!0,overwriteName:t.props.override_username,overwriteIcon:this.props.overwriteIcon}):d(Mv,{userId:t.user_id,hideStatus:!0}),this.props.isBot||(i=d(T_,{}))):r?(a=d(Mv,{userId:t.user_id,hideStatus:!0,hasMention:!0}),i=d(A_,{children:d(P,{id:"post_info.auto_responder",defaultMessage:"AUTOMATIC REPLY"})})):n&&this.props.isBot?a=d(Mv,{userId:t.user_id,hideStatus:!0}):n&&(a=d(Mv,{userId:"",overwriteName:d(P,{id:"post_info.system",defaultMessage:"System"}),overwriteImage:G.SYSTEM_MESSAGE_PROFILE_IMAGE,disablePopover:!0})),this.props.compactDisplay&&(o=d("strong",{className:"colon",children:":"})),b("div",{className:P_,"header-x":"",children:[a,o,i]})}}var N_=g((function(e,t){var n,r;const s=W(e),i="true"===s.EnablePostUsernameOverride,o="true"===s.EnablePostIconOverride&&(null==(r=null==(n=t.post)?void 0:n.props)?void 0:r.override_icon_url);let a;o&&(a=J.getAbsoluteUrl(o));const l=$(e,t.post.user_id);return{enablePostUsernameOverride:i,isBot:Boolean(l&&l.is_bot),overwriteIcon:a,isGuest:Boolean(l&&Z(l))}}))(I_),M_=Zi.jsx;var R_=function(e){return M_("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},e)),{children:M_("path",{d:"M2 10.5a1.5 1.5 0 113 0v6a1.5 1.5 0 01-3 0v-6zM6 10.333v5.43a2 2 0 001.106 1.79l.05.025A4 4 0 008.943 18h5.416a2 2 0 001.962-1.608l1.2-6A2 2 0 0015.56 8H12V4a2 2 0 00-2-2 1 1 0 00-1 1v.667a4 4 0 01-.8 2.4L6.8 7.933a4 4 0 00-.8 2.4z"})}))};var O_="u3-cxx-f7e4dfc9",k_="u3-cxx-9fa139e9",L_="u3-cxx-4b4108bd",D_="u3-cxx-bac0c281",j_="u3-cxx-a411a499",U_="u3-cxx-92463326",H_="u3-cxx-2d7fff5f";class F_ extends w.PureComponent{constructor(e){super(e),u(this,"reactionButtonRef",w.createRef()),u(this,"reactionCountRef",w.createRef()),u(this,"animating",!1),u(this,"handleClick",(()=>{if(!this.props.canAddReaction||!this.props.canRemoveReaction||this.animating)return;const{currentUserReacted:e}=this.props.sortedUsers;this.animating=!0,this.setState((t=>e?{displayNumber:t.displayNumber-1,reactedClass:"Reaction--unreacting"}:{displayNumber:t.displayNumber+1,reactedClass:"Reaction--reacting"})),this.handleAnimationEnded()})),u(this,"handleAnimationEnded",(()=>{const{actions:e,post:t,emojiName:n}=this.props,{currentUserReacted:r}=this.props.sortedUsers;this.animating=!1,this.setState((e=>"Reaction--reacting"===e.reactedClass?{reactedClass:"Reaction--reacted"}:"Reaction--unreacting"===e.reactedClass?{reactedClass:"Reaction--unreacted"}:e)),r?e.removeReaction(t.id,n):e.addReaction(t.id,n)})),u(this,"loadMissingProfiles",(async()=>{const e=this.props.reactions.map((e=>e.user_id));this.props.actions.getMissingProfilesByIds(e)}));const{reactionCount:t}=this.props,{currentUserReacted:n}=this.props.sortedUsers;this.state=n?{reactedClass:"Reaction--reacted",displayNumber:t}:{reactedClass:"Reaction--unreacted",displayNumber:t}}componentDidUpdate(e){if(e.reactionCount!==this.props.reactionCount){const{currentUserReacted:e}=this.props.sortedUsers,t=e?"Reaction--reacted":"Reaction--unreacted";this.animating=!1,this.setState({displayNumber:this.props.reactionCount,reactedClass:t})}}render(){if(!this.props.emojiImageUrl)return null;const{currentUserReacted:e,users:t}=this.props.sortedUsers,{reactionCount:n,otherUsersCount:r,canAddReaction:s,canRemoveReaction:i}=this.props,{displayNumber:o}=this.state,a=e?n:n+1,l=e?n-1:n,c=l>0?l:"",u=a>0?a:"",p=o>0?o:"",h=s&&i?"":"Reaction--read-only";if(!o)return null;let f,m;f=r>0?t.length>0?d(P,{id:"reaction.usersAndOthersReacted",defaultMessage:"{users} and {otherUsers, number} other {otherUsers, plural, one {user} other {users}}",values:{users:t.join(", "),otherUsers:r}}):d(P,{id:"reaction.othersReacted",defaultMessage:"{otherUsers, number} {otherUsers, plural, one {user} other {users}}",values:{otherUsers:r}}):t.length>1?d(P,{id:"reaction.usersReacted",defaultMessage:"{users} and {lastUser}",values:{users:t.slice(0,-1).join(", "),lastUser:t[t.length-1]}}):t[0],m=t.length+r>1?d(P,e?{id:"reaction.reactionVerb.youAndUsers",defaultMessage:"reacted"}:{id:"reaction.reactionVerb.users",defaultMessage:"reacted"}):d(P,e?{id:"reaction.reactionVerb.you",defaultMessage:"reacted"}:{id:"reaction.reactionVerb.user",defaultMessage:"reacted"});const g=d(P,{id:"reaction.reacted",defaultMessage:"{users} {reactionVerb} with {emoji}",values:{users:d("b",{children:f}),reactionVerb:m,emoji:d("b",{children:":"+this.props.emojiName+":"})}}),v=this.props.emojiName.replace(/_/g," ");let y=`${ye("reaction.reactWidth.ariaLabel","react with")} ${v}`;return e&&i&&(y=`${ye("reaction.removeReact.ariaLabel","remove reaction")} ${v}`),d(tc,{placement:"top",content:g,children:b("button",{id:`postReaction-${this.props.post.id}-${this.props.emojiName}`,"aria-label":y,className:x(O_,"Reaction",this.state.reactedClass,h),onClick:this.handleClick,ref:this.reactionButtonRef,children:[d("span",{className:x(H_,"Reaction__emoji emoticon"),style:{backgroundImage:"url("+this.props.emojiImageUrl+")"}}),d("span",{ref:this.reactionCountRef,className:k_,children:b("span",{className:L_,children:[d("span",{className:x(D_,"zzz-display"),children:p}),d("span",{className:x(U_,"zzz-unreacted"),children:c}),d("span",{className:x(j_,"zzz-reacted"),children:u})]})})]})})}}function B_(e,t,n,r,s,i,o,a){return!!We(e,{team:t,channel:n,permission:a})&&!(r===ae.DEFAULT_CHANNEL&&"true"===s.ExperimentalTownSquareIsReadOnly&&"true"===i.IsLicensed&&!o.roles.includes("system_admin"))}var q_=g((function(){const e=yr();return function(t,n){const r=W(t),s=$e(t),i=te(t),o=e(t,n.reactions);let a;if(br.has(n.emojiName))a=xr[br.get(n.emojiName)];else{a=wr(t).get(n.emojiName)}let l="";a&&(l=Ne(a));const c=ce(t,n.post.channel_id)||{},u=0!==c.delete_at,d=c.team_id,p=pe(t),h=he(t);let f=!1,m=!1;return u||(f=B_(t,d,n.post.channel_id,c.name,r,s,i,Ke.REMOVE_REACTION),m=B_(t,d,n.post.channel_id,c.name,r,s,i,Ke.ADD_REACTION)),{profiles:o,otherUsersCount:n.reactions.length-o.length,currentUserId:p,reactionCount:n.reactions.length,canAddReaction:f,canRemoveReaction:m,emojiImageUrl:l,sortedUsers:_r(n.reactions,p,o,h)}}}),(function(e){return{actions:y({addReaction:Cr,removeReaction:Sr,getMissingProfilesByIds:Er},e)}}))(F_);var z_="u3-cxx-fdfc9c9d",V_="u3-cxx-7eba8b75",G_="u3-cxx-0f4da2dd",W_="u3-cxx-741923ca",K_="u3-cxx-1093d31b",Y_=e=>{const{emoji:t,spriteClassName:n}=e;return d("div",{className:x(W_),children:d("div",{className:x(K_),children:d("img",{alt:t.aliases.join(" - "),src:Ne(t),className:n,onClick:t=>{t.preventDefault(),e.onItemClick(e.emoji)},role:"button"})})})};function $_(e,t){return t.findIndex((t=>e.includes(t)))}function X_(e,t,n=0){return!(n>10)&&(!!e.isEqualNode(t)||X_(e,t.parentNode,n+1))}const Q_=["thumbsup","heart","laughing","astonished","cry","rage"];var J_=g((function(e){return{customEmojisEnabled:"true"===e.entities.general.config.EnableCustomEmoji,customEmojiPage:e.views.emoji.emojiPickerCustomPage,emojiMap:Ie(e),recentEmojis:Ar(e),activeEmojis:Q_}}))((e=>{const[t,n]=p.exports.useState(e.show),[r,s]=p.exports.useState(!1),[i,o]=p.exports.useState([]),l=p.exports.useRef(null);let c;function u(){e.target()&&l.current&&(c=Vl(e.target(),l.current,{placement:"top",strategy:"absolute",modifiers:[{name:"offset",options:{offset:[0,6]}}],onFirstUpdate:e=>{s(!0)}}))}function h(t){if(l.current){X_(l.current.parentNode,t.target)||e.onHide()}}return p.exports.useEffect((()=>{var e;return u(),null==(e=yo())||e.addEventListener("mouseup",h,!1),()=>{var e;null==(e=yo())||e.removeEventListener("mouseup",h,!1),c&&c.destroy()}}),[]),p.exports.useEffect((()=>{t||s(!1),c?c.update():u()}),[t]),p.exports.useEffect((()=>{n(e.show)}),[e.show]),p.exports.useEffect((()=>{const{activeEmojis:t}=e;let n=[];Tr.forEach((e=>{const r=e.map((e=>xr[e])).filter((e=>$_(t,e.aliases)>-1));n=n.concat(r)})),n.sort(((e,n)=>$_(e.aliases,t)>$_(n.aliases,t))),n=n.map((e=>{const t=a({},e);return t.filename=function(e){return e.filename||e.id}(e),t})),o(n)}),[e.recentEmojis]),d(p.exports.Fragment,t?{children:d("div",{role:"reactions-popper",ref:l,className:x(z_,{"u3-invisible u3-opacity-0":!r}),children:d("div",{className:V_,children:d("div",{className:G_,children:i.map(((t,n)=>d(Y_,{emoji:t,onItemClick:e.onEmojiClick},`${t.filename}-${n}`)))})})})}:{})}));var Z_="u3-cxx-2f5c50fc",eC="u3-cxx-ec597914",tC="u3-cxx-b5985ddd",nC="u3-cxx-7c91bb5a";class rC extends w.PureComponent{constructor(e){super(e),u(this,"addReactionButtonRef",w.createRef()),u(this,"getTarget",(()=>this.addReactionButtonRef.current)),u(this,"handleEmojiClick",(e=>{this.setState({showEmojiPicker:!1});const t=Pr(e)?e.name:e.aliases[0];this.props.actions.addReaction(this.props.post.id,t)})),u(this,"hideEmojiPicker",(()=>{this.setState({showEmojiPicker:!1})})),u(this,"toggleEmojiPicker",(()=>{this.setState({showEmojiPicker:!this.state.showEmojiPicker})})),this.state={showEmojiPicker:!1}}render(){const e=new Map,t=[];if(this.props.reactions)for(const o of Object.values(this.props.reactions)){const n=o.emoji_name;e.has(n)?e.get(n).push(o):(t.push(n),e.set(n,[o]))}if(0===e.size)return d("div",{className:"no-reactions"});const n=t.map((t=>d(q_,{post:this.props.post,emojiName:t,reactions:e.get(t)||[]},t))),r=this.getTarget();r&&(window.innerWidth,r.getBoundingClientRect().right);let s=null;this.props.enableEmojiPicker&&(s=d("span",{className:"emoji-picker__container",children:b(ay,{channelId:this.props.post.channel_id,teamId:this.props.teamId,permissions:[Ke.ADD_REACTION],children:[d(J_,{show:this.state.showEmojiPicker,target:this.getTarget,onHide:this.hideEmojiPicker,onEmojiClose:this.hideEmojiPicker,onEmojiClick:this.handleEmojiClick}),d("button",{"aria-label":ye("reaction.add.ariaLabel","Add a reaction"),className:x("Reaction"),onClick:this.toggleEmojiPicker,children:d("span",{id:`addReaction-${this.props.post.id}`,className:x(eC,{[nC]:this.state.showEmojiPicker}),ref:this.addReactionButtonRef,children:d(R_,{className:tC})})})]})}));let i="post-add-reaction";return this.state.showEmojiPicker&&(i+=" post-add-reaction-emoji-picker-open"),b("div",{"aria-label":ye("reaction.container.ariaLabel","reactions"),className:Z_,children:[n,d("div",{className:i,children:s})]})}}var sC=g((function(){const e=Ir();return function(t,n){const r="true"===W(t).EnableEmojiPicker&&!n.isReadOnly;return{teamId:(ce(t,n.post.channel_id)||{}).team_id,reactions:e(t,n.post.id),enableEmojiPicker:r}}}),(function(e){return{actions:y({addReaction:Cr},e)}}))(rC);var iC={postX:"u3-cxx-f1d36a0f",postSection:"u3-cxx-6913062f",postContentAvatar:"u3-cxx-ef406e09",postContentMain:"u3-cxx-ef74cd5b",postContentBody:"u3-cxx-6812375f",postContentTools:"u3-cxx-d81b5da3",postContentMore:"u3-cxx-04fa9bc7",withReactions:"u3-cxx-31583fbc",postMoreReaction:"u3-cxx-877f3d06",postMoreTime:"u3-cxx-9ce54ca8",postMoreComment:"u3-cxx-4c78127f",postMoreX:"u3-cxx-fd7cf88f",postMoreLink:"u3-cxx-5445ec32",permarlink:"u3-cxx-fdfa6933",postComment:"u3-cxx-e14249f1",commentIcon:"u3-cxx-2da5b521",timeIcon:"u3-cxx-0fb4ac70",xIcon:"u3-cxx-9e4d8b07",sameRoot:"u3-cxx-e623aab8",otherRoot:"u3-cxx-1d6d463c",currentUser:"u3-cxx-fcfd90bb",itsMe:"u3-cxx-5818578f",postHideControls:"u3-cxx-f736b797"};var oC="u3-cxx-bfd26e4e",aC="u3-cxx-aa1fd571",lC="u3-cxx-7471d6eb";class cC extends w.PureComponent{constructor(e){super(e),u(this,"addReactionButtonRef",w.createRef()),u(this,"getTarget",(()=>this.addReactionButtonRef.current)),u(this,"handleEmojiClick",(e=>{this.setState({showEmojiPicker:!1});const t=Pr(e)?e.name:e.aliases[0];this.props.actions.addReaction(this.props.post.id,t)})),u(this,"hideEmojiPicker",(()=>{this.setState({showEmojiPicker:!1})})),u(this,"toggleEmojiPicker",(()=>{this.setState({showEmojiPicker:!this.state.showEmojiPicker})})),this.state={showEmojiPicker:!1}}render(){let e=null;return this.props.enableEmojiPicker&&(e=d("span",{className:"emoji-picker__container",children:b(ay,{channelId:this.props.post.channel_id,teamId:this.props.teamId,permissions:[Ke.ADD_REACTION],children:[d(J_,{show:this.state.showEmojiPicker,target:this.getTarget,onHide:this.hideEmojiPicker,onEmojiClose:this.hideEmojiPicker,onEmojiClick:this.handleEmojiClick}),d("button",{"aria-label":ye("reaction.add.ariaLabel","Add a reaction"),className:"Reaction",onClick:this.toggleEmojiPicker,children:d("span",{id:`addReaction-${this.props.post.id}`,className:aC,ref:this.addReactionButtonRef,children:d(R_,{className:lC})})})]})})),d("div",{className:oC,children:e})}}var uC=g((function(){const e=Ir();return function(t,n){const r="true"===W(t).EnableEmojiPicker&&!n.isReadOnly;return{teamId:(ce(t,n.post.channel_id)||{}).team_id,reactions:e(t,n.post.id),enableEmojiPicker:r}}}),(function(e){return{actions:y({addReaction:Cr},e)}}))(cC);class dC extends w.PureComponent{constructor(e){super(e),u(this,"handleCommentClick",(e=>{e.preventDefault();const t=this.props.post;t&&this.props.actions.selectPost(t)})),u(this,"handleCardClick",(e=>{e&&this.props.actions.selectPostCard(e)})),u(this,"handlePostClick",(e=>{const t=this.props.post;t&&(this.props.channelIsArchived||t.system_post_ids||e.altKey&&this.props.actions.markPostAsUnread(t,"CENTER"))})),u(this,"handleDropdownOpened",(e=>{this.props.togglePostMenu&&this.props.togglePostMenu(e),this.setState({dropdownOpened:e})})),u(this,"hasSameRoot",(e=>{const t=e.post;return!e.isFirstReply&&(!(t.root_id||e.previousPostIsComment||!e.consecutivePostByUser)||!!t.root_id)})),u(this,"getClassName",((e,t,n,r,s,i)=>{const o={[iC.postX]:!0};return o[iC.postHideControls]=e.failed||e.state===ur.POST_DELETED,o[iC.postHighlight]=!this.state.fadeOutHighlight&&this.props.shouldHighlight,o[iC.sameRoot]=this.hasSameRoot(this.props),o[iC.otherRoot]=!this.hasSameRoot(this.props),o[iC.postBot]=i,o[iC.currentUser]=!r&&!t,o[iC.sameUser]=this.props.consecutivePostByUser,o[iC.postCompact]=this.props.compactDisplay,o[iC.postHoverd]=this.state.dropdownOpened||this.state.a11yActive,o[iC.postPinOrFlagged]=e.is_pinned||this.props.isFlagged,o["u3-cursor-pointer"]=this.state.alt&&!(this.props.channelIsArchived||e.system_post_ids),o[iC.itsMe]=this.props.currentUserId===e.user_id,!this.state.fadeOutHighlight&&this.props.shouldHighlight&&(e.is_pinned||this.props.isFlagged)&&(o[iC.postPinOrFlaggedHighlight]=!0),e.root_id&&e.root_id.length>0?o[iC.postComment]=!0:this.props.replyCount>0&&(o[iC.postRoot]=!0,o[iC.sameUser]=!1,o[iC.sameRoot]=!1,o[iC.otherRoot]=!1),(t||n)&&(o[iC.postSystem]=!0,t&&(o[iC.currentUser]=!1,o[iC.postComment]=!1,o[iC.postRoot]=!1,o[iC.otherRoot]=!1)),s&&(o[iC.postComment]=!0,o[iC.sameRoot]=!0,o[iC.postRoot]=!1),o})),u(this,"setHover",(()=>{this.setState({hover:!0})})),u(this,"unsetHover",(()=>{this.setState({hover:!1})})),u(this,"handleAlt",(e=>{this.state.alt!==e.altKey&&this.setState({alt:e.altKey})})),u(this,"handleA11yActivateEvent",(()=>{this.setState({a11yActive:!0,ariaHidden:!1})})),u(this,"handleA11yDeactivateEvent",(()=>{this.setState({a11yActive:!1,ariaHidden:!0})})),u(this,"handlePostFocus",(()=>{this.updateAriaLabel()})),u(this,"updateAriaLabel",(()=>{this.setState({currentAriaLabel:this.props.createAriaLabel(this.props.intl)})})),this.postRef=w.createRef(),this.state={dropdownOpened:!1,hover:!1,alt:!1,a11yActive:!1,currentAriaLabel:"",ariaHidden:!0,fadeOutHighlight:!1}}componentDidMount(){document.addEventListener("keydown",this.handleAlt),document.addEventListener("keyup",this.handleAlt),this.postRef.current&&(this.postRef.current.addEventListener(Nr.ACTIVATE,this.handleA11yActivateEvent),this.postRef.current.addEventListener(Nr.DEACTIVATE,this.handleA11yDeactivateEvent)),this.props.shouldHighlight&&(this.highlightTimeout=setTimeout((()=>{this.setState({fadeOutHighlight:!0})}),G.PERMALINK_FADEOUT))}componentWillUnmount(){document.removeEventListener("keydown",this.handleAlt),document.removeEventListener("keyup",this.handleAlt),this.postRef.current&&(this.postRef.current.removeEventListener(Nr.ACTIVATE,this.handleA11yActivateEvent),this.postRef.current.removeEventListener(Nr.DEACTIVATE,this.handleA11yDeactivateEvent)),this.highlightTimeout&&clearTimeout(this.highlightTimeout)}componentDidUpdate(e){this.state.a11yActive&&this.postRef.current.dispatchEvent(new Event(Nr.UPDATE)),this.props.post.state===ur.POST_DELETED&&e.post.state!==ur.POST_DELETED&&this.updateAriaLabel()}render(){const{post:e,replyCount:t,isFirstReply:n,isCollapsedThreadsEnabled:r,consecutivePostByUser:s,compactDisplay:i}=this.props;if(!e.id)return null;const o=Un(e),a=fr(e),l=Fn(e),c=e&&e.props&&"true"===e.props.from_webhook,u=e&&e.props&&"true"===e.props.from_bot;if(o&&!l)return null;let p=d("span",{hidden:!0});const{root_id:h}=e,f=this.hasSameRoot(this.props)&&s&&!h&&0===t&&!u;f||(p=d(Vx,{compactDisplay:i,post:e,userId:e.user_id}),l&&(p=d("span",{className:"auto-responder",children:p})));const m=[];m.push(d(aw,{styles:iC,isFlagged:this.props.isFlagged,isPinned:e.is_pinned,channelId:e.channel_id},"post-highlight"));(l||!o&&(Boolean(t)||n))&&m.push(d("div",{className:iC.postMoreComment,children:d(uw,{handleCommentClick:this.handleCommentClick,commentCount:this.props.replyCount,postId:e.id,extraClass:"post__x-comment-count",styles:iC})},"post-more-comment"));const g=!(cr(e)||ur.POST_DELETED===e.state||Mr(e)||e.type===ur.POST_TYPES.COMBINED_USER_ACTIVITY);return m.push(d("div",{className:iC.postMoreTime,children:d(Xx,{isPermalink:g,eventTime:e.create_at,postId:e.id,styles:iC})},"post-more-time")),d(Gx.Provider,{value:{handlePopupOpened:this.handleDropdownOpened,styles:iC},children:b("div",{ref:this.postRef,id:"post_"+e.id,"data-testid":"postView",role:"listitem",className:x("a11y__section","post-item-x",iC.postSection,this.getClassName(e,o,a,c,l,u)),tabIndex:0,onFocus:this.handlePostFocus,onMouseOver:this.setHover,onMouseLeave:this.unsetHover,onTouchStart:this.setHover,onClick:this.handlePostClick,"aria-label":this.state.currentAriaLabel,"aria-atomic":!0,children:[d("div",{className:iC.postContentAvatar,children:p}),b("div",{className:iC.postContentMain,children:[b("div",{className:iC.postContentBody,children:[d(N_,{post:e,handleCommentClick:this.handleCommentClick,handleCardClick:this.handleCardClick,handleDropdownOpened:this.handleDropdownOpened,compactDisplay:this.props.compactDisplay,isFirstReply:this.props.isFirstReply,replyCount:this.props.replyCount,showTimeWithoutHover:!f,hover:this.state.hover||this.state.a11yActive,isLastPost:this.props.isLastPost}),d(E_,{post:e,handleCommentClick:this.handleCommentClick,compactDisplay:this.props.compactDisplay,isCommentMention:this.props.isCommentMention,isFirstReply:this.props.isFirstReply,hasComment:e.root_id&&e.root_id.length>0||l}),b("div",{className:iC.postContentMore,children:[d(sC,{post:this.props.post,isReadOnly:this.props.isReadOnly}),m]})]}),d("div",{className:iC.postContentTools,children:d(uC,{post:this.props.post,isReadOnly:this.props.isReadOnly})})]})]})})}}u(dC,"propTypes",{post:E.object.isRequired,thread:E.object,createAriaLabel:E.func.isRequired,currentUserId:E.string.isRequired,center:E.bool,compactDisplay:E.bool,isFirstReply:E.bool,shouldHighlight:E.bool,consecutivePostByUser:E.bool,previousPostIsComment:E.bool,togglePostMenu:E.func,isCommentMention:E.bool,replyCount:E.number,isLastPost:E.bool,channelIsArchived:E.bool.isRequired,intl:Uo.isRequired,actions:E.shape({selectPost:E.func.isRequired,selectPostCard:E.func.isRequired,markPostAsUnread:E.func.isRequired}).isRequired,isFlagged:E.bool.isRequired,isCollapsedThreadsEnabled:E.bool,isReadOnly:E.bool}),u(dC,"defaultProps",{post:{},isReadOnly:!1});var pC=f(dC);function hC(e,t){return!(!e||!e.root_id)&&(!t||e.root_id!==t.id&&e.root_id!==t.root_id)}var fC=g((function(){const e=Rr(),t=Or(),n=kr();return(r,s)=>{const i=s.post||Pe(r,s.postId),o=ce(r,i.channel_id);let a=null;s.previousPostId&&(a=Pe(r,s.previousPostId));let l=!1,c=!1;a&&(l=Lr(i,a),c=Boolean(a.root_id));const u=0!==(K(r)||{}).delete_at;return{post:i,createAriaLabel:n(r,i),currentUserId:pe(r),isFirstReply:hC(i,a),consecutivePostByUser:l,previousPostIsComment:c,replyCount:e(r,i),isCommentMention:t(r,i.id),center:pr(r,kn.CATEGORY_DISPLAY_SETTINGS,kn.CHANNEL_DISPLAY_MODE,kn.CHANNEL_DISPLAY_MODE_DEFAULT)===kn.CHANNEL_DISPLAY_MODE_CENTERED,compactDisplay:pr(r,kn.CATEGORY_DISPLAY_SETTINGS,kn.MESSAGE_DISPLAY,kn.MESSAGE_DISPLAY_DEFAULT)===kn.MESSAGE_DISPLAY_COMPACT,channelIsArchived:Dr(o),isFlagged:null!=pr(r,kn.CATEGORY_FLAGGED_POST,i.id,null),isCollapsedThreadsEnabled:Ut(r),isReadOnly:vr(r)||u}}}),(function(e){return{actions:y({selectPost:jr,selectPostCard:Ur,markPostAsUnread:Hr},e)}}))(pC);var mC=g((function(){const e=Fr();return(t,n)=>({post:e(t,n.combinedId),postId:n.combinedId})}))(fC);var gC="u3-cxx-f02aa279",vC="u3-cxx-57573d5f",yC="u3-cxx-dab47c84",bC="u3-cxx-4c6b39c7",xC=({children:e})=>b("div",{className:gC,children:[d("div",{className:yC}),d("div",{className:bC,children:e})]});const wC=[Tx,Ax],_C=({date:e})=>d(xC,{children:d(Dx,{value:e,useTime:!1,useSemanticOutput:!1,ranges:wC})});_C.propTypes={date:E.oneOfType([E.number,E.instanceOf(Date)]).isRequired};var CC=p.exports.memo(_C),SC=({children:e})=>b("div",{className:vC,children:[d("div",{className:yC}),d("div",{className:bC,children:e})]});var EC="u3-cxx-ca428930";class TC extends w.PureComponent{render(){return d("div",{className:x(EC,"new-separator"),children:d(SC,{id:this.props.separatorId,children:d(P,{id:"posts_view.newMsg",defaultMessage:"New Messages"})})})}}class AC extends w.PureComponent{blockShortcutReactToLastPostForNonMessages(e){const{actions:{emitShortcutReactToLastPostFrom:t}}=this.props;Br(e)&&t(Bn.NO_WHERE)}componentDidUpdate(e){const{listId:t,isLastPost:n,shortcutReactToLastPostEmittedFrom:r}=this.props,s=e.shortcutReactToLastPostEmittedFrom!==r&&r===Bn.CENTER;n&&s&&this.blockShortcutReactToLastPostForNonMessages(t)}render(){const{listId:e,previousListId:t,loadingOlderPosts:n,loadingNewerPosts:r,post:s}=this.props,{OLDER_MESSAGES_LOADER:i,NEWER_MESSAGES_LOADER:o,CHANNEL_INTRO_MESSAGE:l,LOAD_OLDER_MESSAGES_TRIGGER:c,LOAD_NEWER_MESSAGES_TRIGGER:u}=Gr;if(qr(e)){const t=zr(e);return d(CC,{date:t},t)}if(Vr(e))return d(TC,{separatorId:e});if(e===l)return d("div",{});if(e===c||e===u)return d("button",{className:"more-messages-text theme style--none color--link",onClick:e===c?this.props.loadOlderPosts:this.props.loadNewerPosts,children:d(P,{id:"posts_view.loadMore",defaultMessage:"Load More Messages"})});if(e===i||e===o){return d("div",{className:"loading-screen",children:b("div",{className:x("loading__content",{hideAnimation:!n&&!r}),children:[d("div",{className:"round round-1"}),d("div",{className:"round round-2"}),d("div",{className:"round round-3"})]})})}const p={previousPostId:t,shouldHighlight:this.props.shouldHighlight,togglePostMenu:this.props.togglePostMenu,isLastPost:this.props.isLastPost};return Ln(e)?d(mC,a({combinedId:e},p)):d(fC,a({postId:e,post:s},p))}}var PC=g((function(e,t){let n;Br(t.listId)||(n=t.listId);const r=Wr(e);return{post:t.post||(n?Pe(e,n):null),channel:t.channel,shortcutReactToLastPostEmittedFrom:r}}),(function(e){return{actions:y({emitShortcutReactToLastPostFrom:Kr},e)}}))(AC),IC=Zi.jsx;var NC=function(e){return IC("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},e)),{children:IC("path",{fillRule:"evenodd",d:"M15.707 4.293a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-5-5a1 1 0 011.414-1.414L10 8.586l4.293-4.293a1 1 0 011.414 0zm0 6a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-5-5a1 1 0 111.414-1.414L10 14.586l4.293-4.293a1 1 0 011.414 0z",clipRule:"evenodd"})}))};var MC="u3-cxx-e348b088";class RC extends w.PureComponent{render(){return d("div",{className:x(MC,{"u3-hidden":this.props.atBottom}),onClick:this.props.onClick,children:d(NC,{className:"u3-w-6 u3-h-6 u3-animate-bounce u3-text-gray-600"})})}}u(RC,"propTypes",{isScrolling:E.bool.isRequired,atBottom:E.bool,onClick:E.func.isRequired});var OC=Zi.jsx,kC=Zi.jsxs;var LC=function(e){return kC("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},e)),{children:[OC("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),OC("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})]}))},DC=Zi.jsx;var jC=function(e){return DC("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},e)),{children:DC("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}))};var UC="u3-cxx-12b068c8",HC="u3-cxx-41a5fd77",FC="u3-cxx-bc058da2",BC="u3-cxx-93946fdf",qC="u3-cxx-3119bb0a",zC="u3-cxx-9fbcf278",VC="u3-cxx-02d84790";class GC extends w.PureComponent{constructor(){super(...arguments),u(this,"mounted"),u(this,"handleDismiss",(()=>{"function"==typeof this.props.onDismiss&&this.props.onDismiss()}))}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){const e={[UC]:!0},t={[FC]:!0},{show:n,extraClasses:r,showActions:s,width:i}=this.props;n&&(e[HC]=!0),s&&(t[BC]=!0);return b("div",{className:x(e,"toastClass"),children:[b("div",{className:x(t),onClick:s?this.props.onClick:void 0,children:[s&&(()=>b("div",{className:qC,children:[d(LC,{className:"u3-w-5 u3-h-5 u3-text-white"}),i>G.MOBILE_SCREEN_WIDTH&&this.props.onClickMessage]}))(),this.props.children]}),d("div",{className:zC,onClick:this.handleDismiss,"data-testid":r?`dismissToast-${r}`:"dismissToast",children:d(jC,{className:x(VC),id:"dismissToast"})})]})}}const WC=[Ex],KC=class extends w.PureComponent{constructor(e){super(e),u(this,"handleShortcut",(e=>{Ee(e,G.KeyCodes.ESCAPE)&&(this.state.showUnreadToast?this.hideUnreadToast():this.state.showNewMessagesToast?this.hideNewMessagesToast():this.hideArchiveToast())})),u(this,"hideUnreadToast",(()=>{this.state.showUnreadToast&&this.setState({showUnreadToast:!1})})),u(this,"hideArchiveToast",(()=>{this.state.showMessageHistoryToast&&this.setState({showMessageHistoryToast:!1})})),u(this,"hideNewMessagesToast",((e=!0)=>{this.state.showNewMessagesToast&&(this.setState({showNewMessagesToast:!1}),e&&this.props.updateLastViewedBottomAt())})),u(this,"hideSearchHintToast",(()=>{this.props.onSearchHintDismiss&&this.props.onSearchHintDismiss()})),u(this,"newMessagesToastText",((e,t)=>{return this.props.width>500&&void 0!==t?d(P,{id:"postlist.toast.newMessagesSince",defaultMessage:"{count, number} new {count, plural, one {message} other {messages}} {isToday, select, true {} other {since}} {date}",values:{count:e,isToday:(n=new Date(t),wx(n)).toString(),date:d(Dx,{value:t,useTime:!1,ranges:WC})}}):d(P,{id:"postlist.toast.newMessages",defaultMessage:"{count, number} new {count, plural, one {message} other {messages}}",values:{count:e}});var n})),u(this,"archiveToastText",(()=>d("p",{className:"u3-ml-8",children:d(P,{id:"postlist.toast.history",defaultMessage:"Viewing message history"})}))),u(this,"changeUrlToRemountChannelView",(()=>{const{match:e}=this.props;qt.replace(`/${e.params.team}`)})),u(this,"scrollToNewMessage",(()=>{const{focusedPostId:e,atLatestPost:t,scrollToNewMessage:n,updateLastViewedBottomAt:r}=this.props;!e||t?(n(),r(),this.hideNewMessagesToast()):this.changeUrlToRemountChannelView()})),u(this,"scrollToLatestMessages",(()=>{const{focusedPostId:e,atLatestPost:t,scrollToLatestMessages:n}=this.props;if(e){if(!t)return void this.changeUrlToRemountChannelView();this.hideArchiveToast()}n(),this.hideUnreadToast()})),this.state={unreadCountInChannel:e.unreadCountInChannel}}static getDerivedStateFromProps(e,t){let n,{showUnreadToast:r,showNewMessagesToast:s,showMessageHistoryToast:i}=t;return n=e.atLatestPost?KC.countNewMessages(e.postListIds,e.rootPosts,e.isCollapsedThreadsEnabled):e.channelMarkedAsUnread?t.unreadCountInChannel:t.unreadCountInChannel+e.newRecentMessagesCount,void 0===r&&null!==e.atBottom&&(r=n>0&&!e.atBottom),void 0===i&&""!==e.focusedPostId&&null!==e.atBottom&&(i=e.initScrollOffsetFromBottom>1e3||!e.atLatestPost),!e.channelMarkedAsUnread||e.atBottom||t.channelMarkedAsUnread||t.showUnreadToast||(r=!0),e.channelMarkedAsUnread&&e.lastViewedAt!==t.lastViewedAt&&!e.atBottom&&(r=!0),!r&&n>0&&!e.atBottom&&e.lastViewedBottom<e.latestPostTimeStamp&&(s=!0),n||(s=!1,r=!1),{unreadCount:n,showUnreadToast:r,showNewMessagesToast:s,lastViewedAt:e.lastViewedAt,channelMarkedAsUnread:e.channelMarkedAsUnread,showMessageHistoryToast:i}}componentDidMount(){this.mounted=!0;const{showUnreadToast:e,showNewMessagesToast:t,showMessageHistoryToast:n}=this.state,r=Boolean(e||t||n);document.addEventListener("keydown",this.handleShortcut),this.props.actions.updateToastStatus(r)}componentDidUpdate(e,t){const{showUnreadToast:n,showNewMessagesToast:r,showMessageHistoryToast:s}=this.state,{atBottom:i,atLatestPost:o,postListIds:a,lastViewedBottom:l,updateNewMessagesAtInChannel:c,actions:u}=this.props;!e.atBottom&&i&&o&&(this.hideNewMessagesToast(!1),this.hideUnreadToast(),this.hideArchiveToast());const d=e.postListIds.length,p=a.length;p!==d&&a[0]!==e.postListIds[0]&&(!1===i&&o&&p>0)&&!n&&c(l);if(t.showUnreadToast!==n||t.showNewMessagesToast!==r||t.showMessageHistoryToast!==s){const e=Boolean(n||r||s);u.updateToastStatus(e)}}componentWillUnmount(){document.removeEventListener("keydown",this.handleShortcut)}getToastToRender(){const{atLatestPost:e,atBottom:t,width:n,lastViewedAt:r,showSearchHintToast:s}=this.props,{showUnreadToast:i,showNewMessagesToast:o,showMessageHistoryToast:c,unreadCount:u}=this.state,p={show:!0,width:n,onDismiss:this.hideUnreadToast,onClick:this.scrollToLatestMessages,onClickMessage:ye("postlist.toast.scrollToBottom","Jump to recents"),showActions:!e||e&&!t};if(i&&u>0)return d(GC,l(a({},p),{children:this.newMessagesToastText(u,r)}));if(o){const e={onDismiss:this.hideNewMessagesToast,onClick:this.scrollToNewMessage,onClickMessage:ye("postlist.toast.scrollToLatest","Jump to new messages")};return d(GC,l(a(a({},p),e),{children:this.newMessagesToastText(u,r)}))}if(c){const e={show:!0,width:n,onDismiss:this.hideArchiveToast,onClick:this.scrollToLatestMessages,onClickMessage:ye("postlist.toast.scrollToBottom","Jump to recents"),showActions:!0,extraClasses:"toast__history"};return d(GC,l(a({},e),{children:this.archiveToastText()}))}return null}render(){const e=this.getToastToRender();return d(w.Fragment,{children:e})}};let YC=KC;u(YC,"propTypes",{unreadCountInChannel:E.number,newRecentMessagesCount:E.number,channelMarkedAsUnread:E.bool,isCollapsedThreadsEnabled:E.bool,rootPosts:E.object,atLatestPost:E.bool,postListIds:E.array,latestPostTimeStamp:E.number,atBottom:E.bool,lastViewedBottom:E.number,width:E.number,lastViewedAt:E.number,focusedPostId:E.string,initScrollOffsetFromBottom:E.number,updateNewMessagesAtInChannel:E.func,scrollToNewMessage:E.func,scrollToLatestMessages:E.func,updateLastViewedBottomAt:E.func,showSearchHintToast:E.bool,onSearchHintDismiss:E.func,match:E.shape({params:E.shape({team:E.string}).isRequired}).isRequired,actions:E.shape({updateToastStatus:E.func.isRequired}).isRequired}),u(YC,"defaultProps",{focusedPostId:""}),u(YC,"countNewMessages",((e,t,n)=>{const r=Yr(e);if(r<=0)return 0;let s=e.slice(0,r).filter((e=>!Br(e)));return n&&(s=s.filter((e=>t[e]))),s.length}));var $C=f(YC);var XC=m(g((function(){const e=C($r,pe,((e,t)=>t),((e,t,n)=>n),Ut,((e,t,n,r,s)=>n?n.map((t=>e[t])).filter((e=>e&&e.user_id!==t&&e.state!==ur.POST_DELETED&&e.create_at>r&&(!s||""===e.root_id))).length:0)),t=C($r,pe,K,((e,t,n)=>Object.values(e).filter((e=>""===e.root_id&&e.channel_id===n.id&&e.state!==ur.POST_DELETED)).reduce(((e,t)=>(e[t.id]=!0,e)),{}))),n=Xr();return function(r,s){let i=0;const o=Qr(r,s.channelId),a=r.views.channel.lastChannelViewTime[s.channelId];if(!s.atLatestPost){let t=Jr(r,s.channelId);t&&(t=n(r,{postIds:t,lastViewedAt:a,channelId:s.channelId})),i=e(r,t,a)}return{rootPosts:t(r),lastViewedAt:a,newRecentMessagesCount:i,isCollapsedThreadsEnabled:Ut(r),unreadCountInChannel:Zr(r),channelMarkedAsUnread:o}}}),(function(e){return{actions:y({updateToastStatus:bo},e)}}))($C));var QC="u3-cxx-f039e3e1",JC="u3-cxx-05ea1f8c",ZC="u3-cxx-17088fc9",eS="u3-cxx-727615df",tS="u3-cxx-c5cd3113",nS="u3-cxx-c0e296a8";const rS=50,sS=100,iS={padding:"14px 0px 7px"},oS={position:"absolute",bottom:"0",maxHeight:"100%"};class aS extends w.PureComponent{constructor(e){super(e),u(this,"getNewMessagesSeparatorIndex",(e=>e.findIndex((e=>0===e.indexOf(Gr.START_OF_NEW_MESSAGES))))),u(this,"handleWindowResize",(()=>{this.props.actions.checkAndSetMobileView();const e=_e();if(e!==this.state.isMobile){const t=this.state.dynamicListStyle;this.state.postMenuOpened&&(e||"unset"!==t.willChange?e&&"transform"===t.willChange&&(t.willChange="unset"):t.willChange="transform"),this.setState({isMobile:e,dynamicListStyle:t}),this.scrollStopAction=new Gb(this.handleScrollStop)}this.showSearchHintThreshold=this.getShowSearchHintThreshold()})),u(this,"togglePostMenu",(e=>{const t=this.state.dynamicListStyle;this.state.isMobile&&(t.willChange=e?"unset":"transform"),this.setState({postMenuOpened:e,dynamicListStyle:t})})),u(this,"renderRow",(({data:e,itemId:t,style:n})=>{const r=e.indexOf(t);let s="";const i="post-row__padding",o=-1!==r&&r<e.length-1?e[r+1]:"",a=r>0&&r<e.length?e[r-1]:"";(qr(a)||Vr(a))&&(s+="post-row__padding bottom"),(qr(o)||Vr(o))&&(s.includes(i)?s+=" top":s+="post-row__padding top");const l=t===this.state.postListIds[0];return d("div",{style:n,className:x(eS,s),children:d(PC,{listId:t,previousListId:ns(e,r),shouldHighlight:t===this.props.focusedPostId,loadOlderPosts:this.props.actions.loadOlderPosts,loadNewerPosts:this.props.actions.loadNewerPosts,togglePostMenu:this.togglePostMenu,isLastPost:l,loadingNewerPosts:this.props.loadingNewerPosts,loadingOlderPosts:this.props.loadingOlderPosts})})})),u(this,"scrollToFailed",(e=>{0===e?this.props.actions.changeUnreadChunkTimeStamp(""):this.props.actions.changeUnreadChunkTimeStamp(this.props.lastViewedAt)})),u(this,"onScroll",(({scrollDirection:e,scrollOffset:t,scrollUpdateWasRequested:n,clientHeight:r,scrollHeight:s})=>{if(s<=0)return;const i="forward"===e&&!n,o=s-r-t,a=o<1e3;if("backward"===e&&!n&&t<1e3&&!this.props.atOldestPost?this.props.actions.loadOlderPosts():i&&a&&!this.props.atLatestPost&&this.props.actions.loadNewerPosts(),this.state.isMobile&&(this.state.isScrolling||this.setState({isScrolling:!0}),this.scrollStopAction&&this.scrollStopAction.fireAfter(G.SCROLL_DELAY)),this.checkBottom(t,s,r),n){this.listRef.current._getRangeToRender()[3]<=1&&!this.props.atLatestPost&&this.props.actions.canLoadMorePosts(rs.AFTER_ID),!this.state.atBottom&&s&&this.setState({initScrollOffsetFromBottom:o})}this.state.isMobile&&this.state.showSearchHint&&this.setState({showSearchHint:!1}),this.state.isMobile||this.state.isSearchHintDismissed||this.setState({showSearchHint:o>this.showSearchHintThreshold})})),u(this,"getShowSearchHintThreshold",(()=>3*window.screen.height)),u(this,"checkBottom",((e,t,n)=>{this.updateAtBottom(this.isAtBottom(e,t,n))})),u(this,"isAtBottom",((e,t,n)=>t-n-e<=10&&t>0)),u(this,"updateAtBottom",(e=>{if(e!==this.state.atBottom){let t=Date.now();this.props.latestPostTimeStamp>t&&(t=this.props.latestPostTimeStamp),this.setState({atBottom:e,lastViewedBottom:t})}})),u(this,"updateLastViewedBottomAt",((e=Date.now())=>{this.setState({lastViewedBottom:e})})),u(this,"handleScrollStop",(()=>{this.mounted&&this.setState({isScrolling:!1})})),u(this,"handleSearchHintDismiss",(()=>{this.setState({showSearchHint:!1,isSearchHintDismissed:!0})})),u(this,"updateFloatingTimestamp",(e=>{this.state.isMobile&&this.props.postListIds&&this.setState({topPostId:ss(this.props.postListIds.slice(e))})})),u(this,"onItemsRendered",(({visibleStartIndex:e})=>{this.updateFloatingTimestamp(e)})),u(this,"initScrollToIndex",(()=>{if(this.props.focusedPostId){return{index:this.state.postListIds.findIndex((e=>e===this.props.focusedPostId)),position:"center"}}const e=Yr(this.state.postListIds);return e>0?qr(this.state.postListIds[e+1])?{index:e+1,position:"start",offset:-50}:{index:e,position:"start",offset:-50}:{index:0,position:"end"}})),u(this,"scrollToLatestMessages",(()=>{this.props.atLatestPost?this.scrollToBottom():(this.updateNewMessagesAtInChannel(),this.props.actions.changeUnreadChunkTimeStamp(""))})),u(this,"scrollToBottom",(()=>{this.listRef.current?this.listRef.current.scrollToItem(0,"end"):setTimeout((()=>{this.listRef.current&&this.listRef.current.scrollToItem(0,"end")}),500)})),u(this,"scrollToNewMessage",(()=>{this.listRef.current?this.listRef.current.scrollToItem(Yr(this.state.postListIds),"start",-50):setTimeout((()=>{this.listRef.current&&this.listRef.current.scrollToItem(Yr(this.state.postListIds),"start",-50)}),500)})),u(this,"updateNewMessagesAtInChannel",((e=Date.now())=>{this.props.actions.updateNewMessagesAtInChannel(this.props.channelId,e)})),u(this,"renderToasts",(e=>d(XC,{atLatestPost:this.props.atLatestPost,postListIds:this.state.postListIds,atBottom:this.state.atBottom,width:e,lastViewedBottom:this.state.lastViewedBottom,latestPostTimeStamp:this.props.latestPostTimeStamp,scrollToNewMessage:this.scrollToNewMessage,scrollToLatestMessages:this.scrollToLatestMessages,updateNewMessagesAtInChannel:this.updateNewMessagesAtInChannel,updateLastViewedBottomAt:this.updateLastViewedBottomAt,channelId:this.props.channelId,focusedPostId:this.props.focusedPostId,initScrollOffsetFromBottom:this.state.initScrollOffsetFromBottom,onSearchHintDismiss:this.handleSearchHintDismiss,showSearchHintToast:this.state.showSearchHint})));const t=Gr.CHANNEL_INTRO_MESSAGE,n=_e();this.state={isScrolling:!1,isMobile:n,atBottom:null,lastViewedBottom:Date.now(),postListIds:[t],topPostId:"",postMenuOpened:!1,dynamicListStyle:{willChange:"transform"},initScrollCompleted:!1,initScrollOffsetFromBottom:0,showSearchHint:!1,isSearchHintDismissed:!1},this.listRef=w.createRef(),this.postListRef=w.createRef(),n&&(this.scrollStopAction=new Gb(this.handleScrollStop)),this.initRangeToRender=this.props.focusedPostId?[0,sS]:[0,rS];let r=0;r=e.focusedPostId?this.props.postListIds.findIndex((e=>e===this.props.focusedPostId)):this.getNewMessagesSeparatorIndex(e.postListIds);const s=e.focusedPostId?sS:rS;this.initRangeToRender=[Math.max(r-30,0),Math.max(r+30,Math.min(e.postListIds.length-1,s))],this.showSearchHintThreshold=this.getShowSearchHintThreshold()}componentDidMount(){this.mounted=!0,this.props.actions.checkAndSetMobileView(),window.addEventListener("resize",this.handleWindowResize),es.addListener(ts.POST_LIST_SCROLL_TO_BOTTOM,this.scrollToLatestMessages)}getSnapshotBeforeUpdate(e){if(this.postListRef&&this.postListRef.current){const t=this.props.postListIds&&this.props.postListIds.length!==e.postListIds.length&&this.props.postListIds[0]===e.postListIds[0],n=this.props.atOldestPost!==e.atOldestPost;if((t||n)&&!1===this.state.atBottom){const e=this.postListRef.current;return{previousScrollTop:e.parentElement.scrollTop,previousScrollHeight:e.scrollHeight}}}return null}componentDidUpdate(e,t,n){if(!this.postListRef.current)return;const r=e.postListIds.length,s=this.props.postListIds.length;if(n){const t=this.postListRef.current.scrollHeight,i=s!==r&&this.props.postListIds[0]===e.postListIds[0],o=this.props.atOldestPost!==e.atOldestPost;if((i||o)&&!this.state.atBottom&&n){const e=n.previousScrollTop+(t-n.previousScrollHeight);0!==e&&e-n.previousScrollTop!=0&&this.listRef.current.scrollTo(e,e-n.previousScrollTop,!0)}}}componentWillUnmount(){this.mounted=!1,window.removeEventListener("resize",this.handleWindowResize),es.removeListener(ts.POST_LIST_SCROLL_TO_BOTTOM,this.scrollToLatestMessages)}static getDerivedStateFromProps(e){const t=e.postListIds;let n;return n=e.atOldestPost?[...t,Gr.CHANNEL_INTRO_MESSAGE]:e.autoRetryEnable?[...t,Gr.OLDER_MESSAGES_LOADER]:[...t,Gr.LOAD_OLDER_MESSAGES_TRIGGER],e.atLatestPost||(n=e.autoRetryEnable?[Gr.NEWER_MESSAGES_LOADER,...n]:[Gr.LOAD_NEWER_MESSAGES_TRIGGER,...n]),{postListIds:n}}render(){const e=this.props.channelId;let t;this.props.latestAriaLabelFunc&&this.props.postListIds.indexOf(Gr.START_OF_NEW_MESSAGES)>=0&&(t=this.props.latestAriaLabelFunc(this.props.intl));const{dynamicListStyle:n}=this.state;return b("div",{role:"list",className:"a11y__region","aria-label":ye("accessibility.sections.centerContent","message list main region"),children:[this.state.isMobile&&b(w.Fragment,{children:[d(qx,{isScrolling:this.state.isScrolling,isMobile:!0,postId:this.state.topPostId}),d(RC,{isScrolling:this.state.isScrolling,atBottom:this.state.atBottom,onClick:this.scrollToBottom})]}),d("div",{role:"presentation",className:QC,children:d("div",{role:"presentation",className:JC,children:b("div",{id:"postListContent",className:ZC,children:[d("span",{className:x(tS,"sr-only"),"aria-live":"polite",children:t}),d(Pb,{children:({height:e,width:t})=>b(w.Fragment,{children:[d("div",{children:this.renderToasts(t)}),d(zb,{ref:this.listRef,height:e,width:t,className:nS,itemData:this.state.postListIds,overscanCountForward:80,overscanCountBackward:80,onScroll:this.onScroll,initScrollToIndex:this.initScrollToIndex,canLoadMorePosts:this.props.actions.canLoadMorePosts,innerRef:this.postListRef,style:a(a({},oS),n),innerListStyle:iS,initRangeToRender:this.initRangeToRender,loaderId:Gr.OLDER_MESSAGES_LOADER,correctScrollToBottom:this.props.atLatestPost,onItemsRendered:this.onItemsRendered,scrollToFailed:this.scrollToFailed,children:this.renderRow})]})})]})})},"postlist-"+e)]})}}u(aS,"propTypes",{postListIds:E.array.isRequired,focusedPostId:E.string,channelId:E.string.isRequired,autoRetryEnable:E.bool,atOldestPost:E.bool,atLatestPost:E.bool,loadingNewerPosts:E.bool,loadingOlderPosts:E.bool,intl:Uo.isRequired,latestPostTimeStamp:E.number,latestAriaLabelFunc:E.func,lastViewedAt:E.string,actions:E.shape({loadOlderPosts:E.func.isRequired,loadNewerPosts:E.func.isRequired,canLoadMorePosts:E.func.isRequired,checkAndSetMobileView:E.func.isRequired,changeUnreadChunkTimeStamp:E.func.isRequired,updateNewMessagesAtInChannel:E.func.isRequired}).isRequired});var lS=f(aS);class cS extends w.PureComponent{constructor(e){super(e),u(this,"autoRetriesCount"),u(this,"loadingMorePosts"),u(this,"actionsForPostList"),u(this,"mounted"),u(this,"extraPagesLoaded"),u(this,"postsOnLoad",(async e=>{const{focusedPostId:t,isFirstLoad:n,latestPostTimeStamp:r,isPrefetchingInProcess:s,actions:i}=this.props;t?await i.loadPostsAround(e,this.props.focusedPostId):n?s||await i.loadUnreads(e):r?await i.syncPostsInChannel(e,this.props.latestPostTimeStamp,!1):await i.loadLatestPosts(e),t||this.markChannelAsReadAndViewed(e),this.mounted&&this.setState({loadingOlderPosts:!1,loadingNewerPosts:!1})})),u(this,"callLoadPosts",(async(e,t,n)=>{const{error:r}=await this.props.actions.loadPosts({channelId:e,postId:t,type:n});return n===rs.BEFORE_ID?this.setState({loadingOlderPosts:!1}):this.setState({loadingNewerPosts:!1}),r?this.autoRetriesCount<3?(this.autoRetriesCount++,await this.callLoadPosts(e,t,n)):this.mounted&&this.setState({autoRetryEnable:!1}):(this.mounted&&this.setState({autoRetryEnable:!0}),this.state.autoRetryEnable||(this.autoRetriesCount=0)),{error:r}})),u(this,"markChannelAsReadAndViewed",(e=>{this.props.actions.markChannelAsViewed(e),this.props.actions.markChannelAsRead(e)})),u(this,"getOldestVisiblePostId",(()=>is(this.props.postListIds))),u(this,"getLatestVisiblePostId",(()=>ss(this.props.postListIds))),u(this,"canLoadMorePosts",(async(e=rs.BEFORE_ID)=>{this.props.postListIds&&(this.state.loadingOlderPosts||this.state.loadingNewerPosts||(this.extraPagesLoaded>10?this.state.autoRetryEnable&&this.setState({autoRetryEnable:!1}):(this.props.atOldestPost||e!==rs.BEFORE_ID?this.props.atLatestPost||await this.getPostsAfter():await this.getPostsBefore(),this.extraPagesLoaded+=1)))})),u(this,"getPostsBefore",(async()=>{if(this.state.loadingOlderPosts)return;const e=this.getOldestVisiblePostId();this.setState({loadingOlderPosts:!0}),await this.callLoadPosts(this.props.channelId,e,rs.BEFORE_ID)})),u(this,"getPostsAfter",(async()=>{if(this.state.loadingNewerPosts)return;const e=this.getLatestVisiblePostId();this.setState({loadingNewerPosts:!0}),await this.callLoadPosts(this.props.channelId,e,rs.AFTER_ID)})),this.state={loadingNewerPosts:!1,loadingOlderPosts:!1,autoRetryEnable:!0},this.mounted=!1,this.autoRetriesCount=0,this.loadingMorePosts=null,this.extraPagesLoaded=0,this.actionsForPostList={loadOlderPosts:this.getPostsBefore,loadNewerPosts:this.getPostsAfter,checkAndSetMobileView:e.actions.checkAndSetMobileView,canLoadMorePosts:this.canLoadMorePosts,changeUnreadChunkTimeStamp:e.changeUnreadChunkTimeStamp,updateNewMessagesAtInChannel:this.props.actions.updateNewMessagesAtInChannel}}componentDidMount(){this.mounted=!0,this.props.channelId&&this.postsOnLoad(this.props.channelId)}componentDidUpdate(e){this.props.channelId!==e.channelId&&this.postsOnLoad(this.props.channelId)}componentWillUnmount(){this.props.channelManuallyUnread||this.markChannelAsReadAndViewed(this.props.channelId),this.mounted=!1}render(){return this.props.postListIds?d(lS,{loadingNewerPosts:this.state.loadingNewerPosts,loadingOlderPosts:this.state.loadingOlderPosts,atOldestPost:this.props.atOldestPost,atLatestPost:this.props.atLatestPost,focusedPostId:this.props.focusedPostId,channelId:this.props.channelId,autoRetryEnable:this.state.autoRetryEnable,actions:this.actionsForPostList,postListIds:this.props.formattedPostIds,latestPostTimeStamp:this.props.latestPostTimeStamp,latestAriaLabelFunc:this.props.latestAriaLabelFunc,latestPostId:this.props.latestPostId},"postlist-"+this.props.channelId):d(os,{})}}const uS=(e,t)=>!e.entities.posts.postsInChannel[t],dS=He((e=>ss(e)));var pS=g((function(){const e=as(),t=Xr(),n=kr();return function(r,s){let i,o,a,l,c=0,u=!1,d=!1;const{focusedPostId:p,unreadChunkTimeStamp:h,channelId:f}=s,m=r.views.channel,g=m.lastChannelViewTime[f],v=m.channelPrefetchStatus[f]===ls.STARTED,y=Qr(r,f);if(o=p&&0!==h?e(r,p,f):h?cs(r,f,h):us(r,f),o&&(i=o.order,u=!!o.recent,d=!!o.oldest),i&&(a=t(r,{postIds:i,lastViewedAt:g,indicateNewMessages:!0,channelId:f}),i.length)){const e=dS(i),t=Pe(r,e);c=t.create_at,l=n(r,t)}return{lastViewedAt:g,isFirstLoad:uS(r,f),formattedPostIds:a,atLatestPost:u,atOldestPost:d,latestPostTimeStamp:c,postListIds:i,latestAriaLabelFunc:l,isPrefetchingInProcess:v,channelManuallyUnread:y}}}),(function(e){return{actions:y({loadUnreads:xo,loadPosts:wo,loadLatestPosts:_o,loadPostsAround:Co,checkAndSetMobileView:So,syncPostsInChannel:Eo,markChannelAsViewed:ds,markChannelAsRead:ps,updateNewMessagesAtInChannel:To},e)}}))(cS);var hS="u3-cxx-0a3960a1";class fS extends w.PureComponent{constructor(e){super(e),u(this,"changeUnreadChunkTimeStamp",(e=>{this.setState({unreadChunkTimeStamp:e,loaderForChangeOfPostsChunk:!0},(()=>{window.requestAnimationFrame((()=>{this.setState({loaderForChangeOfPostsChunk:!1})}))}))})),this.state={unreadChunkTimeStamp:e.lastViewedAt,loaderForChangeOfPostsChunk:!1,channelLoading:e.channelLoading}}static getDerivedStateFromProps(e,t){return null===t.unreadChunkTimeStamp&&e.lastViewedAt?{unreadChunkTimeStamp:e.lastViewedAt}:e.channelLoading!==t.channelLoading?{unreadChunkTimeStamp:e.lastViewedAt,channelLoading:e.channelLoading}:null}render(){return this.props.channelLoading||this.state.loaderForChangeOfPostsChunk?d("div",{id:"post-list",className:x(hS,"bg-main-content"),children:d(os,{})}):b("div",{id:"post-list",className:x(hS,"bg-main-content"),role:"main",children:[d("div",{className:"filter-x",children:""}),d(pS,{match:this.props.match,unreadChunkTimeStamp:this.state.unreadChunkTimeStamp,channelId:this.props.channelId,changeUnreadChunkTimeStamp:this.changeUnreadChunkTimeStamp,focusedPostId:this.props.focusedPostId})]})}}var mS=g((function(){return function(e,t){const n=bn(e,t.match.params.team);let r;const s=ce(e,t.channelId);let i=e.views.channel.lastChannelViewTime[t.channelId];s&&(s.type===G.DM_CHANNEL&&s.teammate_id&&(r=$(e,s.teammate_id)),i=s.last_post_at?i:s.last_post_at);const o=hs(e);return{lastViewedAt:i,channelLoading:((e,t,n,r,s)=>{const i=e.params;if(i.postid)return!1;if(t&&n){if(t.type!==G.DM_CHANNEL&&t.name!==i.identifier)return!0;if(t.type===G.DM_CHANNEL&&r&&i.identifier!==`@${r.username}`)return!0;const e=n.id;return!!(t.team_id&&t.team_id!==e||s&&!s[e])}return!0})(t.match,s,n,r,o)}}}))(fS);function gS(e){return{type:vn.SET_SHOW_PREVIEW_ON_CREATE_POST,showPreview:e}}function vS(e){return async(t,n)=>{const r=n().plugins.components.MessageWillBePosted;if(!r||0===r.length)return{data:e};let s=e;for(const e of r){const t=await e.hook(s);if(t){if(t.error)return{error:t.error};s=t.post}}return{data:s}}}function yS(e,t){return async(n,r)=>{const s=r().plugins.components.SlashCommandWillBePosted;if(!s||0===s.length)return{data:{message:e,args:t}};let i=e,o=t;for(const e of s){const t=await e.hook(i,o);if(t){if(t.error)return{error:t.error};if(i=t.message,o=t.args,0===Object.keys(t).length)break}}return{data:{message:i,args:o}}}}function bS(e){return e.views.textbox.shouldShowPreviewOnCreatePost}function xS(e){if(-1===Array.from(e.types).indexOf("text/html"))return!1;const t=e.getData("text/html");if(!/<table/i.test(t))return!1;const n=function(e){const t=document.createElement("div");return t.innerHTML=e,t.querySelector("table")}(t);return n||!1}function wS(e){return null==e.textContent?" ":e.textContent.trim().replace(/\|/g,"\\|").replace(/\n/g," ")}function _S(e,t,n){const r=Array.from(e.querySelectorAll("tr")),s=r.shift(),i=s?(o=s,Array.from(o.querySelectorAll("td, th")).map(wS)):[];var o;const a=i.map((()=>"---")),l=`${`|${i.join(" | ")}|\n|${a.join(" | ")}|\n`}${r.map((e=>`|${Array.from(e.querySelectorAll("td")).map(wS).join(" | ")}|`)).join("\n")}\n`;if(!t)return l;if(void 0===n)return`${t}\n\n${l}`;return[t.slice(0,n),l,t.slice(n)].join("\n")}var CS=Zi.jsx;var SS=function(e){return CS("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},e)),{children:CS("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})}))};var ES="u3-cxx-be71408f",TS="u3-cxx-542c91a7",AS="u3-cxx-1b2f1b85",PS="u3-cxx-99e44d1e",IS=e=>{const{emoji:t,spriteClassName:n}=e;return d("div",{className:x(PS),children:d("img",{alt:t.aliases.join(" - "),src:Ne(t),className:n,onClick:()=>{e.onItemClick(e.emoji)},role:"button"})})};const NS=["smile","laughing","rofl","thumbsup","heart","slightly_frowning_face","neutral_face","sunglasses","scream","roll_eyes","vietnam","beated","after-boom","go","matrix","beat-brick","embarrassed","byebye","burn-joss-stick","sexy-girl","too-sad","boss","tire","hahaha","beauty","pudency"];var MS=g((function(e){return{customEmojisEnabled:"true"===e.entities.general.config.EnableCustomEmoji,customEmojiPage:e.views.emoji.emojiPickerCustomPage,emojiMap:Ie(e),recentEmojis:Ar(e),activeEmojis:NS}}))((e=>{const[t,n]=p.exports.useState(e.show),[r,s]=p.exports.useState(!1),[i,o]=p.exports.useState([]),l=p.exports.useRef(null);let c;const u=()=>{e.target()&&l.current&&(c=Vl(e.target(),l.current,{placement:"top",strategy:"absolute",modifiers:[{name:"offset",options:{offset:[0,2]}}],onFirstUpdate:e=>{s(!0)}}))};return p.exports.useEffect((()=>(u(),()=>{c&&c.destroy()})),[]),p.exports.useEffect((()=>{t||s(!1),c?c.update():u()}),[t]),p.exports.useEffect((()=>{n(e.show)}),[e.show]),p.exports.useEffect((()=>{const{activeEmojis:t}=e;let n=[];Tr.forEach((e=>{const r=e.map((e=>xr[e])).filter((e=>{var n;return!(n=t,!(e.aliases.findIndex((e=>n.includes(e)))>-1))}));n=n.concat(r)})),n=n.map((e=>{const t=a({},e);return t.filename=function(e){return e.filename||e.id}(e),t})),o(n)}),[e.recentEmojis]),d(p.exports.Fragment,t?{children:d("div",{role:"emoji-popper",ref:l,className:x(ES,{"u3-opacity-0 u3-invisible":!r}),children:d("div",{className:TS,children:d("div",{className:AS,children:i.map(((t,n)=>d(IS,{emoji:t,onItemClick:e.onEmojiClick},`${t.filename}-${n}`)))})})})}:{})})),RS=Zi.jsx;var OS=function(e){return RS("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},e)),{children:RS("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})}))};var kS="u3-cxx-3ee96595",LS="u3-cxx-312828d4",DS="u3-cxx-ffa562df",jS="u3-cxx-0968d6ac",US="u3-cxx-6754df96",HS="u3-cxx-a30aa549",FS="u3-cxx-436fa8ee",BS="u3-cxx-11934687",qS="u3-cxx-5043b508";class zS extends w.PureComponent{constructor(){super(...arguments),u(this,"handleRemove",(()=>{this.props.handleRemove(this.props.clientId)}))}render(){let e,t,n=0;const{fileInfo:r,clientId:s}=this.props;let i="0%";if(r){n=r.percent?r.percent:0,i=`${n.toFixed(0)}%`;const s=function(e){const t=e.split("/"),n=t[0],r=t[1];if("video"===n)return"video";if("audio"===n)return"audio";if("image"===n)return"image";if(r){if("pdf"===r)return"pdf";if(r.includes("vnd.ms-excel")||r.includes("spreadsheetml")||r.includes("vnd.sun.xml.calc")||r.includes("opendocument.spreadsheet"))return"spreadsheet";if(r.includes("vnd.ms-powerpoint")||r.includes("presentationml")||r.includes("vnd.sun.xml.impress")||r.includes("opendocument.presentation"))return"presentation";if("msword"===r||r.includes("vnd.ms-word")||r.includes("officedocument.wordprocessingml")||r.includes("application/x-mswrite"))return"word"}return"other"}(r.type);$n(s),e=b("div",{className:"u3-text-xs",children:[d(_w,{fileInfo:r,compactDisplay:!1,canDownload:!1}),d("span",{className:"post-image__uploadingTxt",children:100===n?d(P,{id:"create_post.fileProcessing",defaultMessage:"Processing..."}):d(w.Fragment,{children:d(P,{id:"admin.plugin.uploading",defaultMessage:"Uploading..."})})})]}),n&&(t=d("div",{className:"u3-absolute u3-bottom-0 u3-left-0 u3-w-full",children:d("div",{className:"u3-overflow-hidden u3-h-0.5 u3-text-xs u3-flex u3-rounded u3-bg-blue-200",children:d("div",{style:{width:`${n}%`},className:"u3-shadow-none u3-flex u3-flex-col u3-text-center u3-whitespace-nowrap u3-text-white u3-justify-center u3-bg-blue-500"})})}))}return b("div",{ref:s,className:x(LS,"file-preview post-image__column"),"data-client-id":s,children:[d("div",{className:DS,children:d("span",{className:"u3-block u3-text-center u3-py-2",children:i})}),b("div",{className:US,children:[d("div",{className:HS,children:d("div",{className:"post-image__detail u3-text-sm",children:e})}),d("a",{className:qS,onClick:this.handleRemove,children:d(jC,{className:"u3-w-3 u3-h-3"})})]}),t]},s)}}class VS extends w.PureComponent{constructor(){super(...arguments),u(this,"handleRemove",(e=>{this.props.onRemove(e)}))}render(){const e=[];if(this.props.fileInfos.forEach((t=>{var n;const r=Ae(t.extension);let s,i="file-preview post-image__column";if(r===Te.SVG&&this.props.enableSVGs)s=d("img",{alt:"file preview",className:"post-image normal",src:xg(t.id),loading:"lazy"});else if(r===Te.IMAGE){let e="post-image";t.width&&t.width<G.THUMBNAIL_WIDTH&&t.height&&t.height<G.THUMBNAIL_HEIGHT?e+=" small":e+=" normal";let r=_g(t.id,null==(n=t.preview_path)?void 0:n.replace("_preview.jpg","_thumb.jpg"));Yn(t.extension)&&!t.has_preview_image&&(r=xg(t.id)),s=d("div",{className:x(jS,e),style:{backgroundImage:`url(${r})`,backgroundSize:"cover"}})}else i+=" custom-file",s=d("div",{className:"file-icon "+$n(r),children:d(OS,{className:"u3-w-8 u3-h-8 u3-text-blue-500 u3-m-1"})});e.push(b("div",{className:x(LS,i),children:[d("div",{className:DS,children:s}),b("div",{className:US,children:[d("div",{className:HS,children:b("div",{className:"post-image__detail u3-px-0.5",children:[d(_w,{fileInfo:t,compactDisplay:!1,canDownload:!1}),t.extension&&d("span",{className:FS,children:t.extension.toUpperCase()}),d("span",{className:BS,children:xe(t.size)})]})}),d("a",{className:qS,onClick:this.handleRemove.bind(this,t.id),children:d(jC,{className:"u3-w-3 u3-h-3"})})]})]},t.id))})),this.props.uploadsInProgress&&this.props.uploadsProgressPercent){const t=this.props.uploadsProgressPercent;this.props.uploadsInProgress.forEach((n=>{const r=t[n];r&&e.push(d(zS,{clientId:n,fileInfo:r,handleRemove:this.handleRemove},n))}))}return d("div",{className:x(kS,"file-preview__container"),ref:"container",children:e})}}u(VS,"defaultProps",{fileInfos:[],uploadsInProgress:[],uploadsProgressPercent:{}});var GS=g((function(e){return{enableSVGs:"true"===W(e).EnableSVGs}}))(VS),WS={exports:{}},KS={exports:{}};!function(e){function t(e){if(e)return function(e){for(var n in t.prototype)e[n]=t.prototype[n];return e}(e)}KS.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},t.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var s=0;s<r.length;s++)if((n=r[s])===t||n.fn===t){r.splice(s,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var s=(n=n.slice(0)).length;r<s;++r)n[r].apply(this,t)}return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}}();var YS=JS;JS.default=JS,JS.stable=nE,JS.stableStringify=nE;var $S=[],XS=[];function QS(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function JS(e,t,n,r){var s;void 0===r&&(r=QS()),eE(e,"",0,[],void 0,0,r);try{s=0===XS.length?JSON.stringify(e,t,n):JSON.stringify(e,sE(t),n)}catch(o){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==$S.length;){var i=$S.pop();4===i.length?Object.defineProperty(i[0],i[1],i[3]):i[0][i[1]]=i[2]}}return s}function ZS(e,t,n,r){var s=Object.getOwnPropertyDescriptor(r,n);void 0!==s.get?s.configurable?(Object.defineProperty(r,n,{value:e}),$S.push([r,n,t,s])):XS.push([t,n,e]):(r[n]=e,$S.push([r,n,t]))}function eE(e,t,n,r,s,i,o){var a;if(i+=1,"object"==typeof e&&null!==e){for(a=0;a<r.length;a++)if(r[a]===e)return void ZS("[Circular]",e,t,s);if(void 0!==o.depthLimit&&i>o.depthLimit)return void ZS("[...]",e,t,s);if(void 0!==o.edgesLimit&&n+1>o.edgesLimit)return void ZS("[...]",e,t,s);if(r.push(e),Array.isArray(e))for(a=0;a<e.length;a++)eE(e[a],a,a,r,e,i,o);else{var l=Object.keys(e);for(a=0;a<l.length;a++){var c=l[a];eE(e[c],c,a,r,e,i,o)}}r.pop()}}function tE(e,t){return e<t?-1:e>t?1:0}function nE(e,t,n,r){void 0===r&&(r=QS());var s,i=rE(e,"",0,[],void 0,0,r)||e;try{s=0===XS.length?JSON.stringify(i,t,n):JSON.stringify(i,sE(t),n)}catch(a){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==$S.length;){var o=$S.pop();4===o.length?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return s}function rE(e,t,n,r,s,i,o){var a;if(i+=1,"object"==typeof e&&null!==e){for(a=0;a<r.length;a++)if(r[a]===e)return void ZS("[Circular]",e,t,s);try{if("function"==typeof e.toJSON)return}catch(d){return}if(void 0!==o.depthLimit&&i>o.depthLimit)return void ZS("[...]",e,t,s);if(void 0!==o.edgesLimit&&n+1>o.edgesLimit)return void ZS("[...]",e,t,s);if(r.push(e),Array.isArray(e))for(a=0;a<e.length;a++)rE(e[a],a,a,r,e,i,o);else{var l={},c=Object.keys(e).sort(tE);for(a=0;a<c.length;a++){var u=c[a];rE(e[u],u,a,r,e,i,o),l[u]=e[u]}if(void 0===s)return l;$S.push([s,t,e]),s[t]=l}r.pop()}}function sE(e){return e=void 0!==e?e:function(e,t){return t},function(t,n){if(XS.length>0)for(var r=0;r<XS.length;r++){var s=XS[r];if(s[1]===t&&s[0]===n){n=s[2],XS.splice(r,1);break}}return e.call(this,t,n)}}var iE="undefined"!=typeof Symbol&&Symbol,oE=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var s=Object.getOwnPropertyDescriptor(e,t);if(42!==s.value||!0!==s.enumerable)return!1}return!0},aE="Function.prototype.bind called on incompatible ",lE=Array.prototype.slice,cE=Object.prototype.toString,uE=function(e){var t=this;if("function"!=typeof t||"[object Function]"!==cE.call(t))throw new TypeError(aE+t);for(var n,r=lE.call(arguments,1),s=function(){if(this instanceof n){var s=t.apply(this,r.concat(lE.call(arguments)));return Object(s)===s?s:this}return t.apply(e,r.concat(lE.call(arguments)))},i=Math.max(0,t.length-r.length),o=[],a=0;a<i;a++)o.push("$"+a);if(n=Function("binder","return function ("+o.join(",")+"){ return binder.apply(this,arguments); }")(s),t.prototype){var l=function(){};l.prototype=t.prototype,n.prototype=new l,l.prototype=null}return n},dE=Function.prototype.bind||uE,pE=dE.call(Function.call,Object.prototype.hasOwnProperty),hE=SyntaxError,fE=Function,mE=TypeError,gE=function(e){try{return fE('"use strict"; return ('+e+").constructor;")()}catch(t){}},vE=Object.getOwnPropertyDescriptor;if(vE)try{vE({},"")}catch(YP){vE=null}var yE=function(){throw new mE},bE=vE?function(){try{return yE}catch(e){try{return vE(arguments,"callee").get}catch(t){return yE}}}():yE,xE="function"==typeof iE&&"function"==typeof Symbol&&"symbol"==typeof iE("foo")&&"symbol"==typeof Symbol("bar")&&oE(),wE=Object.getPrototypeOf||function(e){return e.__proto__},_E={},CE="undefined"==typeof Uint8Array?undefined:wE(Uint8Array),SE={"%AggregateError%":"undefined"==typeof AggregateError?undefined:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?undefined:ArrayBuffer,"%ArrayIteratorPrototype%":xE?wE([][Symbol.iterator]()):undefined,"%AsyncFromSyncIteratorPrototype%":undefined,"%AsyncFunction%":_E,"%AsyncGenerator%":_E,"%AsyncGeneratorFunction%":_E,"%AsyncIteratorPrototype%":_E,"%Atomics%":"undefined"==typeof Atomics?undefined:Atomics,"%BigInt%":"undefined"==typeof BigInt?undefined:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?undefined:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?undefined:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?undefined:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?undefined:FinalizationRegistry,"%Function%":fE,"%GeneratorFunction%":_E,"%Int8Array%":"undefined"==typeof Int8Array?undefined:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?undefined:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?undefined:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":xE?wE(wE([][Symbol.iterator]())):undefined,"%JSON%":"object"==typeof JSON?JSON:undefined,"%Map%":"undefined"==typeof Map?undefined:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&xE?wE((new Map)[Symbol.iterator]()):undefined,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?undefined:Promise,"%Proxy%":"undefined"==typeof Proxy?undefined:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?undefined:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?undefined:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&xE?wE((new Set)[Symbol.iterator]()):undefined,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?undefined:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":xE?wE(""[Symbol.iterator]()):undefined,"%Symbol%":xE?Symbol:undefined,"%SyntaxError%":hE,"%ThrowTypeError%":bE,"%TypedArray%":CE,"%TypeError%":mE,"%Uint8Array%":"undefined"==typeof Uint8Array?undefined:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?undefined:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?undefined:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?undefined:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?undefined:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?undefined:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?undefined:WeakSet},EE=function e(t){var n;if("%AsyncFunction%"===t)n=gE("async function () {}");else if("%GeneratorFunction%"===t)n=gE("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=gE("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var s=e("%AsyncGenerator%");s&&(n=wE(s.prototype))}return SE[t]=n,n},TE={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},AE=dE,PE=pE,IE=AE.call(Function.call,Array.prototype.concat),NE=AE.call(Function.apply,Array.prototype.splice),ME=AE.call(Function.call,String.prototype.replace),RE=AE.call(Function.call,String.prototype.slice),OE=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,kE=/\\(\\)?/g,LE=function(e){var t=RE(e,0,1),n=RE(e,-1);if("%"===t&&"%"!==n)throw new hE("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new hE("invalid intrinsic syntax, expected opening `%`");var r=[];return ME(e,OE,(function(e,t,n,s){r[r.length]=n?ME(s,kE,"$1"):t||e})),r},DE=function(e,t){var n,r=e;if(PE(TE,r)&&(r="%"+(n=TE[r])[0]+"%"),PE(SE,r)){var s=SE[r];if(s===_E&&(s=EE(r)),void 0===s&&!t)throw new mE("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:s}}throw new hE("intrinsic "+e+" does not exist!")},jE=function(e,t){if("string"!=typeof e||0===e.length)throw new mE("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new mE('"allowMissing" argument must be a boolean');var n=LE(e),r=n.length>0?n[0]:"",s=DE("%"+r+"%",t),i=s.name,o=s.value,a=!1,l=s.alias;l&&(r=l[0],NE(n,IE([0,1],l)));for(var c=1,u=!0;c<n.length;c+=1){var d=n[c],p=RE(d,0,1),h=RE(d,-1);if(('"'===p||"'"===p||"`"===p||'"'===h||"'"===h||"`"===h)&&p!==h)throw new hE("property names with quotes must have matching quotes");if("constructor"!==d&&u||(a=!0),PE(SE,i="%"+(r+="."+d)+"%"))o=SE[i];else if(null!=o){if(!(d in o)){if(!t)throw new mE("base intrinsic for "+e+" exists, but the property is not available.");return}if(vE&&c+1>=n.length){var f=vE(o,d);o=(u=!!f)&&"get"in f&&!("originalValue"in f.get)?f.get:o[d]}else u=PE(o,d),o=o[d];u&&!a&&(SE[i]=o)}}return o},UE={exports:{}};!function(e){var t=dE,n=jE,r=n("%Function.prototype.apply%"),s=n("%Function.prototype.call%"),i=n("%Reflect.apply%",!0)||t.call(s,r),o=n("%Object.getOwnPropertyDescriptor%",!0),a=n("%Object.defineProperty%",!0),l=n("%Math.max%");if(a)try{a({},"a",{value:1})}catch(YP){a=null}e.exports=function(e){var n=i(t,s,arguments);if(o&&a){var r=o(n,"length");r.configurable&&a(n,"length",{value:1+l(0,e.length-(arguments.length-1))})}return n};var c=function(){return i(t,r,arguments)};a?a(e.exports,"apply",{value:c}):e.exports.apply=c}(UE);var HE=jE,FE=UE.exports,BE=FE(HE("String.prototype.indexOf")),qE=H(Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:{}})),zE="function"==typeof Map&&Map.prototype,VE=Object.getOwnPropertyDescriptor&&zE?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,GE=zE&&VE&&"function"==typeof VE.get?VE.get:null,WE=zE&&Map.prototype.forEach,KE="function"==typeof Set&&Set.prototype,YE=Object.getOwnPropertyDescriptor&&KE?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,$E=KE&&YE&&"function"==typeof YE.get?YE.get:null,XE=KE&&Set.prototype.forEach,QE="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,JE="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,ZE="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,eT=Boolean.prototype.valueOf,tT=Object.prototype.toString,nT=Function.prototype.toString,rT=String.prototype.match,sT="function"==typeof BigInt?BigInt.prototype.valueOf:null,iT=Object.getOwnPropertySymbols,oT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,aT="function"==typeof Symbol&&"object"==typeof Symbol.iterator,lT=Object.prototype.propertyIsEnumerable,cT=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null),uT=qE.custom,dT=uT&&gT(uT)?uT:null,pT="function"==typeof Symbol&&void 0!==Symbol.toStringTag?Symbol.toStringTag:null;function hT(e,t,n){var r="double"===(n.quoteStyle||t)?'"':"'";return r+e+r}function fT(e){return String(e).replace(/"/g,"&quot;")}function mT(e){return!("[object Array]"!==bT(e)||pT&&"object"==typeof e&&pT in e)}function gT(e){if(aT)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!oT)return!1;try{return oT.call(e),!0}catch(YP){}return!1}var vT=Object.prototype.hasOwnProperty||function(e){return e in this};function yT(e,t){return vT.call(e,t)}function bT(e){return tT.call(e)}function xT(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function wT(e,t){if(e.length>t.maxStringLength){var n=e.length-t.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return wT(e.slice(0,t.maxStringLength),t)+r}return hT(e.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,_T),"single",t)}function _T(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+t.toString(16).toUpperCase()}function CT(e){return"Object("+e+")"}function ST(e){return e+" { ? }"}function ET(e,t,n,r){return e+" ("+t+") {"+(r?TT(n,r):n.join(", "))+"}"}function TT(e,t){if(0===e.length)return"";var n="\n"+t.prev+t.base;return n+e.join(","+n)+"\n"+t.prev}function AT(e,t){var n=mT(e),r=[];if(n){r.length=e.length;for(var s=0;s<e.length;s++)r[s]=yT(e,s)?t(e[s],e):""}var i,o="function"==typeof iT?iT(e):[];if(aT){i={};for(var a=0;a<o.length;a++)i["$"+o[a]]=o[a]}for(var l in e)yT(e,l)&&(n&&String(Number(l))===l&&l<e.length||aT&&i["$"+l]instanceof Symbol||(/[^\w$]/.test(l)?r.push(t(l,e)+": "+t(e[l],e)):r.push(l+": "+t(e[l],e))));if("function"==typeof iT)for(var c=0;c<o.length;c++)lT.call(e,o[c])&&r.push("["+t(o[c])+"]: "+t(e[o[c]],e));return r}var PT=jE,IT=function(e,t){var n=HE(e,!!t);return"function"==typeof n&&BE(e,".prototype.")>-1?FE(n):n},NT=function e(t,n,r,s){var i=n||{};if(yT(i,"quoteStyle")&&"single"!==i.quoteStyle&&"double"!==i.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(yT(i,"maxStringLength")&&("number"==typeof i.maxStringLength?i.maxStringLength<0&&i.maxStringLength!==1/0:null!==i.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=!yT(i,"customInspect")||i.customInspect;if("boolean"!=typeof o&&"symbol"!==o)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(yT(i,"indent")&&null!==i.indent&&"\t"!==i.indent&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return wT(t,i);if("number"==typeof t)return 0===t?1/0/t>0?"0":"-0":String(t);if("bigint"==typeof t)return String(t)+"n";var a=void 0===i.depth?5:i.depth;if(void 0===r&&(r=0),r>=a&&a>0&&"object"==typeof t)return mT(t)?"[Array]":"[Object]";var l=function(e,t){var n;if("\t"===e.indent)n="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;n=Array(e.indent+1).join(" ")}return{base:n,prev:Array(t+1).join(n)}}(i,r);if(void 0===s)s=[];else if(xT(s,t)>=0)return"[Circular]";function c(t,n,o){if(n&&(s=s.slice()).push(n),o){var a={depth:i.depth};return yT(i,"quoteStyle")&&(a.quoteStyle=i.quoteStyle),e(t,a,r+1,s)}return e(t,i,r+1,s)}if("function"==typeof t){var u=function(e){if(e.name)return e.name;var t=rT.call(nT.call(e),/^function\s*([\w$]+)/);if(t)return t[1];return null}(t),d=AT(t,c);return"[Function"+(u?": "+u:" (anonymous)")+"]"+(d.length>0?" { "+d.join(", ")+" }":"")}if(gT(t)){var p=aT?String(t).replace(/^(Symbol\(.*\))_[^)]*$/,"$1"):oT.call(t);return"object"!=typeof t||aT?p:CT(p)}if(function(e){if(!e||"object"!=typeof e)return!1;if("undefined"!=typeof HTMLElement&&e instanceof HTMLElement)return!0;return"string"==typeof e.nodeName&&"function"==typeof e.getAttribute}(t)){for(var h="<"+String(t.nodeName).toLowerCase(),f=t.attributes||[],m=0;m<f.length;m++)h+=" "+f[m].name+"="+hT(fT(f[m].value),"double",i);return h+=">",t.childNodes&&t.childNodes.length&&(h+="..."),h+="</"+String(t.nodeName).toLowerCase()+">"}if(mT(t)){if(0===t.length)return"[]";var g=AT(t,c);return l&&!function(e){for(var t=0;t<e.length;t++)if(xT(e[t],"\n")>=0)return!1;return!0}(g)?"["+TT(g,l)+"]":"[ "+g.join(", ")+" ]"}if(function(e){return!("[object Error]"!==bT(e)||pT&&"object"==typeof e&&pT in e)}(t)){var v=AT(t,c);return 0===v.length?"["+String(t)+"]":"{ ["+String(t)+"] "+v.join(", ")+" }"}if("object"==typeof t&&o){if(dT&&"function"==typeof t[dT])return t[dT]();if("symbol"!==o&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!GE||!e||"object"!=typeof e)return!1;try{GE.call(e);try{$E.call(e)}catch(h){return!0}return e instanceof Map}catch(YP){}return!1}(t)){var y=[];return WE.call(t,(function(e,n){y.push(c(n,t,!0)+" => "+c(e,t))})),ET("Map",GE.call(t),y,l)}if(function(e){if(!$E||!e||"object"!=typeof e)return!1;try{$E.call(e);try{GE.call(e)}catch(t){return!0}return e instanceof Set}catch(YP){}return!1}(t)){var b=[];return XE.call(t,(function(e){b.push(c(e,t))})),ET("Set",$E.call(t),b,l)}if(function(e){if(!QE||!e||"object"!=typeof e)return!1;try{QE.call(e,QE);try{JE.call(e,JE)}catch(h){return!0}return e instanceof WeakMap}catch(YP){}return!1}(t))return ST("WeakMap");if(function(e){if(!JE||!e||"object"!=typeof e)return!1;try{JE.call(e,JE);try{QE.call(e,QE)}catch(h){return!0}return e instanceof WeakSet}catch(YP){}return!1}(t))return ST("WeakSet");if(function(e){if(!ZE||!e||"object"!=typeof e)return!1;try{return ZE.call(e),!0}catch(YP){}return!1}(t))return ST("WeakRef");if(function(e){return!("[object Number]"!==bT(e)||pT&&"object"==typeof e&&pT in e)}(t))return CT(c(Number(t)));if(function(e){if(!e||"object"!=typeof e||!sT)return!1;try{return sT.call(e),!0}catch(YP){}return!1}(t))return CT(c(sT.call(t)));if(function(e){return!("[object Boolean]"!==bT(e)||pT&&"object"==typeof e&&pT in e)}(t))return CT(eT.call(t));if(function(e){return!("[object String]"!==bT(e)||pT&&"object"==typeof e&&pT in e)}(t))return CT(c(String(t)));if(!function(e){return!("[object Date]"!==bT(e)||pT&&"object"==typeof e&&pT in e)}(t)&&!function(e){return!("[object RegExp]"!==bT(e)||pT&&"object"==typeof e&&pT in e)}(t)){var x=AT(t,c),w=cT?cT(t)===Object.prototype:t instanceof Object||t.constructor===Object,_=t instanceof Object?"":"null prototype",C=!w&&pT&&Object(t)===t&&pT in t?bT(t).slice(8,-1):_?"Object":"",S=(w||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(C||_?"["+[].concat(C||[],_||[]).join(": ")+"] ":"");return 0===x.length?S+"{}":l?S+"{"+TT(x,l)+"}":S+"{ "+x.join(", ")+" }"}return String(t)},MT=PT("%TypeError%"),RT=PT("%WeakMap%",!0),OT=PT("%Map%",!0),kT=IT("WeakMap.prototype.get",!0),LT=IT("WeakMap.prototype.set",!0),DT=IT("WeakMap.prototype.has",!0),jT=IT("Map.prototype.get",!0),UT=IT("Map.prototype.set",!0),HT=IT("Map.prototype.has",!0),FT=function(e,t){for(var n,r=e;null!==(n=r.next);r=n)if(n.key===t)return r.next=n.next,n.next=e.next,e.next=n,n},BT=String.prototype.replace,qT=/%20/g,zT="RFC3986",VT={default:zT,formatters:{RFC1738:function(e){return BT.call(e,qT,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738",RFC3986:zT},GT=VT,WT=Object.prototype.hasOwnProperty,KT=Array.isArray,YT=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),$T=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)void 0!==e[r]&&(n[r]=e[r]);return n},XT={arrayToObject:$T,assign:function(e,t){return Object.keys(t).reduce((function(e,n){return e[n]=t[n],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var s=t[r],i=s.obj[s.prop],o=Object.keys(i),a=0;a<o.length;++a){var l=o[a],c=i[l];"object"==typeof c&&null!==c&&-1===n.indexOf(c)&&(t.push({obj:i,prop:l}),n.push(c))}return function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(KT(n)){for(var r=[],s=0;s<n.length;++s)void 0!==n[s]&&r.push(n[s]);t.obj[t.prop]=r}}}(t),e},decode:function(e,t,n){var r=e.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(YP){return r}},encode:function(e,t,n,r,s){if(0===e.length)return e;var i=e;if("symbol"==typeof e?i=Symbol.prototype.toString.call(e):"string"!=typeof e&&(i=String(e)),"iso-8859-1"===n)return escape(i).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var o="",a=0;a<i.length;++a){var l=i.charCodeAt(a);45===l||46===l||95===l||126===l||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||s===GT.RFC1738&&(40===l||41===l)?o+=i.charAt(a):l<128?o+=YT[l]:l<2048?o+=YT[192|l>>6]+YT[128|63&l]:l<55296||l>=57344?o+=YT[224|l>>12]+YT[128|l>>6&63]+YT[128|63&l]:(a+=1,l=65536+((1023&l)<<10|1023&i.charCodeAt(a)),o+=YT[240|l>>18]+YT[128|l>>12&63]+YT[128|l>>6&63]+YT[128|63&l])}return o},isBuffer:function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(KT(e)){for(var n=[],r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)},merge:function e(t,n,r){if(!n)return t;if("object"!=typeof n){if(KT(t))t.push(n);else{if(!t||"object"!=typeof t)return[t,n];(r&&(r.plainObjects||r.allowPrototypes)||!WT.call(Object.prototype,n))&&(t[n]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(n);var s=t;return KT(t)&&!KT(n)&&(s=$T(t,r)),KT(t)&&KT(n)?(n.forEach((function(n,s){if(WT.call(t,s)){var i=t[s];i&&"object"==typeof i&&n&&"object"==typeof n?t[s]=e(i,n,r):t.push(n)}else t[s]=n})),t):Object.keys(n).reduce((function(t,s){var i=n[s];return WT.call(t,s)?t[s]=e(t[s],i,r):t[s]=i,t}),s)}},QT=function(){var e,t,n,r={assert:function(e){if(!r.has(e))throw new MT("Side channel does not contain "+NT(e))},get:function(r){if(RT&&r&&("object"==typeof r||"function"==typeof r)){if(e)return kT(e,r)}else if(OT){if(t)return jT(t,r)}else if(n)return function(e,t){var n=FT(e,t);return n&&n.value}(n,r)},has:function(r){if(RT&&r&&("object"==typeof r||"function"==typeof r)){if(e)return DT(e,r)}else if(OT){if(t)return HT(t,r)}else if(n)return function(e,t){return!!FT(e,t)}(n,r);return!1},set:function(r,s){RT&&r&&("object"==typeof r||"function"==typeof r)?(e||(e=new RT),LT(e,r,s)):OT?(t||(t=new OT),UT(t,r,s)):(n||(n={key:{},next:null}),function(e,t,n){var r=FT(e,t);r?r.value=n:e.next={key:t,next:e.next,value:n}}(n,r,s))}};return r},JT=XT,ZT=VT,eA=Object.prototype.hasOwnProperty,tA={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},nA=Array.isArray,rA=Array.prototype.push,sA=function(e,t){rA.apply(e,nA(t)?t:[t])},iA=Date.prototype.toISOString,oA=ZT.default,aA={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:JT.encode,encodeValuesOnly:!1,format:oA,formatter:ZT.formatters[oA],indices:!1,serializeDate:function(e){return iA.call(e)},skipNulls:!1,strictNullHandling:!1},lA=function e(t,n,r,s,i,o,a,l,c,u,d,p,h,f,m){var g,v=t;if(m.has(t))throw new RangeError("Cyclic object value");if("function"==typeof a?v=a(n,v):v instanceof Date?v=u(v):"comma"===r&&nA(v)&&(v=JT.maybeMap(v,(function(e){return e instanceof Date?u(e):e}))),null===v){if(s)return o&&!h?o(n,aA.encoder,f,"key",d):n;v=""}if("string"==typeof(g=v)||"number"==typeof g||"boolean"==typeof g||"symbol"==typeof g||"bigint"==typeof g||JT.isBuffer(v))return o?[p(h?n:o(n,aA.encoder,f,"key",d))+"="+p(o(v,aA.encoder,f,"value",d))]:[p(n)+"="+p(String(v))];var y,b=[];if(void 0===v)return b;if("comma"===r&&nA(v))y=[{value:v.length>0?v.join(",")||null:void 0}];else if(nA(a))y=a;else{var x=Object.keys(v);y=l?x.sort(l):x}for(var w=0;w<y.length;++w){var _=y[w],C="object"==typeof _&&void 0!==_.value?_.value:v[_];if(!i||null!==C){var S=nA(v)?"function"==typeof r?r(n,_):n:n+(c?"."+_:"["+_+"]");m.set(t,!0);var E=QT();sA(b,e(C,S,r,s,i,o,a,l,c,u,d,p,h,f,E))}}return b},cA=XT,uA=Object.prototype.hasOwnProperty,dA=Array.isArray,pA={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:cA.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},hA=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},fA=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},mA=function(e,t,n,r){if(e){var s=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,i=/(\[[^[\]]*])/g,o=n.depth>0&&/(\[[^[\]]*])/.exec(s),a=o?s.slice(0,o.index):s,l=[];if(a){if(!n.plainObjects&&uA.call(Object.prototype,a)&&!n.allowPrototypes)return;l.push(a)}for(var c=0;n.depth>0&&null!==(o=i.exec(s))&&c<n.depth;){if(c+=1,!n.plainObjects&&uA.call(Object.prototype,o[1].slice(1,-1))&&!n.allowPrototypes)return;l.push(o[1])}return o&&l.push("["+s.slice(o.index)+"]"),function(e,t,n,r){for(var s=r?t:fA(t,n),i=e.length-1;i>=0;--i){var o,a=e[i];if("[]"===a&&n.parseArrays)o=[].concat(s);else{o=n.plainObjects?Object.create(null):{};var l="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,c=parseInt(l,10);n.parseArrays||""!==l?!isNaN(c)&&a!==l&&String(c)===l&&c>=0&&n.parseArrays&&c<=n.arrayLimit?(o=[])[c]=s:o[l]=s:o={0:s}}s=o}return s}(l,t,n,r)}},gA={formats:VT,parse:function(e,t){var n=function(e){if(!e)return pA;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?pA.charset:e.charset;return{allowDots:void 0===e.allowDots?pA.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:pA.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:pA.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:pA.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:pA.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:pA.comma,decoder:"function"==typeof e.decoder?e.decoder:pA.decoder,delimiter:"string"==typeof e.delimiter||cA.isRegExp(e.delimiter)?e.delimiter:pA.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:pA.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:pA.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:pA.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:pA.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:pA.strictNullHandling}}(t);if(""===e||null==e)return n.plainObjects?Object.create(null):{};for(var r="string"==typeof e?function(e,t){var n,r={},s=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,i=t.parameterLimit===1/0?void 0:t.parameterLimit,o=s.split(t.delimiter,i),a=-1,l=t.charset;if(t.charsetSentinel)for(n=0;n<o.length;++n)0===o[n].indexOf("utf8=")&&("utf8=%E2%9C%93"===o[n]?l="utf-8":"utf8=%26%2310003%3B"===o[n]&&(l="iso-8859-1"),a=n,n=o.length);for(n=0;n<o.length;++n)if(n!==a){var c,u,d=o[n],p=d.indexOf("]="),h=-1===p?d.indexOf("="):p+1;-1===h?(c=t.decoder(d,pA.decoder,l,"key"),u=t.strictNullHandling?null:""):(c=t.decoder(d.slice(0,h),pA.decoder,l,"key"),u=cA.maybeMap(fA(d.slice(h+1),t),(function(e){return t.decoder(e,pA.decoder,l,"value")}))),u&&t.interpretNumericEntities&&"iso-8859-1"===l&&(u=hA(u)),d.indexOf("[]=")>-1&&(u=dA(u)?[u]:u),uA.call(r,c)?r[c]=cA.combine(r[c],u):r[c]=u}return r}(e,n):e,s=n.plainObjects?Object.create(null):{},i=Object.keys(r),o=0;o<i.length;++o){var a=i[o],l=mA(a,r[a],n,"string"==typeof e);s=cA.merge(s,l,n)}return!0===n.allowSparse?s:cA.compact(s)},stringify:function(e,t){var n,r=e,s=function(e){if(!e)return aA;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||aA.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=ZT.default;if(void 0!==e.format){if(!eA.call(ZT.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var r=ZT.formatters[n],s=aA.filter;return("function"==typeof e.filter||nA(e.filter))&&(s=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:aA.addQueryPrefix,allowDots:void 0===e.allowDots?aA.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:aA.charsetSentinel,delimiter:void 0===e.delimiter?aA.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:aA.encode,encoder:"function"==typeof e.encoder?e.encoder:aA.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:aA.encodeValuesOnly,filter:s,format:n,formatter:r,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:aA.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:aA.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:aA.strictNullHandling}}(t);"function"==typeof s.filter?r=(0,s.filter)("",r):nA(s.filter)&&(n=s.filter);var i,o=[];if("object"!=typeof r||null===r)return"";i=t&&t.arrayFormat in tA?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var a=tA[i];n||(n=Object.keys(r)),s.sort&&n.sort(s.sort);for(var l=QT(),c=0;c<n.length;++c){var u=n[c];s.skipNulls&&null===r[u]||sA(o,lA(r[u],u,a,s.strictNullHandling,s.skipNulls,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,l))}var d=o.join(s.delimiter),p=!0===s.addQueryPrefix?"?":"";return s.charsetSentinel&&("iso-8859-1"===s.charset?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),d.length>0?p+d:""}};function vA(e){return(vA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var yA=function(e){return null!==e&&"object"===vA(e)};function bA(e){return(bA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var xA=yA,wA=_A;function _A(e){if(e)return function(e){for(var t in _A.prototype)Object.prototype.hasOwnProperty.call(_A.prototype,t)&&(e[t]=_A.prototype[t]);return e}(e)}_A.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),clearTimeout(this._uploadTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,delete this._uploadTimeoutTimer,this},_A.prototype.parse=function(e){return this._parser=e,this},_A.prototype.responseType=function(e){return this._responseType=e,this},_A.prototype.serialize=function(e){return this._serializer=e,this},_A.prototype.timeout=function(e){if(!e||"object"!==bA(e))return this._timeout=e,this._responseTimeout=0,this._uploadTimeout=0,this;for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))switch(t){case"deadline":this._timeout=e.deadline;break;case"response":this._responseTimeout=e.response;break;case"upload":this._uploadTimeout=e.upload;break;default:console.warn("Unknown timeout option",t)}return this},_A.prototype.retry=function(e,t){return 0!==arguments.length&&!0!==e||(e=1),e<=0&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=t,this};var CA=new Set(["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"]),SA=new Set([408,413,429,500,502,503,504,521,522,524]);_A.prototype._shouldRetry=function(e,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var n=this._retryCallback(e,t);if(!0===n)return!0;if(!1===n)return!1}catch(r){console.error(r)}if(t&&t.status&&SA.has(t.status))return!0;if(e){if(e.code&&CA.has(e.code))return!0;if(e.timeout&&"ECONNABORTED"===e.code)return!0;if(e.crossDomain)return!0}return!1},_A.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this.timedoutError=null,this._end()},_A.prototype.then=function(e,t){var n=this;if(!this._fullfilledPromise){var r=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise((function(e,t){r.on("abort",(function(){if(!(n._maxRetries&&n._maxRetries>n._retries))if(n.timedout&&n.timedoutError)t(n.timedoutError);else{var e=new Error("Aborted");e.code="ABORTED",e.status=n.status,e.method=n.method,e.url=n.url,t(e)}})),r.end((function(n,r){n?t(n):e(r)}))}))}return this._fullfilledPromise.then(e,t)},_A.prototype.catch=function(e){return this.then(void 0,e)},_A.prototype.use=function(e){return e(this),this},_A.prototype.ok=function(e){if("function"!=typeof e)throw new Error("Callback required");return this._okCallback=e,this},_A.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):e.status>=200&&e.status<300)},_A.prototype.get=function(e){return this._header[e.toLowerCase()]},_A.prototype.getHeader=_A.prototype.get,_A.prototype.set=function(e,t){if(xA(e)){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&this.set(n,e[n]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},_A.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},_A.prototype.field=function(e,t){if(null==e)throw new Error(".field(name, val) name can not be empty");if(this._data)throw new Error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()");if(xA(e)){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&this.field(n,e[n]);return this}if(Array.isArray(t)){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&this.field(e,t[r]);return this}if(null==t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=String(t)),this._getFormData().append(e,t),this},_A.prototype.abort=function(){return this._aborted||(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort")),this},_A.prototype._auth=function(e,t,n,r){switch(n.type){case"basic":this.set("Authorization","Basic ".concat(r("".concat(e,":").concat(t))));break;case"auto":this.username=e,this.password=t;break;case"bearer":this.set("Authorization","Bearer ".concat(e))}return this},_A.prototype.withCredentials=function(e){return void 0===e&&(e=!0),this._withCredentials=e,this},_A.prototype.redirects=function(e){return this._maxRedirects=e,this},_A.prototype.maxResponseSize=function(e){if("number"!=typeof e)throw new TypeError("Invalid argument");return this._maxResponseSize=e,this},_A.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},_A.prototype.send=function(e){var t=xA(e),n=this._header["content-type"];if(this._formData)throw new Error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()");if(t&&!this._data)Array.isArray(e)?this._data=[]:this._isHost(e)||(this._data={});else if(e&&this._data&&this._isHost(this._data))throw new Error("Can't merge these send calls");if(t&&xA(this._data))for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(this._data[r]=e[r]);else"string"==typeof e?(n||this.type("form"),(n=this._header["content-type"])&&(n=n.toLowerCase().trim()),this._data="application/x-www-form-urlencoded"===n?this._data?"".concat(this._data,"&").concat(e):e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)||n||this.type("json"),this},_A.prototype.sortQuery=function(e){return this._sort=void 0===e||e,this},_A.prototype._finalizeQueryString=function(){var e=this._query.join("&");if(e&&(this.url+=(this.url.includes("?")?"&":"?")+e),this._query.length=0,this._sort){var t=this.url.indexOf("?");if(t>=0){var n=this.url.slice(t+1).split("&");"function"==typeof this._sort?n.sort(this._sort):n.sort(),this.url=this.url.slice(0,t)+"?"+n.join("&")}}},_A.prototype._appendQueryString=function(){console.warn("Unsupported")},_A.prototype._timeoutError=function(e,t,n){if(!this._aborted){var r=new Error("".concat(e+t,"ms exceeded"));r.timeout=t,r.code="ECONNABORTED",r.errno=n,this.timedout=!0,this.timedoutError=r,this.abort(),this.callback(r)}},_A.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout((function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")}),this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout((function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")}),this._responseTimeout))};var EA={};function TA(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return AA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AA(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,s=function(){};return{s:s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function AA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}EA.type=function(e){return e.split(/ *; */).shift()},EA.params=function(e){var t,n={},r=TA(e.split(/ *; */));try{for(r.s();!(t=r.n()).done;){var s=t.value.split(/ *= */),i=s.shift(),o=s.shift();i&&o&&(n[i]=o)}}catch(a){r.e(a)}finally{r.f()}return n},EA.parseLinks=function(e){var t,n={},r=TA(e.split(/ *, */));try{for(r.s();!(t=r.n()).done;){var s=t.value.split(/ *; */),i=s[0].slice(1,-1);n[s[1].split(/ *= */)[1].slice(1,-1)]=i}}catch(o){r.e(o)}finally{r.f()}return n},EA.cleanHeader=function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&(delete e.authorization,delete e.cookie),e};var PA=EA,IA=NA;function NA(e){if(e)return function(e){for(var t in NA.prototype)Object.prototype.hasOwnProperty.call(NA.prototype,t)&&(e[t]=NA.prototype[t]);return e}(e)}function MA(e){return function(e){if(Array.isArray(e))return RA(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return RA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RA(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function OA(){this._defaults=[]}NA.prototype.get=function(e){return this.header[e.toLowerCase()]},NA.prototype._setHeaderProperties=function(e){var t=e["content-type"]||"";this.type=PA.type(t);var n=PA.params(t);for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(this[r]=n[r]);this.links={};try{e.link&&(this.links=PA.parseLinks(e.link))}catch(s){}},NA.prototype._setStatusProperties=function(e){var t=e/100|0;this.statusCode=e,this.status=this.statusCode,this.statusType=t,this.info=1===t,this.ok=2===t,this.redirect=3===t,this.clientError=4===t,this.serverError=5===t,this.error=(4===t||5===t)&&this.toError(),this.created=201===e,this.accepted=202===e,this.noContent=204===e,this.badRequest=400===e,this.unauthorized=401===e,this.notAcceptable=406===e,this.forbidden=403===e,this.notFound=404===e,this.unprocessableEntity=422===e},["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert","disableTLSCerts"].forEach((function(e){OA.prototype[e]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this._defaults.push({fn:e,args:n}),this}})),OA.prototype._setDefaults=function(e){this._defaults.forEach((function(t){e[t.fn].apply(e,MA(t.args))}))};var kA=OA;!function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r;"undefined"!=typeof window?r=window:"undefined"==typeof self?(console.warn("Using browser-only version of superagent in non-browser environment"),r=void 0):r=self;var s=KS.exports,i=YS,o=gA,a=wA,l=yA,c=IA,u=kA;function d(){}e.exports=function(e,n){return"function"==typeof n?new t.Request("GET",e).end(n):1===arguments.length?new t.Request("GET",e):new t.Request(e,n)};var p=t=e.exports;t.Request=b,p.getXHR=function(){if(r.XMLHttpRequest&&(!r.location||"file:"!==r.location.protocol||!r.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(n){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(s){}throw new Error("Browser-only version of superagent could not find XHR")};var h="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};function f(e){if(!l(e))return e;var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&m(t,n,e[n]);return t.join("&")}function m(e,t,n){if(void 0!==n)if(null!==n)if(Array.isArray(n))n.forEach((function(n){m(e,t,n)}));else if(l(n))for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&m(e,"".concat(t,"[").concat(r,"]"),n[r]);else e.push(encodeURI(t)+"="+encodeURIComponent(n));else e.push(encodeURI(t))}function g(e){for(var t,n,r={},s=e.split("&"),i=0,o=s.length;i<o;++i)-1===(n=(t=s[i]).indexOf("="))?r[decodeURIComponent(t)]="":r[decodeURIComponent(t.slice(0,n))]=decodeURIComponent(t.slice(n+1));return r}function v(e){return/[/+]json($|[^-\w])/i.test(e)}function y(e){this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!==this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var t=this.xhr.status;1223===t&&(t=204),this._setStatusProperties(t),this.headers=function(e){for(var t,n,r,s,i=e.split(/\r?\n/),o={},a=0,l=i.length;a<l;++a)-1!==(t=(n=i[a]).indexOf(":"))&&(r=n.slice(0,t).toLowerCase(),s=h(n.slice(t+1)),o[r]=s);return o}(this.xhr.getAllResponseHeaders()),this.header=this.headers,this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&e._responseType?this.body=this.xhr.response:this.body="HEAD"===this.req.method?null:this._parseBody(this.text?this.text:this.xhr.response)}function b(e,t){var n=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",(function(){var e,t=null,r=null;try{r=new y(n)}catch(s){return(t=new Error("Parser is unable to parse the response")).parse=!0,t.original=s,n.xhr?(t.rawResponse=void 0===n.xhr.responseType?n.xhr.responseText:n.xhr.response,t.status=n.xhr.status?n.xhr.status:null,t.statusCode=t.status):(t.rawResponse=null,t.status=null),n.callback(t)}n.emit("response",r);try{n._isResponseOK(r)||(e=new Error(r.statusText||r.text||"Unsuccessful HTTP response"))}catch(s){e=s}e?(e.original=t,e.response=r,e.status=r.status,n.callback(e,r)):n.callback(null,r)}))}function x(e,t,n){var r=p("DELETE",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r}p.serializeObject=f,p.parseString=g,p.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},p.serialize={"application/x-www-form-urlencoded":o.stringify,"application/json":i},p.parse={"application/x-www-form-urlencoded":g,"application/json":JSON.parse},c(y.prototype),y.prototype._parseBody=function(e){var t=p.parse[this.type];return this.req._parser?this.req._parser(this,e):(!t&&v(this.type)&&(t=p.parse["application/json"]),t&&e&&(e.length>0||e instanceof Object)?t(e):null)},y.prototype.toError=function(){var e=this.req,t=e.method,n=e.url,r="cannot ".concat(t," ").concat(n," (").concat(this.status,")"),s=new Error(r);return s.status=this.status,s.method=t,s.url=n,s},p.Response=y,s(b.prototype),a(b.prototype),b.prototype.type=function(e){return this.set("Content-Type",p.types[e]||e),this},b.prototype.accept=function(e){return this.set("Accept",p.types[e]||e),this},b.prototype.auth=function(e,t,r){1===arguments.length&&(t=""),"object"===n(t)&&null!==t&&(r=t,t=""),r||(r={type:"function"==typeof btoa?"basic":"auto"});var s=function(e){if("function"==typeof btoa)return btoa(e);throw new Error("Cannot use basic auth, btoa is not a function")};return this._auth(e,t,r,s)},b.prototype.query=function(e){return"string"!=typeof e&&(e=f(e)),e&&this._query.push(e),this},b.prototype.attach=function(e,t,n){if(t){if(this._data)throw new Error("superagent can't mix .send() and .attach()");this._getFormData().append(e,t,n||t.name)}return this},b.prototype._getFormData=function(){return this._formData||(this._formData=new r.FormData),this._formData},b.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();var n=this._callback;this.clearTimeout(),e&&(this._maxRetries&&(e.retries=this._retries-1),this.emit("error",e)),n(e,t)},b.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},b.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},b.prototype.ca=b.prototype.agent,b.prototype.buffer=b.prototype.ca,b.prototype.write=function(){throw new Error("Streaming is not supported in browser version of superagent")},b.prototype.pipe=b.prototype.write,b.prototype._isHost=function(e){return e&&"object"===n(e)&&!Array.isArray(e)&&"[object Object]"!==Object.prototype.toString.call(e)},b.prototype.end=function(e){this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||d,this._finalizeQueryString(),this._end()},b.prototype._setUploadTimeout=function(){var e=this;this._uploadTimeout&&!this._uploadTimeoutTimer&&(this._uploadTimeoutTimer=setTimeout((function(){e._timeoutError("Upload timeout of ",e._uploadTimeout,"ETIMEDOUT")}),this._uploadTimeout))},b.prototype._end=function(){if(this._aborted)return this.callback(new Error("The request has been aborted even before .end() was called"));var e=this;this.xhr=p.getXHR();var t=this.xhr,n=this._formData||this._data;this._setTimeouts(),t.onreadystatechange=function(){var n=t.readyState;if(n>=2&&e._responseTimeoutTimer&&clearTimeout(e._responseTimeoutTimer),4===n){var r;try{r=t.status}catch(s){r=0}if(!r){if(e.timedout||e._aborted)return;return e.crossDomainError()}e.emit("end")}};var r=function(t,n){n.total>0&&(n.percent=n.loaded/n.total*100,100===n.percent&&clearTimeout(e._uploadTimeoutTimer)),n.direction=t,e.emit("progress",n)};if(this.hasListeners("progress"))try{t.addEventListener("progress",r.bind(null,"download")),t.upload&&t.upload.addEventListener("progress",r.bind(null,"upload"))}catch(a){}t.upload&&this._setUploadTimeout();try{this.username&&this.password?t.open(this.method,this.url,!0,this.username,this.password):t.open(this.method,this.url,!0)}catch(l){return this.callback(l)}if(this._withCredentials&&(t.withCredentials=!0),!this._formData&&"GET"!==this.method&&"HEAD"!==this.method&&"string"!=typeof n&&!this._isHost(n)){var s=this._header["content-type"],i=this._serializer||p.serialize[s?s.split(";")[0]:""];!i&&v(s)&&(i=p.serialize["application/json"]),i&&(n=i(n))}for(var o in this.header)null!==this.header[o]&&Object.prototype.hasOwnProperty.call(this.header,o)&&t.setRequestHeader(o,this.header[o]);this._responseType&&(t.responseType=this._responseType),this.emit("request",this),t.send(void 0===n?null:n)},p.agent=function(){return new u},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach((function(e){u.prototype[e.toLowerCase()]=function(t,n){var r=new p.Request(e,t);return this._setDefaults(r),n&&r.end(n),r}})),u.prototype.del=u.prototype.delete,p.get=function(e,t,n){var r=p("GET",e);return"function"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},p.head=function(e,t,n){var r=p("HEAD",e);return"function"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},p.options=function(e,t,n){var r=p("OPTIONS",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},p.del=x,p.delete=x,p.patch=function(e,t,n){var r=p("PATCH",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},p.post=function(e,t,n){var r=p("POST",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},p.put=function(e,t,n){var r=p("PUT",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r}}(WS,WS.exports);var LA=WS.exports;function DA(e,t,n,r,s){return r=>(r({type:fs.UPLOAD_FILES_REQUEST}),LA.post(J.getFilesRoute()).set(J.getOptions({method:"post"}).headers).field("channel_id",n).field("client_ids",s).attach("files",e,t).accept("application/json"))}function jA(e,t,n,r,s,{err:i,res:o}){return(e,t)=>{if(i){let a;a=o&&o.body&&o.body.id?o.body:0!==i.status&&i.status?{message:ye("channel_loader.unknown_error","We received an unexpected status code from the server.")+" ("+i.status+")"}:{message:ye("file_upload.generic_error","There was a problem uploading your files.")},ms(i,e,t);const l={type:fs.UPLOAD_FILES_FAILURE,clientIds:[s],channelId:n,rootId:r,error:i};return e(F([l,gs(i)])),{error:a}}const c=o.body.file_infos.map(((e,t)=>l(a({},e),{clientId:o.body.client_ids[t]})));return e(F([{type:fs.RECEIVED_UPLOAD_FILES,data:c,channelId:n,rootId:r},{type:fs.UPLOAD_FILES_SUCCESS}])),{data:o.body}}}var UA="u3-cxx-f0b05e65",HA="u3-cxx-eb5d77c1";const FA=B({limited:{id:ht("file_upload.limited"),defaultMessage:"Uploads limited to {count, number} files maximum. Please use additional posts for more files."},filesAbove:{id:ht("file_upload.filesAbove"),defaultMessage:"Files above {max}MB could not be uploaded: {filenames}"},fileAbove:{id:ht("file_upload.fileAbove"),defaultMessage:"File above {max}MB could not be uploaded: {filename}"},zeroBytesFiles:{id:ht("file_upload.zeroBytesFiles"),defaultMessage:"You are uploading empty files: {filenames}"},zeroBytesFile:{id:ht("file_upload.zeroBytesFile"),defaultMessage:"You are uploading an empty file: {filename}"},pasted:{id:ht("file_upload.pasted"),defaultMessage:"Image Pasted at "},uploadFile:{id:ht("file_upload.upload_files"),defaultMessage:"Upload files"}});class BA extends p.exports.PureComponent{constructor(e){super(e),u(this,"fileUploadSuccess",((e,t,n)=>{if(e){this.props.onFileUpload(e.file_infos,e.client_ids,t,n);const s=Object.assign({},this.state.requests);for(var r=0;r<e.client_ids.length;r++)Reflect.deleteProperty(s,e.client_ids[r]);this.setState({requests:s})}})),u(this,"fileUploadFail",((e,t,n,r)=>{this.props.onUploadError(e,t,n,r)})),u(this,"pluginUploadFiles",(e=>{this.props.onUploadError(null),this.uploadFiles(e)})),u(this,"checkPluginHooksAndUploadFiles",(e=>{this.props.onUploadError(null);let t=Array.from(e).sort(((e,t)=>e.name.localeCompare(t.name,this.props.locale,{numeric:!0})));const n=this.props.pluginFilesWillUploadHooks;for(const r of n){const e=r.hook(t,this.pluginUploadFiles);e.message&&this.props.onUploadError(e.message),t=e.files}t&&this.uploadFiles(t)})),u(this,"uploadFiles",(e=>{const{channelId:t,rootId:n}=this.props,r=G.MAX_UPLOAD_FILES-this.props.fileCount;let s=0;const i=[],o=[],c=[];for(let f=0;f<e.length&&s<r;f++){if(e[f].size>this.props.maxFileSize){i.push(e[f]);continue}0===e[f].size&&o.push(e[f]);const r=vs(),u=this.props.actions.uploadFile(e[f],e[f].name,t,n,r);u.on("progress",(t=>{this.props.onUploadProgress({clientId:r,name:e[f].name,percent:t.percent,type:e[f].type})})),u.end(((s,i)=>{const{error:o,data:a}=this.props.actions.handleFileUploadEnd(e[f],e[f].name,t,n,r,{err:s,res:i});o?this.fileUploadFail(o,r,t,n):a&&this.fileUploadSuccess(a,t,n)})),this.setState({requests:l(a({},this.state.requests),{[r]:u})}),c.push(r),s+=1}this.props.onUploadStart(c,t);const{formatMessage:u}=this.props.intl,d=[];if(e.length>r&&d.push(u(FA.limited,{count:G.MAX_UPLOAD_FILES})),i.length>1){var p=i.map((e=>e.name)).join(", ");d.push(u(FA.filesAbove,{max:this.props.maxFileSize/1048576,filenames:p}))}else i.length>0&&d.push(u(FA.fileAbove,{max:this.props.maxFileSize/1048576,filename:i[0].name}));if(o.length>1){var h=o.map((e=>e.name)).join(", ");d.push(u(FA.zeroBytesFiles,{filenames:h}))}else o.length>0&&d.push(u(FA.zeroBytesFile,{filename:o[0].name}));d.length>0&&this.props.onUploadError(d.join(", "))})),u(this,"handleChange",(e=>{e.target.files.length>0&&(this.checkPluginHooksAndUploadFiles(e.target.files),ys(e.target)),this.props.onFileUploadChange()})),u(this,"handleDrop",(e=>{if(!this.props.canUploadFiles)return void this.props.onUploadError(ye("file_upload.disabled","File attachments are disabled."));this.props.onUploadError(null);const t=e.dataTransfer.items||[],n=e.dataTransfer.files,r=[];Array.from(n).forEach(((e,n)=>{const s=t[n];s&&s.webkitGetAsEntry&&(null===s.webkitGetAsEntry()||s.webkitGetAsEntry().isDirectory)||r.push(e)}));const s=e.dataTransfer.types;if(s){if(bs(e.dataTransfer))return;if(s.includes&&!s.includes("Files"))return;if(s.contains&&!s.contains("Files"))return}0!==r.length?(r.length&&this.checkPluginHooksAndUploadFiles(r),this.props.onFileUploadChange()):this.props.onUploadError(ye("file_upload.drag_folder","Folders cannot be uploaded. Please drag all files separately."))})),u(this,"registerDragEvents",((e,t)=>{const n=this,r=document.querySelector(t),s=new Gb((()=>{r.classList.add("hidden")}));let i={};i=this.props.canUploadFiles?{enter(e){var t=e.detail.dataTransfer;!bs(t)&&_s(t)&&r.classList.remove("hidden")},leave(e){var t=e.detail.dataTransfer;!bs(t)&&_s(t)&&r.classList.add("hidden"),s.cancel()},over(){s.fireAfter(500)},drop(e){r.classList.add("hidden"),s.cancel(),n.handleDrop(e.detail)}}:{drop(e){n.handleDrop(e.detail)}},this.unbindDragsterEvents=function(e,t){const n=()=>{},r={enter:n,leave:n,over:n,drop:n},s=Object.assign(r,t),i=document.querySelector(e);if(!i)return n;let o=!1,a=!1;const l=e=>{if(o)return void(a=!0);o=!0;const t=new CustomEvent("dragster:enter",{detail:e});i.dispatchEvent(t),e.preventDefault()},c=e=>{if(a?a=!1:o&&(o=!1),!o&&!a){const t=new CustomEvent("dragster:leave",{detail:e});i.dispatchEvent(t)}e.preventDefault()},u=e=>{const t=new CustomEvent("dragster:over",{detail:e});i.dispatchEvent(t),e.preventDefault()},d=e=>{if(a?a=!1:o&&(o=!1),!o&&!a){const t=new CustomEvent("dragster:drop",{detail:e});i.dispatchEvent(t)}e.preventDefault()};return i.addEventListener("dragenter",l),i.addEventListener("dragleave",c),i.addEventListener("dragover",u),i.addEventListener("drop",d),i.addEventListener("dragster:enter",s.enter),i.addEventListener("dragster:leave",s.leave),i.addEventListener("dragster:over",s.over),i.addEventListener("dragster:drop",s.drop),()=>{i.removeEventListener("dragenter",l),i.removeEventListener("dragleave",c),i.removeEventListener("dragover",u),i.removeEventListener("drop",d),i.removeEventListener("dragster:enter",s.enter),i.removeEventListener("dragster:leave",s.leave),i.removeEventListener("dragster:over",s.over),i.removeEventListener("dragster:drop",s.drop)}}(e,i)})),u(this,"containsEventTarget",((e,t)=>e&&e.contains(t))),u(this,"pasteUpload",(e=>{const{formatMessage:t}=this.props.intl;if(!e.clipboardData||!e.clipboardData.items||xS(e.clipboardData))return;const n=this.props.getTarget(),r=A.findDOMNode(n);if(!this.containsEventTarget(r,e.target))return;this.props.onUploadError(null);const s=[];for(let a=0;a<e.clipboardData.items.length;a++){const t=e.clipboardData.items[a];"file"===t.kind&&s.push(t)}if(s&&s.length>0){if(!this.props.canUploadFiles)return void this.props.onUploadError(ye("file_upload.disabled","File attachments are disabled."));e.preventDefault();const n=[];for(let e=0;e<s.length;e++){const r=s[e].getAsFile();if(!r)continue;var i=new Date;let a=i.getHours();a=a<10?`0${a}`:`${a}`;let l=i.getMinutes();l=l<10?`0${l}`:`${l}`;var o="";r.name?r.name.includes(".")&&(o=r.name.substr(r.name.lastIndexOf("."))):s[e].type.includes("/")&&(o="."+s[e].type.split("/")[1].toLowerCase());const c=t(FA.pasted)+i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate()+" "+a+"-"+l+o,u=new Blob([r],{type:r.type});u.name=c,n.push(u)}n.length>0&&(this.checkPluginHooksAndUploadFiles(n),this.props.onFileUploadChange())}})),u(this,"keyUpload",(e=>{if(xs(e)&&Ee(e,G.KeyCodes.U)){if(e.preventDefault(),!this.props.canUploadFiles)return void this.props.onUploadError(ye("file_upload.disabled","File attachments are disabled."));const t="post"===this.props.postType&&"post_textbox"===document.activeElement.id,n="comment"===this.props.postType&&"reply_textbox"===document.activeElement.id;(t||n)&&(this.fileInput.current.focus(),this.fileInput.current.click())}})),u(this,"cancelUpload",(e=>{const t=Object.assign({},this.state.requests),n=t[e];n&&(n.abort(),Reflect.deleteProperty(t,e),this.setState({requests:t}))})),u(this,"handleMaxUploadReached",(e=>{e&&e.preventDefault();const{onUploadError:t}=this.props,{formatMessage:n}=this.props.intl;t(n(FA.limited,{count:G.MAX_UPLOAD_FILES}))})),u(this,"toggleMenu",(e=>{this.setState({menuOpen:e})})),u(this,"handleLocalFileUploaded",(e=>{G.MAX_UPLOAD_FILES-this.props.fileCount>0?this.props.onClick&&this.props.onClick():this.handleMaxUploadReached(e),this.setState({menuOpen:!1})})),u(this,"simulateInputClick",(e=>{e.preventDefault(),e.stopPropagation(),this.fileInput.current.click()})),this.state={requests:{},menuOpen:!1},this.fileInput=w.createRef()}componentDidMount(){"post"===this.props.postType?this.registerDragEvents(".row.main",".center-file-overlay"):"comment"===this.props.postType&&this.registerDragEvents(".post-right__container",".right-file-overlay"),document.addEventListener("paste",this.pasteUpload),document.addEventListener("keydown",this.keyUpload)}componentWillUnmount(){document.removeEventListener("paste",this.pasteUpload),document.removeEventListener("keydown",this.keyUpload),this.unbindDragsterEvents&&this.unbindDragsterEvents()}render(){const{formatMessage:e}=this.props.intl;let t=!0;be()&&(t=!1);let n="";ws()&&(n="image/*");const r=G.MAX_UPLOAD_FILES-this.props.fileCount;let s;const i=e({id:"accessibility.button.attachment",defaultMessage:"attachment"});return 0===this.props.pluginFileUploadMethods.length?s=b(p.exports.Fragment,{children:[d("button",{type:"button",id:"fileUploadButton","aria-label":i,className:x(HA,"style--none post-action icon icon--attachment"),onClick:this.simulateInputClick,onTouchEnd:this.simulateInputClick,children:d(ww,{className:"u3-w-6 u3-h-6 u3-text-gray-700 hover:u3-text-primary"})}),d("input",{id:"fileUploadInput",tabIndex:-1,"aria-label":e(FA.uploadFile),ref:this.fileInput,type:"file",onChange:this.handleChange,onClick:this.handleLocalFileUploaded,multiple:t,accept:n})]}):(this.props.pluginFileUploadMethods.map((e=>d("li",{onClick:()=>{e.action&&e.action(this.checkPluginHooksAndUploadFiles),this.setState({menuOpen:!1})},children:b("a",{href:"#",children:[d("span",{className:"mr-2",children:e.icon}),e.text]})},e.pluginId+"_fileuploadpluginmenuitem"))),s=d("div",{children:d("input",{tabIndex:-1,"aria-label":e(FA.uploadFile),ref:this.fileInput,type:"file",className:"file-attachment-menu-item-input",onChange:this.handleChange,onClick:this.handleLocalFileUploaded,multiple:t,accept:n})})),this.props.canUploadFiles||(s=null),d("div",{className:x(UA,"style--none",{"btn-file__disabled":r<=0}),children:s})}}u(BA,"propTypes",{channelId:E.string.isRequired,rootId:E.string,fileCount:E.number.isRequired,getTarget:E.func.isRequired,intl:Uo.isRequired,locale:E.string.isRequired,onClick:E.func,onFileUpload:E.func,onFileUploadChange:E.func,onUploadError:E.func,onUploadStart:E.func,postType:E.string,maxFileSize:E.number,canUploadFiles:E.bool.isRequired,pluginFileUploadMethods:E.arrayOf(E.object),pluginFilesWillUploadHooks:E.arrayOf(E.object),onUploadProgress:E.func.isRequired,actions:E.shape({uploadFile:E.func.isRequired,handleFileUploadEnd:E.func.isRequired}).isRequired}),u(BA,"defaultProps",{pluginFileUploadMethods:[],pluginFilesWillUploadHooks:[]});const qA=f(BA,{forwardRef:!0});qA.displayName="injectIntl(FileUpload)";var zA=g((function(e){const t=W(e);return{maxFileSize:parseInt(t.MaxFileSize,10),canUploadFiles:Ag(t),locale:Zn(e),pluginFileUploadMethods:e.plugins.components.FileUploadMethod,pluginFilesWillUploadHooks:e.plugins.components.FilesWillUploadHook}}),(function(e){return{actions:y({uploadFile:DA,handleFileUploadEnd:jA},e)}}),null,{forwardRef:!0})(qA),VA=e=>d("svg",{"aria-hidden":"true",focusable:"false",className:x(e.className),role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 496 512",children:d("path",{fill:"currentColor",d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 448c-110.3 0-200-89.7-200-200S137.7 56 248 56s200 89.7 200 200-89.7 200-200 200zm-80-216c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm160 0c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm4 72.6c-20.8 25-51.5 39.4-84 39.4s-63.2-14.3-84-39.4c-8.5-10.2-23.7-11.5-33.8-3.1-10.2 8.5-11.5 23.6-3.1 33.8 30 36 74.1 56.6 120.9 56.6s90.9-20.6 120.9-56.6c8.5-10.2 7.1-25.3-3.1-33.8-10.1-8.4-25.3-7.1-33.8 3.1z"})});const GA=w.forwardRef(((e,t)=>{const n=e,{component:r,title:{id:s,defaultMessage:i,values:o},className:u}=n,p=c(n,["component","title","className"]),{formatMessage:h}=I();return d("span",l(a({className:x("u3-inline-block",u)},p),{ref:t,title:h({id:s,defaultMessage:i},o),children:r}))}));GA.displayName="LocalizedIcon";class WA extends w.PureComponent{constructor(){super(...arguments),u(this,"renderSlashCommandError",(()=>{if(!this.props.submittedMessage)return this.props.error.message;const e=this.props.submittedMessage.split(" ")[0];return b(w.Fragment,{children:[d(P,{id:"message_submit_error.invalidCommand",defaultMessage:"Command with a trigger of ''{command}'' not found. ",values:{command:e}}),d("a",{href:"#",onClick:this.props.handleSubmit,children:d(P,{id:"message_submit_error.sendAsMessageLink",defaultMessage:"Click here to send as a message."})})]})}))}render(){const e=this.props.error;if(!e)return null;let t=e.message;return Cs(e)&&(t=this.renderSlashCommandError()),d("div",{className:"has-error",children:d("label",{className:"control-label",children:t})})}}function KA(e,t,n){return async(r,s)=>{const i=s();return We(i,{permission:Ke.USE_GROUP_MENTIONS,channel:n,team:t})?{data:oc(i,e,t,n)}:{data:[]}}}const YA=G.Integrations.EXECUTE_CURRENT_COMMAND_ITEM_ID,$A=G.KeyCodes,XA=class extends w.PureComponent{constructor(e){super(e),u(this,"handleMentionKeyClick",((e,t)=>{if(this.props.isRHS!==t)return;let n="@"+e;this.props.value&&/[^\s]$/.test(this.props.value)&&(n=" "+n),this.addTextAtCaret(n,"")})),u(this,"getTextbox",(()=>{if(!this.inputRef.current)return null;const e=this.inputRef.current.getInput();return e.getDOMNode?e.getDOMNode():e})),u(this,"recalculateSize",(()=>{const e=this.inputRef.current.getInput();e.recalculateSize&&e.recalculateSize()})),u(this,"handleEmitClearSuggestions",((e=0)=>{setTimeout((()=>{this.clear()}),e)})),u(this,"preventSuggestionListClose",(()=>{this.preventSuggestionListCloseFlag=!0})),u(this,"handleFocusOut",(e=>{this.preventSuggestionListCloseFlag?this.preventSuggestionListCloseFlag=!1:this.container.contains(e.relatedTarget)||Ss()&&!e.relatedTarget||(this.props.forceSuggestionsWhenBlur||this.handleEmitClearSuggestions(),this.setState({focused:!1}),this.props.onBlur&&this.props.onBlur())})),u(this,"handleFocusIn",(e=>{this.container.contains(e.relatedTarget)||this.preventSuggestionListCloseFlag||(this.setState({focused:!0}),(this.props.openOnFocus||this.props.openWhenEmpty)&&setTimeout((()=>{const e=this.getTextbox();if(e){const t=e.value.substring(0,e.selectionEnd);(this.props.openWhenEmpty||t.length>=this.props.requiredCharacters)&&this.pretext!==t&&this.handlePretextChanged(t)}})),this.props.onFocus&&this.props.onFocus())})),u(this,"handleChange",(e=>{const t=this.getTextbox(),n=t.value.substring(0,t.selectionEnd);this.composing||this.pretext===n||this.handlePretextChanged(n),this.props.onChange&&this.props.onChange(e)})),u(this,"handleCompositionStart",(()=>{this.composing=!0,this.props.onComposition&&this.props.onComposition()})),u(this,"handleCompositionUpdate",(e=>{if(!e.data)return;const t=this.getTextbox(),n=t.value.substring(0,t.selectionStart)+e.data;this.handlePretextChanged(n),this.props.onComposition&&this.props.onComposition()})),u(this,"handleCompositionEnd",(()=>{this.composing=!1,this.props.onComposition&&this.props.onComposition()})),u(this,"addTextAtCaret",((e,t)=>{const n=this.getTextbox(),r=n.selectionEnd,s=this.props.value,i=n.value.substring(0,n.selectionEnd);let o,a=!1;if(i.toLowerCase().endsWith(t.toLowerCase()))o=i.substring(0,i.length-t.length);else{const n=e.substring(t.length),r=XA.findOverlap(i,n);a=0===r.length,o=i.substring(0,i.length-r.length-t.length)}const l=s.substring(r);let c;if(c=a?i:o+e+" "+l,n.value=c,this.props.onChange){const e={target:n};this.props.onChange(e)}window.requestAnimationFrame((()=>{n.value===c&&Es(n,o.length+e.length+1)}))})),u(this,"replaceText",(e=>{const t=this.getTextbox();if(t.value=e,this.props.onChange){const e={target:t};this.props.onChange(e)}})),u(this,"handleCompleteWord",((e,t,n)=>{let r=e,s=!1;if(e.endsWith(YA)&&(r=e.substring(0,e.length-YA.length),s=!0),this.props.replaceAllInputOnSelect?this.replaceText(r):this.addTextAtCaret(r,t),this.props.onItemSelected){const e=this.state.items,t=this.state.terms;for(let n=0;n<t.length;n++)if(t[n]===r){this.props.onItemSelected(e[n]);break}}if(this.clear(),this.inputRef.current.focus(),s&&this.props.onKeyPress){let e=n;return n&&!Ee(n,G.KeyCodes.TAB)||(e=new KeyboardEvent("keydown",{bubbles:!0,cancelable:!0,keyCode:13}),n&&n.preventDefault()),this.props.onKeyPress(e),!0}if(!s)for(const i of this.props.providers)i.handleCompleteWord&&i.handleCompleteWord(r,t,this.handlePretextChanged);return!1})),u(this,"selectNext",(()=>{this.setSelectionByDelta(1)})),u(this,"selectPrevious",(()=>{this.setSelectionByDelta(-1)})),u(this,"setSelectionByDelta",(e=>{let t=this.state.terms.indexOf(this.state.selection);-1!==t?(t+=e,t<0?t=0:t>this.state.terms.length-1&&(t=this.state.terms.length-1),this.setState({selection:this.state.terms[t]})):this.setState({selection:""})})),u(this,"setSelection",(e=>{this.setState({selection:e})})),u(this,"clear",(()=>{this.state.cleared||(this.setState({cleared:!0,matchedPretext:[],terms:[],items:[],components:[],selection:"",suggestionBoxAlgn:{}}),this.handlePretextChanged(""))})),u(this,"hasSuggestions",(()=>this.state.items.some((e=>!e.loading)))),u(this,"handleKeyDown",(e=>{if((this.props.openWhenEmpty||this.props.value)&&this.hasSuggestions())if(Ee(e,$A.UP))this.selectPrevious(),e.preventDefault();else if(Ee(e,$A.DOWN))this.selectNext(),e.preventDefault();else if(Ee(e,$A.ENTER)||this.props.completeOnTab&&Ee(e,$A.TAB)){let t="";for(let e=0;e<this.state.terms.length;e++)this.state.terms[e]===this.state.selection&&(t=this.state.matchedPretext[e]);if(this.pretext.toLowerCase().endsWith(t.toLowerCase())){if(this.handleCompleteWord(this.state.selection,t,e))return}else clearTimeout(this.timeoutId),this.nonDebouncedPretextChanged(this.pretext,!0);this.props.onKeyDown&&this.props.onKeyDown(e),e.preventDefault()}else Ee(e,$A.ESCAPE)?(this.clear(),this.setState({presentationType:"text"}),e.preventDefault(),e.stopPropagation()):this.props.onKeyDown&&this.props.onKeyDown(e);else this.props.onKeyDown&&this.props.onKeyDown(e)})),u(this,"handleSelect",(e=>{this.props.onSelect&&this.props.onSelect(e)})),u(this,"handleReceivedSuggestions",(e=>{const t=[],n=[];this.props.onSuggestionsReceived&&this.props.onSuggestionsReceived(e);for(let o=0;o<e.terms.length;o++)t.push(e.component),n.push(e.matchedPretext);const r=e.terms,s=e.items;let i=this.state.selection;return r.length>0?i=r[0]:this.state.selection&&(i=""),this.setState({cleared:!1,selection:i,terms:r,items:s,components:t,matchedPretext:n}),{selection:i,matchedPretext:e.matchedPretext}})),u(this,"handleReceivedSuggestionsAndComplete",(e=>{const{selection:t,matchedPretext:n}=this.handleReceivedSuggestions(e);t&&this.handleCompleteWord(t,n)})),u(this,"nonDebouncedPretextChanged",((e,t=!1)=>{this.pretext=e;let n=!1,r=this.handleReceivedSuggestions;t&&(r=this.handleReceivedSuggestionsAndComplete);for(const s of this.props.providers)if(n=s.handlePretextChanged(e,r)||n,n){if(void 0===this.state.suggestionBoxAlgn.pixelsToMoveX&&void 0===this.state.suggestionBoxAlgn.pixelsToMoveY&&["@",":","~","/"].includes(s.triggerCharacter)){const e=s.triggerCharacter,t=Ts(e),n=As(this.getTextbox(),t,this.props.listStyle);this.setState({suggestionBoxAlgn:n})}this.setState({presentationType:s.presentationType(),allowDividers:s.allowDividers()});break}n||this.clear()})),u(this,"debouncedPretextChanged",(e=>{clearTimeout(this.timeoutId),this.timeoutId=setTimeout((()=>this.nonDebouncedPretextChanged(e)),G.SEARCH_TIMEOUT_MILLISECONDS)})),u(this,"handlePretextChanged",(e=>{this.pretext=e,this.debouncedPretextChanged(e)})),u(this,"blur",(()=>{this.inputRef.current.blur()})),u(this,"focus",(()=>{const e=this.inputRef.current.input;'""'===e.value||e.value.endsWith('""')?(e.selectionStart=e.value.length-1,e.selectionEnd=e.value.length-1):e.selectionStart=e.value.length,e.focus(),this.handleChange({target:this.inputRef.current})})),u(this,"setContainerRef",(e=>{this.container&&(this.container.removeEventListener("focusin",this.handleFocusIn),this.container.removeEventListener("focusout",this.handleFocusOut)),e&&(e.addEventListener("focusin",this.handleFocusIn),e.addEventListener("focusout",this.handleFocusOut)),this.container=e})),this.suggestionReadOut=w.createRef(),this.composing=!1,this.pretext="",this.timeoutId="",this.preventSuggestionListCloseFlag=!1,this.state={focused:!1,cleared:!0,matchedPretext:[],items:[],terms:[],components:[],selection:"",allowDividers:!0,presentationType:"text",suggestionBoxAlgn:{}},this.inputRef=w.createRef()}componentDidMount(){this.props.listenForMentionKeyClick&&es.addListener("mention_key_click",this.handleMentionKeyClick),this.handlePretextChanged(this.pretext)}componentWillUnmount(){es.removeListener("mention_key_click",this.handleMentionKeyClick)}componentDidUpdate(e){const{value:t}=this.props;if(""!==t||this.pretext===t){if(e.contextId!==this.props.contextId){const e=this.getTextbox(),t=e.value.substring(0,e.selectionEnd).toLowerCase();this.handlePretextChanged(t)}}else this.handlePretextChanged(t)}render(){const e=this.props,{listComponent:t,dateComponent:n,listStyle:r,renderNoResults:s}=e,i=c(e,["listComponent","dateComponent","listStyle","renderNoResults"]);return this.props.renderDividers&&this.state.allowDividers,Reflect.deleteProperty(i,"providers"),Reflect.deleteProperty(i,"onChange"),Reflect.deleteProperty(i,"onComposition"),Reflect.deleteProperty(i,"onItemSelected"),Reflect.deleteProperty(i,"completeOnTab"),Reflect.deleteProperty(i,"isRHS"),Reflect.deleteProperty(i,"requiredCharacters"),Reflect.deleteProperty(i,"openOnFocus"),Reflect.deleteProperty(i,"openWhenEmpty"),Reflect.deleteProperty(i,"onFocus"),Reflect.deleteProperty(i,"onBlur"),Reflect.deleteProperty(i,"containerClass"),Reflect.deleteProperty(i,"replaceAllInputOnSelect"),Reflect.deleteProperty(i,"renderDividers"),Reflect.deleteProperty(i,"contextId"),Reflect.deleteProperty(i,"listenForMentionKeyClick"),Reflect.deleteProperty(i,"wrapperHeight"),Reflect.deleteProperty(i,"forceSuggestionsWhenBlur"),Reflect.deleteProperty(i,"onSuggestionsReceived"),b("div",{ref:this.setContainerRef,className:this.props.containerClass,children:[d("div",{ref:this.suggestionReadOut,"aria-live":"polite",role:"alert",className:"sr-only"}),d(Iv,l(a({ref:this.inputRef,autoComplete:"off"},i),{onInput:this.handleChange,onCompositionStart:this.handleCompositionStart,onCompositionUpdate:this.handleCompositionUpdate,onCompositionEnd:this.handleCompositionEnd,onKeyDown:this.handleKeyDown,onSelect:this.handleSelect}))]})}static findOverlap(e,t){const n=e.toLowerCase(),r=t.toLowerCase();for(let s=r.length;s>0;s--){const e=r.substring(0,s);if(n.endsWith(e))return e}return""}};let QA=XA;u(QA,"propTypes",{listComponent:E.func.isRequired,inputComponent:E.elementType,dateComponent:E.func,value:E.string.isRequired,providers:E.arrayOf(E.object).isRequired,listStyle:E.string,containerClass:E.string,renderDividers:E.bool,renderNoResults:E.bool,completeOnTab:E.bool,onFocus:E.func,onBlur:E.func,onChange:E.func,onKeyDown:E.func,onKeyPress:E.func,onComposition:E.func,onSelect:E.func,onSearchTypeSelected:E.func,onItemSelected:E.func,isRHS:E.bool,requiredCharacters:E.number,openOnFocus:E.bool,disabled:E.bool,openWhenEmpty:E.bool,replaceAllInputOnSelect:E.bool,contextId:E.string,listenForMentionKeyClick:E.bool,wrapperHeight:E.number,onSuggestionsReceived:E.func,forceSuggestionsWhenBlur:E.bool}),u(QA,"defaultProps",{listStyle:"top",containerClass:"",renderDividers:!1,renderNoResults:!1,completeOnTab:!0,isRHS:!1,requiredCharacters:1,openOnFocus:!1,openWhenEmpty:!1,replaceAllInputOnSelect:!1,listenForMentionKeyClick:!1,forceSuggestionsWhenBlur:!1});class JA extends w.PureComponent{constructor(e){super(e),u(this,"getContent",(()=>$g(this.contentRef.current))),u(this,"scrollToItem",(e=>{const t=this.getContent();if(!t||0===t.length)return;const n=t[0].clientHeight;if(n<t[0].scrollHeight){const r=t.scrollTop(),s=parseInt(t.css("padding-top"),10),i=parseInt(t.css("padding-top"),10),o=$g(A.findDOMNode(this.itemRefs.get(e)));if(0===o.length)return;const a=o[0].offsetTop-parseInt(o.css("margin-top"),10),l=parseInt(o.css("margin-bottom"),10)+parseInt(o.css("padding-bottom"),10),c=o[0].offsetTop+o.height()+l;a-s<r?t.scrollTop(a-s):c+s+i>r+n&&t.scrollTop(c-n+s+i)}})),this.contentRef=w.createRef(),this.itemRefs=new Map,this.suggestionReadOut=w.createRef(),this.currentLabel="",this.currentItem={}}componentDidUpdate(e){this.props.selection!==e.selection&&this.props.selection&&this.scrollToItem(this.props.selection),Ps(this.currentItem)||this.generateLabel(this.currentItem)}componentWillUnmount(){this.removeLabel()}announceLabel(){const e=this.props.ariaLiveRef.current;e&&(e.innerHTML=this.currentLabel)}removeLabel(){const e=this.props.ariaLiveRef.current;e&&(e.innerHTML="")}generateLabel(e){e.username?(this.currentLabel=e.username,(e.first_name||e.last_name)&&e.nickname?this.currentLabel+=` ${e.first_name} ${e.last_name} ${e.nickname}`:e.nickname?this.currentLabel+=` ${e.nickname}`:(e.first_name||e.last_name)&&(this.currentLabel+=` ${e.first_name} ${e.last_name}`)):"mention.channels"===e.type&&(this.currentLabel=e.channel.display_name),this.currentLabel&&(this.currentLabel=this.currentLabel.toLowerCase()),this.announceLabel()}renderDivider(e){return d("div",{className:"suggestion-list__divider",children:d("span",{children:d(P,{id:"suggestion."+e})})},e+"-divider")}renderNoResults(){return d("div",{className:"suggestion-list__no-results",ref:this.contentRef,children:d(jo,{id:"suggestion_list.no_matches",defaultMessage:"No items match __{value}__",values:{value:this.props.pretext||'""'}})},"list-no-results")}render(){if(!this.props.open||this.props.cleared)return null;const e=[];if(0===this.props.items.length){if(!this.props.renderNoResults)return null;e.push(this.renderNoResults())}let t;for(let a=0;a<this.props.items.length;a++){const n=this.props.items[a],r=this.props.terms[a],s=r===this.props.selection,i=this.props.components[a];this.props.renderDividers&&n.type!==t&&(e.push(this.renderDivider(n.type)),t=n.type),n.loading?e.push(d(Ma,{},n.type)):(s&&(this.currentItem=n),e.push(d(i,{ref:e=>this.itemRefs.set(r,e),item:this.props.items[a],term:r,matchedPretext:this.props.matchedPretext[a],isSelection:s,onClick:this.props.onCompleteWord,onMouseMove:this.props.onItemHover},r)))}const n="suggestion-list suggestion-list--"+this.props.location,r="suggestion-list__content suggestion-list__content--"+this.props.location;let s=G.SUGGESTION_LIST_MAXHEIGHT;this.props.wrapperHeight&&(s=Math.min(Is()-(this.props.wrapperHeight+G.POST_MODAL_PADDING),G.SUGGESTION_LIST_MAXHEIGHT));const i={maxHeight:s},{pixelsToMoveX:o,pixelsToMoveY:l}=this.props.suggestionBoxAlgn,c=void 0!==o&&void 0!==l?{transform:`translate(${o}px, ${l}px)`}:{};return d("div",{className:n,children:d("div",{id:"suggestionList",role:"list",ref:this.contentRef,style:a(a({},i),c),className:r,onMouseDown:this.props.preventClose,children:e})})}}u(JA,"propTypes",{ariaLiveRef:E.object,open:E.bool.isRequired,location:E.string,renderDividers:E.bool,renderNoResults:E.bool,onCompleteWord:E.func.isRequired,preventClose:E.func,onItemHover:E.func.isRequired,pretext:E.string.isRequired,cleared:E.bool.isRequired,matchedPretext:E.array.isRequired,items:E.array.isRequired,terms:E.array.isRequired,selection:E.string.isRequired,components:E.array.isRequired,wrapperHeight:E.number,suggestionBoxAlgn:E.object}),u(JA,"defaultProps",{renderDividers:!1,renderNoResults:!1});var ZA={textareaWrapper:"u3-cxx-61974f66",textboxContainer:"u3-cxx-38b2e3fb",formInput:"u3-cxx-af7e39ef",formTextarea:"u3-cxx-dc5b1731",formSelect:"u3-cxx-b6d960be",formMultiselect:"u3-cxx-258c30c5",customTextarea:"u3-cxx-b0e6e88b",textboxInput:"u3-cxx-b64a333e",textareaEmojiPicker:"u3-cxx-a7943600",textareaCustomPlaceholder:"u3-cxx-71931c66",badConnection:"u3-cxx-11749422",customTextareaPreview:"u3-cxx-efe8a2ea"};class eP extends w.PureComponent{constructor(e){super(e),u(this,"suggestionProviders"),u(this,"wrapper"),u(this,"message"),u(this,"preview"),u(this,"handleChange",(e=>{this.props.onChange(e)})),u(this,"checkMessageLength",(e=>{if(this.props.handlePostError)if(e.length>this.props.characterLimit){const t=d(P,{id:"create_post.error_message",defaultMessage:"Your message is too long. Character count: {length}/{limit}",values:{length:e.length,limit:this.props.characterLimit}});this.props.handlePostError(t)}else this.props.handlePostError(null)})),u(this,"handleKeyDown",(e=>{var t,n;null==(n=(t=this.props).onKeyDown)||n.call(t,e)})),u(this,"handleSelect",(e=>{var t,n;null==(n=(t=this.props).onSelect)||n.call(t,e)})),u(this,"handleMouseUp",(e=>{var t,n;null==(n=(t=this.props).onMouseUp)||n.call(t,e)})),u(this,"handleKeyUp",(e=>{var t,n;null==(n=(t=this.props).onKeyUp)||n.call(t,e)})),u(this,"handleBlur",(e=>{var t,n;null==(n=(t=this.props).onBlur)||n.call(t,e)})),u(this,"handleFocus",(e=>{var t,n;null==(n=(t=this.props).onFocus)||n.call(t,e)})),u(this,"handleHeightChange",((e,t)=>{var n,r;null==(r=(n=this.props).onHeightChange)||r.call(n,e,t)})),u(this,"getInputBox",(()=>{var e;return null==(e=this.message.current)?void 0:e.getTextbox()})),u(this,"focus",(()=>{const e=this.getInputBox();e&&(e.focus(),Ns(e),this.checkMessageLength(e.value))})),u(this,"blur",(()=>{var e;null==(e=this.getInputBox())||e.blur()})),u(this,"recalculateSize",(()=>{var e;null==(e=this.message.current)||e.recalculateSize()})),u(this,"focusTextbox",(()=>{})),this.suggestionProviders=[],this.checkMessageLength(e.value),this.wrapper=w.createRef(),this.message=w.createRef(),this.preview=w.createRef()}updateSuggestions(e){if(this.props.channelId!==e.channelId||this.props.currentUserId!==e.currentUserId||this.props.profilesInChannel!==e.profilesInChannel||this.props.autocompleteGroups!==e.autocompleteGroups){const e=this.suggestionProviders;for(let t=0;t<e.length;t++);}e.value!==this.props.value&&this.checkMessageLength(this.props.value)}componentDidUpdate(e){var t;!e.preview&&this.props.preview&&(null==(t=this.preview.current)||t.focus()),this.updateSuggestions(e)}render(){var e;let t,n=null;const r={[ZA.textareaWrapper]:!0},s={[ZA.customTextarea]:!0};return this.props.emojiEnabled&&(s[ZA.textareaEmojiPicker]=!0),this.props.badConnection&&(s[ZA.badConnection]=!0),"string"!=typeof this.props.createMessage&&(s[ZA.textareaCustomPlaceholder]=!0),this.wrapper.current&&(t=null==(e=this.getInputBox())?void 0:e.clientHeight),this.props.preview&&(s[ZA.customTextareaPreview]=!0,r[ZA.textareaWrapperPreview]=!0,n=d("div",{tabIndex:0,ref:this.preview,className:"form-control custom-textarea textbox-preview-area",onKeyPress:this.props.onKeyPress,onKeyDown:this.handleKeyDown,onSelect:this.handleSelect,onBlur:this.handleBlur,onFocus:this.handleFocus,children:d(o_,{isRHS:this.props.isRHS,message:this.props.value,mentionKeys:[],channelId:this.props.channelId})})),b("div",{ref:this.wrapper,className:x(r),onClick:this.focusTextbox,children:[d(QA,{id:this.props.id,ref:this.message,className:x(ZA.textboxInput,s),containerClass:x(ZA.textboxContainer),spellCheck:"true",placeholder:this.props.createMessage,onChange:this.handleChange,onKeyPress:this.props.onKeyPress,onSelect:this.handleSelect,onKeyDown:this.handleKeyDown,onMouseUp:this.handleMouseUp,onKeyUp:this.handleKeyUp,onComposition:this.props.onComposition,onBlur:this.handleBlur,onFocus:this.handleFocus,onHeightChange:this.handleHeightChange,style:{visibility:this.props.preview?"hidden":"visible"},inputComponent:this.props.inputComponent,listComponent:JA,listStyle:this.props.suggestionListStyle,providers:this.suggestionProviders,channelId:this.props.channelId,value:this.props.value,renderDividers:!0,isRHS:this.props.isRHS,disabled:this.props.disabled,contextId:this.props.channelId,listenForMentionKeyClick:this.props.listenForMentionKeyClick,wrapperHeight:t,openWhenEmpty:this.props.openWhenEmpty}),n]})}}u(eP,"defaultProps",{supportsCommands:!0,isRHS:!1,listenForMentionKeyClick:!1,inputComponent:Tv});const tP={active:!0};var nP=g((()=>{const e=Ms(),t=Ao(),n=Rs();return(r,s)=>{const i=ee(r),o=$e(r),a="true"===(null==o?void 0:o.IsLicensed)&&"true"===(null==o?void 0:o.LDAPGroups)&&We(r,{channel:s.channelId,team:i,permission:Ke.USE_GROUP_MENTIONS})?ac(r,i,s.channelId):null,l=e(r,s.channelId,tP),c=t(r,l);return{currentUserId:pe(r),currentTeamId:i,profilesInChannel:c,autocompleteGroups:a,priorityProfiles:n(r,s)}}}),(e=>({actions:y({autocompleteUsersInChannel:Po,autocompleteChannels:Io,searchAssociatedGroupsForReference:KA},e)})),null,{forwardRef:!0})(eP);var rP={postCreateForm:"u3-cxx-dc323ff4",postCreateMain:"u3-cxx-3ca5ac62",postCreateTextbox:"u3-cxx-82fe072f",postCreateActions:"u3-cxx-243bef8e",sendButtonClass:"u3-cxx-629e5f8f",sendButtonActive:"u3-cxx-2a364c18",sendButtonDisabled:"u3-cxx-2df3cc0c",emojiBtn:"u3-cxx-0b0c2b5c",emojiBtnActive:"u3-cxx-15140fd0",emojiIcon:"u3-cxx-803861b0",customReadOnlyText:"u3-cxx-eaeeabbb",createPostComplex:"u3-cxx-0f628631"};const sP=G.KeyCodes;function iP(e){return e.replace(/\s*$/,"")}class oP extends w.PureComponent{constructor(e){super(e),u(this,"lastBlurAt"),u(this,"lastChannelSwitchAt"),u(this,"draftsForChannel"),u(this,"lastOrientation"),u(this,"saveDraftFrame"),u(this,"topDiv"),u(this,"textboxRef"),u(this,"fileUploadRef"),u(this,"createPostControlsRef"),u(this,"setShowPreview",(e=>{this.props.actions.setShowPreview(e)})),u(this,"setOrientationListeners",(()=>{window.screen.orientation&&"onchange"in window.screen.orientation?window.screen.orientation.addEventListener("change",this.onOrientationChange):"onorientationchange"in window&&window.addEventListener("orientationchange",this.onOrientationChange)})),u(this,"removeOrientationListeners",(()=>{window.screen.orientation&&"onchange"in window.screen.orientation?window.screen.orientation.removeEventListener("change",this.onOrientationChange):"onorientationchange"in window&&window.removeEventListener("orientationchange",this.onOrientationChange)})),u(this,"onOrientationChange",(()=>{if(!Os())return;let e="portrait";window.orientation&&(e=90===Math.abs(window.orientation)?"landscape":"portrait"),window.screen.orientation&&(e=window.screen.orientation.type.split("-")[0]),this.lastOrientation&&e!==this.lastOrientation&&"post_textbox"===(document.activeElement||{}).id&&this.textboxRef.current.blur(),this.lastOrientation=e})),u(this,"handlePostError",(e=>{this.setState({postError:e})})),u(this,"toggleEmojiPicker",(e=>{e.preventDefault(),this.setState({showEmojiPicker:!this.state.showEmojiPicker})})),u(this,"hideEmojiPicker",(()=>{this.handleEmojiClose()})),u(this,"doSubmit",(async e=>{const t=this.props.currentChannel.id;if(e&&e.preventDefault(),this.props.draft.uploadsInProgress.length>0||this.state.submitting)return;let n=this.state.message,r=!0;const s=this.state.serverError;s&&Cs(s)&&s.submittedMessage===n&&(n=s.submittedMessage,r=!0);const i={file_ids:[]};if(i.message=n,0===i.message.trim().length&&0===this.props.draft.fileInfos.length)return;if(this.state.postError)return this.setState({errorClass:"animation--highlight"}),void setTimeout((()=>{this.setState({errorClass:null})}),G.ANIMATION_TIMEOUT);this.props.actions.addMessageIntoHistory(this.state.message),this.setState({submitting:!0,serverError:null});const o=ks.exec(i.message);if(0!==i.message.indexOf("/")||r)if(o&&this.props.emojiMap.has(o[2]))this.sendReaction(o),this.setState({message:""});else{const{error:e}=await this.sendMessage(i);e||this.setState({message:""})}else{this.setState({message:"",postError:null});let e={};e.channel_id=t,e.team_id=this.props.currentTeamId;const n=await this.props.actions.runSlashCommandWillBePostedHooks(i.message,e);n.error?this.setState({serverError:l(a({},n.error),{submittedMessage:i.message}),message:i.message}):!n.data.message&&n.data.args}this.setState({submitting:!1,postError:null}),cancelAnimationFrame(this.saveDraftFrame),this.props.actions.setDraft(Lt.DRAFT+t,null),this.draftsForChannel[t]=null;const c=Date.now()-this.lastBlurAt<150;this.focusTextbox(c)})),u(this,"handleNotifyAllConfirmation",(e=>{this.hideNotifyAllModal(),this.doSubmit(e)})),u(this,"hideNotifyAllModal",(()=>{this.setState({showConfirmModal:!1})})),u(this,"showNotifyAllModal",(()=>{this.setState({showConfirmModal:!0})})),u(this,"getStatusFromSlashCommand",(()=>{const{message:e}=this.state,t=e.split(" ");return t.length>0?t[0].substring(1):""})),u(this,"isStatusSlashCommand",(e=>"online"===e||"away"===e||"dnd"===e||"offline"===e)),u(this,"handleSubmit",(async e=>{e&&e.preventDefault(),_e()&&this.focusTextbox(!0);const{currentChannel:t,userIsOutOfOffice:n,channelMemberCountsByGroup:r,currentChannelMembersCount:s}=this.props,i=this.props.enableConfirmNotificationsToChannel&&this.props.useChannelMentions;let o=0,a=0,l=[];const c=!Ls(this.state.message);if(i&&s>G.NOTIFY_ALL_MEMBERS&&!c&&(o=s-1,l=["@all","@group"],this.props.isTimezoneEnabled)){const{data:e}=await this.props.actions.getChannelTimezones(this.props.currentChannel.id);a=e?e.length:0}if(o>0)return this.setState({channelTimezoneCount:a,memberNotifyCount:o,mentions:l}),void this.showNotifyAllModal();const u=this.getStatusFromSlashCommand();if(n&&this.isStatusSlashCommand(u)){const e={ModalId:Nt.RESET_STATUS,dialogType:d("div",{children:"ResetStatusModal"}),dialogProps:{newStatus:u}};return this.props.actions.openModal(e),void this.setState({message:""})}if("/header"===iP(this.state.message)){const e={modalId:Nt.EDIT_CHANNEL_HEADER,dialogType:d("div",{children:"EditChannelHeaderModal"}),dialogProps:{channel:t}};return this.props.actions.openModal(e),void this.setState({message:""})}const p=t.type===G.DM_CHANNEL||t.type===G.GM_CHANNEL;if(!p&&"/purpose"===iP(this.state.message)){const e={modalId:Nt.EDIT_CHANNEL_PURPOSE,dialogType:d("div",{children:"EditChannelPurposeModal"}),dialogProps:{channel:t}};return this.props.actions.openModal(e),void this.setState({message:""})}if(!p&&"/rename"===iP(this.state.message))return No(t),void this.setState({message:""});await this.doSubmit(e)})),u(this,"sendMessage",(async e=>{const{actions:t,currentChannel:n,currentUserId:r,draft:s,useChannelMentions:i}=this.props;let o=e;o.channel_id=n.id;const a=Ks(),l=r;o.pending_post_id=`${l}:${a}`,o.user_id=l,o.create_at=a,o.parent_id=this.state.parentId,o.metadata={},o.props={disable_group_highlight:!0},!i&&Ls(o.message,{checkAllMentions:!0})&&(o.props.mentionHighlightDisabled=!0);const c=await t.runMessageWillBePostedHooks(o);return c.error?(this.setState({serverError:c.error,submitting:!1}),c):(o=c.data,t.onSubmitPost(o,s.fileInfos),t.scrollPostListToBottom(),this.setState({submitting:!1}),{data:!0})})),u(this,"focusTextbox",((e=!1)=>{const t=this.props.readOnlyChannel||!this.props.canPost;this.textboxRef.current&&t?this.textboxRef.current.blur():!this.textboxRef.current||!e&&ft()||this.textboxRef.current.focus()})),u(this,"postMsgKeyPress",(e=>{const{ctrlSend:t,codeBlockOnCtrlEnter:n}=this.props,{allowSending:r,withClosedCodeBlock:s,ignoreKeyPress:i,message:o}=Ds(e,this.state.message,t,n,Date.now(),this.lastChannelSwitchAt,this.state.caretPosition);if(i)return e.preventDefault(),void e.stopPropagation();r&&(e.persist&&e.persist(),this.textboxRef.current&&this.textboxRef.current.blur(),s&&o?this.setState({message:o},(()=>this.handleSubmit(e))):this.handleSubmit(e),this.setShowPreview(!1)),this.emitTypingEvent()})),u(this,"emitTypingEvent",(()=>{const e=this.props.currentChannel.id;Mo(e,"")})),u(this,"handleChange",(e=>{const t=e.target.value,n=this.props.currentChannel.id;let r=this.state.serverError;Cs(r)&&(r=null),this.setState({message:t,serverError:r});const s=l(a({},this.props.draft),{message:t});cancelAnimationFrame(this.saveDraftFrame),this.saveDraftFrame=requestAnimationFrame((()=>{this.props.actions.setDraft(Lt.DRAFT+n,s)})),this.draftsForChannel[n]=s})),u(this,"pasteHandler",(e=>{if(!e.clipboardData||!e.clipboardData.items||"post_textbox"!==e.target.id)return;const{clipboardData:t}=e,n=xS(t);if(!n)return;e.preventDefault();let r=this.state.message;const s=r.length;r=_S(n,r.trim(),this.state.caretPosition);const i=r.length-(s-this.state.caretPosition);this.setMessageAndCaretPostion(r,i)})),u(this,"handleFileUploadChange",(()=>{this.focusTextbox()})),u(this,"handleUploadStart",((e,t)=>{const n=[...this.props.draft.uploadsInProgress,...e],r=l(a({},this.props.draft),{uploadsInProgress:n});this.props.actions.setDraft(Lt.DRAFT+t,r),this.draftsForChannel[t]=r,this.focusTextbox()})),u(this,"handleUploadProgress",(({clientId:e,name:t,percent:n,type:r})=>{const s=l(a({},this.state.uploadsProgressPercent),{[e]:{percent:n,name:t,type:r}});this.setState({uploadsProgressPercent:s})})),u(this,"handleFileUploadComplete",((e,t,n)=>{const r=a({},this.draftsForChannel[n]);for(let s=0;s<t.length;s++)if(r.uploadsInProgress){const e=r.uploadsInProgress.indexOf(t[s]);-1!==e&&(r.uploadsInProgress=r.uploadsInProgress.filter(((t,n)=>e!==n)))}r.fileInfos&&(r.fileInfos=Sg(r.fileInfos.concat(e),this.props.locale)),this.draftsForChannel[n]=r,this.props.actions.setDraft(Lt.DRAFT+n,r)})),u(this,"handleUploadError",((e,t,n)=>{const r=a({},this.draftsForChannel[n]);let s=e;if("string"==typeof e&&(s=new Error(e)),-1!==t&&r.uploadsInProgress){const e=r.uploadsInProgress.indexOf(t);if(-1!==e){const t=r.uploadsInProgress.filter(((t,n)=>e!==n)),s=l(a({},r),{uploadsInProgress:t});this.props.actions.setDraft(Lt.DRAFT+n,s),this.draftsForChannel[n]=s}}this.setState({serverError:s})})),u(this,"removePreview",(e=>{let t={};const n=a({},this.props.draft),r=this.props.currentChannel.id;this.setState({serverError:null});let s=n.fileInfos.findIndex((t=>t.id===e));if(-1===s){if(s=n.uploadsInProgress.indexOf(e),-1!==s){const r=n.uploadsInProgress.filter(((e,t)=>s!==t));t=l(a({},n),{uploadsInProgress:r}),this.fileUploadRef.current&&this.fileUploadRef.current&&this.fileUploadRef.current.cancelUpload(e)}}else{const e=n.fileInfos.filter(((e,t)=>s!==t));t=l(a({},n),{fileInfos:e})}this.props.actions.setDraft(Lt.DRAFT+r,t),this.draftsForChannel[r]=t,this.handleFileUploadChange()})),u(this,"focusTextboxIfNecessary",(e=>{this.props.rhsExpanded||document.getElementsByClassName("channel-switch-modal").length||js(e,document.activeElement)&&this.focusTextbox()})),u(this,"documentKeyHandler",(e=>{const t=e.ctrlKey||e.metaKey,n=t&&Ee(e,sP.FORWARD_SLASH),r=t&&e.shiftKey&&Ee(e,sP.BACK_SLASH);if(n)return e.preventDefault(),void Ro();r?this.reactToLastMessage(e):this.focusTextboxIfNecessary(e)})),u(this,"getFileCount",(()=>{const e=this.props.draft;return e.fileInfos.length+e.uploadsInProgress.length})),u(this,"getFileUploadTarget",(()=>this.textboxRef.current?this.textboxRef.current:null)),u(this,"getCreatePostControls",(()=>this.createPostControlsRef.current)),u(this,"handleMouseUpKeyUp",(e=>{const t=Us(e.target);this.setState({caretPosition:t})})),u(this,"handleSelect",(e=>{Hs(this.textboxRef.current.getInputBox(),e)})),u(this,"handleKeyDown",(e=>{const t=e.ctrlKey||e.metaKey,n=0===this.state.message.length,r=0===this.props.draft.message.length,s=(this.props.ctrlSend||this.props.codeBlockOnCtrlEnter)&&Ee(e,sP.ENTER)&&t,i=!t&&!e.altKey&&!e.shiftKey&&Ee(e,sP.UP),o=!t&&!e.altKey&&e.shiftKey&&Ee(e,sP.UP),a=xs(e)&&!e.altKey&&!e.shiftKey,l=Ee(e,sP.B)||Ee(e,sP.I),c=xs(e,!0)&&e.altKey,u=Ee(e,sP.K);Fs(e)?this.setState({message:Bs(e)}):s?this.postMsgKeyPress(e):i&&n?this.editLastPost(e):o&&n?this.replyToLastPost(e):a&&r&&Ee(e,sP.UP)?this.loadPrevMessage(e):a&&r&&Ee(e,sP.DOWN)?this.loadNextMessage(e):(a&&l||c&&u)&&this.applyHotkeyMarkdown(e)})),u(this,"editLastPost",(e=>{e.preventDefault();const t=this.props.currentUsersLatestPost;if(!t)return;let n;n=t.root_id&&t.root_id.length>0?ye("create_post.comment",ur.MESSAGE_TYPES.COMMENT):ye("create_post.post",ur.MESSAGE_TYPES.POST),this.textboxRef.current&&this.textboxRef.current.blur(),this.props.actions.setEditingPost(t.id,this.props.commentCountForPost,"post_textbox",n)})),u(this,"replyToLastPost",(e=>{e.preventDefault();const t=this.props.latestReplyablePostId,n=document.getElementById("reply_textbox");n&&n.focus(),t&&this.props.actions.selectPostFromRightHandSideSearchByPostId(t)})),u(this,"loadPrevMessage",(e=>{e.preventDefault(),this.props.actions.moveHistoryIndexBack(ur.MESSAGE_TYPES.POST).then((()=>this.fillMessageFromHistory()))})),u(this,"loadNextMessage",(e=>{e.preventDefault(),this.props.actions.moveHistoryIndexForward(ur.MESSAGE_TYPES.POST).then((()=>this.fillMessageFromHistory()))})),u(this,"applyHotkeyMarkdown",(e=>{const t=qs(e);this.setState({message:t.message},(()=>{const e=this.textboxRef.current.getInputBox();zs(e,t.selectionStart,t.selectionEnd)}))})),u(this,"reactToLastMessage",(e=>{e.preventDefault();const{rhsExpanded:t,actions:{emitShortcutReactToLastPostFrom:n}}=this.props,r=0===document.getElementsByClassName(Vs.MODAL).length,s=0===document.getElementsByClassName(Vs.POPUP).length;!t&&r&&s&&n(Bn.CENTER)})),u(this,"handleBlur",(()=>{this.lastBlurAt=Date.now(),this.setState({textboxActive:!1})})),u(this,"handleFocus",(()=>{this.setState({textboxActive:!0})})),u(this,"showPostDeletedModal",(()=>{this.setState({showPostDeletedModal:!0})})),u(this,"hidePostDeletedModal",(()=>{this.setState({showPostDeletedModal:!1})})),u(this,"handleEmojiClose",(()=>{this.setState({showEmojiPicker:!1})})),u(this,"setMessageAndCaretPostion",((e,t)=>{const n=this.textboxRef.current.getInputBox();this.setState({message:e,caretPosition:t},(()=>{Es(n,t)}))})),u(this,"handleEmojiClick",(e=>{const t=e.name||e.aliases[0];if(t){if(""===this.state.message)this.setState({message:":"+t+": "});else{const{message:e}=this.state,{firstPiece:n,lastPiece:r}=Gs(this.state.caretPosition,e),s=""===n?`:${t}: ${r}`:`${n} :${t}: ${r}`,i=""===n?`:${t}: `.length:`${n} :${t}: `.length;this.setMessageAndCaretPostion(s,i)}this.handleEmojiClose()}})),u(this,"handleGifClick",(e=>{if(""===this.state.message)this.setState({message:e});else{const t=/\s+$/.test(this.state.message)?this.state.message+e:this.state.message+" "+e;this.setState({message:t})}this.handleEmojiClose()})),u(this,"handleHeightChange",((e,t)=>{this.setState({renderScrollbar:e>t}),window.requestAnimationFrame((()=>{this.textboxRef.current&&this.setState({scrollbarWidth:Ws(this.textboxRef.current.getInputBox())})}))})),this.state={message:this.props.draft.message,caretPosition:this.props.draft.message.length,submitting:!1,showPostDeletedModal:!1,showEmojiPicker:!1,showConfirmModal:!1,channelTimezoneCount:0,uploadsProgressPercent:{},renderScrollbar:!1,scrollbarWidth:0,currentChannel:e.currentChannel,mentions:[],memberNotifyCount:0,textboxActive:!1,postError:null,serverError:null,errorClass:null,parentId:null,xsend:!1},this.lastBlurAt=0,this.lastChannelSwitchAt=0,this.draftsForChannel={},this.lastOrientation=null,this.saveDraftFrame=()=>{},this.topDiv=w.createRef(),this.textboxRef=w.createRef(),this.fileUploadRef=w.createRef(),this.createPostControlsRef=w.createRef()}static getDerivedStateFromProps(e,t){let n={currentChannel:e.currentChannel};return e.currentChannel.id!==t.currentChannel.id&&(n=l(a({},n),{message:e.draft.message,submitting:!1,serverError:null})),n}componentDidMount(){const{actions:e}=this.props;this.onOrientationChange(),e.setShowPreview(!1),e.clearDraftUploads(Lt.DRAFT,((e,t)=>t?l(a({},t),{uploadsInProgress:[]}):t)),document.addEventListener("paste",this.pasteHandler),document.addEventListener("keydown",this.documentKeyHandler),this.setOrientationListeners()}componentDidUpdate(e,t){const{currentChannel:n,actions:r}=this.props;e.currentChannel.id!==n.id&&(this.lastChannelSwitchAt=Date.now(),this.focusTextbox()),n.id!==e.currentChannel.id&&r.setShowPreview(!1),t.showEmojiPicker&&!this.state.showEmojiPicker&&this.focusTextbox()}componentWillUnmount(){if(document.removeEventListener("paste",this.pasteHandler),document.removeEventListener("keydown",this.documentKeyHandler),this.removeOrientationListeners(),this.saveDraftFrame){const e=this.props.currentChannel.id;this.props.actions.setDraft(Lt.DRAFT+e,this.draftsForChannel[e]),cancelAnimationFrame(this.saveDraftFrame)}}sendReaction(e){const t=this.props.currentChannel.id,n=e[1],r=e[2],s=this.props.latestReplyablePostId;s&&"+"===n?this.props.actions.addReaction(s,r):s&&"-"===n&&this.props.actions.removeReaction(s,r),this.props.actions.setDraft(Lt.DRAFT+t,null),this.draftsForChannel[t]=null}fillMessageFromHistory(){const e=this.props.messageInHistoryItem;e&&this.setState({message:e})}createTutorialTip(){}shouldEnableSendButton(){return 0!==this.state.message.trim().length||0!==this.props.draft.fileInfos.length}render(){const{currentChannel:e,draft:t,fullWidthTextBox:n,customReadOnlyText:r,canPost:s,channelBlocked:i,userGuest:o}=this.props,a=this.props.readOnlyChannel||!s,{formatMessage:l}=this.props.intl,{renderScrollbar:c,channelTimezoneCount:u,mentions:h,memberNotifyCount:f,xsend:m}=this.state,g=ye("accessibility.sections.centerFooter","message input complimentary region");h.includes("@all")||h.includes("@group")||h.length>0&&(1===h.length?h[0]:(h.slice(0,-1).join(", "),h[h.length-1]));let v=null;this.state.serverError&&(v=d(WA,{id:"postServerError",error:this.state.serverError,submittedMessage:this.state.serverError.submittedMessage,handleSubmit:this.handleSubmit}));let y,w=null;if(this.state.postError){const e="post-error"+(this.state.errorClass?" "+this.state.errorClass:"");w=d("label",{className:x(rP.errorLabel,e),children:this.state.postError})}!a&&(t.fileInfos.length>0||t.uploadsInProgress.length>0)&&(y=d(GS,{fileInfos:t.fileInfos,onRemove:this.removePreview,uploadsInProgress:t.uploadsInProgress,uploadsProgressPercent:this.state.uploadsProgressPercent}));let _="post-create-footer";w&&(_+=" has-error");let C="";n||(C="center");let S="send-button theme";this.shouldEnableSendButton()||(S+=" disabled");let E="";this.props.canUploadFiles||(E=" post-create--attachment-disabled");let T=d("div",{className:"u3-w-3 u3-h-3"});a||this.props.shouldShowPreview||(T=d(zA,{ref:this.fileUploadRef,fileCount:this.getFileCount(),getTarget:this.getFileUploadTarget,onFileUploadChange:this.handleFileUploadChange,onUploadStart:this.handleUploadStart,onFileUpload:this.handleFileUploadComplete,onUploadError:this.handleUploadError,onUploadProgress:this.handleUploadProgress,postType:"post",channelId:e.id}));let A=null;const P=l({id:"emoji_picker.emojiPicker",defaultMessage:"Emoji Picker"}).toLowerCase();let I;!this.props.enableEmojiPicker||a||this.props.shouldShowPreview||(A=b(p.exports.Fragment,{children:[d(MS,{show:this.state.showEmojiPicker,target:this.getCreatePostControls,onHide:this.hideEmojiPicker,onEmojiClose:this.handleEmojiClose,onEmojiClick:this.handleEmojiClick,onGifClick:this.handleGifClick,enableGifPicker:this.props.enableGifPicker}),d("button",{type:"button","aria-label":P,onClick:this.toggleEmojiPicker,className:x(rP.emojiBtn,"emoji-picker__container","post-action",{"post-action--active":this.state.showEmojiPicker,[rP.emojiBtnActive]:this.state.showEmojiPicker}),children:d(VA,{id:"emojiPickerButton",className:rP.emojiIcon})})]})),a?(I=ye("create_post.read_only","This channel is read-only. Only members with permission can post here."),r&&o&&(I=d("p",{className:rP.customReadOnlyText,children:d(jo,{id:"create_post.read_only_custom",defaultMessage:r,disableLinks:!1})})),i&&(I=d("p",{className:rP.customReadOnlyText,children:d(jo,{id:"create_post.channel_blocked",defaultMessage:"Không có quyền để chat. Liên hệ Admin để được hỗ trợ.",disableLinks:!1})}))):I=l({id:"create_post.write",defaultMessage:"Write to {channelDisplayName}"},{channelDisplayName:e.display_name});let N="";return c&&(N=" scroll"),b("form",{id:"create_post",ref:this.topDiv,className:x(rP.postCreateForm,C),onSubmit:this.handleSubmit,children:[d("div",{className:x(rP.postCreateMain,"post-create"+E+N,{"textbox-active":this.state.textboxActive}),style:this.state.renderScrollbar&&this.state.scrollbarWidth?{"--detected-scrollbar-width":`${this.state.scrollbarWidth}px`}:void 0,children:b("div",{role:"application","aria-label":g,tabIndex:-1,className:x(rP.postCreateTextbox,"post-body__cell a11y__region"),"data-a11y-sort-order":"2",children:[T,d(nP,{rootId:this.props.currentUsersLatestPost?this.props.currentUsersLatestPost.root_id:"",onChange:this.handleChange,onKeyPress:this.postMsgKeyPress,onKeyDown:this.handleKeyDown,onSelect:this.handleSelect,onMouseUp:this.handleMouseUpKeyUp,onKeyUp:this.handleMouseUpKeyUp,onComposition:this.emitTypingEvent,onHeightChange:this.handleHeightChange,handlePostError:this.handlePostError,value:a?"":this.state.message,onBlur:this.handleBlur,onFocus:this.handleFocus,emojiEnabled:this.props.enableEmojiPicker,createMessage:I,channelId:e.id,id:"post_textbox",ref:this.textboxRef,disabled:a,characterLimit:this.props.maxPostSize,preview:this.props.shouldShowPreview,badConnection:this.props.badConnection,listenForMentionKeyClick:!0,useChannelMentions:this.props.useChannelMentions}),b("span",{ref:this.createPostControlsRef,className:x(rP.postCreateActions,"post-body__actions"),children:[A,d("a",{role:"button",tabIndex:0,"aria-label":l({id:"create_post.send_message",defaultMessage:"Send a message"}),className:x(rP.sendButtonClass,S,{[rP.sendButtonDisabled]:a,[rP.sendButtonActive]:m}),onClick:this.handleSubmit,children:d(GA,{className:"u3-transform u3-rotate-90",title:{id:ht("create_post.icon"),defaultMessage:"Create a post"},component:d(SS,{className:"u3-w-6 u3-h-6"})})})]})]})}),b("div",{id:"postCreateFooter",role:"form",className:_,children:[d("div",{className:"d-flex justify-content-between"}),b("div",{className:rP.createPostComplex,children:[w,y,v]})]})]})}}u(oP,"defaultProps",{latestReplyablePostId:""});var aP=f(oP);function lP(e,t){return n=>{n(er(e,t))}}var cP=g((function(){const e=Ys(),t=$s(ur.MESSAGE_TYPES.POST);return(n,r)=>{const s=W(n),i=K(n)||{},o=kt(n,Lt.DRAFT,i.id),a=Xs(n,i.id),l=Pe(n,a),c=Qs(n),u=wt(n)?wt(n).member_count:1,d="true"===s.EnableTutorial,p=Js(n,kn.TUTORIAL_STEP,pe(n),Zs.FINISHED),h="true"===s.EnableEmojiPicker,f="true"===s.EnableGifPicker,m="true"===s.EnableConfirmNotificationsToChannel,g=pe(n),v=te(n),y=pt(n,g)===jn.OUT_OF_OFFICE,b=function(e){return e.views.system.websocketConnectionErrorCount}(n)>1,x="true"===s.ExperimentalTimezone,w=Wr(n),_=We(n,{channel:i.id,team:i.team_id,permission:Ke.CREATE_POST}),C=We(n,{channel:i.id,team:i.team_id,permission:Ke.USE_CHANNEL_MENTIONS}),S=pr(n,kn.CATEGORY_CHANNEL_BLOCK,i.id,!1),E=Z(v),T=ei(n,i.id);return{currentTeamId:ee(n),currentChannel:i,currentChannelMembersCount:u,currentUserId:g,codeBlockOnCtrlEnter:ke(n,Le.CATEGORY_ADVANCED_SETTINGS,"code_block_ctrl_enter",!0),ctrlSend:ke(n,kn.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter"),fullWidthTextBox:pr(n,kn.CATEGORY_DISPLAY_SETTINGS,kn.CHANNEL_DISPLAY_MODE,kn.CHANNEL_DISPLAY_MODE_DEFAULT)===kn.CHANNEL_DISPLAY_MODE_FULL_SCREEN,showTutorialTip:d&&p===Zs.POST_POPOVER,messageInHistoryItem:t(n),draft:o,commentCountForPost:e(n,{post:l}),latestReplyablePostId:c,locale:Zn(n),currentUsersLatestPost:ti(n,l.id),readOnlyChannel:r.readOnlyChannel||!ni(n)&&"true"===s.ExperimentalTownSquareIsReadOnly&&i.name===G.DEFAULT_CHANNEL,canUploadFiles:Ag(s),enableEmojiPicker:h,enableGifPicker:f,enableConfirmNotificationsToChannel:m,maxPostSize:parseInt(s.MaxPostSize||"0",10)||G.DEFAULT_CHARACTER_LIMIT,userIsOutOfOffice:y,rhsExpanded:dr(n),emojiMap:Ie(n),badConnection:b,isTimezoneEnabled:x,shortcutReactToLastPostEmittedFrom:w,canPost:_,useChannelMentions:C,channelBlocked:S,shouldShowPreview:bS(n),channelMemberCountsByGroup:T,userGuest:E,customReadOnlyText:s.CustomReadOnlyText}}}),(function(e){return{actions:y({addMessageIntoHistory:ri,onSubmitPost:lP,moveHistoryIndexBack:si,moveHistoryIndexForward:ii,addReaction:Cr,removeReaction:Sr,setDraft:oi,clearDraftUploads:ai,selectPostFromRightHandSideSearchByPostId:li,setEditingPost:ci,emitShortcutReactToLastPostFrom:Kr,openModal:It,getChannelTimezones:ui,runMessageWillBePostedHooks:vS,runSlashCommandWillBePostedHooks:yS,scrollPostListToBottom:Oo,setShowPreview:gS,getChannelMemberCountsByGroup:di},e)}}))(aP);const uP=e=>{let t=d(pi,{});return e.deactivatedChannel?t=d("div",{className:"post-create__container",id:"post-create",children:b("div",{className:"channel-archived__message",children:[d(jo,{id:"create_post.deactivated",defaultMessage:"You are viewing an archived channel with a **deactivated user**. New messages cannot be posted."}),d("button",{className:"btn btn-primary channel-archived__close-btn",onClick:e.onClickCloseChannel,children:d(P,{id:"center_panel.archived.closeChannel",defaultMessage:"Close Channel"})})]})}):e.channelIsArchived?t=d("div",{className:"post-create__container",id:"post-create",children:b("div",{id:"channelArchivedMessage",className:"channel-archived__message",children:[d(jo,{id:"archivedChannelMessage",defaultMessage:"You are viewing an **archived channel**. New messages cannot be posted."}),d("button",{className:"btn btn-primary channel-archived__close-btn",onClick:e.onClickCloseChannel,children:d(P,{id:"center_panel.archived.closeChannel",defaultMessage:"Close Channel"})})]})}):e.channelRolesLoading||(t=d("div",{className:"post-create__container",id:"post-create",children:d(cP,{getChannelView:e.getChannelView})})),t};var dP="u3-cxx-7732a6c8",pP="u3-cxx-4a5c12b5",hP="u3-cxx-fb028357",fP="u3-cxx-e134e6b5",mP="u3-cxx-7a7343be",gP="u3-cxx-8f3f47b9";const vP=class extends w.PureComponent{constructor(e){super(e),u(this,"channelViewRef"),u(this,"onClickCloseChannel",(()=>{this.props.actions.goToLastViewedChannel()})),this.state={url:e.match.url,channelId:e.channelId,focusedPostId:e.match.params.postid,deferredPostView:vP.createDeferredPostView()},this.channelViewRef=w.createRef()}static getDerivedStateFromProps(e,t){let n={};const r=e.match.params.postid;return e.match.url!==t.url&&e.channelId!==t.channelId&&(n={deferredPostView:vP.createDeferredPostView(),url:e.match.url,focusedPostId:r}),e.channelId!==t.channelId&&(n=l(a({},n),{channelId:e.channelId,focusedPostId:r})),r&&r!==t.focusedPostId&&(n=l(a({},n),{focusedPostId:r})),Object.keys(n).length?n:null}async componentDidMount(){!this.props.showNextSteps&&!this.props.showNextStepsTips||this.props.isOnboardingHidden||this.props.actions.setShowNextStepsView(!0),this.props.channelMemberLoading&&this.props.actions.getMyChannelMember(this.props.channelId),this.props.channelRolesLoading&&this.props.actions.getRoleByName(this.props.channelRole)}componentDidUpdate(e){this.props.channelMemberLoading&&e.channelId!==this.props.channelId&&this.props.actions.getMyChannelMember(this.props.channelId),this.props.channelRolesLoading&&e.channelRole!==this.props.channelRole&&this.props.actions.getRoleByName(this.props.channelRole),e.channelId===this.props.channelId&&e.channelIsArchived===this.props.channelIsArchived||this.props.channelIsArchived&&!this.props.viewArchivedChannels&&this.props.actions.goToLastViewedChannel(),this.props.match.url!==e.match.url&&this.props.showNextStepsEphemeral&&this.props.actions.setShowNextStepsView(!1)}render(){const{channelIsArchived:e,deactivatedChannel:t,channelRolesLoading:n,channelBanned:r,match:s}=this.props,{focusedPostId:i,channelId:o}=this.state,a=this.state.deferredPostView;return this.props.channelWhiteList.includes(o)?r?d("div",{ref:this.channelViewRef,className:dP,children:b("div",{className:pP,children:[d("div",{className:hP,children:d(pb,{className:fP})}),b("div",{className:mP,children:[d("h3",{className:gP,children:"Đã bị chặn"}),d("p",{className:"u3-text-base",children:"Không có quyền xem nhóm này. Liên hệ Admin để được hỗ trợ."})]})]})}):b("div",{ref:this.channelViewRef,className:dP,children:[d(fb,{overlayType:"center"}),d(a,{match:s,channelId:o,focusedPostId:i}),this.channelViewRef.current?d(uP,{deactivatedChannel:t,channelIsArchived:e,channelRolesLoading:n,onClickCloseChannel:this.onClickCloseChannel,getChannelView:this.channelViewRef.current}):d(pi,{})]}):d(q,{to:"/error?type=group_not_found"})}};let yP=vP;u(yP,"createDeferredPostView",(()=>function(e,t){class n extends w.PureComponent{constructor(e,t){super(e,t),this.state={shouldRender:!0}}render(){return this.state.shouldRender?d(e,a({},this.props)):t}}return R(n,e)}(mS,d("div",{id:"post-list"}))));const bP=C(((e,t)=>hi(e,t)),(e=>Boolean(e&&e.delete_at)));var xP=g((function(e){const t=K(e),n=W(e),r=ne(e),s="true"===n.ExperimentalViewArchivedChannels,i=pr(e,Le.CATEGORY_CHANNEL_BAN,t.id,!1),o=pr(e,Le.CATEGORY_CHANNEL_BLOCK,t.id,!1);let a=!0,l=!0,c="";if(t&&t.id){const n=fi(e),r=mi(e);if(r[t.id]){l=!1;const e=r[t.id].values();for(const t of e){c=t,n[t]&&(a=!1);break}}}return{channelId:t?t.id:"",channelMemberLoading:l,channelRolesLoading:a,channelRole:c,deactivatedChannel:!!t&&bP(e,t.id),focusedPostId:e.views.channel.focusedPostId,channelIsArchived:!!t&&0!==t.delete_at,viewArchivedChannels:s,channelWhiteList:r,channelBanned:i,channelBlocked:o}}),(function(e){return{actions:y({goToLastViewedChannel:ko,getProfiles:gi,getMyChannelMember:vi,getRoleByName:yi},e)}}))(yP);var wP="u3-cxx-6a9776cc",_P="u3-cxx-bfbd3d93",CP="u3-cxx-538788e2",SP="u3-cxx-3ee4f91a",EP="u3-cxx-9c9b6eff",TP="u3-cxx-b97d1d28",AP="u3-cxx-58a6a144",PP="u3-cxx-24fd97f6",IP="u3-cxx-c56172b5",NP="u3-cxx-98b76ed9",MP="u3-cxx-1fc143d8",RP="u3-cxx-42c79cdc",OP="u3-cxx-c36b08d0",kP="u3-cxx-a662ad10",LP="u3-cxx-fa2c0092",DP="u3-cxx-9567ce46",jP="u3-cxx-983199ec",UP=()=>b("div",{className:wP,children:[b("div",{className:x(_P,"bg-main-content"),children:[b("div",{className:x(CP,kP),children:[d("div",{className:x(SP,"u3-animate-pulse")}),b("div",{className:EP,children:[d("div",{className:x(TP,"u3-animate-pulse")}),d("div",{className:AP,children:d("div",{className:x(PP,"u3-animate-pulse")})}),b("div",{className:MP,children:[d("div",{className:x(RP,"u3-animate-pulse")}),d("div",{className:x(OP,"u3-animate-pulse")})]})]})]}),b("div",{className:CP,children:[d("div",{className:x(SP,"u3-invisible")}),b("div",{className:EP,children:[d("div",{className:AP,children:d("div",{className:x(PP,"u3-animate-pulse")})}),b("div",{className:MP,children:[d("div",{className:x(RP,"u3-animate-pulse")}),d("div",{className:x(OP,"u3-animate-pulse")})]})]})]}),b("div",{className:x(CP,LP,kP),children:[d("div",{className:SP}),b("div",{className:EP,children:[d("div",{className:x(TP,"u3-animate-pulse")}),b("div",{className:AP,children:[d("div",{className:x(PP,"u3-animate-pulse")}),d("div",{className:x(NP,"u3-animate-pulse")})]}),b("div",{className:MP,children:[d("div",{className:x(RP,"u3-animate-pulse")}),d("div",{className:x(OP,"u3-animate-pulse")})]})]})]}),b("div",{className:x(CP,kP),children:[d("div",{className:x(SP,"u3-animate-pulse")}),b("div",{className:EP,children:[d("div",{className:x(TP,"u3-animate-pulse")}),d("div",{className:AP,children:d("div",{className:x(IP,"u3-animate-pulse")})}),b("div",{className:MP,children:[d("div",{className:x(RP,"u3-animate-pulse")}),d("div",{className:x(OP,"u3-animate-pulse")})]})]})]})]}),d("div",{className:DP,children:b("div",{className:x(jP),children:[d("div",{className:x("u3-w-3/5 u3-h-4 u3-bg-gray-300 u3-rounded-md ","u3-animate-pulse")}),d("div",{className:x("u3-w-6 u3-h-6 u3-bg-gray-300 u3-rounded-lg","u3-animate-pulse")})]})})]});var HP=g(null,(function(e){return{actions:y({onChannelByIdentifierEnter:ib},e)}}))((e=>{let t;const[n,r]=p.exports.useState(!1),[s,i]=p.exports.useState(!1),o=function(e){const t=p.exports.useRef();return p.exports.useEffect((()=>{t.current=e})),t.current}(e),a=async e=>{s&&i(!1),await e.actions.onChannelByIdentifierEnter(e),i(!0)};return p.exports.useEffect((()=>(a(e),r(!0),()=>{t&&clearTimeout(t)})),[]),p.exports.useEffect((()=>{const r=e.match.params.team,s=null==o?void 0:o.match.params.team,i=e.match.params.identifier,l=null==o?void 0:o.match.params.identifier;n&&l&&(r===s&&i===l||(t&&clearTimeout(t),a(e),e.match.params.postid&&(t=setTimeout((()=>{const t=e.match.url.split("/").slice(0,-1).join("/");qt.replace(t)}),G.PERMALINK_FADEOUT))))}),[e.match]),s?d(xP,{match:e.match}):d(UP,{})}));var FP=g((function(e){const t=W(e);return{channelIds:re(e,"all"),channelPublic:t.ChannelPublic}}))((e=>{const[t,n]=p.exports.useState("");return p.exports.useEffect((()=>{const t=e.channelIds;e.channelPublic?n(e.channelPublic):t[0]&&n(t[0])}),[]),t?d(q,{to:`/${e.match.params.team}/group/${t}`}):d("div",{})}));var BP={channelCenter:"u3-cxx-932688e6",channelMain:"u3-cxx-d75ce2dd"};var qP=g((function(e){return{lastChannelPath:"",lhsOpen:Zy(e),rhsOpen:Fe(e),rhsMenuOpen:bi(e),isCollapsedThreadsEnabled:Ut(e)}}),(function(e){return{}}))((e=>{const[t,n]=p.exports.useState(""),[r,s]=p.exports.useState("");p.exports.useEffect((()=>{r!==e.location.pathname&&e.location.pathname.includes("/pl/")?(s(e.location.pathname),n(r)):s(e.location.pathname)}),[e.location]);const{isCollapsedThreadsEnabled:i,match:o}=e;return d("div",{className:BP.channelCenter,children:d("div",{className:x(BP.channelMain,{[BP.collapsedReplies]:i}),children:b(z,{children:[d(V,{path:`${o.path}/pl/:postId`,render:e=>d(rb,l(a({},e),{returnTo:t}))}),d(V,{path:"/:team/:path(group|messages)/:identifier/:postid?",component:HP}),d(V,{component:FP})]})})})}));const zP=e=>{const[t,n]=p.exports.useState(!0);return p.exports.useEffect((()=>{var e,t,n;return null==(e=yo())||e.classList.add("u3-app__body","u3-team-view"),xi()?null==(t=yo())||t.classList.add("u3-os--windows"):wi()&&(null==(n=yo())||n.classList.add("u3-os--mac")),function(){var e;null==(e=yo())||e.classList.remove("u3-app__body","u3-team-view")}}),[t]),b("div",{className:xa,children:[d(_a,{}),d(Xy,{}),!e.fetchingChannels&&d(V,{component:qP}),e.fetchingChannels&&b(p.exports.Fragment,{children:[d(os,{}),d(os,{})]}),d(Jy,{})]})};let VP,GP=Date.now();var WP=e=>{(new Date).getTime(),clearInterval(VP),VP=window.setInterval((()=>{const e=(new Date).getTime();e>GP+6e4&&Lo(!1),GP=e}),3e4);const[t,n]=p.exports.useState(null),[r,s]=p.exports.useState(""),[i,o]=p.exports.useState(!0);p.exports.useEffect((()=>{const t=e.tutorialStep;if(0===t&&e.currentUser){const t=e.currentUser.id,n=[{user_id:t,category:kn.TUTORIAL_STEP,name:t,value:Zs.POST_POPOVER.toString()}];e.actions.setDefaultProfileImage(t),e.actions.savePreferences(t,n)}if([0,1].indexOf(t)>-1&&e.currentUser){const t=e.currentUser.id,n=kn.CATEGORY_DISPLAY_SETTINGS,r=[{user_id:t,category:kn.TUTORIAL_STEP,name:t,value:Zs.CHANNEL_POPOVER.toString()},{user_id:t,category:n,name:kn.USE_MILITARY_TIME,value:"true"},{user_id:t,category:n,name:kn.CHANNEL_DISPLAY_MODE,value:"full"},{user_id:t,category:n,name:kn.MESSAGE_DISPLAY,value:kn.MESSAGE_DISPLAY_CLEAN},{user_id:t,category:n,name:kn.MESSAGE_DISPLAY,value:kn.MESSAGE_DISPLAY_CLEAN},{user_id:t,category:n,name:kn.COLLAPSED_REPLY_THREADS,value:"off"},{user_id:t,category:n,name:kn.LINK_PREVIEW_DISPLAY,value:"true"},{user_id:t,category:n,name:kn.COLLAPSE_DISPLAY,value:"false"},{user_id:t,category:n,name:kn.NAME_NAME_FORMAT,value:G.TEAMMATE_NAME_DISPLAY.SHOW_NICKNAME_FULLNAME}];e.actions.savePreferences(t,r)}const n=e.match.params.team,r=e.teamList.find((e=>e.name===n));r?a(r):l(n,!0)}),[]),p.exports.useEffect((()=>{const t=e.teamList.find((t=>t.name===e.match.params.team));t&&n(t)}),[e.match.params.team]),p.exports.useEffect((()=>{t&&a(t)}),[t]),_i.setTeamIdJoinedOnLoad(null);const a=async t=>{t.name!==r&&(s(t.name),e.actions.selectTeam(t),e.actions.setPreviousTeamId(t.id),i||o(!0),await e.actions.fetchMyChannelIds(t.id,"",0,20),o(!1))},l=async(t,r)=>{var s;const{data:i}=await e.actions.getTeamByName(t);if(i&&0===i.delete_at){const{error:t}=await e.actions.addUserToTeam(i.id,null==(s=e.currentUser)?void 0:s.id);return t?void e.history.push("/error?type=team_not_found"):(r&&_i.setTeamIdJoinedOnLoad(i.id),void n(i))}e.history.push("/error?type=team_not_found")};if(i)return d(Ci,{});return d(z,{children:d(V,{render:e=>d(zP,{pathName:e.location.pathname,fetchingChannels:i})})})};var KP=g((function(e){const t=te(e),n=Js(e,kn.TUTORIAL_STEP,t.id,Zs.INTRO_SCREENS);return{currentUser:t,currentTeamId:ee(e),currentChannelId:Ot(e),prevTeamId:Do(e),teamList:Si(e),tutorialStep:n}}),(function(e){return{actions:y({selectTeam:Ei,setPreviousTeamId:Ti,fetchMyChannelIds:Ai,getTeamByName:Pi,addUserToTeam:Ii,setDefaultProfileImage:Ni,savePreferences:Vt},e)}}))(WP);export{KP as default};
