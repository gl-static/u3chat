import{B as e,A as n,y as a,x as s,a9 as t,G as c,H as i}from"./vendor.f05f0ffc.js";import{gA as o,ap as r,y as d,E as l,cU as u,k as h,L as m,b0 as f}from"./index.e42d9bb6.js";import{b as x,l as p,d as N}from"./index.118d153d.js";var v="u3-cxx-5e84d357",I="u3-cxx-a99804c4",k="u3-cxx-e6035078",A="u3-cxx-6cc2687d";var g=c=>{const[i,d]=e.exports.useState(!1),[l,u]=e.exports.useState(!1),h=async e=>{const{location:n,history:a,noAccounts:s,currentUserId:t}=c;(s||!t&&!e)&&a.push(`/connect?next=${encodeURIComponent(n.pathname)}`),d(!0),o()(r.dispatch,r.getState)},m=async()=>{if(!c.siteName&&c.clientId){const[e,n,a,s]=await c.actions.loadMeAndConfig(c.clientId);s||await c.actions.userConnect(),s&&s.data&&x(c.history),h(s&&s.data)}c.siteName&&h(!1)};return e.exports.useEffect((()=>{m()}),[]),n("div",i?{className:a(v),children:[s("div",{className:I,children:s("p",{children:"Kết nối thành công"})}),s(t,{to:"/connect"})]}:{className:a(v),children:[n("div",{className:I,children:[n("svg",{viewBox:"-2000 -1000 4000 2000",children:[s("path",{id:"inf",d:"M354-354A500 500 0 1 1 354 354L-354-354A500 500 0 1 0-354 354z"}),s("use",{xlinkHref:"#inf",strokeDasharray:"1570 5143",strokeDashoffset:"6713px"})]}),s("p",{children:"Kết nối tài khoản"})]}),l?n("div",{className:k,children:[s("p",{children:"Kết nối có thể bị gián đoạn."}),s("button",{className:A,onClick:m,children:"Thử lại"})]}):null]})};var y=c((function(e){const n=d(),a=l(e),s=u(e),t=n.clientId===s.clientId,c=s.allowed,i=h(e),o=m.getPreviousTeamId(h(e)),r=f(e,o);return{siteName:a.SiteName,noAccounts:"true"===a.NoAccounts,clientValid:t,clientId:n.clientId,allowedDomains:c,hasUserToken:!!n.userToken,permalinkRedirectTeamName:r?r.name:"",currentUserId:i}}),(function(e){return{actions:i({loadMeAndConfig:p,userConnect:N},e)}}))(g);export{y as default};
