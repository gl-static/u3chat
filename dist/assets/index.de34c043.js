import{B as e,A as s,y as a,x as t,I as r,J as o}from"./vendor.b4a3f96f.js";import{C as i,y as n,aQ as d,bA as c,aR as l,c0 as m,a_ as u,a$ as f,c1 as p,aE as _,c2 as T}from"./index.e25a4c28.js";import{F as h}from"./FormattedMarkdownMessage.84b68eef.js";var b="styles-module-container-d3bc89b9",g="styles-module-content-35f23b7d",v="styles-module-error-box-72f1a839",M="styles-module-btn-retry-1a5b411c";var N=r=>{const[o,n]=e.exports.useState(""),[d,c]=e.exports.useState(!1),l=async()=>{c(!0);const{data:e,error:s}=await r.actions.getTeams(0,10,!1);s?n(s.message):(void 0!==r.currentUserRoles&&await r.actions.loadRolesIfNeeded(r.currentUserRoles.split(" ")),m(e))},m=async e=>{const{currentUserRoles:s,siteURL:a}=r,o=e||r.listableTeams[0];if(!o[0])return n("Có lỗi không xác định. Hãy thử lại!");const d=o[0],{data:c,error:l}=await r.actions.addUserToTeam(o[0].id,r.currentUserId);if(c&&void 0!==r.history)r.history.replace(`/${d.name}/group/${i.DEFAULT_CHANNEL}`);else if(l){let e=l.message;"api.team.add_members.user_denied"===l.server_error_id&&(e=void 0!==s&&s.includes(i.PERMISSIONS_SYSTEM_ADMIN)?t(h,{id:"join_team_group_constrained_denied_admin",defaultMessage:`You need to be a member of a linked group to join this team. You can add a group to this team [here](${a}/admin_console/user_management/groups).`,values:{siteURL:a}}):t(h,{id:"join_team_group_constrained_denied",defaultMessage:"You need to be a member of a linked group to join this team."})),n(e)}};return e.exports.useEffect((()=>{d||l()}),[]),s("div",{className:a(b),children:[s("div",{className:g,children:[s("svg",{viewBox:"-2000 -1000 4000 2000",children:[t("path",{id:"inf",d:"M354-354A500 500 0 1 1 354 354L-354-354A500 500 0 1 0-354 354z"}),t("use",{xlinkHref:"#inf",strokeDasharray:"1570 5143",strokeDashoffset:"6713px"})]}),t("p",{children:"Kết nối tài khoản"})]}),o?s("div",{className:v,children:[t("p",{children:o}),t("button",{className:M,onClick:l,children:"Thử lại"})]}):null]})};var U=r((function(e){const s=n(e),a=d(e),t=Object.values(c(e));return{currentUserId:a.id,currentUserRoles:a.roles||"",currentUserIsGuest:l(a),customDescriptionText:s.CustomDescriptionText,isMemberOfTeam:t&&t.length>0,listableTeams:m(e,a.locale),siteName:s.SiteName,canCreateTeams:u(e,{permission:f.CREATE_TEAM}),canManageSystem:u(e,{permission:f.MANAGE_SYSTEM}),canJoinPublicTeams:u(e,{permission:f.JOIN_PUBLIC_TEAMS}),canJoinPrivateTeams:u(e,{permission:f.JOIN_PRIVATE_TEAMS}),siteURL:s.SiteURL,totalTeamsCount:e.entities.teams.totalCount||0}}),(function(e){return{actions:o({getTeams:p,loadRolesIfNeeded:_,addUserToTeam:T},e)}}))(N);export{U as default};
