var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,i=(t,n,o)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,r=(e,t,n)=>(i(e,"symbol"!=typeof t?t+"":t,n),n);import{R as c,x as d,w as u,F as l,G as p}from"./vendor.458fa16b.js";import{a_ as m,cH as h,gB as w,ap as v,gC as f,L as g,gy as b,S as L,aV as y,E as k,y as E,as as U,a3 as S,gD as I}from"./index.9d9d3fcb.js";import{i as O,e as z,a as B,B as T,c as j,W as C}from"./index.ed6e3617.js";function x(e){return async(r,c)=>{const d=m(c()),u=h(c(),d.id),l=u.automaticTimezone!==e;if(u.useAutomaticTimezone&&l){const l={useAutomaticTimezone:"true",automaticTimezone:e,manualTimezone:u.manualTimezone},m=(p=((e,t)=>{for(var n in t||(t={}))s.call(t,n)&&i(e,n,t[n]);if(o)for(var n of o(t))a.call(t,n)&&i(e,n,t[n]);return e})({},d),t(p,n({timezone:l})));w(m)(r,c)}var p;return{}}}const D=v.dispatch,A=v.getState;class P extends c.PureComponent{constructor(e){super(e),r(this,"onDesktopMessageListener",(e=>{const{origin:t,data:{type:n,message:o={}}={}}=e;if(this.props.currentUser&&t===window.location.origin)switch(n){case"register-desktop":{const{version:e}=o;window.desktop||(window.desktop={}),window.desktop.version=u.valid(u.coerce(e));break}case"user-activity-update":{const{userIsActive:e,manual:t}=o;!0!==e&&!1!==e||C.userUpdateActiveStatus(e,t);break}case"notification-clicked":{const{channel:e,teamId:t}=o;window.focus(),this.props.actions.getChannelURLAction(e,t);break}}})),r(this,"handleBackSpace",(e=>{8!==e.which||["input","textarea"].includes(e.target.tagName.toLowerCase())||e.preventDefault()})),r(this,"handleBeforeUnload",(()=>{window.removeEventListener("beforeunload",this.handleBeforeUnload),document.cookie.indexOf(`${L.COOKIE.SESSION_USER}=`)>-1&&y("",this.props.currentChannelId||"")(D,A),j()}));const t=document.getElementById("u3-chatting");t&&(t.className+=" channel-view")}isValidState(){return null!=this.props.currentUser}componentDidMount(){const{currentUser:e,enableTimezone:t,actions:n,location:o,history:s,clientId:a}=this.props;if(O(),t&&n.autoUpdateTimezone(f()),window.addEventListener("beforeunload",this.handleBeforeUnload),window.addEventListener("focus",this.onFocusListener),window.addEventListener("blur",this.onBlurListener),document.hasFocus()||z(!1),window.addEventListener("message",this.onDesktopMessageListener),window.postMessage({type:"webapp-ready"},window.location.origin),!e)return g.removeUserId(a),g.removeToken(a),void B("/error?type=no-auth&redirect_to="+encodeURIComponent(o.pathname),!0,!1,s);window.addEventListener("keydown",this.handleBackSpace),this.isValidState()&&T.signalLogin()}componentWillUnmount(){j(),window.removeEventListener("keydown",this.handleBackSpace),window.removeEventListener("focus",this.onFocusListener),window.removeEventListener("blur",this.onBlurListener),window.removeEventListener("message",this.onDesktopMessageListener)}render(){return this.isValidState()?this.props.children:d(b,{message:"Xác thực tài khoản"})}onFocusListener(){z(!0)}onBlurListener(){z(!1)}}var F=P;const M=(e,t)=>(n,o)=>S.push(I(o(),e,t));var R=l((function(e){const t=k(e),n=E();return{currentUser:m(e),currentChannelId:U(e),enableTimezone:"true"===t.ExperimentalTimezone,clientId:n.clientId}}),(function(e){return{actions:p({autoUpdateTimezone:x,getChannelURLAction:M},e)}}))(F);export{R as default};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguZDFkZTkxYzYuanMiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy94L3BhY2thZ2VzL2NoYXR0aW5nLXJlZHV4L3NyYy9hY3Rpb25zL3RpbWV6b25lLnRzIiwiLi4vLi4vc3JjL2NvbXBvbmVudHMvTG9nZ2VkSW4vTG9nZ2VkSW4udHN4IiwiLi4vLi4vc3JjL2NvbXBvbmVudHMvTG9nZ2VkSW4vaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDE1LXByZXNlbnQgTWF0dGVybW9zdCwgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuLy8gU2VlIExJQ0VOU0UudHh0IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuaW1wb3J0IHtnZXRDdXJyZW50VXNlcn0gZnJvbSAnY2hhdHRpbmctcmVkdXgvc2VsZWN0b3JzL2VudGl0aWVzL3VzZXJzJztcbmltcG9ydCB7Z2V0VXNlclRpbWV6b25lfSBmcm9tICdjaGF0dGluZy1yZWR1eC9zZWxlY3RvcnMvZW50aXRpZXMvdGltZXpvbmUnO1xuXG5pbXBvcnQge0FjdGlvbkZ1bmMsIERpc3BhdGNoRnVuYywgR2V0U3RhdGVGdW5jfSBmcm9tICdjaGF0dGluZy1yZWR1eC90eXBlcy9hY3Rpb25zJztcblxuaW1wb3J0IHt1cGRhdGVNZX0gZnJvbSAnLi91c2Vycyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBhdXRvVXBkYXRlVGltZXpvbmUoZGV2aWNlVGltZXpvbmU6IHN0cmluZyk6IEFjdGlvbkZ1bmMge1xuICByZXR1cm4gYXN5bmMgKGRpc3BhdGNoOiBEaXNwYXRjaEZ1bmMsIGdldFN0YXRlOiBHZXRTdGF0ZUZ1bmMpID0+IHtcbiAgICBjb25zdCBjdXJyZW50VWVyID0gZ2V0Q3VycmVudFVzZXIoZ2V0U3RhdGUoKSk7XG4gICAgY29uc3QgY3VycmVudFRpbWV6b25lID0gZ2V0VXNlclRpbWV6b25lKGdldFN0YXRlKCksIGN1cnJlbnRVZXIuaWQpO1xuICAgIGNvbnN0IG5ld1RpbWV6b25lRXhpc3RzID0gY3VycmVudFRpbWV6b25lLmF1dG9tYXRpY1RpbWV6b25lICE9PSBkZXZpY2VUaW1lem9uZTtcblxuICAgIGlmIChjdXJyZW50VGltZXpvbmUudXNlQXV0b21hdGljVGltZXpvbmUgJiYgbmV3VGltZXpvbmVFeGlzdHMpIHtcbiAgICAgIGNvbnN0IHRpbWV6b25lID0ge1xuICAgICAgICB1c2VBdXRvbWF0aWNUaW1lem9uZTogJ3RydWUnLFxuICAgICAgICBhdXRvbWF0aWNUaW1lem9uZTogZGV2aWNlVGltZXpvbmUsXG4gICAgICAgIG1hbnVhbFRpbWV6b25lOiBjdXJyZW50VGltZXpvbmUubWFudWFsVGltZXpvbmUsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCB1cGRhdGVkVXNlciA9IHtcbiAgICAgICAgLi4uY3VycmVudFVlcixcbiAgICAgICAgdGltZXpvbmUsXG4gICAgICB9O1xuXG4gICAgICB1cGRhdGVNZSh1cGRhdGVkVXNlcikoZGlzcGF0Y2gsIGdldFN0YXRlKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge307XG4gIH07XG59XG4iLCIvKipcbiAqIEZpbGU6IExvZ2dlZEluLnRzeFxuICogUHJvamVjdDogY2hhdHRpbmctbWluaW1hbFxuICogRmlsZSBDcmVhdGVkOiAzMCBTZXAgMjAyMSAxMDo1Mzo1MVxuICogQXV0aG9yOiB1bmQzZmluZWQgKG1lQHVuZDNmaW5lZC5jb20pXG4gKiAtLS0tLVxuICogTGFzdCBNb2RpZmllZDogMjMgTm92IDIwMjEgMTg6MTQ6NTRcbiAqIE1vZGlmaWVkIEJ5OiB1bmQzZmluZWQgKG1lQHVuZDNmaW5lZC5jb20pXG4gKiAtLS0tLVxuICogQ29weXJpZ2h0IChjKSAyMDIxIHVuZDNmaW5lZC5jb21cbiAqL1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHNlbXZlciBmcm9tICdzZW12ZXInO1xuXG5pbXBvcnQge3ZpZXdDaGFubmVsfSBmcm9tICdjaGF0dGluZy1yZWR1eC9hY3Rpb25zL2NoYW5uZWxzJztcbmltcG9ydCBHZW5lcmFsIGZyb20gJ2NoYXR0aW5nLXJlZHV4L2NvbnN0YW50cy9nZW5lcmFsJztcblxuaW1wb3J0ICogYXMgR2xvYmFsQWN0aW9ucyBmcm9tICckYWN0aW9ucy9nbG9iYWxfYWN0aW9ucyc7XG5pbXBvcnQgKiBhcyBXZWJTb2NrZXRBY3Rpb25zIGZyb20gJyRhY3Rpb25zL3dlYnNvY2tldF9hY3Rpb25zLmpzeCc7XG5pbXBvcnQge2dldEJyb3dzZXJUaW1lem9uZX0gZnJvbSAnJHV0aWxzL3RpbWV6b25lLmpzeCc7XG5pbXBvcnQgc3RvcmUgZnJvbSAnJHN0b3Jlcy9yZWR1eF9zdG9yZS5qc3gnO1xuaW1wb3J0IFdlYlNvY2tldENsaWVudCBmcm9tICckY2xpZW50L3dlYl93ZWJzb2NrZXRfY2xpZW50LmpzeCc7XG5pbXBvcnQgQnJvd3NlclN0b3JlIGZyb20gJyRzdG9yZXMvYnJvd3Nlcl9zdG9yZSc7XG5pbXBvcnQgTG9jYWxTdG9yYWdlU3RvcmUgZnJvbSAnJHN0b3Jlcy9sb2NhbF9zdG9yYWdlX3N0b3JlJztcblxuaW1wb3J0IExvYWRpbmdTY3JlZW4gZnJvbSAnQGNvbXBvbmVudHMvTG9hZGluZ1NjcmVlbic7XG5cbmltcG9ydCB0eXBlIHtTdGF0ZSwgUHJvcHN9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHtEaXNwYXRjaEZ1bmN9IGZyb20gJ2NoYXR0aW5nLXJlZHV4L3R5cGVzL2FjdGlvbnMnO1xuXG5jb25zdCBkaXNwYXRjaCA9IHN0b3JlLmRpc3BhdGNoO1xuY29uc3QgZ2V0U3RhdGUgPSBzdG9yZS5nZXRTdGF0ZTtcblxuY29uc3QgQkFDS1NQQUNFX0NIQVIgPSA4O1xuXG5jbGFzcyBMb2dnZWRJbiBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8UHJvcHMsIFN0YXRlPiB7XG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcblxuICAgIGNvbnN0IHJvb3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndTMtY2hhdHRpbmcnKTtcbiAgICBpZiAocm9vdCkge1xuICAgICAgcm9vdC5jbGFzc05hbWUgKz0gJyBjaGFubmVsLXZpZXcnO1xuICAgIH1cbiAgfVxuXG4gIGlzVmFsaWRTdGF0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5jdXJyZW50VXNlciAhPSBudWxsO1xuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgY29uc3Qge2N1cnJlbnRVc2VyLCBlbmFibGVUaW1lem9uZSwgYWN0aW9ucywgbG9jYXRpb24sIGhpc3RvcnksIGNsaWVudElkfSA9IHRoaXMucHJvcHM7XG5cbiAgICAvLyBJbml0aWFsaXplIHdlYnNvY2tldFxuICAgIFdlYlNvY2tldEFjdGlvbnMuaW5pdGlhbGl6ZSgpO1xuXG4gICAgaWYgKGVuYWJsZVRpbWV6b25lKSB7XG4gICAgICBhY3Rpb25zLmF1dG9VcGRhdGVUaW1lem9uZShnZXRCcm93c2VyVGltZXpvbmUoKSk7XG4gICAgfVxuXG4gICAgLy8gTWFrZSBzdXJlIHRoZSB3ZWJzb2NrZXRzIGNsb3NlIGFuZCByZXNldCB2ZXJzaW9uXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIHRoaXMuaGFuZGxlQmVmb3JlVW5sb2FkKTtcblxuICAgIC8vIExpc3RlbiBmb3IgZm9jdXNlZCB0YWIvd2luZG93IHN0YXRlXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5vbkZvY3VzTGlzdGVuZXIpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgdGhpcy5vbkJsdXJMaXN0ZW5lcik7XG4gICAgaWYgKCFkb2N1bWVudC5oYXNGb2N1cygpKSB7XG4gICAgICBHbG9iYWxBY3Rpb25zLmVtaXRCcm93c2VyRm9jdXMoZmFsc2UpO1xuICAgIH1cblxuICAgIC8vIExpc3RlbiBmb3IgbWVzc2FnZXMgZnJvbSB0aGUgZGVza3RvcCBhcHBcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMub25EZXNrdG9wTWVzc2FnZUxpc3RlbmVyKTtcblxuICAgIC8vIFRlbGwgdGhlIGRlc2t0b3AgYXBwIHRoZSB3ZWJhcHAgaXMgcmVhZHlcbiAgICB3aW5kb3cucG9zdE1lc3NhZ2Uoe3R5cGU6ICd3ZWJhcHAtcmVhZHknfSwgd2luZG93LmxvY2F0aW9uLm9yaWdpbik7XG5cbiAgICBpZiAoIWN1cnJlbnRVc2VyKSB7XG4gICAgICBMb2NhbFN0b3JhZ2VTdG9yZS5yZW1vdmVVc2VySWQoY2xpZW50SWQpO1xuICAgICAgTG9jYWxTdG9yYWdlU3RvcmUucmVtb3ZlVG9rZW4oY2xpZW50SWQpO1xuXG4gICAgICBHbG9iYWxBY3Rpb25zLmVtaXRVc2VyTG9nZ2VkT3V0RXZlbnQoXG4gICAgICAgICcvZXJyb3I/dHlwZT1uby1hdXRoJnJlZGlyZWN0X3RvPScgKyBlbmNvZGVVUklDb21wb25lbnQobG9jYXRpb24ucGF0aG5hbWUpLFxuICAgICAgICB0cnVlLFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgaGlzdG9yeSxcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gUHJldmVudCBiYWNrc3BhY2UgZnJvbSBuYXZpZ2F0aW5nIGJhY2sgYSBwYWdlXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLmhhbmRsZUJhY2tTcGFjZSk7XG5cbiAgICBpZiAodGhpcy5pc1ZhbGlkU3RhdGUoKSkge1xuICAgICAgQnJvd3NlclN0b3JlLnNpZ25hbExvZ2luKCk7XG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgV2ViU29ja2V0QWN0aW9ucy5jbG9zZSgpO1xuXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLmhhbmRsZUJhY2tTcGFjZSk7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5vbkZvY3VzTGlzdGVuZXIpO1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdibHVyJywgdGhpcy5vbkJsdXJMaXN0ZW5lcik7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB0aGlzLm9uRGVza3RvcE1lc3NhZ2VMaXN0ZW5lcik7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWRTdGF0ZSgpKSB7XG4gICAgICByZXR1cm4gPExvYWRpbmdTY3JlZW4gbWVzc2FnZT0nWMOhYyB0aOG7sWMgdMOgaSBraG/huqNuJyAvPjtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5wcm9wcy5jaGlsZHJlbjtcbiAgfVxuXG4gIG9uRm9jdXNMaXN0ZW5lcigpIHtcbiAgICBHbG9iYWxBY3Rpb25zLmVtaXRCcm93c2VyRm9jdXModHJ1ZSk7XG4gIH1cblxuICBvbkJsdXJMaXN0ZW5lcigpIHtcbiAgICBHbG9iYWxBY3Rpb25zLmVtaXRCcm93c2VyRm9jdXMoZmFsc2UpO1xuICB9XG5cbiAgLy8gbGlzdGVuIGZvciBtZXNzYWdlcyBmcm9tIHRoZSBkZXNrdG9wIGFwcFxuICBvbkRlc2t0b3BNZXNzYWdlTGlzdGVuZXIgPSAoZXY6IE1lc3NhZ2VFdmVudDxhbnk+KSA9PiB7XG4gICAgY29uc3Qge29yaWdpbiwgZGF0YToge3R5cGUsIG1lc3NhZ2UgPSB7fX0gPSB7fX0gPSBldjtcblxuICAgIGlmICghdGhpcy5wcm9wcy5jdXJyZW50VXNlcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAob3JpZ2luICE9PSB3aW5kb3cubG9jYXRpb24ub3JpZ2luKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlICdyZWdpc3Rlci1kZXNrdG9wJzoge1xuICAgICAgICBjb25zdCB7dmVyc2lvbn0gPSBtZXNzYWdlO1xuICAgICAgICBpZiAoIXdpbmRvdy5kZXNrdG9wKSB7XG4gICAgICAgICAgd2luZG93LmRlc2t0b3AgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICB3aW5kb3cuZGVza3RvcC52ZXJzaW9uID0gc2VtdmVyLnZhbGlkKHNlbXZlci5jb2VyY2UodmVyc2lvbikpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgJ3VzZXItYWN0aXZpdHktdXBkYXRlJzoge1xuICAgICAgICBjb25zdCB7dXNlcklzQWN0aXZlLCBtYW51YWx9ID0gbWVzc2FnZTtcblxuICAgICAgICAvLyB1cGRhdGUgdGhlIHNlcnZlciB3aXRoIHRoZSB1c2VycyBjdXJyZW50IGF3YXkgc3RhdHVzXG4gICAgICAgIGlmICh1c2VySXNBY3RpdmUgPT09IHRydWUgfHwgdXNlcklzQWN0aXZlID09PSBmYWxzZSkge1xuICAgICAgICAgIFdlYlNvY2tldENsaWVudC51c2VyVXBkYXRlQWN0aXZlU3RhdHVzKHVzZXJJc0FjdGl2ZSwgbWFudWFsKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgJ25vdGlmaWNhdGlvbi1jbGlja2VkJzoge1xuICAgICAgICBjb25zdCB7Y2hhbm5lbCwgdGVhbUlkfSA9IG1lc3NhZ2U7XG4gICAgICAgIHdpbmRvdy5mb2N1cygpO1xuXG4gICAgICAgIC8vIG5hdmlnYXRlIHRvIHRoZSBhcHByb3ByaWF0ZSBjaGFubmVsXG4gICAgICAgIHRoaXMucHJvcHMuYWN0aW9ucy5nZXRDaGFubmVsVVJMQWN0aW9uKGNoYW5uZWwsIHRlYW1JZCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBoYW5kbGVCYWNrU3BhY2UgPSAoZTogYW55KSA9PiB7XG4gICAgY29uc3QgZXhjbHVkZWRFbGVtZW50cyA9IFsnaW5wdXQnLCAndGV4dGFyZWEnXTtcblxuICAgIGlmIChlLndoaWNoID09PSBCQUNLU1BBQ0VfQ0hBUiAmJiAhZXhjbHVkZWRFbGVtZW50cy5pbmNsdWRlcyhlLnRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCkpKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9O1xuXG4gIGhhbmRsZUJlZm9yZVVubG9hZCA9ICgpID0+IHtcbiAgICAvLyByZW1vdmUgdGhlIGV2ZW50IGxpc3RlbmVyIHRvIHByZXZlbnQgZ2V0dGluZyBzdHVjayBpbiBhIGxvb3BcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgdGhpcy5oYW5kbGVCZWZvcmVVbmxvYWQpO1xuXG4gICAgaWYgKGRvY3VtZW50LmNvb2tpZS5pbmRleE9mKGAke0dlbmVyYWwuQ09PS0lFLlNFU1NJT05fVVNFUn09YCkgPiAtMSkge1xuICAgICAgdmlld0NoYW5uZWwoJycsIHRoaXMucHJvcHMuY3VycmVudENoYW5uZWxJZCB8fCAnJykoZGlzcGF0Y2ggYXMgRGlzcGF0Y2hGdW5jLCBnZXRTdGF0ZSk7XG4gICAgfVxuICAgIFdlYlNvY2tldEFjdGlvbnMuY2xvc2UoKTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgTG9nZ2VkSW47XG4iLCIvKipcbiAqIEZpbGU6IGluZGV4LnRzXG4gKiBQcm9qZWN0OiBjaGF0dGluZy1taW5pbWFsXG4gKiBGaWxlIENyZWF0ZWQ6IDMwIFNlcCAyMDIxIDEwOjUzOjQxXG4gKiBBdXRob3I6IHVuZDNmaW5lZCAobWVAdW5kM2ZpbmVkLmNvbSlcbiAqIC0tLS0tXG4gKiBMYXN0IE1vZGlmaWVkOiAyMyBOb3YgMjAyMSAxODoxNDo0MVxuICogTW9kaWZpZWQgQnk6IHVuZDNmaW5lZCAobWVAdW5kM2ZpbmVkLmNvbSlcbiAqIC0tLS0tXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjEgdW5kM2ZpbmVkLmNvbVxuICovXG5pbXBvcnQge2Nvbm5lY3R9IGZyb20gJ3JlYWN0LXJlZHV4JztcbmltcG9ydCB7YmluZEFjdGlvbkNyZWF0b3JzLCBEaXNwYXRjaH0gZnJvbSAncmVkdXgnO1xuXG5pbXBvcnQge2F1dG9VcGRhdGVUaW1lem9uZX0gZnJvbSAnY2hhdHRpbmctcmVkdXgvYWN0aW9ucy90aW1lem9uZSc7XG5pbXBvcnQge2dldEN1cnJlbnRDaGFubmVsSWR9IGZyb20gJ2NoYXR0aW5nLXJlZHV4L3NlbGVjdG9ycy9lbnRpdGllcy9jaGFubmVscyc7XG5pbXBvcnQgeyBnZXRDb25maWd9IGZyb20gJ2NoYXR0aW5nLXJlZHV4L3NlbGVjdG9ycy9lbnRpdGllcy9nZW5lcmFsJztcbmltcG9ydCB7Z2V0Q3VycmVudFVzZXJ9IGZyb20gJ2NoYXR0aW5nLXJlZHV4L3NlbGVjdG9ycy9lbnRpdGllcy91c2Vycyc7XG5pbXBvcnQgeyBHZW5lcmljQWN0aW9uIH0gZnJvbSAnY2hhdHRpbmctcmVkdXgvdHlwZXMvYWN0aW9ucyc7XG5cbmltcG9ydCB7YnJvd3Nlckhpc3Rvcnl9IGZyb20gJyR1dGlscy9icm93c2VyX2hpc3RvcnknO1xuaW1wb3J0IHtnZXRDaGFubmVsVVJMfSBmcm9tICckdXRpbHMvdXRpbHMnO1xuXG5pbXBvcnQgeyBnZXRJbml0RGF0YSB9IGZyb20gJ0B1dGlscy9pbnRlZ3JhdGUnO1xuXG5pbXBvcnQgTG9nZ2VkSW4gZnJvbSAnLi9Mb2dnZWRJbic7XG5pbXBvcnQgeyBHbG9iYWxTdGF0ZSB9IGZyb20gJyR0eXBlcy9zdG9yZSc7XG5pbXBvcnQge1N0YXRlUHJvcHMsIERpc3BhdGNoUHJvcHMsIE93blByb3BzIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBDaGFubmVsIH0gZnJvbSAnY2hhdHRpbmctcmVkdXgvdHlwZXMvY2hhbm5lbHMnO1xuXG5mdW5jdGlvbiBtYXBTdGF0ZVRvUHJvcHMoc3RhdGU6IEdsb2JhbFN0YXRlKTogU3RhdGVQcm9wcyB7XG4gIGNvbnN0IGNvbmZpZyA9IGdldENvbmZpZyhzdGF0ZSk7XG4gIGNvbnN0IGNsaWVudEluZm8gPSBnZXRJbml0RGF0YSgpO1xuXG4gIHJldHVybiB7XG4gICAgY3VycmVudFVzZXI6IGdldEN1cnJlbnRVc2VyKHN0YXRlKSxcbiAgICBjdXJyZW50Q2hhbm5lbElkOiBnZXRDdXJyZW50Q2hhbm5lbElkKHN0YXRlKSxcbiAgICBlbmFibGVUaW1lem9uZTogY29uZmlnLkV4cGVyaW1lbnRhbFRpbWV6b25lID09PSAndHJ1ZScsXG4gICAgY2xpZW50SWQ6IGNsaWVudEluZm8uY2xpZW50SWQsXG4gIH07XG59XG5cbmNvbnN0IGdldENoYW5uZWxVUkxBY3Rpb24gPSAoY2hhbm5lbDogQ2hhbm5lbCwgdGVhbUlkOiBzdHJpbmcpID0+IChkaXNwYXRjaDogRGlzcGF0Y2gsIGdldFN0YXRlOiAoKSA9PiBHbG9iYWxTdGF0ZSkgPT4gYnJvd3Nlckhpc3RvcnkucHVzaChnZXRDaGFubmVsVVJMKGdldFN0YXRlKCksIGNoYW5uZWwsIHRlYW1JZCkpO1xuXG5mdW5jdGlvbiBtYXBEaXNwYXRjaFRvUHJvcHMoZGlzcGF0Y2g6IERpc3BhdGNoPEdlbmVyaWNBY3Rpb24+KSB7XG4gIHJldHVybiB7XG4gICAgYWN0aW9uczogYmluZEFjdGlvbkNyZWF0b3JzKFxuICAgICAge1xuICAgICAgICBhdXRvVXBkYXRlVGltZXpvbmUsXG4gICAgICAgIGdldENoYW5uZWxVUkxBY3Rpb24sXG4gICAgICB9LFxuICAgICAgZGlzcGF0Y2hcbiAgICApLFxuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0PFN0YXRlUHJvcHMsIERpc3BhdGNoUHJvcHMsIE93blByb3BzLCBHbG9iYWxTdGF0ZT4obWFwU3RhdGVUb1Byb3BzLCBtYXBEaXNwYXRjaFRvUHJvcHMpKExvZ2dlZEluKTtcbiJdLCJuYW1lcyI6WyJkZXZpY2VUaW1lem9uZSIsImFzeW5jIiwiZGlzcGF0Y2gyIiwiZ2V0U3RhdGUyIiwiY3VycmVudFVlciIsImdldEN1cnJlbnRVc2VyIiwiY3VycmVudFRpbWV6b25lIiwiZ2V0VXNlclRpbWV6b25lIiwiaWQiLCJuZXdUaW1lem9uZUV4aXN0cyIsImF1dG9tYXRpY1RpbWV6b25lIiwidXNlQXV0b21hdGljVGltZXpvbmUiLCJ0aW1lem9uZSIsIm1hbnVhbFRpbWV6b25lIiwidXBkYXRlZFVzZXIiLCJkaXNwYXRjaCIsInN0b3JlIiwiZ2V0U3RhdGUiLCJSZWFjdCIsIlB1cmVDb21wb25lbnQiLCJjb25zdHJ1Y3RvciIsInByb3BzIiwiZXYiLCJvcmlnaW4iLCJkYXRhIiwidHlwZSIsIm1lc3NhZ2UiLCJ0aGlzIiwiY3VycmVudFVzZXIiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInZlcnNpb24iLCJkZXNrdG9wIiwic2VtdmVyIiwidmFsaWQiLCJjb2VyY2UiLCJ1c2VySXNBY3RpdmUiLCJtYW51YWwiLCJ1c2VyVXBkYXRlQWN0aXZlU3RhdHVzIiwiY2hhbm5lbCIsInRlYW1JZCIsImZvY3VzIiwiYWN0aW9ucyIsImdldENoYW5uZWxVUkxBY3Rpb24iLCJlIiwid2hpY2giLCJpbmNsdWRlcyIsInRhcmdldCIsInRhZ05hbWUiLCJ0b0xvd2VyQ2FzZSIsInByZXZlbnREZWZhdWx0IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImhhbmRsZUJlZm9yZVVubG9hZCIsImRvY3VtZW50IiwiY29va2llIiwiaW5kZXhPZiIsIkdlbmVyYWwiLCJDT09LSUUiLCJTRVNTSU9OX1VTRVIiLCJjdXJyZW50Q2hhbm5lbElkIiwicm9vdCIsImdldEVsZW1lbnRCeUlkIiwiY2xhc3NOYW1lIiwiaXNWYWxpZFN0YXRlIiwiY29tcG9uZW50RGlkTW91bnQiLCJlbmFibGVUaW1lem9uZSIsImhpc3RvcnkiLCJjbGllbnRJZCIsImF1dG9VcGRhdGVUaW1lem9uZSIsImdldEJyb3dzZXJUaW1lem9uZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJvbkZvY3VzTGlzdGVuZXIiLCJvbkJsdXJMaXN0ZW5lciIsImhhc0ZvY3VzIiwib25EZXNrdG9wTWVzc2FnZUxpc3RlbmVyIiwicG9zdE1lc3NhZ2UiLCJyZW1vdmVVc2VySWQiLCJyZW1vdmVUb2tlbiIsImVuY29kZVVSSUNvbXBvbmVudCIsInBhdGhuYW1lIiwiaGFuZGxlQmFja1NwYWNlIiwic2lnbmFsTG9naW4iLCJjb21wb25lbnRXaWxsVW5tb3VudCIsInJlbmRlciIsImNoaWxkcmVuIiwiTG9hZGluZ1NjcmVlbiIsIkxvZ2dlZEluIiwiYnJvd3Nlckhpc3RvcnkiLCJwdXNoIiwiZ2V0Q2hhbm5lbFVSTCIsImNvbm5lY3QiLCJzdGF0ZSIsImNvbmZpZyIsImdldENvbmZpZyIsImNsaWVudEluZm8iLCJnZXRJbml0RGF0YSIsImdldEN1cnJlbnRDaGFubmVsSWQiLCJFeHBlcmltZW50YWxUaW1lem9uZSIsImJpbmRBY3Rpb25DcmVhdG9ycyJdLCJtYXBwaW5ncyI6IjhtQkFTbUNBLFVBQzFCQyxNQUFPQyxFQUF3QkMsV0FDOUJDLEVBQWFDLEVBQWVGLEtBQzVCRyxFQUFrQkMsRUFBZ0JKLElBQVlDLEVBQVdJLElBQ3pEQyxFQUFvQkgsRUFBZ0JJLG9CQUFzQlYsS0FFNURNLEVBQWdCSyxzQkFBd0JGLEVBQW1CLE9BQ3ZERyxFQUFXLENBQ2ZELHFCQUFzQixPQUN0QkQsa0JBQW1CVixFQUNuQmEsZUFBZ0JQLEVBQWdCTyxnQkFHNUJDLDRIQUNEVixTQURlLENBRWxCUSxTQUFBQSxRQUdPRSxHQUFhWixFQUFVQyxlQUczQixJQ0NYLE1BQU1ZLEVBQVdDLEVBQU1ELFNBQ2pCRSxFQUFXRCxFQUFNQyxTQUl2QixnQkFBdUJDLEVBQU1DLGNBQzNCQyxZQUFZQyxTQUNKQSxzQ0FxRm9CQyxVQUNwQkMsT0FBQ0EsRUFBUUMsTUFBTUMsS0FBQ0EsVUFBTUMsRUFBVSxJQUFNLElBQU1KLEtBRTdDSyxLQUFLTixNQUFNTyxhQUdaTCxJQUFXTSxPQUFPQyxTQUFTUCxjQUl2QkUsT0FDRCwwQkFDR00sUUFBQ0EsR0FBV0wsRUFDYkcsT0FBT0csaUJBQ0hBLFFBQVUsV0FFWkEsUUFBUUQsUUFBVUUsRUFBT0MsTUFBTUQsRUFBT0UsT0FBT0osY0FHakQsOEJBQ0dLLGFBQUNBLFNBQWNDLEdBQVVYLEdBR1YsSUFBakJVLElBQTBDLElBQWpCQSxLQUNYRSx1QkFBdUJGLEVBQWNDLGFBSXBELDhCQUNHRSxRQUFDQSxTQUFTQyxHQUFVZCxTQUNuQmUsYUFHRnBCLE1BQU1xQixRQUFRQyxvQkFBb0JKLEVBQVNDLHdDQU1uQ0ksSUFoSUUsSUFtSWZBLEVBQUVDLE9BRm1CLENBQUMsUUFBUyxZQUVpQkMsU0FBU0YsRUFBRUcsT0FBT0MsUUFBUUMsa0JBQzFFQyxpREFJZSxZQUVaQyxvQkFBb0IsZUFBZ0J4QixLQUFLeUIsb0JBRTVDQyxTQUFTQyxPQUFPQyxRQUFTLEdBQUVDLEVBQVFDLE9BQU9DLHVCQUNoQyxHQUFJL0IsS0FBS04sTUFBTXNDLGtCQUFvQixJQUFJNUMsRUFBMEJFLGdCQXZJekUyQyxFQUFPUCxTQUFTUSxlQUFlLGVBQ2pDRCxNQUNHRSxXQUFhLGlCQUl0QkMsc0JBQ21DLE1BQTFCcEMsS0FBS04sTUFBTU8sWUFHcEJvQywwQkFDUXBDLFlBQUNBLGlCQUFhcUMsVUFBZ0J2QixXQUFTWixVQUFVb0MsV0FBU0MsR0FBWXhDLEtBQUtOLGFBSzdFNEMsS0FDTUcsbUJBQW1CQyxZQUl0QkMsaUJBQWlCLGVBQWdCM0MsS0FBS3lCLDJCQUd0Q2tCLGlCQUFpQixRQUFTM0MsS0FBSzRDLHdCQUMvQkQsaUJBQWlCLE9BQVEzQyxLQUFLNkMsZ0JBQ2hDbkIsU0FBU29CLGVBQ21CLFVBSTFCSCxpQkFBaUIsVUFBVzNDLEtBQUsrQyxpQ0FHakNDLFlBQVksQ0FBQ2xELEtBQU0sZ0JBQWlCSSxPQUFPQyxTQUFTUCxTQUV0REssV0FDZWdELGFBQWFULEtBQ2JVLFlBQVlWLFVBRzVCLG1DQUFxQ1csbUJBQW1CaEQsRUFBU2lELFdBQ2pFLEdBQ0EsRUFDQWIsVUFNR0ksaUJBQWlCLFVBQVczQyxLQUFLcUQsaUJBRXBDckQsS0FBS29DLGtCQUNNa0IsY0FJakJDLGtDQUdTL0Isb0JBQW9CLFVBQVd4QixLQUFLcUQsd0JBQ3BDN0Isb0JBQW9CLFFBQVN4QixLQUFLNEMsd0JBQ2xDcEIsb0JBQW9CLE9BQVF4QixLQUFLNkMsdUJBQ2pDckIsb0JBQW9CLFVBQVd4QixLQUFLK0MsMEJBRzdDUyxnQkFDT3hELEtBQUtvQyxlQUlIcEMsS0FBS04sTUFBTStELFdBSFJDLEdBQWMzRCxRQUFRLHVCQU1sQzZDLHFCQUNpQyxHQUdqQ0Msb0JBQ2lDLElBOERuQyxNQUFlYyxFQzNJZixNQUFNM0MsRUFBc0IsQ0FBQ0osRUFBa0JDLElBQW1CLENBQUN0QyxFQUFvQkMsSUFBZ0NvRixFQUFlQyxLQUFLQyxFQUFjdEYsSUFBWW9DLEVBQVNDLElBYzlLLE1BQWVrRCxHQTFCZixTQUF5QkMsU0FDakJDLEVBQVNDLEVBQVVGLEdBQ25CRyxFQUFhQyxVQUVaLENBQ0xuRSxZQUFhdkIsRUFBZXNGLEdBQzVCaEMsaUJBQWtCcUMsRUFBb0JMLEdBQ3RDMUIsZUFBZ0QsU0FBaEMyQixFQUFPSyxxQkFDdkI5QixTQUFVMkIsRUFBVzNCLGFBTXpCLFNBQTRCakUsU0FDbkIsQ0FDTHdDLFFBQVN3RCxFQUNQLENBQ0U5QixtQkFBQUEsRUFDQXpCLG9CQUFBQSxHQUVGekMsTUFLU3dGLENBQStGSiJ9
